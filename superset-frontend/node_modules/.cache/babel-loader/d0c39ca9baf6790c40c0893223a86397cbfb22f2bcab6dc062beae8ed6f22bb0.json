{"ast":null,"code":"import _reject from \"lodash/reject\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useMemo, useState } from 'react';\nimport { isFeatureEnabled, FeatureFlag, getExtensionsRegistry, styled, t } from '@superset-ui/core';\nimport rison from 'rison';\nimport Collapse from 'src/components/Collapse';\n\nimport { dangerouslyGetItemDoNotUse, dangerouslySetItemDoNotUse, getItem, LocalStorageKeys, setItem } from 'src/utils/localStorageHelpers';\nimport ListViewCard from 'src/components/ListViewCard';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { CardContainer, createErrorHandler, getRecentActivityObjs, getUserOwnedObjects, loadingCardCount, mq } from 'src/views/CRUD/utils';\nimport { Switch } from 'src/components/Switch';\nimport getBootstrapData from 'src/utils/getBootstrapData';\nimport { TableTab } from 'src/views/CRUD/types';\nimport SubMenu from 'src/features/home/SubMenu';\nimport { userHasPermission } from 'src/dashboard/util/permissionUtils';\nimport ActivityTable from 'src/features/home/ActivityTable';\nimport ChartTable from 'src/features/home/ChartTable';\nimport SavedQueries from 'src/features/home/SavedQueries';\nimport DashboardTable from 'src/features/home/DashboardTable';import { Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst extensionsRegistry = getExtensionsRegistry();\nconst DEFAULT_TAB_ARR = ['2', '3'];\nconst WelcomeContainer = styled.div`\n  background-color: ${({ theme }) => theme.colors.grayscale.light4};\n  .ant-row.menu {\n    margin-top: -15px;\n    background-color: ${({ theme }) => theme.colors.grayscale.light4};\n    &:after {\n      content: '';\n      display: block;\n      border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n      margin: 0px ${({ theme }) => theme.gridUnit * 6}px;\n      position: relative;\n      width: 100%;\n      ${mq[1]} {\n        margin-top: 5px;\n        margin: 0px 2px;\n      }\n    }\n    button {\n      padding: 3px 21px;\n    }\n  }\n  .antd5-card-meta-description {\n    margin-top: ${({ theme }) => theme.gridUnit}px;\n  }\n  .antd5-card.ant-card-bordered {\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n  .ant-collapse-item .ant-collapse-content {\n    margin-bottom: ${({ theme }) => theme.gridUnit * -6}px;\n  }\n  div.ant-collapse-item:last-child.ant-collapse-item-active\n    .ant-collapse-header {\n    padding-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n  }\n  div.ant-collapse-item:last-child .ant-collapse-header {\n    padding-bottom: ${({ theme }) => theme.gridUnit * 9}px;\n  }\n  .loading-cards {\n    margin-top: ${({ theme }) => theme.gridUnit * 8}px;\n    .antd5-card-cover > div {\n      height: 168px;\n    }\n  }\n`;\nconst WelcomeNav = styled.div`\n  ${({ theme }) => `\n    .switch {\n      display: flex;\n      flex-direction: row;\n      margin: ${theme.gridUnit * 4}px;\n      span {\n        display: block;\n        margin: ${theme.gridUnit}px;\n        line-height: ${theme.gridUnit * 3.5}px;\n      }\n    }\n  `}\n`;\nconst bootstrapData = getBootstrapData();\nexport const LoadingCards = ({ cover }) => _jsx(CardContainer, { showThumbnails: cover, className: \"loading-cards\", children:\n  [...new Array(loadingCardCount)].map((_, index) => _jsx(ListViewCard, { cover: cover ? false : _jsx(_Fragment, {}), description: \"\", loading: true }, index)) }\n);\nfunction Welcome({ user, addDangerToast }) {\n  const canReadSavedQueries = userHasPermission(user, 'SavedQuery', 'can_read');\n  const userid = user.userId;\n  const id = userid.toString(); // confident that user is not a guest user\n  const params = rison.encode({ page_size: 24, distinct: false });\n  const recent = `/api/v1/log/recent_activity/?q=${params}`;\n  const [activeChild, setActiveChild] = useState('Loading');\n  const userKey = dangerouslyGetItemDoNotUse(id, null);\n  let defaultChecked = false;\n  const isThumbnailsEnabled = isFeatureEnabled(FeatureFlag.Thumbnails);\n  if (isThumbnailsEnabled) {\n    defaultChecked =\n    (userKey == null ? void 0 : userKey.thumbnails) === undefined ? true : userKey == null ? void 0 : userKey.thumbnails;\n  }\n  const [checked, setChecked] = useState(defaultChecked);\n  const [activityData, setActivityData] = useState(null);\n  const [chartData, setChartData] = useState(null);\n  const [queryData, setQueryData] = useState(null);\n  const [dashboardData, setDashboardData] = useState(null);\n  const [isFetchingActivityData, setIsFetchingActivityData] = useState(true);\n  const collapseState = getItem(LocalStorageKeys.HomepageCollapseState, []);\n  const [activeState, setActiveState] = useState(collapseState);\n  const handleCollapse = (state) => {\n    setActiveState(state);\n    setItem(LocalStorageKeys.HomepageCollapseState, state);\n  };\n  const SubmenuExtension = extensionsRegistry.get('home.submenu');\n  const WelcomeMessageExtension = extensionsRegistry.get('welcome.message');\n  const WelcomeTopExtension = extensionsRegistry.get('welcome.banner');\n  const WelcomeMainExtension = extensionsRegistry.get('welcome.main.replacement');\n  const [otherTabTitle, otherTabFilters] = useMemo(() => {var _bootstrapData$common;\n    const lastTab = (_bootstrapData$common = bootstrapData.common) == null ? void 0 : _bootstrapData$common.conf.\n    WELCOME_PAGE_LAST_TAB;\n    const [customTitle, customFilter] = Array.isArray(lastTab) ?\n    lastTab :\n    [undefined, undefined];\n    if (customTitle && customFilter) {\n      return [t(customTitle), customFilter];\n    }\n    if (lastTab === 'all') {\n      return [t('All'), []];\n    }\n    return [\n    t('Examples'),\n    [\n    {\n      col: 'created_by',\n      opr: 'rel_o_m',\n      value: 0\n    }]];\n\n\n  }, []);\n  useEffect(() => {\n    if (!otherTabFilters || WelcomeMainExtension) {\n      return;\n    }\n    const activeTab = getItem(LocalStorageKeys.HomepageActivityFilter, null);\n    setActiveState(collapseState.length > 0 ? collapseState : DEFAULT_TAB_ARR);\n    getRecentActivityObjs(user.userId, recent, addDangerToast, otherTabFilters).\n    then((res) => {\n      const data = {};\n      data[TableTab.Other] = res.other;\n      if (res.viewed) {\n        const filtered = _reject(res.viewed, ['item_url', null]).map((r) => r);\n        data[TableTab.Viewed] = filtered;\n        if (!activeTab && data[TableTab.Viewed]) {\n          setActiveChild(TableTab.Viewed);\n        } else\n        if (!activeTab && !data[TableTab.Viewed]) {\n          setActiveChild(TableTab.Created);\n        } else\n\n        setActiveChild(activeTab || TableTab.Created);\n      } else\n      if (!activeTab)\n      setActiveChild(TableTab.Created);else\n\n      setActiveChild(activeTab);\n      setActivityData((activityData) => ({ ...activityData, ...data }));\n    }).\n    catch(createErrorHandler((errMsg) => {\n      setActivityData((activityData) => ({\n        ...activityData,\n        [TableTab.Viewed]: []\n      }));\n      addDangerToast(t('There was an issue fetching your recent activity: %s', errMsg));\n    }));\n    // Sets other activity data in parallel with recents api call\n    const ownSavedQueryFilters = [\n    {\n      col: 'created_by',\n      opr: 'rel_o_m',\n      value: `${id}`\n    }];\n\n    Promise.all([\n    getUserOwnedObjects(id, 'dashboard').\n    then((r) => {\n      setDashboardData(r);\n      return Promise.resolve();\n    }).\n    catch((err) => {\n      setDashboardData([]);\n      addDangerToast(t('There was an issue fetching your dashboards: %s', err));\n      return Promise.resolve();\n    }),\n    getUserOwnedObjects(id, 'chart').\n    then((r) => {\n      setChartData(r);\n      return Promise.resolve();\n    }).\n    catch((err) => {\n      setChartData([]);\n      addDangerToast(t('There was an issue fetching your chart: %s', err));\n      return Promise.resolve();\n    }),\n    canReadSavedQueries ?\n    getUserOwnedObjects(id, 'saved_query', ownSavedQueryFilters).\n    then((r) => {\n      setQueryData(r);\n      return Promise.resolve();\n    }).\n    catch((err) => {\n      setQueryData([]);\n      addDangerToast(t('There was an issue fetching your saved queries: %s', err));\n      return Promise.resolve();\n    }) :\n    Promise.resolve()]\n    ).then(() => {\n      setIsFetchingActivityData(false);\n    });\n  }, [otherTabFilters]);\n  const handleToggle = () => {\n    setChecked(!checked);\n    dangerouslySetItemDoNotUse(id, { thumbnails: !checked });\n  };\n  useEffect(() => {\n    if (!collapseState && queryData != null && queryData.length) {\n      setActiveState((activeState) => [...activeState, '4']);\n    }\n    setActivityData((activityData) => ({\n      ...activityData,\n      Created: [\n      ...((chartData == null ? void 0 : chartData.slice(0, 3)) || []),\n      ...((dashboardData == null ? void 0 : dashboardData.slice(0, 3)) || []),\n      ...((queryData == null ? void 0 : queryData.slice(0, 3)) || [])]\n\n    }));\n  }, [chartData, queryData, dashboardData]);\n  useEffect(() => {var _activityData$TableTa;\n    if (!collapseState && activityData != null && (_activityData$TableTa = activityData[TableTab.Viewed]) != null && _activityData$TableTa.length) {\n      setActiveState((activeState) => ['1', ...activeState]);\n    }\n  }, [activityData]);\n  const isRecentActivityLoading = !(activityData != null && activityData[TableTab.Other]) && !(activityData != null && activityData[TableTab.Viewed]);\n  const menuData = {\n    activeChild: 'Home',\n    name: t('Home')\n  };\n  if (isThumbnailsEnabled) {\n    menuData.buttons = [\n    {\n      name: _jsx(WelcomeNav, { children:\n        _jsxs(\"div\", { className: \"switch\", children: [\n          _jsx(Switch, { checked: checked, onClick: handleToggle }),\n          _jsx(\"span\", { children: t('Thumbnails') })] }\n        ) }\n      ),\n      onClick: handleToggle,\n      buttonStyle: 'link'\n    }];\n\n  }\n  return _jsxs(_Fragment, { children: [\n    SubmenuExtension ? _jsx(SubmenuExtension, { ...menuData }) : _jsx(SubMenu, { ...menuData }),\n    _jsxs(WelcomeContainer, { children: [\n      WelcomeMessageExtension && _jsx(WelcomeMessageExtension, {}),\n      WelcomeTopExtension && _jsx(WelcomeTopExtension, {}),\n      WelcomeMainExtension && _jsx(WelcomeMainExtension, {}),\n      (!WelcomeTopExtension || !WelcomeMainExtension) && _jsx(_Fragment, { children:\n        _jsxs(Collapse, { activeKey: activeState, onChange: handleCollapse, ghost: true, bigger: true, children: [\n          _jsx(Collapse.Panel, { header: t('Recents'), children:\n            activityData && (\n            activityData[TableTab.Viewed] ||\n            activityData[TableTab.Other] ||\n            activityData[TableTab.Created]) &&\n            activeChild !== 'Loading' ? _jsx(ActivityTable, { user: { userId: user.userId } // user is definitely not a guest user on this page\n              , activeChild: activeChild, setActiveChild: setActiveChild, activityData: activityData, isFetchingActivityData: isFetchingActivityData }) : _jsx(LoadingCards, {}) }, \"1\"\n          ),\n          _jsx(Collapse.Panel, { header: t('Dashboards'), children:\n            !dashboardData || isRecentActivityLoading ? _jsx(LoadingCards, { cover: checked }) : _jsx(DashboardTable, { user: user, mine: dashboardData, showThumbnails: checked, otherTabData: activityData == null ? void 0 : activityData[TableTab.Other], otherTabFilters: otherTabFilters, otherTabTitle: otherTabTitle }) }, \"2\"\n          ),\n          _jsx(Collapse.Panel, { header: t('Charts'), children:\n            !chartData || isRecentActivityLoading ? _jsx(LoadingCards, { cover: checked }) : _jsx(ChartTable, { showThumbnails: checked, user: user, mine: chartData, otherTabData: activityData == null ? void 0 : activityData[TableTab.Other], otherTabFilters: otherTabFilters, otherTabTitle: otherTabTitle }) }, \"3\"\n          ),\n          canReadSavedQueries && _jsx(Collapse.Panel, { header: t('Saved queries'), children:\n            !queryData ? _jsx(LoadingCards, { cover: checked }) : _jsx(SavedQueries, { showThumbnails: checked, user: user, mine: queryData, featureFlag: isThumbnailsEnabled }) }, \"4\"\n          )] }\n        ) }\n      )] }\n    )] }\n  );\n}__signature__(Welcome, \"useState{[activeChild, setActiveChild]('Loading')}\\nuseState{[checked, setChecked](defaultChecked)}\\nuseState{[activityData, setActivityData](null)}\\nuseState{[chartData, setChartData](null)}\\nuseState{[queryData, setQueryData](null)}\\nuseState{[dashboardData, setDashboardData](null)}\\nuseState{[isFetchingActivityData, setIsFetchingActivityData](true)}\\nuseState{[activeState, setActiveState](collapseState)}\\nuseMemo{[otherTabTitle, otherTabFilters]}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\");const _default =\nwithToasts(Welcome);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extensionsRegistry, \"extensionsRegistry\", \"/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx\");reactHotLoader.register(DEFAULT_TAB_ARR, \"DEFAULT_TAB_ARR\", \"/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx\");reactHotLoader.register(WelcomeContainer, \"WelcomeContainer\", \"/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx\");reactHotLoader.register(WelcomeNav, \"WelcomeNav\", \"/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx\");reactHotLoader.register(bootstrapData, \"bootstrapData\", \"/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx\");reactHotLoader.register(LoadingCards, \"LoadingCards\", \"/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx\");reactHotLoader.register(Welcome, \"Welcome\", \"/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useEffect","useMemo","useState","isFeatureEnabled","FeatureFlag","getExtensionsRegistry","styled","t","rison","Collapse","dangerouslyGetItemDoNotUse","dangerouslySetItemDoNotUse","getItem","LocalStorageKeys","setItem","ListViewCard","withToasts","CardContainer","createErrorHandler","getRecentActivityObjs","getUserOwnedObjects","loadingCardCount","mq","Switch","getBootstrapData","TableTab","SubMenu","userHasPermission","ActivityTable","ChartTable","SavedQueries","DashboardTable","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","extensionsRegistry","DEFAULT_TAB_ARR","WelcomeContainer","div","theme","colors","grayscale","light4","light2","gridUnit","WelcomeNav","bootstrapData","LoadingCards","cover","showThumbnails","className","children","Array","map","_","index","description","loading","Welcome","user","addDangerToast","canReadSavedQueries","userid","userId","id","toString","params","encode","page_size","distinct","recent","activeChild","setActiveChild","userKey","defaultChecked","isThumbnailsEnabled","Thumbnails","thumbnails","undefined","checked","setChecked","activityData","setActivityData","chartData","setChartData","queryData","setQueryData","dashboardData","setDashboardData","isFetchingActivityData","setIsFetchingActivityData","collapseState","HomepageCollapseState","activeState","setActiveState","handleCollapse","state","SubmenuExtension","get","WelcomeMessageExtension","WelcomeTopExtension","WelcomeMainExtension","otherTabTitle","otherTabFilters","_bootstrapData$common","lastTab","common","conf","WELCOME_PAGE_LAST_TAB","customTitle","customFilter","isArray","col","opr","value","activeTab","HomepageActivityFilter","length","then","res","data","Other","other","viewed","filtered","_reject","r","Viewed","Created","catch","errMsg","ownSavedQueryFilters","Promise","all","resolve","err","handleToggle","slice","_activityData$TableTa","isRecentActivityLoading","menuData","name","buttons","onClick","buttonStyle","activeKey","onChange","ghost","bigger","Panel","header","mine","otherTabData","featureFlag","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/pages/Home/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useMemo, useState } from 'react';\nimport {\n  isFeatureEnabled,\n  FeatureFlag,\n  getExtensionsRegistry,\n  JsonObject,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport rison from 'rison';\nimport Collapse from 'src/components/Collapse';\nimport { User } from 'src/types/bootstrapTypes';\nimport { reject } from 'lodash';\nimport {\n  dangerouslyGetItemDoNotUse,\n  dangerouslySetItemDoNotUse,\n  getItem,\n  LocalStorageKeys,\n  setItem,\n} from 'src/utils/localStorageHelpers';\nimport ListViewCard from 'src/components/ListViewCard';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport {\n  CardContainer,\n  createErrorHandler,\n  getRecentActivityObjs,\n  getUserOwnedObjects,\n  loadingCardCount,\n  mq,\n} from 'src/views/CRUD/utils';\nimport { Switch } from 'src/components/Switch';\nimport getBootstrapData from 'src/utils/getBootstrapData';\nimport { TableTab } from 'src/views/CRUD/types';\nimport SubMenu, { SubMenuProps } from 'src/features/home/SubMenu';\nimport { userHasPermission } from 'src/dashboard/util/permissionUtils';\nimport { WelcomePageLastTab } from 'src/features/home/types';\nimport ActivityTable from 'src/features/home/ActivityTable';\nimport ChartTable from 'src/features/home/ChartTable';\nimport SavedQueries from 'src/features/home/SavedQueries';\nimport DashboardTable from 'src/features/home/DashboardTable';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\ninterface WelcomeProps {\n  user: User;\n  addDangerToast: (arg0: string) => void;\n}\n\nexport interface ActivityData {\n  [TableTab.Created]?: JsonObject[];\n  [TableTab.Edited]?: JsonObject[];\n  [TableTab.Viewed]?: JsonObject[];\n  [TableTab.Other]?: JsonObject[];\n}\n\ninterface LoadingProps {\n  cover?: boolean;\n}\n\nconst DEFAULT_TAB_ARR = ['2', '3'];\n\nconst WelcomeContainer = styled.div`\n  background-color: ${({ theme }) => theme.colors.grayscale.light4};\n  .ant-row.menu {\n    margin-top: -15px;\n    background-color: ${({ theme }) => theme.colors.grayscale.light4};\n    &:after {\n      content: '';\n      display: block;\n      border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n      margin: 0px ${({ theme }) => theme.gridUnit * 6}px;\n      position: relative;\n      width: 100%;\n      ${mq[1]} {\n        margin-top: 5px;\n        margin: 0px 2px;\n      }\n    }\n    button {\n      padding: 3px 21px;\n    }\n  }\n  .antd5-card-meta-description {\n    margin-top: ${({ theme }) => theme.gridUnit}px;\n  }\n  .antd5-card.ant-card-bordered {\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n  .ant-collapse-item .ant-collapse-content {\n    margin-bottom: ${({ theme }) => theme.gridUnit * -6}px;\n  }\n  div.ant-collapse-item:last-child.ant-collapse-item-active\n    .ant-collapse-header {\n    padding-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n  }\n  div.ant-collapse-item:last-child .ant-collapse-header {\n    padding-bottom: ${({ theme }) => theme.gridUnit * 9}px;\n  }\n  .loading-cards {\n    margin-top: ${({ theme }) => theme.gridUnit * 8}px;\n    .antd5-card-cover > div {\n      height: 168px;\n    }\n  }\n`;\n\nconst WelcomeNav = styled.div`\n  ${({ theme }) => `\n    .switch {\n      display: flex;\n      flex-direction: row;\n      margin: ${theme.gridUnit * 4}px;\n      span {\n        display: block;\n        margin: ${theme.gridUnit}px;\n        line-height: ${theme.gridUnit * 3.5}px;\n      }\n    }\n  `}\n`;\n\nconst bootstrapData = getBootstrapData();\n\nexport const LoadingCards = ({ cover }: LoadingProps) => (\n  <CardContainer showThumbnails={cover} className=\"loading-cards\">\n    {[...new Array(loadingCardCount)].map((_, index) => (\n      <ListViewCard\n        key={index}\n        cover={cover ? false : <></>}\n        description=\"\"\n        loading\n      />\n    ))}\n  </CardContainer>\n);\n\nfunction Welcome({ user, addDangerToast }: WelcomeProps) {\n  const canReadSavedQueries = userHasPermission(user, 'SavedQuery', 'can_read');\n  const userid = user.userId;\n  const id = userid!.toString(); // confident that user is not a guest user\n  const params = rison.encode({ page_size: 24, distinct: false });\n  const recent = `/api/v1/log/recent_activity/?q=${params}`;\n  const [activeChild, setActiveChild] = useState('Loading');\n  const userKey = dangerouslyGetItemDoNotUse(id, null);\n  let defaultChecked = false;\n  const isThumbnailsEnabled = isFeatureEnabled(FeatureFlag.Thumbnails);\n  if (isThumbnailsEnabled) {\n    defaultChecked =\n      userKey?.thumbnails === undefined ? true : userKey?.thumbnails;\n  }\n  const [checked, setChecked] = useState(defaultChecked);\n  const [activityData, setActivityData] = useState<ActivityData | null>(null);\n  const [chartData, setChartData] = useState<Array<object> | null>(null);\n  const [queryData, setQueryData] = useState<Array<object> | null>(null);\n  const [dashboardData, setDashboardData] = useState<Array<object> | null>(\n    null,\n  );\n  const [isFetchingActivityData, setIsFetchingActivityData] = useState(true);\n\n  const collapseState = getItem(LocalStorageKeys.HomepageCollapseState, []);\n  const [activeState, setActiveState] = useState<Array<string>>(collapseState);\n\n  const handleCollapse = (state: Array<string>) => {\n    setActiveState(state);\n    setItem(LocalStorageKeys.HomepageCollapseState, state);\n  };\n\n  const SubmenuExtension = extensionsRegistry.get('home.submenu');\n  const WelcomeMessageExtension = extensionsRegistry.get('welcome.message');\n  const WelcomeTopExtension = extensionsRegistry.get('welcome.banner');\n  const WelcomeMainExtension = extensionsRegistry.get(\n    'welcome.main.replacement',\n  );\n\n  const [otherTabTitle, otherTabFilters] = useMemo(() => {\n    const lastTab = bootstrapData.common?.conf\n      .WELCOME_PAGE_LAST_TAB as WelcomePageLastTab;\n    const [customTitle, customFilter] = Array.isArray(lastTab)\n      ? lastTab\n      : [undefined, undefined];\n    if (customTitle && customFilter) {\n      return [t(customTitle), customFilter];\n    }\n    if (lastTab === 'all') {\n      return [t('All'), []];\n    }\n    return [\n      t('Examples'),\n      [\n        {\n          col: 'created_by',\n          opr: 'rel_o_m',\n          value: 0,\n        },\n      ],\n    ];\n  }, []);\n\n  useEffect(() => {\n    if (!otherTabFilters || WelcomeMainExtension) {\n      return;\n    }\n    const activeTab = getItem(LocalStorageKeys.HomepageActivityFilter, null);\n    setActiveState(collapseState.length > 0 ? collapseState : DEFAULT_TAB_ARR);\n    getRecentActivityObjs(user.userId!, recent, addDangerToast, otherTabFilters)\n      .then(res => {\n        const data: ActivityData | null = {};\n        data[TableTab.Other] = res.other;\n        if (res.viewed) {\n          const filtered = reject(res.viewed, ['item_url', null]).map(r => r);\n          data[TableTab.Viewed] = filtered;\n          if (!activeTab && data[TableTab.Viewed]) {\n            setActiveChild(TableTab.Viewed);\n          } else if (!activeTab && !data[TableTab.Viewed]) {\n            setActiveChild(TableTab.Created);\n          } else setActiveChild(activeTab || TableTab.Created);\n        } else if (!activeTab) setActiveChild(TableTab.Created);\n        else setActiveChild(activeTab);\n        setActivityData(activityData => ({ ...activityData, ...data }));\n      })\n      .catch(\n        createErrorHandler((errMsg: unknown) => {\n          setActivityData(activityData => ({\n            ...activityData,\n            [TableTab.Viewed]: [],\n          }));\n          addDangerToast(\n            t('There was an issue fetching your recent activity: %s', errMsg),\n          );\n        }),\n      );\n\n    // Sets other activity data in parallel with recents api call\n    const ownSavedQueryFilters = [\n      {\n        col: 'created_by',\n        opr: 'rel_o_m',\n        value: `${id}`,\n      },\n    ];\n    Promise.all([\n      getUserOwnedObjects(id, 'dashboard')\n        .then(r => {\n          setDashboardData(r);\n          return Promise.resolve();\n        })\n        .catch((err: unknown) => {\n          setDashboardData([]);\n          addDangerToast(\n            t('There was an issue fetching your dashboards: %s', err),\n          );\n          return Promise.resolve();\n        }),\n      getUserOwnedObjects(id, 'chart')\n        .then(r => {\n          setChartData(r);\n          return Promise.resolve();\n        })\n        .catch((err: unknown) => {\n          setChartData([]);\n          addDangerToast(t('There was an issue fetching your chart: %s', err));\n          return Promise.resolve();\n        }),\n      canReadSavedQueries\n        ? getUserOwnedObjects(id, 'saved_query', ownSavedQueryFilters)\n            .then(r => {\n              setQueryData(r);\n              return Promise.resolve();\n            })\n            .catch((err: unknown) => {\n              setQueryData([]);\n              addDangerToast(\n                t('There was an issue fetching your saved queries: %s', err),\n              );\n              return Promise.resolve();\n            })\n        : Promise.resolve(),\n    ]).then(() => {\n      setIsFetchingActivityData(false);\n    });\n  }, [otherTabFilters]);\n\n  const handleToggle = () => {\n    setChecked(!checked);\n    dangerouslySetItemDoNotUse(id, { thumbnails: !checked });\n  };\n\n  useEffect(() => {\n    if (!collapseState && queryData?.length) {\n      setActiveState(activeState => [...activeState, '4']);\n    }\n    setActivityData(activityData => ({\n      ...activityData,\n      Created: [\n        ...(chartData?.slice(0, 3) || []),\n        ...(dashboardData?.slice(0, 3) || []),\n        ...(queryData?.slice(0, 3) || []),\n      ],\n    }));\n  }, [chartData, queryData, dashboardData]);\n\n  useEffect(() => {\n    if (!collapseState && activityData?.[TableTab.Viewed]?.length) {\n      setActiveState(activeState => ['1', ...activeState]);\n    }\n  }, [activityData]);\n\n  const isRecentActivityLoading =\n    !activityData?.[TableTab.Other] && !activityData?.[TableTab.Viewed];\n\n  const menuData: SubMenuProps = {\n    activeChild: 'Home',\n    name: t('Home'),\n  };\n\n  if (isThumbnailsEnabled) {\n    menuData.buttons = [\n      {\n        name: (\n          <WelcomeNav>\n            <div className=\"switch\">\n              <Switch checked={checked} onClick={handleToggle} />\n              <span>{t('Thumbnails')}</span>\n            </div>\n          </WelcomeNav>\n        ),\n        onClick: handleToggle,\n        buttonStyle: 'link',\n      },\n    ];\n  }\n\n  return (\n    <>\n      {SubmenuExtension ? (\n        <SubmenuExtension {...menuData} />\n      ) : (\n        <SubMenu {...menuData} />\n      )}\n      <WelcomeContainer>\n        {WelcomeMessageExtension && <WelcomeMessageExtension />}\n        {WelcomeTopExtension && <WelcomeTopExtension />}\n        {WelcomeMainExtension && <WelcomeMainExtension />}\n        {(!WelcomeTopExtension || !WelcomeMainExtension) && (\n          <>\n            <Collapse\n              activeKey={activeState}\n              onChange={handleCollapse}\n              ghost\n              bigger\n            >\n              <Collapse.Panel header={t('Recents')} key=\"1\">\n                {activityData &&\n                (activityData[TableTab.Viewed] ||\n                  activityData[TableTab.Other] ||\n                  activityData[TableTab.Created]) &&\n                activeChild !== 'Loading' ? (\n                  <ActivityTable\n                    user={{ userId: user.userId! }} // user is definitely not a guest user on this page\n                    activeChild={activeChild}\n                    setActiveChild={setActiveChild}\n                    activityData={activityData}\n                    isFetchingActivityData={isFetchingActivityData}\n                  />\n                ) : (\n                  <LoadingCards />\n                )}\n              </Collapse.Panel>\n              <Collapse.Panel header={t('Dashboards')} key=\"2\">\n                {!dashboardData || isRecentActivityLoading ? (\n                  <LoadingCards cover={checked} />\n                ) : (\n                  <DashboardTable\n                    user={user}\n                    mine={dashboardData}\n                    showThumbnails={checked}\n                    otherTabData={activityData?.[TableTab.Other]}\n                    otherTabFilters={otherTabFilters}\n                    otherTabTitle={otherTabTitle}\n                  />\n                )}\n              </Collapse.Panel>\n              <Collapse.Panel header={t('Charts')} key=\"3\">\n                {!chartData || isRecentActivityLoading ? (\n                  <LoadingCards cover={checked} />\n                ) : (\n                  <ChartTable\n                    showThumbnails={checked}\n                    user={user}\n                    mine={chartData}\n                    otherTabData={activityData?.[TableTab.Other]}\n                    otherTabFilters={otherTabFilters}\n                    otherTabTitle={otherTabTitle}\n                  />\n                )}\n              </Collapse.Panel>\n              {canReadSavedQueries && (\n                <Collapse.Panel header={t('Saved queries')} key=\"4\">\n                  {!queryData ? (\n                    <LoadingCards cover={checked} />\n                  ) : (\n                    <SavedQueries\n                      showThumbnails={checked}\n                      user={user}\n                      mine={queryData}\n                      featureFlag={isThumbnailsEnabled}\n                    />\n                  )}\n                </Collapse.Panel>\n              )}\n            </Collapse>\n          </>\n        )}\n      </WelcomeContainer>\n    </>\n  );\n}\n\nexport default withToasts(Welcome);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}