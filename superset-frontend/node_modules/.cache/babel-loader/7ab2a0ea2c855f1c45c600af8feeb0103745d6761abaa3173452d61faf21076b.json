{"ast":null,"code":"import _isEmpty from \"lodash/isEmpty\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { t, css, styled, FeatureFlag, isFeatureEnabled, getExtensionsRegistry, usePrevious } from '@superset-ui/core';\nimport { Icons } from 'src/components/Icons';\nimport { Switch } from 'src/components/Switch';\nimport { Menu } from 'src/components/Menu';\nimport Checkbox from 'src/components/Checkbox';\nimport { noOp } from 'src/utils/common';\nimport { fetchUISpecificReport, toggleActive } from 'src/features/reports/ReportModal/actions';\nimport { reportSelector } from 'src/views/CRUD/hooks';\nimport { MenuItemWithCheckboxContainer } from 'src/explore/components/useExploreAdditionalActionsMenu/index';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst extensionsRegistry = getExtensionsRegistry();\nconst deleteColor = (theme) => css`\n  color: ${theme.colors.error.base};\n`;\nconst onMenuHover = (theme) => css`\n  & .antd5-menu-item {\n    padding: 5px 12px;\n    margin-top: 0px;\n    margin-bottom: 4px;\n    :hover {\n      color: ${theme.colors.grayscale.dark1};\n    }\n  }\n  :hover {\n    background-color: ${theme.colors.secondary.light5};\n  }\n`;\nconst onMenuItemHover = (theme) => css`\n  &:hover {\n    color: ${theme.colors.grayscale.dark1};\n    background-color: ${theme.colors.secondary.light5};\n  }\n`;\nconst StyledDropdownItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  > *:first-child {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\nconst DropdownItemExtension = extensionsRegistry.get('report-modal.dropdown.item.icon');\nexport var CreationMethod;\n(function (CreationMethod) {\n  CreationMethod[\"Charts\"] = \"charts\";\n  CreationMethod[\"Dashboards\"] = \"dashboards\";\n})(CreationMethod || (CreationMethod = {}));\n// Same instance to be used in useEffects\nconst EMPTY_OBJECT = {};\nexport default function HeaderReportDropDown({ dashboardId, chart, useTextMenu = false, setShowReportSubMenu, submenuTitle, showReportModal, setCurrentReportDeleting }) {\n  const dispatch = useDispatch();\n  const report = useSelector((state) => {\n    const resourceType = dashboardId ?\n    CreationMethod.Dashboards :\n    CreationMethod.Charts;\n    return reportSelector(state, resourceType, dashboardId || (chart == null ? void 0 : chart.id)) ||\n    EMPTY_OBJECT;\n  });\n  const isReportActive = (report == null ? void 0 : report.active) || false;\n  const user = useSelector((state) => state.user);\n  const canAddReports = () => {\n    if (!isFeatureEnabled(FeatureFlag.AlertReports)) {\n      return false;\n    }\n    if (!(user != null && user.userId)) {\n      // this is in the case that there is an anonymous user.\n      return false;\n    }\n    // Cannot add reports if the resource is not saved\n    if (!(dashboardId || chart != null && chart.id)) {\n      return false;\n    }\n    const roles = Object.keys(user.roles || []);\n    const permissions = roles.map((key) => user.roles[key].filter((perms) => perms[0] === 'menu_access' && perms[1] === 'Manage'));\n    return permissions.some((permission) => permission.length > 0);\n  };\n  const prevDashboard = usePrevious(dashboardId);\n  const toggleActiveKey = async (data, checked) => {\n    if (data != null && data.id) {\n      dispatch(toggleActive(data, checked));\n    }\n  };\n  const shouldFetch = canAddReports() &&\n  !!(dashboardId && prevDashboard !== dashboardId || chart != null && chart.id);\n  useEffect(() => {\n    if (shouldFetch) {\n      dispatch(fetchUISpecificReport({\n        userId: user.userId,\n        filterField: dashboardId ? 'dashboard_id' : 'chart_id',\n        creationMethod: dashboardId ? 'dashboards' : 'charts',\n        resourceId: dashboardId || (chart == null ? void 0 : chart.id)\n      }));\n    }\n  }, []);\n  const showReportSubMenu = report && setShowReportSubMenu && canAddReports();\n  useEffect(() => {\n    if (showReportSubMenu) {\n      setShowReportSubMenu(true);\n    } else\n    if (!report && setShowReportSubMenu) {\n      setShowReportSubMenu(false);\n    }\n  }, [report]);\n  const handleShowMenu = () => {\n    showReportModal();\n  };\n  const handleDeleteMenuClick = () => {\n    setCurrentReportDeleting(report);\n  };\n  const textMenu = () => _isEmpty(report) ? _jsxs(Menu.SubMenu, { title: submenuTitle, css: onMenuHover, children: [\n    _jsx(Menu.Item, { onClick: handleShowMenu, children:\n      DropdownItemExtension ? _jsxs(StyledDropdownItemWithIcon, { children: [\n        _jsx(\"div\", { children: t('Set up an email report') }),\n        _jsx(DropdownItemExtension, {})] }\n      ) : t('Set up an email report') }\n    ),\n    _jsx(Menu.Divider, {})] }\n  ) : _jsxs(Menu.SubMenu, { title: submenuTitle, css: css`\n          border: none;\n        `, children: [\n    _jsx(Menu.Item, { css: onMenuItemHover, onClick: () => toggleActiveKey(report, !isReportActive), children:\n      _jsxs(MenuItemWithCheckboxContainer, { children: [\n        _jsx(Checkbox, { checked: isReportActive, onChange: noOp }),\n        t('Email reports active')] }\n      ) }\n    ),\n    _jsx(Menu.Item, { css: onMenuItemHover, onClick: handleShowMenu, children:\n      t('Edit email report') }\n    ),\n    _jsx(Menu.Item, { css: onMenuItemHover, onClick: handleDeleteMenuClick, children:\n      t('Delete email report') }\n    )] }\n  );\n  const menu = (title) => _jsxs(Menu.SubMenu, { title: title, css: css`\n        width: 200px;\n      `, children: [\n    _jsxs(Menu.Item, { children: [\n      t('Email reports active'),\n      _jsx(Switch, { \"data-test\": \"toggle-active\", checked: isReportActive, onClick: (checked) => toggleActiveKey(report, checked), size: \"small\", css: (theme) => css`\n            margin-left: ${theme.gridUnit * 2}px;\n          ` })] }\n    ),\n    _jsx(Menu.Item, { onClick: () => showReportModal(), children:\n      t('Edit email report') }\n    ),\n    _jsx(Menu.Item, { onClick: () => setCurrentReportDeleting(report), css: deleteColor, children:\n      t('Delete email report') }\n    )] }\n  );\n  const iconMenu = () => _isEmpty(report) ? _jsx(\"span\", { role: \"button\", title: t('Schedule email report'), tabIndex: 0, className: \"action-button action-schedule-report\", onClick: () => showReportModal(), children:\n    _jsx(Icons.CalendarOutlined, {}) }\n  ) : menu(_jsx(Icons.CalendarOutlined, {}));\n  return _jsx(_Fragment, { children: canAddReports() && (useTextMenu ? textMenu() : iconMenu()) });\n}__signature__(HeaderReportDropDown, \"useDispatch{dispatch}\\nuseSelector{report}\\nuseSelector{user}\\nusePrevious{prevDashboard}\\nuseEffect{}\\nuseEffect{}\", () => [useDispatch, useSelector, useSelector, usePrevious]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extensionsRegistry, \"extensionsRegistry\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");reactHotLoader.register(deleteColor, \"deleteColor\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");reactHotLoader.register(onMenuHover, \"onMenuHover\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");reactHotLoader.register(onMenuItemHover, \"onMenuItemHover\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");reactHotLoader.register(StyledDropdownItemWithIcon, \"StyledDropdownItemWithIcon\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");reactHotLoader.register(DropdownItemExtension, \"DropdownItemExtension\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");reactHotLoader.register(CreationMethod, \"CreationMethod\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");reactHotLoader.register(EMPTY_OBJECT, \"EMPTY_OBJECT\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");reactHotLoader.register(HeaderReportDropDown, \"HeaderReportDropDown\", \"/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useEffect","useSelector","useDispatch","t","css","styled","FeatureFlag","isFeatureEnabled","getExtensionsRegistry","usePrevious","Icons","Switch","Menu","Checkbox","noOp","fetchUISpecificReport","toggleActive","reportSelector","MenuItemWithCheckboxContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","extensionsRegistry","deleteColor","theme","colors","error","base","onMenuHover","grayscale","dark1","secondary","light5","onMenuItemHover","StyledDropdownItemWithIcon","div","gridUnit","DropdownItemExtension","get","CreationMethod","EMPTY_OBJECT","HeaderReportDropDown","dashboardId","chart","useTextMenu","setShowReportSubMenu","submenuTitle","showReportModal","setCurrentReportDeleting","dispatch","report","state","resourceType","Dashboards","Charts","id","isReportActive","active","user","canAddReports","AlertReports","userId","roles","Object","keys","permissions","map","key","filter","perms","some","permission","length","prevDashboard","toggleActiveKey","data","checked","shouldFetch","filterField","creationMethod","resourceId","showReportSubMenu","handleShowMenu","handleDeleteMenuClick","textMenu","_isEmpty","SubMenu","title","children","Item","onClick","Divider","onChange","menu","size","iconMenu","role","tabIndex","className","CalendarOutlined","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/features/reports/ReportModal/HeaderReportDropdown/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ReactNode, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { isEmpty } from 'lodash';\nimport {\n  t,\n  SupersetTheme,\n  css,\n  styled,\n  FeatureFlag,\n  isFeatureEnabled,\n  getExtensionsRegistry,\n  usePrevious,\n} from '@superset-ui/core';\nimport { Icons } from 'src/components/Icons';\nimport { Switch } from 'src/components/Switch';\nimport { AlertObject } from 'src/features/alerts/types';\nimport { Menu } from 'src/components/Menu';\nimport Checkbox from 'src/components/Checkbox';\nimport { noOp } from 'src/utils/common';\nimport { ChartState } from 'src/explore/types';\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport {\n  fetchUISpecificReport,\n  toggleActive,\n} from 'src/features/reports/ReportModal/actions';\nimport { reportSelector } from 'src/views/CRUD/hooks';\nimport { MenuItemWithCheckboxContainer } from 'src/explore/components/useExploreAdditionalActionsMenu/index';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst deleteColor = (theme: SupersetTheme) => css`\n  color: ${theme.colors.error.base};\n`;\n\nconst onMenuHover = (theme: SupersetTheme) => css`\n  & .antd5-menu-item {\n    padding: 5px 12px;\n    margin-top: 0px;\n    margin-bottom: 4px;\n    :hover {\n      color: ${theme.colors.grayscale.dark1};\n    }\n  }\n  :hover {\n    background-color: ${theme.colors.secondary.light5};\n  }\n`;\n\nconst onMenuItemHover = (theme: SupersetTheme) => css`\n  &:hover {\n    color: ${theme.colors.grayscale.dark1};\n    background-color: ${theme.colors.secondary.light5};\n  }\n`;\n\nconst StyledDropdownItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  > *:first-child {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst DropdownItemExtension = extensionsRegistry.get(\n  'report-modal.dropdown.item.icon',\n);\n\nexport enum CreationMethod {\n  Charts = 'charts',\n  Dashboards = 'dashboards',\n}\nexport interface HeaderReportProps {\n  dashboardId?: number;\n  chart?: ChartState;\n  useTextMenu?: boolean;\n  setShowReportSubMenu?: (show: boolean) => void;\n  showReportSubMenu?: boolean;\n  submenuTitle?: string;\n  showReportModal: () => void;\n  setCurrentReportDeleting: (report: AlertObject | null) => void;\n}\n\n// Same instance to be used in useEffects\nconst EMPTY_OBJECT = {};\n\nexport default function HeaderReportDropDown({\n  dashboardId,\n  chart,\n  useTextMenu = false,\n  setShowReportSubMenu,\n  submenuTitle,\n  showReportModal,\n  setCurrentReportDeleting,\n}: HeaderReportProps) {\n  const dispatch = useDispatch();\n  const report = useSelector<any, AlertObject>(state => {\n    const resourceType = dashboardId\n      ? CreationMethod.Dashboards\n      : CreationMethod.Charts;\n    return (\n      reportSelector(state, resourceType, dashboardId || chart?.id) ||\n      EMPTY_OBJECT\n    );\n  });\n\n  const isReportActive: boolean = report?.active || false;\n  const user: UserWithPermissionsAndRoles = useSelector<\n    any,\n    UserWithPermissionsAndRoles\n  >(state => state.user);\n  const canAddReports = () => {\n    if (!isFeatureEnabled(FeatureFlag.AlertReports)) {\n      return false;\n    }\n\n    if (!user?.userId) {\n      // this is in the case that there is an anonymous user.\n      return false;\n    }\n\n    // Cannot add reports if the resource is not saved\n    if (!(dashboardId || chart?.id)) {\n      return false;\n    }\n\n    const roles = Object.keys(user.roles || []);\n    const permissions = roles.map(key =>\n      user.roles[key].filter(\n        perms => perms[0] === 'menu_access' && perms[1] === 'Manage',\n      ),\n    );\n    return permissions.some(permission => permission.length > 0);\n  };\n\n  const prevDashboard = usePrevious(dashboardId);\n  const toggleActiveKey = async (data: AlertObject, checked: boolean) => {\n    if (data?.id) {\n      dispatch(toggleActive(data, checked));\n    }\n  };\n\n  const shouldFetch =\n    canAddReports() &&\n    !!((dashboardId && prevDashboard !== dashboardId) || chart?.id);\n\n  useEffect(() => {\n    if (shouldFetch) {\n      dispatch(\n        fetchUISpecificReport({\n          userId: user.userId,\n          filterField: dashboardId ? 'dashboard_id' : 'chart_id',\n          creationMethod: dashboardId ? 'dashboards' : 'charts',\n          resourceId: dashboardId || chart?.id,\n        }),\n      );\n    }\n  }, []);\n\n  const showReportSubMenu = report && setShowReportSubMenu && canAddReports();\n\n  useEffect(() => {\n    if (showReportSubMenu) {\n      setShowReportSubMenu(true);\n    } else if (!report && setShowReportSubMenu) {\n      setShowReportSubMenu(false);\n    }\n  }, [report]);\n\n  const handleShowMenu = () => {\n    showReportModal();\n  };\n\n  const handleDeleteMenuClick = () => {\n    setCurrentReportDeleting(report);\n  };\n\n  const textMenu = () =>\n    isEmpty(report) ? (\n      <Menu.SubMenu title={submenuTitle} css={onMenuHover}>\n        <Menu.Item onClick={handleShowMenu}>\n          {DropdownItemExtension ? (\n            <StyledDropdownItemWithIcon>\n              <div>{t('Set up an email report')}</div>\n              <DropdownItemExtension />\n            </StyledDropdownItemWithIcon>\n          ) : (\n            t('Set up an email report')\n          )}\n        </Menu.Item>\n        <Menu.Divider />\n      </Menu.SubMenu>\n    ) : (\n      <Menu.SubMenu\n        title={submenuTitle}\n        css={css`\n          border: none;\n        `}\n      >\n        <Menu.Item\n          css={onMenuItemHover}\n          onClick={() => toggleActiveKey(report, !isReportActive)}\n        >\n          <MenuItemWithCheckboxContainer>\n            <Checkbox checked={isReportActive} onChange={noOp} />\n            {t('Email reports active')}\n          </MenuItemWithCheckboxContainer>\n        </Menu.Item>\n        <Menu.Item css={onMenuItemHover} onClick={handleShowMenu}>\n          {t('Edit email report')}\n        </Menu.Item>\n        <Menu.Item css={onMenuItemHover} onClick={handleDeleteMenuClick}>\n          {t('Delete email report')}\n        </Menu.Item>\n      </Menu.SubMenu>\n    );\n  const menu = (title: ReactNode) => (\n    <Menu.SubMenu\n      title={title}\n      css={css`\n        width: 200px;\n      `}\n    >\n      <Menu.Item>\n        {t('Email reports active')}\n        <Switch\n          data-test=\"toggle-active\"\n          checked={isReportActive}\n          onClick={(checked: boolean) => toggleActiveKey(report, checked)}\n          size=\"small\"\n          css={theme => css`\n            margin-left: ${theme.gridUnit * 2}px;\n          `}\n        />\n      </Menu.Item>\n      <Menu.Item onClick={() => showReportModal()}>\n        {t('Edit email report')}\n      </Menu.Item>\n      <Menu.Item\n        onClick={() => setCurrentReportDeleting(report)}\n        css={deleteColor}\n      >\n        {t('Delete email report')}\n      </Menu.Item>\n    </Menu.SubMenu>\n  );\n\n  const iconMenu = () =>\n    isEmpty(report) ? (\n      <span\n        role=\"button\"\n        title={t('Schedule email report')}\n        tabIndex={0}\n        className=\"action-button action-schedule-report\"\n        onClick={() => showReportModal()}\n      >\n        <Icons.CalendarOutlined />\n      </span>\n    ) : (\n      menu(<Icons.CalendarOutlined />)\n    );\n  return <>{canAddReports() && (useTextMenu ? textMenu() : iconMenu())}</>;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}