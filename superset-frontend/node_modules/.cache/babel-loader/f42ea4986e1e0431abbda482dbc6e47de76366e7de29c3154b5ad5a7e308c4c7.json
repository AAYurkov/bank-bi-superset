{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { List } from 'src/components/List';\nimport { connect } from 'react-redux';\nimport { PureComponent } from 'react';\nimport { t, withTheme, css } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport { Icons } from 'src/components/Icons';\nimport ControlPopover, { getSectionContainerElement } from '../ControlPopover/ControlPopover';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst AnnotationLayer = AsyncEsmComponent(() => import('./AnnotationLayer'),\n// size of overlay inner content\n() => _jsx(\"div\", { style: { width: 450, height: 368 } }));\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {}\n};\nclass AnnotationLayerControl extends PureComponent {\n\n  constructor(props) {\n    super(props);this.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    addAnnotationLayer = (originalAnnotation, newAnnotation) => {\n      let annotations = this.props.value;\n      if (originalAnnotation && annotations.includes(originalAnnotation)) {\n        annotations = annotations.map((anno) => anno === originalAnnotation ? newAnnotation : anno);\n      } else\n      {\n        annotations = [...annotations, newAnnotation];\n        this.setState({ addedAnnotationIndex: annotations.length - 1 });\n      }\n      this.props.refreshAnnotationData({\n        annotation: newAnnotation,\n        force: true\n      });\n      this.props.onChange(annotations);\n    };this.\n    handleVisibleChange = (visible, popoverKey) => {\n      this.setState((prevState) => ({\n        popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible }\n      }));\n    };this.\n\n\n\n\n\n\n\n\n\n    renderPopover = (popoverKey, annotation, error) => {\n      const id = (annotation == null ? void 0 : annotation.name) || '_new';\n      return _jsx(\"div\", { id: `annotation-pop-${id}`, \"data-test\": \"popover-content\", children:\n        _jsx(AnnotationLayer, { ...(annotation || {}), error: error, colorScheme: this.props.colorScheme, vizType: this.props.vizType, addAnnotationLayer: (newAnnotation) => this.addAnnotationLayer(annotation, newAnnotation), removeAnnotationLayer: () => this.removeAnnotationLayer(annotation), close: () => {\n            this.handleVisibleChange(false, popoverKey);\n            this.setState({ addedAnnotationIndex: null });\n          } }) }\n      );\n    };this.state = { popoverVisible: {}, addedAnnotationIndex: null };this.addAnnotationLayer = this.addAnnotationLayer.bind(this);this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);this.handleVisibleChange = this.handleVisibleChange.bind(this);}componentDidMount() {// preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();}UNSAFE_componentWillReceiveProps(nextProps) {const { name, annotationError, validationErrors, value } = nextProps;if (Object.keys(annotationError).length && !validationErrors.length) {this.props.actions.setControlValue(name, value, Object.keys(annotationError));}if (!Object.keys(annotationError).length && validationErrors.length) {this.props.actions.setControlValue(name, value, []);}}removeAnnotationLayer(annotation) {const annotations = this.props.value.filter((anno) => anno !== annotation); // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();if (element) {element.style.setProperty('overflow-y', 'auto', 'important');}this.props.onChange(annotations);}renderInfo(anno) {const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return _jsx(Icons.SyncOutlined, { iconColor: theme.colors.primary.base, iconSize: \"m\" });\n    }\n    if (annotationError[anno.name]) {\n      return _jsx(InfoTooltipWithTrigger, { label: \"validation-errors\", bsStyle: \"danger\", tooltip: annotationError[anno.name] });\n    }\n    if (!anno.show) {\n      return _jsx(\"span\", { style: { color: theme.colors.error.base }, children: \" Hidden \" });\n    }\n    return '';\n  }\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const { theme } = this.props;\n    const addedAnnotation = addedAnnotationIndex !== null ?\n    this.props.value[addedAnnotationIndex] :\n    null;\n    const annotations = this.props.value.map((anno, i) => _jsx(ControlPopover, { trigger: \"click\", title: t('Edit annotation layer'), css: (theme) => ({\n        '&:hover': {\n          cursor: 'pointer',\n          backgroundColor: theme.colors.grayscale.light4\n        }\n      }), content: this.renderPopover(i, anno, this.props.annotationError[anno.name]), open: this.state.popoverVisible[i], onOpenChange: (visible) => this.handleVisibleChange(visible, i), children:\n      _jsxs(CustomListItem, { selectable: true, children: [\n        _jsx(\"span\", { children: anno.name }),\n        _jsx(\"span\", { style: { float: 'right' }, children: this.renderInfo(anno) })] }\n      ) }, i\n    ));\n    const addLayerPopoverKey = 'add';\n    return _jsx(\"div\", { children:\n      _jsxs(List, { bordered: true, css: (theme) => ({ borderRadius: theme.gridUnit }), children: [\n        annotations,\n        _jsx(ControlPopover, { trigger: \"click\", content: this.renderPopover(addLayerPopoverKey, addedAnnotation, ''), title: t('Add annotation layer'), open: this.state.popoverVisible[addLayerPopoverKey], destroyTooltipOnHide: true, onOpenChange: (visible) => this.handleVisibleChange(visible, addLayerPopoverKey), children:\n          _jsxs(CustomListItem, { selectable: true, children: [\n            _jsx(Icons.PlusOutlined, { iconSize: \"m\", css: css`\n                  margin: auto ${theme.gridUnit}px auto 0;\n                  vertical-align: tex-top;\n                `, \"data-test\": \"add-annotation-layer-button\" }),\n            t('Add annotation layer')] }\n          ) }\n        )] }\n      ) }\n    );\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}} // Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nAnnotationLayerControl.defaultProps = defaultProps;function mapStateToProps({ charts, explore }) {var _explore$controls, _explore$controls$col, _chart$annotationErro, _chart$annotationQuer, _explore$controls2;\n  const chartKey = getChartKey(explore);\n  const defaultChartState = {\n    annotationError: {},\n    annotationQuery: {}\n  };\n  const chart = chartKey && charts[chartKey] ? charts[chartKey] : defaultChartState;\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: (_explore$controls = explore.controls) == null ? void 0 : (_explore$controls$col = _explore$controls.color_scheme) == null ? void 0 : _explore$controls$col.value,\n    annotationError: (_chart$annotationErro = chart.annotationError) != null ? _chart$annotationErro : {},\n    annotationQuery: (_chart$annotationQuer = chart.annotationQuery) != null ? _chart$annotationQuer : {},\n    vizType: (_explore$controls2 = explore.controls) == null ? void 0 : _explore$controls2.viz_type.value\n  };\n}\nfunction mapDispatchToProps(dispatch) {\n  return {\n    refreshAnnotationData: (annotationObj) => dispatch(runAnnotationQuery(annotationObj))\n  };\n}\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);const _default =\nconnect(mapStateToProps, mapDispatchToProps)(themedAnnotationLayerControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AnnotationLayer, \"AnnotationLayer\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.tsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.tsx\");reactHotLoader.register(AnnotationLayerControl, \"AnnotationLayerControl\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.tsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.tsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.tsx\");reactHotLoader.register(themedAnnotationLayerControl, \"themedAnnotationLayerControl\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["List","connect","PureComponent","t","withTheme","css","InfoTooltipWithTrigger","AsyncEsmComponent","getChartKey","runAnnotationQuery","CustomListItem","Icons","ControlPopover","getSectionContainerElement","jsx","_jsx","jsxs","_jsxs","AnnotationLayer","style","width","height","defaultProps","vizType","value","annotationError","annotationQuery","onChange","AnnotationLayerControl","constructor","props","addAnnotationLayer","originalAnnotation","newAnnotation","annotations","includes","map","anno","setState","addedAnnotationIndex","length","refreshAnnotationData","annotation","force","handleVisibleChange","visible","popoverKey","prevState","popoverVisible","renderPopover","error","id","name","children","colorScheme","removeAnnotationLayer","close","state","bind","componentDidMount","preload","UNSAFE_componentWillReceiveProps","nextProps","validationErrors","Object","keys","actions","setControlValue","filter","element","setProperty","renderInfo","theme","SyncOutlined","iconColor","colors","primary","base","iconSize","label","bsStyle","tooltip","show","color","render","addedAnnotation","i","trigger","title","cursor","backgroundColor","grayscale","light4","content","open","onOpenChange","selectable","float","addLayerPopoverKey","bordered","borderRadius","gridUnit","destroyTooltipOnHide","PlusOutlined","__reactstandin__regenerateByEval","key","code","eval","mapStateToProps","charts","explore","_explore$controls","_explore$controls$col","_chart$annotationErro","_chart$annotationQuer","_explore$controls2","chartKey","defaultChartState","chart","controls","color_scheme","viz_type","mapDispatchToProps","dispatch","annotationObj","themedAnnotationLayerControl","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { List } from 'src/components/List';\nimport { connect } from 'react-redux';\nimport { PureComponent } from 'react';\nimport {\n  HandlerFunction,\n  JsonObject,\n  Payload,\n  QueryFormData,\n  SupersetTheme,\n  t,\n  withTheme,\n  css,\n} from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport { ChartState, ExplorePageState } from 'src/explore/types';\nimport { AnyAction } from 'redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { Icons } from 'src/components/Icons';\nimport ControlPopover, {\n  getSectionContainerElement,\n} from '../ControlPopover/ControlPopover';\n\nconst AnnotationLayer = AsyncEsmComponent(\n  () => import('./AnnotationLayer'),\n  // size of overlay inner content\n  () => <div style={{ width: 450, height: 368 }} />,\n);\n\nexport interface Annotation {\n  name: string;\n  show?: boolean;\n  annotation: string;\n  timeout: Date;\n  key: string;\n  formData: QueryFormData | null;\n  isDashboardRequest?: boolean;\n  force?: boolean;\n}\n\nexport interface Props {\n  colorScheme: string;\n  annotationError: Record<string, string>;\n  annotationQuery: Record<string, AbortController>;\n  vizType: string;\n  validationErrors: JsonObject[];\n  name: string;\n  actions: {\n    setControlValue: HandlerFunction;\n  };\n  value: Annotation[];\n  onChange: (annotations: Annotation[]) => void;\n  refreshAnnotationData: (payload: Payload) => void;\n  theme: SupersetTheme;\n}\n\nexport interface PopoverState {\n  popoverVisible: Record<number | string, boolean>;\n  addedAnnotationIndex: number | null;\n}\n\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {},\n};\nclass AnnotationLayerControl extends PureComponent<Props, PopoverState> {\n  static defaultProps = defaultProps;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      popoverVisible: {},\n      addedAnnotationIndex: null,\n    };\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n  }\n\n  componentDidMount() {\n    // preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    const { name, annotationError, validationErrors, value } = nextProps;\n    if (Object.keys(annotationError).length && !validationErrors.length) {\n      this.props.actions.setControlValue(\n        name,\n        value,\n        Object.keys(annotationError),\n      );\n    }\n    if (!Object.keys(annotationError).length && validationErrors.length) {\n      this.props.actions.setControlValue(name, value, []);\n    }\n  }\n\n  addAnnotationLayer = (\n    originalAnnotation: Annotation | null,\n    newAnnotation: Annotation,\n  ) => {\n    let annotations = this.props.value;\n    if (originalAnnotation && annotations.includes(originalAnnotation)) {\n      annotations = annotations.map(anno =>\n        anno === originalAnnotation ? newAnnotation : anno,\n      );\n    } else {\n      annotations = [...annotations, newAnnotation];\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\n    }\n\n    this.props.refreshAnnotationData({\n      annotation: newAnnotation,\n      force: true,\n    });\n\n    this.props.onChange(annotations);\n  };\n\n  handleVisibleChange = (visible: boolean, popoverKey: number | string) => {\n    this.setState(prevState => ({\n      popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible },\n    }));\n  };\n\n  removeAnnotationLayer(annotation: Annotation | null) {\n    const annotations = this.props.value.filter(anno => anno !== annotation);\n    // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();\n    if (element) {\n      element.style.setProperty('overflow-y', 'auto', 'important');\n    }\n    this.props.onChange(annotations);\n  }\n\n  renderPopover = (\n    popoverKey: number | string,\n    annotation: Annotation | null,\n    error: string,\n  ) => {\n    const id = annotation?.name || '_new';\n\n    return (\n      <div id={`annotation-pop-${id}`} data-test=\"popover-content\">\n        <AnnotationLayer\n          {...(annotation || {})}\n          error={error}\n          colorScheme={this.props.colorScheme}\n          vizType={this.props.vizType}\n          addAnnotationLayer={(newAnnotation: Annotation) =>\n            this.addAnnotationLayer(annotation, newAnnotation)\n          }\n          removeAnnotationLayer={() => this.removeAnnotationLayer(annotation)}\n          close={() => {\n            this.handleVisibleChange(false, popoverKey);\n            this.setState({ addedAnnotationIndex: null });\n          }}\n        />\n      </div>\n    );\n  };\n\n  renderInfo(anno: Annotation) {\n    const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return (\n        <Icons.SyncOutlined\n          iconColor={theme.colors.primary.base}\n          iconSize=\"m\"\n        />\n      );\n    }\n    if (annotationError[anno.name]) {\n      return (\n        <InfoTooltipWithTrigger\n          label=\"validation-errors\"\n          bsStyle=\"danger\"\n          tooltip={annotationError[anno.name]}\n        />\n      );\n    }\n    if (!anno.show) {\n      return <span style={{ color: theme.colors.error.base }}> Hidden </span>;\n    }\n    return '';\n  }\n\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const { theme } = this.props;\n    const addedAnnotation =\n      addedAnnotationIndex !== null\n        ? this.props.value[addedAnnotationIndex]\n        : null;\n    const annotations = this.props.value.map((anno, i) => (\n      <ControlPopover\n        key={i}\n        trigger=\"click\"\n        title={t('Edit annotation layer')}\n        css={theme => ({\n          '&:hover': {\n            cursor: 'pointer',\n            backgroundColor: theme.colors.grayscale.light4,\n          },\n        })}\n        content={this.renderPopover(\n          i,\n          anno,\n          this.props.annotationError[anno.name],\n        )}\n        open={this.state.popoverVisible[i]}\n        onOpenChange={visible => this.handleVisibleChange(visible, i)}\n      >\n        <CustomListItem selectable>\n          <span>{anno.name}</span>\n          <span style={{ float: 'right' }}>{this.renderInfo(anno)}</span>\n        </CustomListItem>\n      </ControlPopover>\n    ));\n    const addLayerPopoverKey = 'add';\n\n    return (\n      <div>\n        <List bordered css={theme => ({ borderRadius: theme.gridUnit })}>\n          {annotations}\n          <ControlPopover\n            trigger=\"click\"\n            content={this.renderPopover(\n              addLayerPopoverKey,\n              addedAnnotation,\n              '',\n            )}\n            title={t('Add annotation layer')}\n            open={this.state.popoverVisible[addLayerPopoverKey]}\n            destroyTooltipOnHide\n            onOpenChange={visible =>\n              this.handleVisibleChange(visible, addLayerPopoverKey)\n            }\n          >\n            <CustomListItem selectable>\n              <Icons.PlusOutlined\n                iconSize=\"m\"\n                css={css`\n                  margin: auto ${theme.gridUnit}px auto 0;\n                  vertical-align: tex-top;\n                `}\n                data-test=\"add-annotation-layer-button\"\n              />\n              {t('Add annotation layer')}\n            </CustomListItem>\n          </ControlPopover>\n        </List>\n      </div>\n    );\n  }\n}\n\n// Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nfunction mapStateToProps({\n  charts,\n  explore,\n}: Pick<ExplorePageState, 'charts' | 'explore'>) {\n  const chartKey = getChartKey(explore);\n\n  const defaultChartState: Partial<ChartState> = {\n    annotationError: {},\n    annotationQuery: {},\n  };\n\n  const chart =\n    chartKey && charts[chartKey] ? charts[chartKey] : defaultChartState;\n\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: explore.controls?.color_scheme?.value,\n    annotationError: chart.annotationError ?? {},\n    annotationQuery: chart.annotationQuery ?? {},\n    vizType: explore.controls?.viz_type.value,\n  };\n}\n\nfunction mapDispatchToProps(\n  dispatch: ThunkDispatch<any, undefined, AnyAction>,\n) {\n  return {\n    refreshAnnotationData: (annotationObj: Annotation) =>\n      dispatch(runAnnotationQuery(annotationObj)),\n  };\n}\n\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(themedAnnotationLayerControl);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}