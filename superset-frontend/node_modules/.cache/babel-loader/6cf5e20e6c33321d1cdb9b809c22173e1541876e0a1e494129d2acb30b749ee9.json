{"ast":null,"code":"import _cloneDeep from \"lodash/cloneDeep\";import _isEqual from \"lodash/isEqual\";import _snakeCase from \"lodash/snakeCase\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};\n\nimport PropTypes from 'prop-types';\nimport { createRef, Component } from 'react';\nimport {\n  SuperChart,\n  logging,\n  Behavior,\n  t,\n  getChartMetadataRegistry,\n  VizType,\n  isFeatureEnabled,\n  FeatureFlag } from\n'@superset-ui/core';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { EmptyState } from 'src/components/EmptyState';\nimport { ChartSource } from 'src/types/ChartSource';\nimport ChartContextMenu from './ChartContextMenu/ChartContextMenu';import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\n\nconst propTypes = {\n  annotationData: PropTypes.object,\n  actions: PropTypes.object,\n  chartId: PropTypes.number.isRequired,\n  datasource: PropTypes.object,\n  initialValues: PropTypes.object,\n  formData: PropTypes.object.isRequired,\n  latestQueryFormData: PropTypes.object,\n  labelsColor: PropTypes.object,\n  labelsColorMap: PropTypes.object,\n  height: PropTypes.number,\n  width: PropTypes.number,\n  setControlValue: PropTypes.func,\n  vizType: PropTypes.string.isRequired,\n  triggerRender: PropTypes.bool,\n  // state\n  chartAlert: PropTypes.string,\n  chartStatus: PropTypes.string,\n  queriesResponse: PropTypes.arrayOf(PropTypes.object),\n  triggerQuery: PropTypes.bool,\n  chartIsStale: PropTypes.bool,\n  // dashboard callbacks\n  addFilter: PropTypes.func,\n  setDataMask: PropTypes.func,\n  onFilterMenuOpen: PropTypes.func,\n  onFilterMenuClose: PropTypes.func,\n  ownState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  source: PropTypes.oneOf([ChartSource.Dashboard, ChartSource.Explore]),\n  emitCrossFilters: PropTypes.bool\n};\n\nconst BLANK = {};\n\nconst BIG_NO_RESULT_MIN_WIDTH = 300;\nconst BIG_NO_RESULT_MIN_HEIGHT = 220;\n\nconst behaviors = [Behavior.InteractiveChart];\n\nconst defaultProps = {\n  addFilter: () => BLANK,\n  onFilterMenuOpen: () => BLANK,\n  onFilterMenuClose: () => BLANK,\n  initialValues: BLANK,\n  setControlValue() {},\n  triggerRender: false\n};\n\nclass ChartRenderer extends Component {\n  constructor(props) {var _getChartMetadataRegi, _props$formData$viz_t;\n    super(props);\n    const suppressContextMenu = (_getChartMetadataRegi = getChartMetadataRegistry().get((_props$formData$viz_t =\n    props.formData.viz_type) != null ? _props$formData$viz_t : props.vizType\n    )) == null ? void 0 : _getChartMetadataRegi.suppressContextMenu;\n    this.state = {\n      showContextMenu:\n      props.source === ChartSource.Dashboard &&\n      !suppressContextMenu &&\n      isFeatureEnabled(FeatureFlag.DrillToDetail),\n      inContextMenu: false,\n      legendState: undefined\n    };\n    this.hasQueryResponseChange = false;\n\n    this.contextMenuRef = /*#__PURE__*/createRef();\n\n    this.handleAddFilter = this.handleAddFilter.bind(this);\n    this.handleRenderSuccess = this.handleRenderSuccess.bind(this);\n    this.handleRenderFailure = this.handleRenderFailure.bind(this);\n    this.handleSetControlValue = this.handleSetControlValue.bind(this);\n    this.handleOnContextMenu = this.handleOnContextMenu.bind(this);\n    this.handleContextMenuSelected = this.handleContextMenuSelected.bind(this);\n    this.handleContextMenuClosed = this.handleContextMenuClosed.bind(this);\n    this.handleLegendStateChanged = this.handleLegendStateChanged.bind(this);\n    this.onContextMenuFallback = this.onContextMenuFallback.bind(this);\n\n    this.hooks = {\n      onAddFilter: this.handleAddFilter,\n      onContextMenu: this.state.showContextMenu ?\n      this.handleOnContextMenu :\n      undefined,\n      onError: this.handleRenderFailure,\n      setControlValue: this.handleSetControlValue,\n      onFilterMenuOpen: this.props.onFilterMenuOpen,\n      onFilterMenuClose: this.props.onFilterMenuClose,\n      onLegendStateChanged: this.handleLegendStateChanged,\n      setDataMask: (dataMask) => {var _this$props$actions;\n        (_this$props$actions = this.props.actions) == null ? void 0 : _this$props$actions.updateDataMask(this.props.chartId, dataMask);\n      }\n    };\n\n    // TODO: queriesResponse comes from Redux store but it's being edited by\n    // the plugins, hence we need to clone it to avoid state mutation\n    // until we change the reducers to use Redux Toolkit with Immer\n    this.mutableQueriesResponse = _cloneDeep(this.props.queriesResponse);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {var _nextProps$queriesRes, _nextProps$queriesRes2;\n    const resultsReady =\n    nextProps.queriesResponse &&\n    ['success', 'rendered'].indexOf(nextProps.chartStatus) > -1 &&\n    !((_nextProps$queriesRes = nextProps.queriesResponse) != null && (_nextProps$queriesRes2 = _nextProps$queriesRes[0]) != null && _nextProps$queriesRes2.error);\n\n    if (resultsReady) {\n      if (!_isEqual(this.state, nextState)) {\n        return true;\n      }\n      this.hasQueryResponseChange =\n      nextProps.queriesResponse !== this.props.queriesResponse;\n\n      if (this.hasQueryResponseChange) {\n        this.mutableQueriesResponse = _cloneDeep(nextProps.queriesResponse);\n      }\n\n      return (\n        this.hasQueryResponseChange ||\n        !_isEqual(nextProps.datasource, this.props.datasource) ||\n        nextProps.annotationData !== this.props.annotationData ||\n        nextProps.ownState !== this.props.ownState ||\n        nextProps.filterState !== this.props.filterState ||\n        nextProps.height !== this.props.height ||\n        nextProps.width !== this.props.width ||\n        nextProps.triggerRender ||\n        nextProps.labelsColor !== this.props.labelsColor ||\n        nextProps.labelsColorMap !== this.props.labelsColorMap ||\n        nextProps.formData.color_scheme !== this.props.formData.color_scheme ||\n        nextProps.formData.stack !== this.props.formData.stack ||\n        nextProps.cacheBusterProp !== this.props.cacheBusterProp ||\n        nextProps.emitCrossFilters !== this.props.emitCrossFilters);\n\n    }\n    return false;\n  }\n\n  handleAddFilter(col, vals, merge = true, refresh = true) {\n    this.props.addFilter(col, vals, merge, refresh);\n  }\n\n  handleRenderSuccess() {\n    const { actions, chartStatus, chartId, vizType } = this.props;\n    if (['loading', 'rendered'].indexOf(chartStatus) < 0) {\n      actions.chartRenderingSucceeded(chartId);\n    }\n\n    // only log chart render time which is triggered by query results change\n    // currently we don't log chart re-render time, like window resize etc\n    if (this.hasQueryResponseChange) {\n      actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n        slice_id: chartId,\n        viz_type: vizType,\n        start_offset: this.renderStartTime,\n        ts: new Date().getTime(),\n        duration: Logger.getTimestamp() - this.renderStartTime\n      });\n    }\n  }\n\n  handleRenderFailure(error, info) {\n    const { actions, chartId } = this.props;\n    logging.warn(error);\n    actions.chartRenderingFailed(\n      error.toString(),\n      chartId,\n      info ? info.componentStack : null\n    );\n\n    // only trigger render log when query is changed\n    if (this.hasQueryResponseChange) {\n      actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n        slice_id: chartId,\n        has_err: true,\n        error_details: error.toString(),\n        start_offset: this.renderStartTime,\n        ts: new Date().getTime(),\n        duration: Logger.getTimestamp() - this.renderStartTime\n      });\n    }\n  }\n\n  handleSetControlValue(...args) {\n    const { setControlValue } = this.props;\n    if (setControlValue) {\n      setControlValue(...args);\n    }\n  }\n\n  handleOnContextMenu(offsetX, offsetY, filters) {\n    this.contextMenuRef.current.open(offsetX, offsetY, filters);\n    this.setState({ inContextMenu: true });\n  }\n\n  handleContextMenuSelected() {\n    this.setState({ inContextMenu: false });\n  }\n\n  handleContextMenuClosed() {\n    this.setState({ inContextMenu: false });\n  }\n\n  handleLegendStateChanged(legendState) {\n    this.setState({ legendState });\n  }\n\n  // When viz plugins don't handle `contextmenu` event, fallback handler\n  // calls `handleOnContextMenu` with no `filters` param.\n  onContextMenuFallback(event) {\n    if (!this.state.inContextMenu) {\n      event.preventDefault();\n      this.handleOnContextMenu(event.clientX, event.clientY);\n    }\n  }\n\n  render() {var _getChartMetadataRegi2;\n    const { chartAlert, chartStatus, chartId, emitCrossFilters } = this.props;\n\n    // Skip chart rendering\n    if (chartStatus === 'loading' || !!chartAlert || chartStatus === null) {\n      return null;\n    }\n\n    this.renderStartTime = Logger.getTimestamp();\n\n    const {\n      width,\n      height,\n      datasource,\n      annotationData,\n      initialValues,\n      ownState,\n      filterState,\n      chartIsStale,\n      formData,\n      latestQueryFormData,\n      postTransformProps\n    } = this.props;\n\n    const currentFormData =\n    chartIsStale && latestQueryFormData ? latestQueryFormData : formData;\n    const vizType = currentFormData.viz_type || this.props.vizType;\n\n    // It's bad practice to use unprefixed `vizType` as classnames for chart\n    // container. It may cause css conflicts as in the case of legacy table chart.\n    // When migrating charts, we should gradually add a `superset-chart-` prefix\n    // to each one of them.\n    const snakeCaseVizType = _snakeCase(vizType);\n    const chartClassName =\n    vizType === VizType.Table ?\n    `superset-chart-${snakeCaseVizType}` :\n    snakeCaseVizType;\n\n    const webpackHash =\n    process.env.WEBPACK_MODE === 'development' ?\n    `-${\n    // eslint-disable-next-line camelcase\n    typeof __webpack_require__ !== 'undefined' &&\n    // eslint-disable-next-line camelcase, no-undef\n    typeof __webpack_require__.h === 'function' &&\n    // eslint-disable-next-line no-undef, camelcase\n    __webpack_require__.h()}` :\n\n    '';\n\n    let noResultsComponent;\n    const noResultTitle = t('No results were returned for this query');\n    const noResultDescription =\n    this.props.source === ChartSource.Explore ?\n    t(\n      'Make sure that the controls are configured properly and the datasource contains data for the selected time range'\n    ) :\n    undefined;\n    const noResultImage = 'chart.svg';\n    if (width > BIG_NO_RESULT_MIN_WIDTH && height > BIG_NO_RESULT_MIN_HEIGHT) {\n      noResultsComponent =\n      _jsx(EmptyState, {\n        size: \"large\",\n        title: noResultTitle,\n        description: noResultDescription,\n        image: noResultImage }\n      );\n\n    } else {\n      noResultsComponent =\n      _jsx(EmptyState, { size: \"small\", title: noResultTitle, image: noResultImage });\n\n    }\n\n    // Check for Behavior.DRILL_TO_DETAIL to tell if chart can receive Drill to\n    // Detail props or if it'll cause side-effects (e.g. excessive re-renders).\n    const drillToDetailProps = (_getChartMetadataRegi2 = getChartMetadataRegistry().\n    get(formData.viz_type)) != null && _getChartMetadataRegi2.\n    behaviors.find((behavior) => behavior === Behavior.DrillToDetail) ?\n    { inContextMenu: this.state.inContextMenu } :\n    {};\n\n    return (\n      _jsxs(_Fragment, { children: [\n        this.state.showContextMenu &&\n        _jsx(ChartContextMenu, {\n          ref: this.contextMenuRef,\n          id: chartId,\n          formData: currentFormData,\n          onSelection: this.handleContextMenuSelected,\n          onClose: this.handleContextMenuClosed }\n        ),\n\n        _jsx(\"div\", {\n          onContextMenu:\n          this.state.showContextMenu ? this.onContextMenuFallback : undefined, children:\n\n\n          _jsx(SuperChart, {\n            disableErrorBoundary: true,\n\n            id: `chart-id-${chartId}`,\n            className: chartClassName,\n            chartType: vizType,\n            width: width,\n            height: height,\n            annotationData: annotationData,\n            datasource: datasource,\n            initialValues: initialValues,\n            formData: currentFormData,\n            ownState: ownState,\n            filterState: filterState,\n            hooks: this.hooks,\n            behaviors: behaviors,\n            queriesData: this.mutableQueriesResponse,\n            onRenderSuccess: this.handleRenderSuccess,\n            onRenderFailure: this.handleRenderFailure,\n            noResults: noResultsComponent,\n            postTransformProps: postTransformProps,\n            emitCrossFilters: emitCrossFilters,\n            legendState: this.state.legendState, ...\n            drillToDetailProps }, `${chartId}${webpackHash}`\n          ) }\n        )] }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nChartRenderer.propTypes = propTypes;\nChartRenderer.defaultProps = defaultProps;const _default =\n\nChartRenderer;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx\");reactHotLoader.register(BLANK, \"BLANK\", \"/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx\");reactHotLoader.register(BIG_NO_RESULT_MIN_WIDTH, \"BIG_NO_RESULT_MIN_WIDTH\", \"/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx\");reactHotLoader.register(BIG_NO_RESULT_MIN_HEIGHT, \"BIG_NO_RESULT_MIN_HEIGHT\", \"/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx\");reactHotLoader.register(behaviors, \"behaviors\", \"/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx\");reactHotLoader.register(ChartRenderer, \"ChartRenderer\", \"/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["enterModule","reactHotLoaderGlobal","undefined","module","__signature__","default","signature","a","PropTypes","createRef","Component","SuperChart","logging","Behavior","t","getChartMetadataRegistry","VizType","isFeatureEnabled","FeatureFlag","Logger","LOG_ACTIONS_RENDER_CHART","EmptyState","ChartSource","ChartContextMenu","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","propTypes","annotationData","object","actions","chartId","number","isRequired","datasource","initialValues","formData","latestQueryFormData","labelsColor","labelsColorMap","height","width","setControlValue","func","vizType","string","triggerRender","bool","chartAlert","chartStatus","queriesResponse","arrayOf","triggerQuery","chartIsStale","addFilter","setDataMask","onFilterMenuOpen","onFilterMenuClose","ownState","postTransformProps","source","oneOf","Dashboard","Explore","emitCrossFilters","BLANK","BIG_NO_RESULT_MIN_WIDTH","BIG_NO_RESULT_MIN_HEIGHT","behaviors","InteractiveChart","defaultProps","ChartRenderer","constructor","props","_getChartMetadataRegi","_props$formData$viz_t","suppressContextMenu","get","viz_type","state","showContextMenu","DrillToDetail","inContextMenu","legendState","hasQueryResponseChange","contextMenuRef","handleAddFilter","bind","handleRenderSuccess","handleRenderFailure","handleSetControlValue","handleOnContextMenu","handleContextMenuSelected","handleContextMenuClosed","handleLegendStateChanged","onContextMenuFallback","hooks","onAddFilter","onContextMenu","onError","onLegendStateChanged","dataMask","_this$props$actions","updateDataMask","mutableQueriesResponse","_cloneDeep","shouldComponentUpdate","nextProps","nextState","_nextProps$queriesRes","_nextProps$queriesRes2","resultsReady","indexOf","error","_isEqual","filterState","color_scheme","stack","cacheBusterProp","col","vals","merge","refresh","chartRenderingSucceeded","logEvent","slice_id","start_offset","renderStartTime","ts","Date","getTime","duration","getTimestamp","info","warn","chartRenderingFailed","toString","componentStack","has_err","error_details","args","offsetX","offsetY","filters","current","open","setState","event","preventDefault","clientX","clientY","render","_getChartMetadataRegi2","currentFormData","snakeCaseVizType","_snakeCase","chartClassName","Table","webpackHash","process","env","WEBPACK_MODE","__webpack_require__","h","noResultsComponent","noResultTitle","noResultDescription","noResultImage","size","title","description","image","drillToDetailProps","find","behavior","children","ref","id","onSelection","onClose","disableErrorBoundary","className","chartType","queriesData","onRenderSuccess","onRenderFailure","noResults","__reactstandin__regenerateByEval","key","code","eval","_default","reactHotLoader","register","leaveModule"],"sources":["/Users/aryurkov/superset/superset-frontend/src/components/Chart/ChartRenderer.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { snakeCase, isEqual, cloneDeep } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { createRef, Component } from 'react';\nimport {\n  SuperChart,\n  logging,\n  Behavior,\n  t,\n  getChartMetadataRegistry,\n  VizType,\n  isFeatureEnabled,\n  FeatureFlag,\n} from '@superset-ui/core';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { EmptyState } from 'src/components/EmptyState';\nimport { ChartSource } from 'src/types/ChartSource';\nimport ChartContextMenu from './ChartContextMenu/ChartContextMenu';\n\nconst propTypes = {\n  annotationData: PropTypes.object,\n  actions: PropTypes.object,\n  chartId: PropTypes.number.isRequired,\n  datasource: PropTypes.object,\n  initialValues: PropTypes.object,\n  formData: PropTypes.object.isRequired,\n  latestQueryFormData: PropTypes.object,\n  labelsColor: PropTypes.object,\n  labelsColorMap: PropTypes.object,\n  height: PropTypes.number,\n  width: PropTypes.number,\n  setControlValue: PropTypes.func,\n  vizType: PropTypes.string.isRequired,\n  triggerRender: PropTypes.bool,\n  // state\n  chartAlert: PropTypes.string,\n  chartStatus: PropTypes.string,\n  queriesResponse: PropTypes.arrayOf(PropTypes.object),\n  triggerQuery: PropTypes.bool,\n  chartIsStale: PropTypes.bool,\n  // dashboard callbacks\n  addFilter: PropTypes.func,\n  setDataMask: PropTypes.func,\n  onFilterMenuOpen: PropTypes.func,\n  onFilterMenuClose: PropTypes.func,\n  ownState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  source: PropTypes.oneOf([ChartSource.Dashboard, ChartSource.Explore]),\n  emitCrossFilters: PropTypes.bool,\n};\n\nconst BLANK = {};\n\nconst BIG_NO_RESULT_MIN_WIDTH = 300;\nconst BIG_NO_RESULT_MIN_HEIGHT = 220;\n\nconst behaviors = [Behavior.InteractiveChart];\n\nconst defaultProps = {\n  addFilter: () => BLANK,\n  onFilterMenuOpen: () => BLANK,\n  onFilterMenuClose: () => BLANK,\n  initialValues: BLANK,\n  setControlValue() {},\n  triggerRender: false,\n};\n\nclass ChartRenderer extends Component {\n  constructor(props) {\n    super(props);\n    const suppressContextMenu = getChartMetadataRegistry().get(\n      props.formData.viz_type ?? props.vizType,\n    )?.suppressContextMenu;\n    this.state = {\n      showContextMenu:\n        props.source === ChartSource.Dashboard &&\n        !suppressContextMenu &&\n        isFeatureEnabled(FeatureFlag.DrillToDetail),\n      inContextMenu: false,\n      legendState: undefined,\n    };\n    this.hasQueryResponseChange = false;\n\n    this.contextMenuRef = createRef();\n\n    this.handleAddFilter = this.handleAddFilter.bind(this);\n    this.handleRenderSuccess = this.handleRenderSuccess.bind(this);\n    this.handleRenderFailure = this.handleRenderFailure.bind(this);\n    this.handleSetControlValue = this.handleSetControlValue.bind(this);\n    this.handleOnContextMenu = this.handleOnContextMenu.bind(this);\n    this.handleContextMenuSelected = this.handleContextMenuSelected.bind(this);\n    this.handleContextMenuClosed = this.handleContextMenuClosed.bind(this);\n    this.handleLegendStateChanged = this.handleLegendStateChanged.bind(this);\n    this.onContextMenuFallback = this.onContextMenuFallback.bind(this);\n\n    this.hooks = {\n      onAddFilter: this.handleAddFilter,\n      onContextMenu: this.state.showContextMenu\n        ? this.handleOnContextMenu\n        : undefined,\n      onError: this.handleRenderFailure,\n      setControlValue: this.handleSetControlValue,\n      onFilterMenuOpen: this.props.onFilterMenuOpen,\n      onFilterMenuClose: this.props.onFilterMenuClose,\n      onLegendStateChanged: this.handleLegendStateChanged,\n      setDataMask: dataMask => {\n        this.props.actions?.updateDataMask(this.props.chartId, dataMask);\n      },\n    };\n\n    // TODO: queriesResponse comes from Redux store but it's being edited by\n    // the plugins, hence we need to clone it to avoid state mutation\n    // until we change the reducers to use Redux Toolkit with Immer\n    this.mutableQueriesResponse = cloneDeep(this.props.queriesResponse);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const resultsReady =\n      nextProps.queriesResponse &&\n      ['success', 'rendered'].indexOf(nextProps.chartStatus) > -1 &&\n      !nextProps.queriesResponse?.[0]?.error;\n\n    if (resultsReady) {\n      if (!isEqual(this.state, nextState)) {\n        return true;\n      }\n      this.hasQueryResponseChange =\n        nextProps.queriesResponse !== this.props.queriesResponse;\n\n      if (this.hasQueryResponseChange) {\n        this.mutableQueriesResponse = cloneDeep(nextProps.queriesResponse);\n      }\n\n      return (\n        this.hasQueryResponseChange ||\n        !isEqual(nextProps.datasource, this.props.datasource) ||\n        nextProps.annotationData !== this.props.annotationData ||\n        nextProps.ownState !== this.props.ownState ||\n        nextProps.filterState !== this.props.filterState ||\n        nextProps.height !== this.props.height ||\n        nextProps.width !== this.props.width ||\n        nextProps.triggerRender ||\n        nextProps.labelsColor !== this.props.labelsColor ||\n        nextProps.labelsColorMap !== this.props.labelsColorMap ||\n        nextProps.formData.color_scheme !== this.props.formData.color_scheme ||\n        nextProps.formData.stack !== this.props.formData.stack ||\n        nextProps.cacheBusterProp !== this.props.cacheBusterProp ||\n        nextProps.emitCrossFilters !== this.props.emitCrossFilters\n      );\n    }\n    return false;\n  }\n\n  handleAddFilter(col, vals, merge = true, refresh = true) {\n    this.props.addFilter(col, vals, merge, refresh);\n  }\n\n  handleRenderSuccess() {\n    const { actions, chartStatus, chartId, vizType } = this.props;\n    if (['loading', 'rendered'].indexOf(chartStatus) < 0) {\n      actions.chartRenderingSucceeded(chartId);\n    }\n\n    // only log chart render time which is triggered by query results change\n    // currently we don't log chart re-render time, like window resize etc\n    if (this.hasQueryResponseChange) {\n      actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n        slice_id: chartId,\n        viz_type: vizType,\n        start_offset: this.renderStartTime,\n        ts: new Date().getTime(),\n        duration: Logger.getTimestamp() - this.renderStartTime,\n      });\n    }\n  }\n\n  handleRenderFailure(error, info) {\n    const { actions, chartId } = this.props;\n    logging.warn(error);\n    actions.chartRenderingFailed(\n      error.toString(),\n      chartId,\n      info ? info.componentStack : null,\n    );\n\n    // only trigger render log when query is changed\n    if (this.hasQueryResponseChange) {\n      actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n        slice_id: chartId,\n        has_err: true,\n        error_details: error.toString(),\n        start_offset: this.renderStartTime,\n        ts: new Date().getTime(),\n        duration: Logger.getTimestamp() - this.renderStartTime,\n      });\n    }\n  }\n\n  handleSetControlValue(...args) {\n    const { setControlValue } = this.props;\n    if (setControlValue) {\n      setControlValue(...args);\n    }\n  }\n\n  handleOnContextMenu(offsetX, offsetY, filters) {\n    this.contextMenuRef.current.open(offsetX, offsetY, filters);\n    this.setState({ inContextMenu: true });\n  }\n\n  handleContextMenuSelected() {\n    this.setState({ inContextMenu: false });\n  }\n\n  handleContextMenuClosed() {\n    this.setState({ inContextMenu: false });\n  }\n\n  handleLegendStateChanged(legendState) {\n    this.setState({ legendState });\n  }\n\n  // When viz plugins don't handle `contextmenu` event, fallback handler\n  // calls `handleOnContextMenu` with no `filters` param.\n  onContextMenuFallback(event) {\n    if (!this.state.inContextMenu) {\n      event.preventDefault();\n      this.handleOnContextMenu(event.clientX, event.clientY);\n    }\n  }\n\n  render() {\n    const { chartAlert, chartStatus, chartId, emitCrossFilters } = this.props;\n\n    // Skip chart rendering\n    if (chartStatus === 'loading' || !!chartAlert || chartStatus === null) {\n      return null;\n    }\n\n    this.renderStartTime = Logger.getTimestamp();\n\n    const {\n      width,\n      height,\n      datasource,\n      annotationData,\n      initialValues,\n      ownState,\n      filterState,\n      chartIsStale,\n      formData,\n      latestQueryFormData,\n      postTransformProps,\n    } = this.props;\n\n    const currentFormData =\n      chartIsStale && latestQueryFormData ? latestQueryFormData : formData;\n    const vizType = currentFormData.viz_type || this.props.vizType;\n\n    // It's bad practice to use unprefixed `vizType` as classnames for chart\n    // container. It may cause css conflicts as in the case of legacy table chart.\n    // When migrating charts, we should gradually add a `superset-chart-` prefix\n    // to each one of them.\n    const snakeCaseVizType = snakeCase(vizType);\n    const chartClassName =\n      vizType === VizType.Table\n        ? `superset-chart-${snakeCaseVizType}`\n        : snakeCaseVizType;\n\n    const webpackHash =\n      process.env.WEBPACK_MODE === 'development'\n        ? `-${\n            // eslint-disable-next-line camelcase\n            typeof __webpack_require__ !== 'undefined' &&\n            // eslint-disable-next-line camelcase, no-undef\n            typeof __webpack_require__.h === 'function' &&\n            // eslint-disable-next-line no-undef, camelcase\n            __webpack_require__.h()\n          }`\n        : '';\n\n    let noResultsComponent;\n    const noResultTitle = t('No results were returned for this query');\n    const noResultDescription =\n      this.props.source === ChartSource.Explore\n        ? t(\n            'Make sure that the controls are configured properly and the datasource contains data for the selected time range',\n          )\n        : undefined;\n    const noResultImage = 'chart.svg';\n    if (width > BIG_NO_RESULT_MIN_WIDTH && height > BIG_NO_RESULT_MIN_HEIGHT) {\n      noResultsComponent = (\n        <EmptyState\n          size=\"large\"\n          title={noResultTitle}\n          description={noResultDescription}\n          image={noResultImage}\n        />\n      );\n    } else {\n      noResultsComponent = (\n        <EmptyState size=\"small\" title={noResultTitle} image={noResultImage} />\n      );\n    }\n\n    // Check for Behavior.DRILL_TO_DETAIL to tell if chart can receive Drill to\n    // Detail props or if it'll cause side-effects (e.g. excessive re-renders).\n    const drillToDetailProps = getChartMetadataRegistry()\n      .get(formData.viz_type)\n      ?.behaviors.find(behavior => behavior === Behavior.DrillToDetail)\n      ? { inContextMenu: this.state.inContextMenu }\n      : {};\n\n    return (\n      <>\n        {this.state.showContextMenu && (\n          <ChartContextMenu\n            ref={this.contextMenuRef}\n            id={chartId}\n            formData={currentFormData}\n            onSelection={this.handleContextMenuSelected}\n            onClose={this.handleContextMenuClosed}\n          />\n        )}\n        <div\n          onContextMenu={\n            this.state.showContextMenu ? this.onContextMenuFallback : undefined\n          }\n        >\n          <SuperChart\n            disableErrorBoundary\n            key={`${chartId}${webpackHash}`}\n            id={`chart-id-${chartId}`}\n            className={chartClassName}\n            chartType={vizType}\n            width={width}\n            height={height}\n            annotationData={annotationData}\n            datasource={datasource}\n            initialValues={initialValues}\n            formData={currentFormData}\n            ownState={ownState}\n            filterState={filterState}\n            hooks={this.hooks}\n            behaviors={behaviors}\n            queriesData={this.mutableQueriesResponse}\n            onRenderSuccess={this.handleRenderSuccess}\n            onRenderFailure={this.handleRenderFailure}\n            noResults={noResultsComponent}\n            postTransformProps={postTransformProps}\n            emitCrossFilters={emitCrossFilters}\n            legendState={this.state.legendState}\n            {...drillToDetailProps}\n          />\n        </div>\n      </>\n    );\n  }\n}\n\nChartRenderer.propTypes = propTypes;\nChartRenderer.defaultProps = defaultProps;\n\nexport default ChartRenderer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}