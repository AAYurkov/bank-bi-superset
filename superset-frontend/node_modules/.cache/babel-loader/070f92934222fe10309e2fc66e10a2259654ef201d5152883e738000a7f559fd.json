{"ast":null,"code":"import { css as _css } from \"@emotion/react\";import _throttle from \"lodash/throttle\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};\n\nimport { memo, useEffect, useState, useCallback, useMemo, useRef, createContext } from 'react';\nimport cx from 'classnames';\nimport { styled, t, useTheme } from '@superset-ui/core';\nimport { Icons } from 'src/components/Icons';\nimport Loading from 'src/components/Loading';\nimport { EmptyState } from 'src/components/EmptyState';\nimport { getFilterBarTestId } from './utils';\nimport Header from './Header';\nimport FilterControls from './FilterControls/FilterControls';\nimport CrossFiltersVertical from './CrossFilters/Vertical';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst BarWrapper = styled.div`\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n\n  & .ant-tabs-top > .ant-tabs-nav {\n    margin: 0;\n  }\n  &.open {\n    width: ${({ width }) => width}px; // arbitrary...\n  }\n`;\nconst Bar = styled.div`\n  ${({ theme, width }) => `\n    & .ant-typography-edit-content {\n      left: 0;\n      margin-top: 0;\n      width: 100%;\n    }\n    position: absolute;\n    top: 0;\n    left: 0;\n    flex-direction: column;\n    flex-grow: 1;\n    width: ${width}px;\n    background: ${theme.colors.grayscale.light5};\n    border-right: 1px solid ${theme.colors.grayscale.light2};\n    border-bottom: 1px solid ${theme.colors.grayscale.light2};\n    min-height: 100%;\n    display: none;\n    &.open {\n      display: flex;\n    }\n  `}\n`;\nconst CollapsedBar = styled.div`\n  ${({ theme, offset }) => `\n    position: absolute;\n    top: ${offset}px;\n    left: 0;\n    height: 100%;\n    width: ${theme.gridUnit * 8}px;\n    padding-top: ${theme.gridUnit * 2}px;\n    display: none;\n    text-align: center;\n    &.open {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: ${theme.gridUnit * 2}px;\n    }\n    svg {\n      cursor: pointer;\n    }\n  `}\n`;\nconst FilterBarEmptyStateContainer = styled.div`\n  margin-top: ${({ theme }) => theme.gridUnit * 8}px;\n`;\nconst FilterControlsWrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 4}px;\n  // 108px padding to make room for buttons with position: absolute\n  padding-bottom: ${({ theme }) => theme.gridUnit * 27}px;\n`;\nexport const FilterBarScrollContext = /*#__PURE__*/createContext(false);\nconst VerticalFilterBar = ({ actions, canEdit, dataMaskSelected, filtersOpen, filterValues, height, isInitialized, offset, onSelectionChange, toggleFiltersBar, width }) => {\n  const theme = useTheme();\n  const [isScrolling, setIsScrolling] = useState(false);\n  const timeout = useRef();\n  const openFiltersBar = useCallback(() => toggleFiltersBar(true), [toggleFiltersBar]);\n  const onScroll = useMemo(() => _throttle(() => {\n    clearTimeout(timeout.current);\n    setIsScrolling(true);\n    timeout.current = setTimeout(() => {\n      setIsScrolling(false);\n    }, 300);\n  }, 200), []);\n  useEffect(() => {\n    document.onscroll = onScroll;\n    return () => {\n      document.onscroll = null;\n    };\n  }, [onScroll]);\n  const tabPaneStyle = useMemo(() => ({ overflow: 'auto', height, overscrollBehavior: 'contain' }), [height]);\n  const filterControls = useMemo(() => filterValues.length === 0 ? _jsx(FilterBarEmptyStateContainer, { children:\n    _jsx(EmptyState, { size: \"small\", title: t('No global filters are currently added'), image: \"filter.svg\", description: canEdit &&\n      t('Click on \"Add or Edit Filters\" option in Settings to create new dashboard filters') }) }\n  ) : _jsx(FilterControlsWrapper, { children:\n    _jsx(FilterControls, { dataMaskSelected: dataMaskSelected, onFilterSelectionChange: onSelectionChange }) }\n  ), [canEdit, dataMaskSelected, filterValues.length, onSelectionChange]);\n  return _jsx(FilterBarScrollContext.Provider, { value: isScrolling, children:\n    _jsxs(BarWrapper, { ...getFilterBarTestId(), className: cx({ open: filtersOpen }), width: width, children: [\n      _jsxs(CollapsedBar, { ...getFilterBarTestId('collapsable'), className: cx({ open: !filtersOpen }), onClick: openFiltersBar, role: \"button\", offset: offset, children: [\n        _jsx(Icons.VerticalAlignTopOutlined, { iconSize: \"l\", css: /*#__PURE__*/_css({\n            transform: 'rotate(90deg)',\n            marginBottom: `${theme.gridUnit * 3}px`\n          }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:VerticalFilterBar;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvbmF0aXZlRmlsdGVycy9GaWx0ZXJCYXIvVmVydGljYWwudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlIdUQiLCJmaWxlIjoiL1VzZXJzL2FyeXVya292L3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9uYXRpdmVGaWx0ZXJzL0ZpbHRlckJhci9WZXJ0aWNhbC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgbWVtbywgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8sIHVzZVJlZiwgY3JlYXRlQ29udGV4dCwgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBzdHlsZWQsIHQsIHVzZVRoZW1lIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgSWNvbnMgfSBmcm9tICdzcmMvY29tcG9uZW50cy9JY29ucyc7XG5pbXBvcnQgTG9hZGluZyBmcm9tICdzcmMvY29tcG9uZW50cy9Mb2FkaW5nJztcbmltcG9ydCB7IEVtcHR5U3RhdGUgfSBmcm9tICdzcmMvY29tcG9uZW50cy9FbXB0eVN0YXRlJztcbmltcG9ydCB7IGdldEZpbHRlckJhclRlc3RJZCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlcic7XG5pbXBvcnQgRmlsdGVyQ29udHJvbHMgZnJvbSAnLi9GaWx0ZXJDb250cm9scy9GaWx0ZXJDb250cm9scyc7XG5pbXBvcnQgQ3Jvc3NGaWx0ZXJzVmVydGljYWwgZnJvbSAnLi9Dcm9zc0ZpbHRlcnMvVmVydGljYWwnO1xuY29uc3QgQmFyV3JhcHBlciA9IHN0eWxlZC5kaXYgYFxuICB3aWR0aDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdCAqIDh9cHg7XG5cbiAgJiAuYW50LXRhYnMtdG9wID4gLmFudC10YWJzLW5hdiB7XG4gICAgbWFyZ2luOiAwO1xuICB9XG4gICYub3BlbiB7XG4gICAgd2lkdGg6ICR7KHsgd2lkdGggfSkgPT4gd2lkdGh9cHg7IC8vIGFyYml0cmFyeS4uLlxuICB9XG5gO1xuY29uc3QgQmFyID0gc3R5bGVkLmRpdiBgXG4gICR7KHsgdGhlbWUsIHdpZHRoIH0pID0+IGBcbiAgICAmIC5hbnQtdHlwb2dyYXBoeS1lZGl0LWNvbnRlbnQge1xuICAgICAgbGVmdDogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZmxleC1ncm93OiAxO1xuICAgIHdpZHRoOiAke3dpZHRofXB4O1xuICAgIGJhY2tncm91bmQ6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDV9O1xuICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbiAgICBtaW4taGVpZ2h0OiAxMDAlO1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgJi5vcGVuIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICBgfVxuYDtcbmNvbnN0IENvbGxhcHNlZEJhciA9IHN0eWxlZC5kaXYgYFxuICAkeyh7IHRoZW1lLCBvZmZzZXQgfSkgPT4gYFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6ICR7b2Zmc2V0fXB4O1xuICAgIGxlZnQ6IDA7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHdpZHRoOiAke3RoZW1lLmdyaWRVbml0ICogOH1weDtcbiAgICBwYWRkaW5nLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHg7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgJi5vcGVuIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIHBhZGRpbmc6ICR7dGhlbWUuZ3JpZFVuaXQgKiAyfXB4O1xuICAgIH1cbiAgICBzdmcge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgYH1cbmA7XG5jb25zdCBGaWx0ZXJCYXJFbXB0eVN0YXRlQ29udGFpbmVyID0gc3R5bGVkLmRpdiBgXG4gIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA4fXB4O1xuYDtcbmNvbnN0IEZpbHRlckNvbnRyb2xzV3JhcHBlciA9IHN0eWxlZC5kaXYgYFxuICBwYWRkaW5nOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgLy8gMTA4cHggcGFkZGluZyB0byBtYWtlIHJvb20gZm9yIGJ1dHRvbnMgd2l0aCBwb3NpdGlvbjogYWJzb2x1dGVcbiAgcGFkZGluZy1ib3R0b206ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiAyN31weDtcbmA7XG5leHBvcnQgY29uc3QgRmlsdGVyQmFyU2Nyb2xsQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoZmFsc2UpO1xuY29uc3QgVmVydGljYWxGaWx0ZXJCYXIgPSAoeyBhY3Rpb25zLCBjYW5FZGl0LCBkYXRhTWFza1NlbGVjdGVkLCBmaWx0ZXJzT3BlbiwgZmlsdGVyVmFsdWVzLCBoZWlnaHQsIGlzSW5pdGlhbGl6ZWQsIG9mZnNldCwgb25TZWxlY3Rpb25DaGFuZ2UsIHRvZ2dsZUZpbHRlcnNCYXIsIHdpZHRoLCB9KSA9PiB7XG4gICAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuICAgIGNvbnN0IFtpc1Njcm9sbGluZywgc2V0SXNTY3JvbGxpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB1c2VSZWYoKTtcbiAgICBjb25zdCBvcGVuRmlsdGVyc0JhciA9IHVzZUNhbGxiYWNrKCgpID0+IHRvZ2dsZUZpbHRlcnNCYXIodHJ1ZSksIFt0b2dnbGVGaWx0ZXJzQmFyXSk7XG4gICAgY29uc3Qgb25TY3JvbGwgPSB1c2VNZW1vKCgpID0+IHRocm90dGxlKCgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQuY3VycmVudCk7XG4gICAgICAgIHNldElzU2Nyb2xsaW5nKHRydWUpO1xuICAgICAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldElzU2Nyb2xsaW5nKGZhbHNlKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICB9LCAyMDApLCBbXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQub25zY3JvbGwgPSBvblNjcm9sbDtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50Lm9uc2Nyb2xsID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICB9LCBbb25TY3JvbGxdKTtcbiAgICBjb25zdCB0YWJQYW5lU3R5bGUgPSB1c2VNZW1vKCgpID0+ICh7IG92ZXJmbG93OiAnYXV0bycsIGhlaWdodCwgb3ZlcnNjcm9sbEJlaGF2aW9yOiAnY29udGFpbicgfSksIFtoZWlnaHRdKTtcbiAgICBjb25zdCBmaWx0ZXJDb250cm9scyA9IHVzZU1lbW8oKCkgPT4gZmlsdGVyVmFsdWVzLmxlbmd0aCA9PT0gMCA/ICg8RmlsdGVyQmFyRW1wdHlTdGF0ZUNvbnRhaW5lcj5cbiAgICAgICAgICA8RW1wdHlTdGF0ZSBzaXplPVwic21hbGxcIiB0aXRsZT17dCgnTm8gZ2xvYmFsIGZpbHRlcnMgYXJlIGN1cnJlbnRseSBhZGRlZCcpfSBpbWFnZT1cImZpbHRlci5zdmdcIiBkZXNjcmlwdGlvbj17Y2FuRWRpdCAmJlxuICAgICAgICAgICAgdCgnQ2xpY2sgb24gXCJBZGQgb3IgRWRpdCBGaWx0ZXJzXCIgb3B0aW9uIGluIFNldHRpbmdzIHRvIGNyZWF0ZSBuZXcgZGFzaGJvYXJkIGZpbHRlcnMnKX0vPlxuICAgICAgICA8L0ZpbHRlckJhckVtcHR5U3RhdGVDb250YWluZXI+KSA6ICg8RmlsdGVyQ29udHJvbHNXcmFwcGVyPlxuICAgICAgICAgIDxGaWx0ZXJDb250cm9scyBkYXRhTWFza1NlbGVjdGVkPXtkYXRhTWFza1NlbGVjdGVkfSBvbkZpbHRlclNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9Lz5cbiAgICAgICAgPC9GaWx0ZXJDb250cm9sc1dyYXBwZXI+KSwgW2NhbkVkaXQsIGRhdGFNYXNrU2VsZWN0ZWQsIGZpbHRlclZhbHVlcy5sZW5ndGgsIG9uU2VsZWN0aW9uQ2hhbmdlXSk7XG4gICAgcmV0dXJuICg8RmlsdGVyQmFyU2Nyb2xsQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17aXNTY3JvbGxpbmd9PlxuICAgICAgPEJhcldyYXBwZXIgey4uLmdldEZpbHRlckJhclRlc3RJZCgpfSBjbGFzc05hbWU9e2N4KHsgb3BlbjogZmlsdGVyc09wZW4gfSl9IHdpZHRoPXt3aWR0aH0+XG4gICAgICAgIDxDb2xsYXBzZWRCYXIgey4uLmdldEZpbHRlckJhclRlc3RJZCgnY29sbGFwc2FibGUnKX0gY2xhc3NOYW1lPXtjeCh7IG9wZW46ICFmaWx0ZXJzT3BlbiB9KX0gb25DbGljaz17b3BlbkZpbHRlcnNCYXJ9IHJvbGU9XCJidXR0b25cIiBvZmZzZXQ9e29mZnNldH0+XG4gICAgICAgICAgPEljb25zLlZlcnRpY2FsQWxpZ25Ub3BPdXRsaW5lZCBpY29uU2l6ZT1cImxcIiBjc3M9e3tcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSg5MGRlZyknLFxuICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBgJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHhgLFxuICAgICAgICB9fSBjbGFzc05hbWU9XCJjb2xsYXBzZS1pY29uXCIgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5iYXNlfSB7Li4uZ2V0RmlsdGVyQmFyVGVzdElkKCdleHBhbmQtYnV0dG9uJyl9Lz5cbiAgICAgICAgICA8SWNvbnMuRmlsdGVyT3V0bGluZWQgey4uLmdldEZpbHRlckJhclRlc3RJZCgnZmlsdGVyLWljb24nKX0gaWNvblNpemU9XCJsXCIvPlxuICAgICAgICA8L0NvbGxhcHNlZEJhcj5cbiAgICAgICAgPEJhciBjbGFzc05hbWU9e2N4KHsgb3BlbjogZmlsdGVyc09wZW4gfSl9IHdpZHRoPXt3aWR0aH0+XG4gICAgICAgICAgPEhlYWRlciB0b2dnbGVGaWx0ZXJzQmFyPXt0b2dnbGVGaWx0ZXJzQmFyfS8+XG4gICAgICAgICAgeyFpc0luaXRpYWxpemVkID8gKDxkaXYgY3NzPXt7IGhlaWdodCB9fT5cbiAgICAgICAgICAgICAgPExvYWRpbmcgLz5cbiAgICAgICAgICAgIDwvZGl2PikgOiAoPGRpdiBjc3M9e3RhYlBhbmVTdHlsZX0gb25TY3JvbGw9e29uU2Nyb2xsfT5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8Q3Jvc3NGaWx0ZXJzVmVydGljYWwgLz5cbiAgICAgICAgICAgICAgICB7ZmlsdGVyQ29udHJvbHN9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICB7YWN0aW9uc31cbiAgICAgICAgPC9CYXI+XG4gICAgICA8L0JhcldyYXBwZXI+XG4gICAgPC9GaWx0ZXJCYXJTY3JvbGxDb250ZXh0LlByb3ZpZGVyPik7XG59O1xuZXhwb3J0IGRlZmF1bHQgbWVtbyhWZXJ0aWNhbEZpbHRlckJhcik7XG4iXX0= */\"), className: \"collapse-icon\", iconColor: theme.colors.primary.base, ...getFilterBarTestId('expand-button') }),\n        _jsx(Icons.FilterOutlined, { ...getFilterBarTestId('filter-icon'), iconSize: \"l\" })] }\n      ),\n      _jsxs(Bar, { className: cx({ open: filtersOpen }), width: width, children: [\n        _jsx(Header, { toggleFiltersBar: toggleFiltersBar }),\n        !isInitialized ? _jsx(\"div\", { css: /*#__PURE__*/_css({ height }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:VerticalFilterBar;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvbmF0aXZlRmlsdGVycy9GaWx0ZXJCYXIvVmVydGljYWwudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlJa0MiLCJmaWxlIjoiL1VzZXJzL2FyeXVya292L3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9uYXRpdmVGaWx0ZXJzL0ZpbHRlckJhci9WZXJ0aWNhbC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgbWVtbywgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8sIHVzZVJlZiwgY3JlYXRlQ29udGV4dCwgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBzdHlsZWQsIHQsIHVzZVRoZW1lIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgSWNvbnMgfSBmcm9tICdzcmMvY29tcG9uZW50cy9JY29ucyc7XG5pbXBvcnQgTG9hZGluZyBmcm9tICdzcmMvY29tcG9uZW50cy9Mb2FkaW5nJztcbmltcG9ydCB7IEVtcHR5U3RhdGUgfSBmcm9tICdzcmMvY29tcG9uZW50cy9FbXB0eVN0YXRlJztcbmltcG9ydCB7IGdldEZpbHRlckJhclRlc3RJZCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlcic7XG5pbXBvcnQgRmlsdGVyQ29udHJvbHMgZnJvbSAnLi9GaWx0ZXJDb250cm9scy9GaWx0ZXJDb250cm9scyc7XG5pbXBvcnQgQ3Jvc3NGaWx0ZXJzVmVydGljYWwgZnJvbSAnLi9Dcm9zc0ZpbHRlcnMvVmVydGljYWwnO1xuY29uc3QgQmFyV3JhcHBlciA9IHN0eWxlZC5kaXYgYFxuICB3aWR0aDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdCAqIDh9cHg7XG5cbiAgJiAuYW50LXRhYnMtdG9wID4gLmFudC10YWJzLW5hdiB7XG4gICAgbWFyZ2luOiAwO1xuICB9XG4gICYub3BlbiB7XG4gICAgd2lkdGg6ICR7KHsgd2lkdGggfSkgPT4gd2lkdGh9cHg7IC8vIGFyYml0cmFyeS4uLlxuICB9XG5gO1xuY29uc3QgQmFyID0gc3R5bGVkLmRpdiBgXG4gICR7KHsgdGhlbWUsIHdpZHRoIH0pID0+IGBcbiAgICAmIC5hbnQtdHlwb2dyYXBoeS1lZGl0LWNvbnRlbnQge1xuICAgICAgbGVmdDogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZmxleC1ncm93OiAxO1xuICAgIHdpZHRoOiAke3dpZHRofXB4O1xuICAgIGJhY2tncm91bmQ6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDV9O1xuICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbiAgICBtaW4taGVpZ2h0OiAxMDAlO1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgJi5vcGVuIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICBgfVxuYDtcbmNvbnN0IENvbGxhcHNlZEJhciA9IHN0eWxlZC5kaXYgYFxuICAkeyh7IHRoZW1lLCBvZmZzZXQgfSkgPT4gYFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6ICR7b2Zmc2V0fXB4O1xuICAgIGxlZnQ6IDA7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHdpZHRoOiAke3RoZW1lLmdyaWRVbml0ICogOH1weDtcbiAgICBwYWRkaW5nLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHg7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgJi5vcGVuIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIHBhZGRpbmc6ICR7dGhlbWUuZ3JpZFVuaXQgKiAyfXB4O1xuICAgIH1cbiAgICBzdmcge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgYH1cbmA7XG5jb25zdCBGaWx0ZXJCYXJFbXB0eVN0YXRlQ29udGFpbmVyID0gc3R5bGVkLmRpdiBgXG4gIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA4fXB4O1xuYDtcbmNvbnN0IEZpbHRlckNvbnRyb2xzV3JhcHBlciA9IHN0eWxlZC5kaXYgYFxuICBwYWRkaW5nOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgLy8gMTA4cHggcGFkZGluZyB0byBtYWtlIHJvb20gZm9yIGJ1dHRvbnMgd2l0aCBwb3NpdGlvbjogYWJzb2x1dGVcbiAgcGFkZGluZy1ib3R0b206ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiAyN31weDtcbmA7XG5leHBvcnQgY29uc3QgRmlsdGVyQmFyU2Nyb2xsQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoZmFsc2UpO1xuY29uc3QgVmVydGljYWxGaWx0ZXJCYXIgPSAoeyBhY3Rpb25zLCBjYW5FZGl0LCBkYXRhTWFza1NlbGVjdGVkLCBmaWx0ZXJzT3BlbiwgZmlsdGVyVmFsdWVzLCBoZWlnaHQsIGlzSW5pdGlhbGl6ZWQsIG9mZnNldCwgb25TZWxlY3Rpb25DaGFuZ2UsIHRvZ2dsZUZpbHRlcnNCYXIsIHdpZHRoLCB9KSA9PiB7XG4gICAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuICAgIGNvbnN0IFtpc1Njcm9sbGluZywgc2V0SXNTY3JvbGxpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB1c2VSZWYoKTtcbiAgICBjb25zdCBvcGVuRmlsdGVyc0JhciA9IHVzZUNhbGxiYWNrKCgpID0+IHRvZ2dsZUZpbHRlcnNCYXIodHJ1ZSksIFt0b2dnbGVGaWx0ZXJzQmFyXSk7XG4gICAgY29uc3Qgb25TY3JvbGwgPSB1c2VNZW1vKCgpID0+IHRocm90dGxlKCgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQuY3VycmVudCk7XG4gICAgICAgIHNldElzU2Nyb2xsaW5nKHRydWUpO1xuICAgICAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldElzU2Nyb2xsaW5nKGZhbHNlKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICB9LCAyMDApLCBbXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQub25zY3JvbGwgPSBvblNjcm9sbDtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50Lm9uc2Nyb2xsID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICB9LCBbb25TY3JvbGxdKTtcbiAgICBjb25zdCB0YWJQYW5lU3R5bGUgPSB1c2VNZW1vKCgpID0+ICh7IG92ZXJmbG93OiAnYXV0bycsIGhlaWdodCwgb3ZlcnNjcm9sbEJlaGF2aW9yOiAnY29udGFpbicgfSksIFtoZWlnaHRdKTtcbiAgICBjb25zdCBmaWx0ZXJDb250cm9scyA9IHVzZU1lbW8oKCkgPT4gZmlsdGVyVmFsdWVzLmxlbmd0aCA9PT0gMCA/ICg8RmlsdGVyQmFyRW1wdHlTdGF0ZUNvbnRhaW5lcj5cbiAgICAgICAgICA8RW1wdHlTdGF0ZSBzaXplPVwic21hbGxcIiB0aXRsZT17dCgnTm8gZ2xvYmFsIGZpbHRlcnMgYXJlIGN1cnJlbnRseSBhZGRlZCcpfSBpbWFnZT1cImZpbHRlci5zdmdcIiBkZXNjcmlwdGlvbj17Y2FuRWRpdCAmJlxuICAgICAgICAgICAgdCgnQ2xpY2sgb24gXCJBZGQgb3IgRWRpdCBGaWx0ZXJzXCIgb3B0aW9uIGluIFNldHRpbmdzIHRvIGNyZWF0ZSBuZXcgZGFzaGJvYXJkIGZpbHRlcnMnKX0vPlxuICAgICAgICA8L0ZpbHRlckJhckVtcHR5U3RhdGVDb250YWluZXI+KSA6ICg8RmlsdGVyQ29udHJvbHNXcmFwcGVyPlxuICAgICAgICAgIDxGaWx0ZXJDb250cm9scyBkYXRhTWFza1NlbGVjdGVkPXtkYXRhTWFza1NlbGVjdGVkfSBvbkZpbHRlclNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9Lz5cbiAgICAgICAgPC9GaWx0ZXJDb250cm9sc1dyYXBwZXI+KSwgW2NhbkVkaXQsIGRhdGFNYXNrU2VsZWN0ZWQsIGZpbHRlclZhbHVlcy5sZW5ndGgsIG9uU2VsZWN0aW9uQ2hhbmdlXSk7XG4gICAgcmV0dXJuICg8RmlsdGVyQmFyU2Nyb2xsQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17aXNTY3JvbGxpbmd9PlxuICAgICAgPEJhcldyYXBwZXIgey4uLmdldEZpbHRlckJhclRlc3RJZCgpfSBjbGFzc05hbWU9e2N4KHsgb3BlbjogZmlsdGVyc09wZW4gfSl9IHdpZHRoPXt3aWR0aH0+XG4gICAgICAgIDxDb2xsYXBzZWRCYXIgey4uLmdldEZpbHRlckJhclRlc3RJZCgnY29sbGFwc2FibGUnKX0gY2xhc3NOYW1lPXtjeCh7IG9wZW46ICFmaWx0ZXJzT3BlbiB9KX0gb25DbGljaz17b3BlbkZpbHRlcnNCYXJ9IHJvbGU9XCJidXR0b25cIiBvZmZzZXQ9e29mZnNldH0+XG4gICAgICAgICAgPEljb25zLlZlcnRpY2FsQWxpZ25Ub3BPdXRsaW5lZCBpY29uU2l6ZT1cImxcIiBjc3M9e3tcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSg5MGRlZyknLFxuICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBgJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHhgLFxuICAgICAgICB9fSBjbGFzc05hbWU9XCJjb2xsYXBzZS1pY29uXCIgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5iYXNlfSB7Li4uZ2V0RmlsdGVyQmFyVGVzdElkKCdleHBhbmQtYnV0dG9uJyl9Lz5cbiAgICAgICAgICA8SWNvbnMuRmlsdGVyT3V0bGluZWQgey4uLmdldEZpbHRlckJhclRlc3RJZCgnZmlsdGVyLWljb24nKX0gaWNvblNpemU9XCJsXCIvPlxuICAgICAgICA8L0NvbGxhcHNlZEJhcj5cbiAgICAgICAgPEJhciBjbGFzc05hbWU9e2N4KHsgb3BlbjogZmlsdGVyc09wZW4gfSl9IHdpZHRoPXt3aWR0aH0+XG4gICAgICAgICAgPEhlYWRlciB0b2dnbGVGaWx0ZXJzQmFyPXt0b2dnbGVGaWx0ZXJzQmFyfS8+XG4gICAgICAgICAgeyFpc0luaXRpYWxpemVkID8gKDxkaXYgY3NzPXt7IGhlaWdodCB9fT5cbiAgICAgICAgICAgICAgPExvYWRpbmcgLz5cbiAgICAgICAgICAgIDwvZGl2PikgOiAoPGRpdiBjc3M9e3RhYlBhbmVTdHlsZX0gb25TY3JvbGw9e29uU2Nyb2xsfT5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8Q3Jvc3NGaWx0ZXJzVmVydGljYWwgLz5cbiAgICAgICAgICAgICAgICB7ZmlsdGVyQ29udHJvbHN9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICB7YWN0aW9uc31cbiAgICAgICAgPC9CYXI+XG4gICAgICA8L0JhcldyYXBwZXI+XG4gICAgPC9GaWx0ZXJCYXJTY3JvbGxDb250ZXh0LlByb3ZpZGVyPik7XG59O1xuZXhwb3J0IGRlZmF1bHQgbWVtbyhWZXJ0aWNhbEZpbHRlckJhcik7XG4iXX0= */\"), children:\n          _jsx(Loading, {}) }\n        ) : _jsx(\"div\", { css: tabPaneStyle, onScroll: onScroll, children:\n          _jsxs(_Fragment, { children: [\n            _jsx(CrossFiltersVertical, {}),\n            filterControls] }\n          ) }\n        ),\n        actions] }\n      )] }\n    ) }\n  );\n};__signature__(VerticalFilterBar, \"useTheme{theme}\\nuseState{[isScrolling, setIsScrolling](false)}\\nuseRef{timeout}\\nuseCallback{openFiltersBar}\\nuseMemo{onScroll}\\nuseEffect{}\\nuseMemo{tabPaneStyle}\\nuseMemo{filterControls}\", () => [useTheme]);const _default = /*#__PURE__*/\nmemo(VerticalFilterBar);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(BarWrapper, \"BarWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx\");reactHotLoader.register(Bar, \"Bar\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx\");reactHotLoader.register(CollapsedBar, \"CollapsedBar\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx\");reactHotLoader.register(FilterBarEmptyStateContainer, \"FilterBarEmptyStateContainer\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx\");reactHotLoader.register(FilterControlsWrapper, \"FilterControlsWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx\");reactHotLoader.register(FilterBarScrollContext, \"FilterBarScrollContext\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx\");reactHotLoader.register(VerticalFilterBar, \"VerticalFilterBar\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["enterModule","reactHotLoaderGlobal","undefined","module","__signature__","default","signature","a","memo","useEffect","useState","useCallback","useMemo","useRef","createContext","cx","styled","t","useTheme","Icons","Loading","EmptyState","getFilterBarTestId","Header","FilterControls","CrossFiltersVertical","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BarWrapper","div","theme","gridUnit","width","Bar","colors","grayscale","light5","light2","CollapsedBar","offset","FilterBarEmptyStateContainer","FilterControlsWrapper","FilterBarScrollContext","VerticalFilterBar","actions","canEdit","dataMaskSelected","filtersOpen","filterValues","height","isInitialized","onSelectionChange","toggleFiltersBar","isScrolling","setIsScrolling","timeout","openFiltersBar","onScroll","_throttle","clearTimeout","current","setTimeout","document","onscroll","tabPaneStyle","overflow","overscrollBehavior","filterControls","length","children","size","title","image","description","onFilterSelectionChange","Provider","value","className","open","onClick","role","VerticalAlignTopOutlined","iconSize","css","_css","transform","marginBottom","process","env","NODE_ENV","iconColor","primary","base","FilterOutlined","_default","reactHotLoader","register","leaveModule"],"sources":["/Users/aryurkov/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable no-param-reassign */\nimport { throttle } from 'lodash';\nimport {\n  memo,\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n  useRef,\n  createContext,\n  FC,\n} from 'react';\nimport cx from 'classnames';\nimport { styled, t, useTheme } from '@superset-ui/core';\nimport { Icons } from 'src/components/Icons';\nimport Loading from 'src/components/Loading';\nimport { EmptyState } from 'src/components/EmptyState';\nimport { getFilterBarTestId } from './utils';\nimport { VerticalBarProps } from './types';\nimport Header from './Header';\nimport FilterControls from './FilterControls/FilterControls';\nimport CrossFiltersVertical from './CrossFilters/Vertical';\n\nconst BarWrapper = styled.div<{ width: number }>`\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n\n  & .ant-tabs-top > .ant-tabs-nav {\n    margin: 0;\n  }\n  &.open {\n    width: ${({ width }) => width}px; // arbitrary...\n  }\n`;\n\nconst Bar = styled.div<{ width: number }>`\n  ${({ theme, width }) => `\n    & .ant-typography-edit-content {\n      left: 0;\n      margin-top: 0;\n      width: 100%;\n    }\n    position: absolute;\n    top: 0;\n    left: 0;\n    flex-direction: column;\n    flex-grow: 1;\n    width: ${width}px;\n    background: ${theme.colors.grayscale.light5};\n    border-right: 1px solid ${theme.colors.grayscale.light2};\n    border-bottom: 1px solid ${theme.colors.grayscale.light2};\n    min-height: 100%;\n    display: none;\n    &.open {\n      display: flex;\n    }\n  `}\n`;\n\nconst CollapsedBar = styled.div<{ offset: number }>`\n  ${({ theme, offset }) => `\n    position: absolute;\n    top: ${offset}px;\n    left: 0;\n    height: 100%;\n    width: ${theme.gridUnit * 8}px;\n    padding-top: ${theme.gridUnit * 2}px;\n    display: none;\n    text-align: center;\n    &.open {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: ${theme.gridUnit * 2}px;\n    }\n    svg {\n      cursor: pointer;\n    }\n  `}\n`;\n\nconst FilterBarEmptyStateContainer = styled.div`\n  margin-top: ${({ theme }) => theme.gridUnit * 8}px;\n`;\n\nconst FilterControlsWrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 4}px;\n  // 108px padding to make room for buttons with position: absolute\n  padding-bottom: ${({ theme }) => theme.gridUnit * 27}px;\n`;\n\nexport const FilterBarScrollContext = createContext(false);\nconst VerticalFilterBar: FC<VerticalBarProps> = ({\n  actions,\n  canEdit,\n  dataMaskSelected,\n  filtersOpen,\n  filterValues,\n  height,\n  isInitialized,\n  offset,\n  onSelectionChange,\n  toggleFiltersBar,\n  width,\n}) => {\n  const theme = useTheme();\n  const [isScrolling, setIsScrolling] = useState(false);\n  const timeout = useRef<any>();\n\n  const openFiltersBar = useCallback(\n    () => toggleFiltersBar(true),\n    [toggleFiltersBar],\n  );\n\n  const onScroll = useMemo(\n    () =>\n      throttle(() => {\n        clearTimeout(timeout.current);\n        setIsScrolling(true);\n        timeout.current = setTimeout(() => {\n          setIsScrolling(false);\n        }, 300);\n      }, 200),\n    [],\n  );\n\n  useEffect(() => {\n    document.onscroll = onScroll;\n    return () => {\n      document.onscroll = null;\n    };\n  }, [onScroll]);\n\n  const tabPaneStyle = useMemo(\n    () => ({ overflow: 'auto', height, overscrollBehavior: 'contain' }),\n    [height],\n  );\n\n  const filterControls = useMemo(\n    () =>\n      filterValues.length === 0 ? (\n        <FilterBarEmptyStateContainer>\n          <EmptyState\n            size=\"small\"\n            title={t('No global filters are currently added')}\n            image=\"filter.svg\"\n            description={\n              canEdit &&\n              t(\n                'Click on \"Add or Edit Filters\" option in Settings to create new dashboard filters',\n              )\n            }\n          />\n        </FilterBarEmptyStateContainer>\n      ) : (\n        <FilterControlsWrapper>\n          <FilterControls\n            dataMaskSelected={dataMaskSelected}\n            onFilterSelectionChange={onSelectionChange}\n          />\n        </FilterControlsWrapper>\n      ),\n    [canEdit, dataMaskSelected, filterValues.length, onSelectionChange],\n  );\n\n  return (\n    <FilterBarScrollContext.Provider value={isScrolling}>\n      <BarWrapper\n        {...getFilterBarTestId()}\n        className={cx({ open: filtersOpen })}\n        width={width}\n      >\n        <CollapsedBar\n          {...getFilterBarTestId('collapsable')}\n          className={cx({ open: !filtersOpen })}\n          onClick={openFiltersBar}\n          role=\"button\"\n          offset={offset}\n        >\n          <Icons.VerticalAlignTopOutlined\n            iconSize=\"l\"\n            css={{\n              transform: 'rotate(90deg)',\n              marginBottom: `${theme.gridUnit * 3}px`,\n            }}\n            className=\"collapse-icon\"\n            iconColor={theme.colors.primary.base}\n            {...getFilterBarTestId('expand-button')}\n          />\n          <Icons.FilterOutlined\n            {...getFilterBarTestId('filter-icon')}\n            iconSize=\"l\"\n          />\n        </CollapsedBar>\n        <Bar className={cx({ open: filtersOpen })} width={width}>\n          <Header toggleFiltersBar={toggleFiltersBar} />\n          {!isInitialized ? (\n            <div css={{ height }}>\n              <Loading />\n            </div>\n          ) : (\n            <div css={tabPaneStyle} onScroll={onScroll}>\n              <>\n                <CrossFiltersVertical />\n                {filterControls}\n              </>\n            </div>\n          )}\n          {actions}\n        </Bar>\n      </BarWrapper>\n    </FilterBarScrollContext.Provider>\n  );\n};\nexport default memo(VerticalFilterBar);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}