{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport cx from 'classnames';\nimport { memo, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { addAlpha, css, styled, t, useTheme, useElementOnScreen } from '@superset-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport BuilderComponentPane from 'src/dashboard/components/BuilderComponentPane';\nimport DashboardHeader from 'src/dashboard/components/Header';\nimport { Icons } from 'src/components/Icons';\nimport IconButton from 'src/dashboard/components/IconButton';\nimport { Droppable } from 'src/dashboard/components/dnd/DragDroppable';\nimport DashboardComponent from 'src/dashboard/containers/DashboardComponent';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport getDirectPathToTabIndex from 'src/dashboard/util/getDirectPathToTabIndex';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { FilterBarOrientation } from 'src/dashboard/types';\nimport { setDirectPathToChild, setEditMode } from 'src/dashboard/actions/dashboardState';\nimport { deleteTopLevelTabs, handleComponentDrop, clearDashboardHistory } from 'src/dashboard/actions/dashboardLayout';\nimport { DASHBOARD_GRID_ID, DASHBOARD_ROOT_DEPTH, DASHBOARD_ROOT_ID, DashboardStandaloneMode } from 'src/dashboard/util/constants';\nimport FilterBar from 'src/dashboard/components/nativeFilters/FilterBar';\nimport Loading from 'src/components/Loading';\nimport { EmptyState } from 'src/components/EmptyState';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport ResizableSidebar from 'src/components/ResizableSidebar';\nimport { BUILDER_SIDEPANEL_WIDTH, CLOSED_FILTER_BAR_WIDTH, FILTER_BAR_HEADER_HEIGHT, MAIN_HEADER_HEIGHT, OPEN_FILTER_BAR_MAX_WIDTH, OPEN_FILTER_BAR_WIDTH, EMPTY_CONTAINER_Z_INDEX } from 'src/dashboard/constants';\nimport BasicErrorAlert from 'src/components/ErrorMessage/BasicErrorAlert';\nimport { getRootLevelTabsComponent, shouldFocusTabs } from './utils';\nimport DashboardContainer from './DashboardContainer';\nimport { useNativeFilters } from './state';\nimport DashboardWrapper from './DashboardWrapper';\n// @z-index-above-dashboard-charts + 1 = 11\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";const FiltersPanel = styled.div`\n  grid-column: 1;\n  grid-row: 1 / span 2;\n  z-index: 11;\n  width: ${({ width }) => width}px;\n  ${({ hidden }) => hidden && `display: none;`}\n`;\nconst StickyPanel = styled.div`\n  position: sticky;\n  top: -1px;\n  width: ${({ width }) => width}px;\n  flex: 0 0 ${({ width }) => width}px;\n`;\n// @z-index-above-dashboard-popovers (99) + 1 = 100\nconst StyledHeader = styled.div`\n  ${({ theme }) => css`\n    grid-column: 2;\n    grid-row: 1;\n    position: sticky;\n    top: 0;\n    z-index: 99;\n    max-width: 100vw;\n\n    .empty-droptarget:before {\n      position: absolute;\n      content: '';\n      display: none;\n      width: calc(100% - ${theme.gridUnit * 2}px);\n      height: calc(100% - ${theme.gridUnit * 2}px);\n      left: ${theme.gridUnit}px;\n      top: ${theme.gridUnit}px;\n      border: 1px dashed transparent;\n      border-radius: ${theme.gridUnit}px;\n      opacity: 0.5;\n    }\n  `}\n`;\nconst StyledContent = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n  // @z-index-above-dashboard-header (100) + 1 = 101\n  ${({ fullSizeChartId }) => fullSizeChartId && `z-index: 101;`}\n`;\nconst DashboardContentWrapper = styled.div`\n  ${({ theme }) => css`\n    &.dashboard {\n      position: relative;\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n\n      /* drop shadow for top-level tabs only */\n      & .dashboard-component-tabs {\n        box-shadow: 0 ${theme.gridUnit}px ${theme.gridUnit}px 0\n          ${addAlpha(theme.colors.grayscale.dark2, parseFloat(theme.opacity.light) / 100)};\n        padding-left: ${theme.gridUnit *\n2}px; /* note this is added to tab-level padding, to match header */\n      }\n\n      .dropdown-toggle.btn.btn-primary .caret {\n        color: ${theme.colors.grayscale.light5};\n      }\n\n      .background--transparent {\n        background-color: transparent;\n      }\n\n      .background--white {\n        background-color: ${theme.colors.grayscale.light5};\n      }\n    }\n    &.dashboard--editing {\n      .grid-row:after,\n      .dashboard-component-tabs > .hover-menu:hover + div:after {\n        border: 1px dashed transparent;\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        z-index: 1;\n        pointer-events: none;\n      }\n\n      .grid-row.grid-row--hovered:after,\n      .dashboard-component-tabs > .grid-row--hovered:after {\n        border: 2px dashed ${theme.colors.primary.base};\n      }\n\n      .resizable-container {\n        & .dashboard-component-chart-holder {\n          .dashboard-chart {\n            .chart-container {\n              cursor: move;\n              opacity: 0.2;\n            }\n\n            .slice_container {\n              /* disable chart interactions in edit mode */\n              pointer-events: none;\n            }\n          }\n\n          &:hover .dashboard-chart .chart-container {\n            opacity: 0.7;\n          }\n        }\n\n        &:hover,\n        &.resizable-container--resizing:hover {\n          & > .dashboard-component-chart-holder:after {\n            border: 1px dashed ${theme.colors.primary.base};\n          }\n        }\n      }\n\n      .resizable-container--resizing:hover > .grid-row:after,\n      .hover-menu:hover + .grid-row:after,\n      .dashboard-component-tabs > .hover-menu:hover + div:after {\n        border: 1px dashed ${theme.colors.primary.base};\n        z-index: 2;\n      }\n\n      .grid-row:after,\n      .dashboard-component-tabs > .hover-menu + div:after {\n        border: 1px dashed ${theme.colors.grayscale.light2};\n      }\n\n      /* provide hit area in case row contents is edge to edge */\n      .dashboard-component-tabs-content {\n        > .dragdroppable-row {\n          padding-top: ${theme.gridUnit * 4}px;\n        }\n      }\n\n      .dashboard-component-chart-holder {\n        &:after {\n          content: '';\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          pointer-events: none;\n          border: 1px solid transparent;\n        }\n\n        &:hover:after {\n          border: 1px dashed ${theme.colors.primary.base};\n          z-index: 2;\n        }\n      }\n\n      .contract-trigger:before {\n        display: none;\n      }\n    }\n\n    & .dashboard-component-tabs-content {\n      & > div:not(:last-child):not(.empty-droptarget) {\n        margin-bottom: ${theme.gridUnit * 4}px;\n      }\n\n      & > .empty-droptarget {\n        z-index: ${EMPTY_CONTAINER_Z_INDEX};\n        position: absolute;\n        width: 100%;\n      }\n\n      & > .empty-droptarget:first-child:not(.empty-droptarget--full) {\n        height: ${theme.gridUnit * 4}px;\n        top: 0;\n      }\n\n      & > .empty-droptarget:last-child {\n        height: ${theme.gridUnit * 4}px;\n        bottom: ${-theme.gridUnit * 4}px;\n      }\n    }\n  `}\n`;\nconst StyledDashboardContent = styled.div`\n  ${({ theme, editMode, marginLeft }) => css`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    height: auto;\n    flex: 1;\n\n    .grid-container .dashboard-component-tabs {\n      box-shadow: none;\n      padding-left: 0;\n    }\n\n    .grid-container {\n      /* without this, the grid will not get smaller upon toggling the builder panel on */\n      width: 0;\n      flex: 1;\n      position: relative;\n      margin-top: ${theme.gridUnit * 6}px;\n      margin-right: ${theme.gridUnit * 8}px;\n      margin-bottom: ${theme.gridUnit * 6}px;\n      margin-left: ${marginLeft}px;\n\n      ${editMode &&\n`\n      max-width: calc(100% - ${BUILDER_SIDEPANEL_WIDTH + theme.gridUnit * 16}px);\n    `}\n\n      /* this is the ParentSize wrapper */\n    & > div:first-child {\n        height: inherit !important;\n      }\n    }\n\n    .dashboard-builder-sidepane {\n      width: ${BUILDER_SIDEPANEL_WIDTH}px;\n      z-index: 1;\n    }\n\n    .dashboard-component-chart-holder {\n      width: 100%;\n      height: 100%;\n      background-color: ${theme.colors.grayscale.light5};\n      position: relative;\n      padding: ${theme.gridUnit * 4}px;\n      overflow-y: visible;\n\n      // transitionable traits to show filter relevance\n      transition:\n        opacity ${theme.transitionTiming}s ease-in-out,\n        border-color ${theme.transitionTiming}s ease-in-out,\n        box-shadow ${theme.transitionTiming}s ease-in-out;\n\n      &.fade-in {\n        border-radius: ${theme.borderRadius}px;\n        box-shadow:\n          inset 0 0 0 2px ${theme.colors.primary.base},\n          0 0 0 3px\n            ${addAlpha(theme.colors.primary.base, parseFloat(theme.opacity.light) / 100)};\n      }\n\n      &.fade-out {\n        border-radius: ${theme.borderRadius}px;\n        box-shadow: none;\n      }\n\n      & .missing-chart-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        overflow-y: auto;\n        justify-content: center;\n\n        .missing-chart-body {\n          font-size: ${theme.typography.sizes.s}px;\n          position: relative;\n          display: flex;\n        }\n      }\n    }\n  `}\n`;\nconst ELEMENT_ON_SCREEN_OPTIONS = {\n  threshold: [1]\n};\nconst DashboardBuilder = () => {var _dashboardLayout$DASH, _dashboardLayout$DASH2;\n  const dispatch = useDispatch();\n  const uiConfig = useUiConfig();\n  const theme = useTheme();\n  const dashboardId = useSelector(({ dashboardInfo }) => `${dashboardInfo.id}`);\n  const dashboardLayout = useSelector((state) => state.dashboardLayout.present);\n  const editMode = useSelector((state) => state.dashboardState.editMode);\n  const canEdit = useSelector(({ dashboardInfo }) => dashboardInfo.dash_edit_perm);\n  const dashboardIsSaving = useSelector(({ dashboardState }) => dashboardState.dashboardIsSaving);\n  const fullSizeChartId = useSelector((state) => state.dashboardState.fullSizeChartId);\n  const filterBarOrientation = useSelector(({ dashboardInfo }) => dashboardInfo.filterBarOrientation);\n  const handleChangeTab = useCallback(({ pathToTabIndex }) => {\n    dispatch(setDirectPathToChild(pathToTabIndex));\n    window.scrollTo(0, 0);\n  }, [dispatch]);\n  const handleDeleteTopLevelTabs = useCallback(() => {\n    dispatch(deleteTopLevelTabs());\n    const firstTab = getDirectPathToTabIndex(getRootLevelTabsComponent(dashboardLayout), 0);\n    dispatch(setDirectPathToChild(firstTab));\n  }, [dashboardLayout, dispatch]);\n  const handleDrop = useCallback((dropResult) => dispatch(handleComponentDrop(dropResult)), [dispatch]);\n  const headerRef = useRef(null);\n  const dashboardRoot = dashboardLayout[DASHBOARD_ROOT_ID];\n  const rootChildId = dashboardRoot == null ? void 0 : dashboardRoot.children[0];\n  const topLevelTabs = rootChildId !== DASHBOARD_GRID_ID ?\n  dashboardLayout[rootChildId] :\n  undefined;\n  const standaloneMode = getUrlParam(URL_PARAMS.standalone);\n  const isReport = standaloneMode === DashboardStandaloneMode.Report;\n  const hideDashboardHeader = uiConfig.hideTitle ||\n  standaloneMode === DashboardStandaloneMode.HideNavAndTitle ||\n  isReport;\n  const [barTopOffset, setBarTopOffset] = useState(0);\n  useEffect(() => {var _headerRef$current, _headerRef$current$ge;\n    setBarTopOffset(((_headerRef$current = headerRef.current) == null ? void 0 : (_headerRef$current$ge = _headerRef$current.getBoundingClientRect()) == null ? void 0 : _headerRef$current$ge.height) || 0);\n    let observer;\n    if (global.hasOwnProperty('ResizeObserver') && headerRef.current) {\n      observer = new ResizeObserver((entries) => {\n        setBarTopOffset((current) => {var _entries$, _entries$$contentRect;return (entries == null ? void 0 : (_entries$ = entries[0]) == null ? void 0 : (_entries$$contentRect = _entries$.contentRect) == null ? void 0 : _entries$$contentRect.height) || current;});\n      });\n      observer.observe(headerRef.current);\n    }\n    return () => {var _observer;\n      (_observer = observer) == null ? void 0 : _observer.disconnect();\n    };\n  }, []);\n  const { showDashboard, missingInitialFilters, dashboardFiltersOpen, toggleDashboardFiltersOpen, nativeFiltersEnabled } = useNativeFilters();\n  const [containerRef, isSticky] = useElementOnScreen(ELEMENT_ON_SCREEN_OPTIONS);\n  const showFilterBar = !editMode && nativeFiltersEnabled;\n  const offset = FILTER_BAR_HEADER_HEIGHT + (\n  isSticky || standaloneMode ? 0 : MAIN_HEADER_HEIGHT);\n  const filterBarHeight = `calc(100vh - ${offset}px)`;\n  const filterBarOffset = dashboardFiltersOpen ? 0 : barTopOffset + 20;\n  const draggableStyle = useMemo(() => ({\n    marginLeft: dashboardFiltersOpen ||\n    editMode ||\n    !nativeFiltersEnabled ||\n    filterBarOrientation === FilterBarOrientation.Horizontal ?\n    0 :\n    -32\n  }), [\n  dashboardFiltersOpen,\n  editMode,\n  filterBarOrientation,\n  nativeFiltersEnabled]\n  );\n  // If a new tab was added, update the directPathToChild to reflect it\n  const currentTopLevelTabs = useRef(topLevelTabs);\n  useEffect(() => {var _currentTopLevelTabs$, _currentTopLevelTabs$2, _topLevelTabs$childre;\n    const currentTabsLength = (_currentTopLevelTabs$ = currentTopLevelTabs.current) == null ? void 0 : (_currentTopLevelTabs$2 = _currentTopLevelTabs$.children) == null ? void 0 : _currentTopLevelTabs$2.length;\n    const newTabsLength = topLevelTabs == null ? void 0 : (_topLevelTabs$childre = topLevelTabs.children) == null ? void 0 : _topLevelTabs$childre.length;\n    if (currentTabsLength !== undefined &&\n    newTabsLength !== undefined &&\n    newTabsLength > currentTabsLength) {\n      const lastTab = getDirectPathToTabIndex(getRootLevelTabsComponent(dashboardLayout), newTabsLength - 1);\n      dispatch(setDirectPathToChild(lastTab));\n    }\n    currentTopLevelTabs.current = topLevelTabs;\n  }, [topLevelTabs]);\n  const renderDraggableContent = useCallback(({ dropIndicatorProps }) => _jsxs(\"div\", { children: [\n    !hideDashboardHeader && _jsx(DashboardHeader, {}),\n    showFilterBar &&\n    filterBarOrientation === FilterBarOrientation.Horizontal && _jsx(FilterBar, { orientation: FilterBarOrientation.Horizontal, hidden: isReport }),\n    dropIndicatorProps && _jsx(\"div\", { ...dropIndicatorProps }),\n    !isReport && topLevelTabs && !uiConfig.hideNav && _jsx(WithPopoverMenu, { shouldFocus: shouldFocusTabs, menuItems: [\n      _jsx(IconButton, { icon: _jsx(Icons.FallOutlined, { iconSize: \"xl\" }), label: t('Collapse tab content'), onClick: handleDeleteTopLevelTabs })],\n      editMode: editMode, children:\n\n      _jsx(DashboardComponent, { id: topLevelTabs == null ? void 0 : topLevelTabs.id, parentId: DASHBOARD_ROOT_ID, depth: DASHBOARD_ROOT_DEPTH + 1, index: 0, renderTabContent: false, renderHoverMenu: false, onChangeTab: handleChangeTab }) }\n    )] }\n  ), [\n  nativeFiltersEnabled,\n  filterBarOrientation,\n  editMode,\n  handleChangeTab,\n  handleDeleteTopLevelTabs,\n  hideDashboardHeader,\n  isReport,\n  topLevelTabs,\n  uiConfig.hideNav]\n  );\n  const dashboardContentMarginLeft = !dashboardFiltersOpen &&\n  !editMode &&\n  nativeFiltersEnabled &&\n  filterBarOrientation !== FilterBarOrientation.Horizontal ?\n  0 :\n  theme.gridUnit * 8;\n  const renderChild = useCallback((adjustedWidth) => {\n    const filterBarWidth = dashboardFiltersOpen ?\n    adjustedWidth :\n    CLOSED_FILTER_BAR_WIDTH;\n    return _jsx(FiltersPanel, { width: filterBarWidth, hidden: isReport, \"data-test\": \"dashboard-filters-panel\", children:\n      _jsx(StickyPanel, { ref: containerRef, width: filterBarWidth, children:\n        _jsx(ErrorBoundary, { children:\n          _jsx(FilterBar, { orientation: FilterBarOrientation.Vertical, verticalConfig: {\n              filtersOpen: dashboardFiltersOpen,\n              toggleFiltersBar: toggleDashboardFiltersOpen,\n              width: filterBarWidth,\n              height: filterBarHeight,\n              offset: filterBarOffset\n            } }) }\n        ) }\n      ) }\n    );\n  }, [\n  dashboardFiltersOpen,\n  toggleDashboardFiltersOpen,\n  filterBarHeight,\n  filterBarOffset,\n  isReport]\n  );\n  return _jsxs(DashboardWrapper, { children: [\n    showFilterBar &&\n    filterBarOrientation === FilterBarOrientation.Vertical && _jsx(_Fragment, { children:\n      _jsx(ResizableSidebar, { id: `dashboard:${dashboardId}`, enable: dashboardFiltersOpen, minWidth: OPEN_FILTER_BAR_WIDTH, maxWidth: OPEN_FILTER_BAR_MAX_WIDTH, initialWidth: OPEN_FILTER_BAR_WIDTH, children:\n        renderChild }\n      ) }\n    ),\n    _jsx(StyledHeader, { ref: headerRef, children:\n\n      _jsx(Droppable, { \"data-test\": \"top-level-tabs\", className: cx(!topLevelTabs && editMode && 'empty-droptarget'), component: dashboardRoot, parentComponent: null, depth: DASHBOARD_ROOT_DEPTH, index: 0, orientation: \"column\", onDrop: handleDrop, editMode: editMode\n        // you cannot drop on/displace tabs if they already exist\n        , disableDragDrop: !!topLevelTabs, style: draggableStyle, children:\n        renderDraggableContent }\n      ) }\n    ),\n    _jsxs(StyledContent, { fullSizeChartId: fullSizeChartId, children: [\n      !editMode &&\n      !topLevelTabs &&\n      ((_dashboardLayout$DASH = dashboardLayout[DASHBOARD_GRID_ID]) == null ? void 0 : (_dashboardLayout$DASH2 = _dashboardLayout$DASH.children) == null ? void 0 : _dashboardLayout$DASH2.length) === 0 && _jsx(EmptyState, { title: t('There are no charts added to this dashboard'), size: \"large\", description: canEdit &&\n        t('Go to the edit mode to configure the dashboard and add charts'), buttonText: canEdit && t('Edit the dashboard'), buttonAction: () => {\n          dispatch(setEditMode(true));\n          dispatch(clearDashboardHistory());\n        }, image: \"dashboard.svg\" }),\n      _jsx(DashboardContentWrapper, { \"data-test\": \"dashboard-content-wrapper\", className: cx('dashboard', editMode && 'dashboard--editing'), children:\n        _jsxs(StyledDashboardContent, { className: \"dashboard-content\", editMode: editMode, marginLeft: dashboardContentMarginLeft, children: [\n          showDashboard ? missingInitialFilters.length > 0 ? _jsx(\"div\", { css: css`\n                    display: flex;\n                    flex-direction: row;\n                    align-items: center;\n                    justify-content: center;\n                    flex: 1;\n                    & div {\n                      width: 500px;\n                    }\n                  `, children:\n            _jsx(BasicErrorAlert, { title: t('Unable to load dashboard'), body: t(`The following filters have the 'Select first filter value by default'\n                    option checked and could not be loaded, which is preventing the dashboard\n                    from rendering: %s`, missingInitialFilters.join(', ')) }) }\n          ) : _jsx(DashboardContainer, { topLevelTabs: topLevelTabs }) : _jsx(Loading, {}),\n          editMode && _jsx(BuilderComponentPane, { topOffset: barTopOffset })] }\n        ) }\n      )] }\n    ),\n    dashboardIsSaving && _jsx(Loading, { css: css`\n            && {\n              position: fixed;\n            }\n          ` })] }\n  );\n};__signature__(DashboardBuilder, \"useDispatch{dispatch}\\nuseUiConfig{uiConfig}\\nuseTheme{theme}\\nuseSelector{dashboardId}\\nuseSelector{dashboardLayout}\\nuseSelector{editMode}\\nuseSelector{canEdit}\\nuseSelector{dashboardIsSaving}\\nuseSelector{fullSizeChartId}\\nuseSelector{filterBarOrientation}\\nuseCallback{handleChangeTab}\\nuseCallback{handleDeleteTopLevelTabs}\\nuseCallback{handleDrop}\\nuseRef{headerRef}\\nuseState{[barTopOffset, setBarTopOffset](0)}\\nuseEffect{}\\nuseNativeFilters{{ showDashboard, missingInitialFilters, dashboardFiltersOpen, toggleDashboardFiltersOpen, nativeFiltersEnabled, }}\\nuseElementOnScreen{[containerRef, isSticky]}\\nuseMemo{draggableStyle}\\nuseRef{currentTopLevelTabs}\\nuseEffect{}\\nuseCallback{renderDraggableContent}\\nuseCallback{renderChild}\", () => [useDispatch, useUiConfig, useTheme, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useNativeFilters, useElementOnScreen]);const _default = /*#__PURE__*/\nmemo(DashboardBuilder);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FiltersPanel, \"FiltersPanel\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(StickyPanel, \"StickyPanel\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(StyledHeader, \"StyledHeader\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(StyledContent, \"StyledContent\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(DashboardContentWrapper, \"DashboardContentWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(StyledDashboardContent, \"StyledDashboardContent\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(ELEMENT_ON_SCREEN_OPTIONS, \"ELEMENT_ON_SCREEN_OPTIONS\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(DashboardBuilder, \"DashboardBuilder\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["cx","memo","useCallback","useEffect","useMemo","useRef","useState","addAlpha","css","styled","t","useTheme","useElementOnScreen","useDispatch","useSelector","ErrorBoundary","BuilderComponentPane","DashboardHeader","Icons","IconButton","Droppable","DashboardComponent","WithPopoverMenu","getDirectPathToTabIndex","URL_PARAMS","getUrlParam","FilterBarOrientation","setDirectPathToChild","setEditMode","deleteTopLevelTabs","handleComponentDrop","clearDashboardHistory","DASHBOARD_GRID_ID","DASHBOARD_ROOT_DEPTH","DASHBOARD_ROOT_ID","DashboardStandaloneMode","FilterBar","Loading","EmptyState","useUiConfig","ResizableSidebar","BUILDER_SIDEPANEL_WIDTH","CLOSED_FILTER_BAR_WIDTH","FILTER_BAR_HEADER_HEIGHT","MAIN_HEADER_HEIGHT","OPEN_FILTER_BAR_MAX_WIDTH","OPEN_FILTER_BAR_WIDTH","EMPTY_CONTAINER_Z_INDEX","BasicErrorAlert","getRootLevelTabsComponent","shouldFocusTabs","DashboardContainer","useNativeFilters","DashboardWrapper","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FiltersPanel","div","width","hidden","StickyPanel","StyledHeader","theme","gridUnit","StyledContent","fullSizeChartId","DashboardContentWrapper","colors","grayscale","dark2","parseFloat","opacity","light","light5","primary","base","light2","StyledDashboardContent","editMode","marginLeft","transitionTiming","borderRadius","typography","sizes","s","ELEMENT_ON_SCREEN_OPTIONS","threshold","DashboardBuilder","_dashboardLayout$DASH","_dashboardLayout$DASH2","dispatch","uiConfig","dashboardId","dashboardInfo","id","dashboardLayout","state","present","dashboardState","canEdit","dash_edit_perm","dashboardIsSaving","filterBarOrientation","handleChangeTab","pathToTabIndex","window","scrollTo","handleDeleteTopLevelTabs","firstTab","handleDrop","dropResult","headerRef","dashboardRoot","rootChildId","children","topLevelTabs","undefined","standaloneMode","standalone","isReport","Report","hideDashboardHeader","hideTitle","HideNavAndTitle","barTopOffset","setBarTopOffset","_headerRef$current","_headerRef$current$ge","current","getBoundingClientRect","height","observer","global","hasOwnProperty","ResizeObserver","entries","_entries$","_entries$$contentRect","contentRect","observe","_observer","disconnect","showDashboard","missingInitialFilters","dashboardFiltersOpen","toggleDashboardFiltersOpen","nativeFiltersEnabled","containerRef","isSticky","showFilterBar","offset","filterBarHeight","filterBarOffset","draggableStyle","Horizontal","currentTopLevelTabs","_currentTopLevelTabs$","_currentTopLevelTabs$2","_topLevelTabs$childre","currentTabsLength","length","newTabsLength","lastTab","renderDraggableContent","dropIndicatorProps","orientation","hideNav","shouldFocus","menuItems","icon","FallOutlined","iconSize","label","onClick","parentId","depth","index","renderTabContent","renderHoverMenu","onChangeTab","dashboardContentMarginLeft","renderChild","adjustedWidth","filterBarWidth","ref","Vertical","verticalConfig","filtersOpen","toggleFiltersBar","enable","minWidth","maxWidth","initialWidth","className","component","parentComponent","onDrop","disableDragDrop","style","title","size","description","buttonText","buttonAction","image","body","join","topOffset","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport cx from 'classnames';\nimport { memo, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport {\n  addAlpha,\n  css,\n  JsonObject,\n  styled,\n  t,\n  useTheme,\n  useElementOnScreen,\n} from '@superset-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport BuilderComponentPane from 'src/dashboard/components/BuilderComponentPane';\nimport DashboardHeader from 'src/dashboard/components/Header';\nimport { Icons } from 'src/components/Icons';\nimport IconButton from 'src/dashboard/components/IconButton';\nimport { Droppable } from 'src/dashboard/components/dnd/DragDroppable';\nimport DashboardComponent from 'src/dashboard/containers/DashboardComponent';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport getDirectPathToTabIndex from 'src/dashboard/util/getDirectPathToTabIndex';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport {\n  DashboardLayout,\n  FilterBarOrientation,\n  RootState,\n} from 'src/dashboard/types';\nimport {\n  setDirectPathToChild,\n  setEditMode,\n} from 'src/dashboard/actions/dashboardState';\nimport {\n  deleteTopLevelTabs,\n  handleComponentDrop,\n  clearDashboardHistory,\n} from 'src/dashboard/actions/dashboardLayout';\nimport {\n  DASHBOARD_GRID_ID,\n  DASHBOARD_ROOT_DEPTH,\n  DASHBOARD_ROOT_ID,\n  DashboardStandaloneMode,\n} from 'src/dashboard/util/constants';\nimport FilterBar from 'src/dashboard/components/nativeFilters/FilterBar';\nimport Loading from 'src/components/Loading';\nimport { EmptyState } from 'src/components/EmptyState';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport ResizableSidebar from 'src/components/ResizableSidebar';\nimport {\n  BUILDER_SIDEPANEL_WIDTH,\n  CLOSED_FILTER_BAR_WIDTH,\n  FILTER_BAR_HEADER_HEIGHT,\n  MAIN_HEADER_HEIGHT,\n  OPEN_FILTER_BAR_MAX_WIDTH,\n  OPEN_FILTER_BAR_WIDTH,\n  EMPTY_CONTAINER_Z_INDEX,\n} from 'src/dashboard/constants';\nimport BasicErrorAlert from 'src/components/ErrorMessage/BasicErrorAlert';\nimport { getRootLevelTabsComponent, shouldFocusTabs } from './utils';\nimport DashboardContainer from './DashboardContainer';\nimport { useNativeFilters } from './state';\nimport DashboardWrapper from './DashboardWrapper';\n\n// @z-index-above-dashboard-charts + 1 = 11\nconst FiltersPanel = styled.div<{ width: number; hidden: boolean }>`\n  grid-column: 1;\n  grid-row: 1 / span 2;\n  z-index: 11;\n  width: ${({ width }) => width}px;\n  ${({ hidden }) => hidden && `display: none;`}\n`;\n\nconst StickyPanel = styled.div<{ width: number }>`\n  position: sticky;\n  top: -1px;\n  width: ${({ width }) => width}px;\n  flex: 0 0 ${({ width }) => width}px;\n`;\n\n// @z-index-above-dashboard-popovers (99) + 1 = 100\nconst StyledHeader = styled.div`\n  ${({ theme }) => css`\n    grid-column: 2;\n    grid-row: 1;\n    position: sticky;\n    top: 0;\n    z-index: 99;\n    max-width: 100vw;\n\n    .empty-droptarget:before {\n      position: absolute;\n      content: '';\n      display: none;\n      width: calc(100% - ${theme.gridUnit * 2}px);\n      height: calc(100% - ${theme.gridUnit * 2}px);\n      left: ${theme.gridUnit}px;\n      top: ${theme.gridUnit}px;\n      border: 1px dashed transparent;\n      border-radius: ${theme.gridUnit}px;\n      opacity: 0.5;\n    }\n  `}\n`;\n\nconst StyledContent = styled.div<{\n  fullSizeChartId: number | null;\n}>`\n  grid-column: 2;\n  grid-row: 2;\n  // @z-index-above-dashboard-header (100) + 1 = 101\n  ${({ fullSizeChartId }) => fullSizeChartId && `z-index: 101;`}\n`;\n\nconst DashboardContentWrapper = styled.div`\n  ${({ theme }) => css`\n    &.dashboard {\n      position: relative;\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n\n      /* drop shadow for top-level tabs only */\n      & .dashboard-component-tabs {\n        box-shadow: 0 ${theme.gridUnit}px ${theme.gridUnit}px 0\n          ${addAlpha(\n            theme.colors.grayscale.dark2,\n            parseFloat(theme.opacity.light) / 100,\n          )};\n        padding-left: ${theme.gridUnit *\n        2}px; /* note this is added to tab-level padding, to match header */\n      }\n\n      .dropdown-toggle.btn.btn-primary .caret {\n        color: ${theme.colors.grayscale.light5};\n      }\n\n      .background--transparent {\n        background-color: transparent;\n      }\n\n      .background--white {\n        background-color: ${theme.colors.grayscale.light5};\n      }\n    }\n    &.dashboard--editing {\n      .grid-row:after,\n      .dashboard-component-tabs > .hover-menu:hover + div:after {\n        border: 1px dashed transparent;\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        z-index: 1;\n        pointer-events: none;\n      }\n\n      .grid-row.grid-row--hovered:after,\n      .dashboard-component-tabs > .grid-row--hovered:after {\n        border: 2px dashed ${theme.colors.primary.base};\n      }\n\n      .resizable-container {\n        & .dashboard-component-chart-holder {\n          .dashboard-chart {\n            .chart-container {\n              cursor: move;\n              opacity: 0.2;\n            }\n\n            .slice_container {\n              /* disable chart interactions in edit mode */\n              pointer-events: none;\n            }\n          }\n\n          &:hover .dashboard-chart .chart-container {\n            opacity: 0.7;\n          }\n        }\n\n        &:hover,\n        &.resizable-container--resizing:hover {\n          & > .dashboard-component-chart-holder:after {\n            border: 1px dashed ${theme.colors.primary.base};\n          }\n        }\n      }\n\n      .resizable-container--resizing:hover > .grid-row:after,\n      .hover-menu:hover + .grid-row:after,\n      .dashboard-component-tabs > .hover-menu:hover + div:after {\n        border: 1px dashed ${theme.colors.primary.base};\n        z-index: 2;\n      }\n\n      .grid-row:after,\n      .dashboard-component-tabs > .hover-menu + div:after {\n        border: 1px dashed ${theme.colors.grayscale.light2};\n      }\n\n      /* provide hit area in case row contents is edge to edge */\n      .dashboard-component-tabs-content {\n        > .dragdroppable-row {\n          padding-top: ${theme.gridUnit * 4}px;\n        }\n      }\n\n      .dashboard-component-chart-holder {\n        &:after {\n          content: '';\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          pointer-events: none;\n          border: 1px solid transparent;\n        }\n\n        &:hover:after {\n          border: 1px dashed ${theme.colors.primary.base};\n          z-index: 2;\n        }\n      }\n\n      .contract-trigger:before {\n        display: none;\n      }\n    }\n\n    & .dashboard-component-tabs-content {\n      & > div:not(:last-child):not(.empty-droptarget) {\n        margin-bottom: ${theme.gridUnit * 4}px;\n      }\n\n      & > .empty-droptarget {\n        z-index: ${EMPTY_CONTAINER_Z_INDEX};\n        position: absolute;\n        width: 100%;\n      }\n\n      & > .empty-droptarget:first-child:not(.empty-droptarget--full) {\n        height: ${theme.gridUnit * 4}px;\n        top: 0;\n      }\n\n      & > .empty-droptarget:last-child {\n        height: ${theme.gridUnit * 4}px;\n        bottom: ${-theme.gridUnit * 4}px;\n      }\n    }\n  `}\n`;\n\nconst StyledDashboardContent = styled.div<{\n  editMode: boolean;\n  marginLeft: number;\n}>`\n  ${({ theme, editMode, marginLeft }) => css`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    height: auto;\n    flex: 1;\n\n    .grid-container .dashboard-component-tabs {\n      box-shadow: none;\n      padding-left: 0;\n    }\n\n    .grid-container {\n      /* without this, the grid will not get smaller upon toggling the builder panel on */\n      width: 0;\n      flex: 1;\n      position: relative;\n      margin-top: ${theme.gridUnit * 6}px;\n      margin-right: ${theme.gridUnit * 8}px;\n      margin-bottom: ${theme.gridUnit * 6}px;\n      margin-left: ${marginLeft}px;\n\n      ${editMode &&\n      `\n      max-width: calc(100% - ${\n        BUILDER_SIDEPANEL_WIDTH + theme.gridUnit * 16\n      }px);\n    `}\n\n      /* this is the ParentSize wrapper */\n    & > div:first-child {\n        height: inherit !important;\n      }\n    }\n\n    .dashboard-builder-sidepane {\n      width: ${BUILDER_SIDEPANEL_WIDTH}px;\n      z-index: 1;\n    }\n\n    .dashboard-component-chart-holder {\n      width: 100%;\n      height: 100%;\n      background-color: ${theme.colors.grayscale.light5};\n      position: relative;\n      padding: ${theme.gridUnit * 4}px;\n      overflow-y: visible;\n\n      // transitionable traits to show filter relevance\n      transition:\n        opacity ${theme.transitionTiming}s ease-in-out,\n        border-color ${theme.transitionTiming}s ease-in-out,\n        box-shadow ${theme.transitionTiming}s ease-in-out;\n\n      &.fade-in {\n        border-radius: ${theme.borderRadius}px;\n        box-shadow:\n          inset 0 0 0 2px ${theme.colors.primary.base},\n          0 0 0 3px\n            ${addAlpha(\n              theme.colors.primary.base,\n              parseFloat(theme.opacity.light) / 100,\n            )};\n      }\n\n      &.fade-out {\n        border-radius: ${theme.borderRadius}px;\n        box-shadow: none;\n      }\n\n      & .missing-chart-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        overflow-y: auto;\n        justify-content: center;\n\n        .missing-chart-body {\n          font-size: ${theme.typography.sizes.s}px;\n          position: relative;\n          display: flex;\n        }\n      }\n    }\n  `}\n`;\n\nconst ELEMENT_ON_SCREEN_OPTIONS = {\n  threshold: [1],\n};\n\nconst DashboardBuilder = () => {\n  const dispatch = useDispatch();\n  const uiConfig = useUiConfig();\n  const theme = useTheme();\n\n  const dashboardId = useSelector<RootState, string>(\n    ({ dashboardInfo }) => `${dashboardInfo.id}`,\n  );\n  const dashboardLayout = useSelector<RootState, DashboardLayout>(\n    state => state.dashboardLayout.present,\n  );\n  const editMode = useSelector<RootState, boolean>(\n    state => state.dashboardState.editMode,\n  );\n  const canEdit = useSelector<RootState, boolean>(\n    ({ dashboardInfo }) => dashboardInfo.dash_edit_perm,\n  );\n  const dashboardIsSaving = useSelector<RootState, boolean>(\n    ({ dashboardState }) => dashboardState.dashboardIsSaving,\n  );\n  const fullSizeChartId = useSelector<RootState, number | null>(\n    state => state.dashboardState.fullSizeChartId,\n  );\n  const filterBarOrientation = useSelector<RootState, FilterBarOrientation>(\n    ({ dashboardInfo }) => dashboardInfo.filterBarOrientation,\n  );\n\n  const handleChangeTab = useCallback(\n    ({ pathToTabIndex }: { pathToTabIndex: string[] }) => {\n      dispatch(setDirectPathToChild(pathToTabIndex));\n      window.scrollTo(0, 0);\n    },\n    [dispatch],\n  );\n\n  const handleDeleteTopLevelTabs = useCallback(() => {\n    dispatch(deleteTopLevelTabs());\n\n    const firstTab = getDirectPathToTabIndex(\n      getRootLevelTabsComponent(dashboardLayout),\n      0,\n    );\n    dispatch(setDirectPathToChild(firstTab));\n  }, [dashboardLayout, dispatch]);\n\n  const handleDrop = useCallback(\n    dropResult => dispatch(handleComponentDrop(dropResult)),\n    [dispatch],\n  );\n\n  const headerRef = useRef<HTMLDivElement>(null);\n  const dashboardRoot = dashboardLayout[DASHBOARD_ROOT_ID];\n  const rootChildId = dashboardRoot?.children[0];\n  const topLevelTabs =\n    rootChildId !== DASHBOARD_GRID_ID\n      ? dashboardLayout[rootChildId]\n      : undefined;\n  const standaloneMode = getUrlParam(URL_PARAMS.standalone);\n  const isReport = standaloneMode === DashboardStandaloneMode.Report;\n  const hideDashboardHeader =\n    uiConfig.hideTitle ||\n    standaloneMode === DashboardStandaloneMode.HideNavAndTitle ||\n    isReport;\n\n  const [barTopOffset, setBarTopOffset] = useState(0);\n\n  useEffect(() => {\n    setBarTopOffset(headerRef.current?.getBoundingClientRect()?.height || 0);\n\n    let observer: ResizeObserver;\n    if (global.hasOwnProperty('ResizeObserver') && headerRef.current) {\n      observer = new ResizeObserver(entries => {\n        setBarTopOffset(\n          current => entries?.[0]?.contentRect?.height || current,\n        );\n      });\n\n      observer.observe(headerRef.current);\n    }\n\n    return () => {\n      observer?.disconnect();\n    };\n  }, []);\n\n  const {\n    showDashboard,\n    missingInitialFilters,\n    dashboardFiltersOpen,\n    toggleDashboardFiltersOpen,\n    nativeFiltersEnabled,\n  } = useNativeFilters();\n\n  const [containerRef, isSticky] = useElementOnScreen<HTMLDivElement>(\n    ELEMENT_ON_SCREEN_OPTIONS,\n  );\n\n  const showFilterBar = !editMode && nativeFiltersEnabled;\n\n  const offset =\n    FILTER_BAR_HEADER_HEIGHT +\n    (isSticky || standaloneMode ? 0 : MAIN_HEADER_HEIGHT);\n\n  const filterBarHeight = `calc(100vh - ${offset}px)`;\n  const filterBarOffset = dashboardFiltersOpen ? 0 : barTopOffset + 20;\n\n  const draggableStyle = useMemo(\n    () => ({\n      marginLeft:\n        dashboardFiltersOpen ||\n        editMode ||\n        !nativeFiltersEnabled ||\n        filterBarOrientation === FilterBarOrientation.Horizontal\n          ? 0\n          : -32,\n    }),\n    [\n      dashboardFiltersOpen,\n      editMode,\n      filterBarOrientation,\n      nativeFiltersEnabled,\n    ],\n  );\n\n  // If a new tab was added, update the directPathToChild to reflect it\n  const currentTopLevelTabs = useRef(topLevelTabs);\n  useEffect(() => {\n    const currentTabsLength = currentTopLevelTabs.current?.children?.length;\n    const newTabsLength = topLevelTabs?.children?.length;\n\n    if (\n      currentTabsLength !== undefined &&\n      newTabsLength !== undefined &&\n      newTabsLength > currentTabsLength\n    ) {\n      const lastTab = getDirectPathToTabIndex(\n        getRootLevelTabsComponent(dashboardLayout),\n        newTabsLength - 1,\n      );\n      dispatch(setDirectPathToChild(lastTab));\n    }\n\n    currentTopLevelTabs.current = topLevelTabs;\n  }, [topLevelTabs]);\n\n  const renderDraggableContent = useCallback(\n    ({ dropIndicatorProps }: { dropIndicatorProps: JsonObject }) => (\n      <div>\n        {!hideDashboardHeader && <DashboardHeader />}\n        {showFilterBar &&\n          filterBarOrientation === FilterBarOrientation.Horizontal && (\n            <FilterBar\n              orientation={FilterBarOrientation.Horizontal}\n              hidden={isReport}\n            />\n          )}\n        {dropIndicatorProps && <div {...dropIndicatorProps} />}\n        {!isReport && topLevelTabs && !uiConfig.hideNav && (\n          <WithPopoverMenu\n            shouldFocus={shouldFocusTabs}\n            menuItems={[\n              <IconButton\n                icon={<Icons.FallOutlined iconSize=\"xl\" />}\n                label={t('Collapse tab content')}\n                onClick={handleDeleteTopLevelTabs}\n              />,\n            ]}\n            editMode={editMode}\n          >\n            {/* @ts-ignore */}\n            <DashboardComponent\n              id={topLevelTabs?.id}\n              parentId={DASHBOARD_ROOT_ID}\n              depth={DASHBOARD_ROOT_DEPTH + 1}\n              index={0}\n              renderTabContent={false}\n              renderHoverMenu={false}\n              onChangeTab={handleChangeTab}\n            />\n          </WithPopoverMenu>\n        )}\n      </div>\n    ),\n    [\n      nativeFiltersEnabled,\n      filterBarOrientation,\n      editMode,\n      handleChangeTab,\n      handleDeleteTopLevelTabs,\n      hideDashboardHeader,\n      isReport,\n      topLevelTabs,\n      uiConfig.hideNav,\n    ],\n  );\n\n  const dashboardContentMarginLeft =\n    !dashboardFiltersOpen &&\n    !editMode &&\n    nativeFiltersEnabled &&\n    filterBarOrientation !== FilterBarOrientation.Horizontal\n      ? 0\n      : theme.gridUnit * 8;\n\n  const renderChild = useCallback(\n    adjustedWidth => {\n      const filterBarWidth = dashboardFiltersOpen\n        ? adjustedWidth\n        : CLOSED_FILTER_BAR_WIDTH;\n      return (\n        <FiltersPanel\n          width={filterBarWidth}\n          hidden={isReport}\n          data-test=\"dashboard-filters-panel\"\n        >\n          <StickyPanel ref={containerRef} width={filterBarWidth}>\n            <ErrorBoundary>\n              <FilterBar\n                orientation={FilterBarOrientation.Vertical}\n                verticalConfig={{\n                  filtersOpen: dashboardFiltersOpen,\n                  toggleFiltersBar: toggleDashboardFiltersOpen,\n                  width: filterBarWidth,\n                  height: filterBarHeight,\n                  offset: filterBarOffset,\n                }}\n              />\n            </ErrorBoundary>\n          </StickyPanel>\n        </FiltersPanel>\n      );\n    },\n    [\n      dashboardFiltersOpen,\n      toggleDashboardFiltersOpen,\n      filterBarHeight,\n      filterBarOffset,\n      isReport,\n    ],\n  );\n\n  return (\n    <DashboardWrapper>\n      {showFilterBar &&\n        filterBarOrientation === FilterBarOrientation.Vertical && (\n          <>\n            <ResizableSidebar\n              id={`dashboard:${dashboardId}`}\n              enable={dashboardFiltersOpen}\n              minWidth={OPEN_FILTER_BAR_WIDTH}\n              maxWidth={OPEN_FILTER_BAR_MAX_WIDTH}\n              initialWidth={OPEN_FILTER_BAR_WIDTH}\n            >\n              {renderChild}\n            </ResizableSidebar>\n          </>\n        )}\n      <StyledHeader ref={headerRef}>\n        {/* @ts-ignore */}\n        <Droppable\n          data-test=\"top-level-tabs\"\n          className={cx(!topLevelTabs && editMode && 'empty-droptarget')}\n          component={dashboardRoot}\n          parentComponent={null}\n          depth={DASHBOARD_ROOT_DEPTH}\n          index={0}\n          orientation=\"column\"\n          onDrop={handleDrop}\n          editMode={editMode}\n          // you cannot drop on/displace tabs if they already exist\n          disableDragDrop={!!topLevelTabs}\n          style={draggableStyle}\n        >\n          {renderDraggableContent}\n        </Droppable>\n      </StyledHeader>\n      <StyledContent fullSizeChartId={fullSizeChartId}>\n        {!editMode &&\n          !topLevelTabs &&\n          dashboardLayout[DASHBOARD_GRID_ID]?.children?.length === 0 && (\n            <EmptyState\n              title={t('There are no charts added to this dashboard')}\n              size=\"large\"\n              description={\n                canEdit &&\n                t(\n                  'Go to the edit mode to configure the dashboard and add charts',\n                )\n              }\n              buttonText={canEdit && t('Edit the dashboard')}\n              buttonAction={() => {\n                dispatch(setEditMode(true));\n                dispatch(clearDashboardHistory());\n              }}\n              image=\"dashboard.svg\"\n            />\n          )}\n        <DashboardContentWrapper\n          data-test=\"dashboard-content-wrapper\"\n          className={cx('dashboard', editMode && 'dashboard--editing')}\n        >\n          <StyledDashboardContent\n            className=\"dashboard-content\"\n            editMode={editMode}\n            marginLeft={dashboardContentMarginLeft}\n          >\n            {showDashboard ? (\n              missingInitialFilters.length > 0 ? (\n                <div\n                  css={css`\n                    display: flex;\n                    flex-direction: row;\n                    align-items: center;\n                    justify-content: center;\n                    flex: 1;\n                    & div {\n                      width: 500px;\n                    }\n                  `}\n                >\n                  <BasicErrorAlert\n                    title={t('Unable to load dashboard')}\n                    body={t(\n                      `The following filters have the 'Select first filter value by default'\n                    option checked and could not be loaded, which is preventing the dashboard\n                    from rendering: %s`,\n                      missingInitialFilters.join(', '),\n                    )}\n                  />\n                </div>\n              ) : (\n                <DashboardContainer topLevelTabs={topLevelTabs} />\n              )\n            ) : (\n              <Loading />\n            )}\n            {editMode && <BuilderComponentPane topOffset={barTopOffset} />}\n          </StyledDashboardContent>\n        </DashboardContentWrapper>\n      </StyledContent>\n      {dashboardIsSaving && (\n        <Loading\n          css={css`\n            && {\n              position: fixed;\n            }\n          `}\n        />\n      )}\n    </DashboardWrapper>\n  );\n};\n\nexport default memo(DashboardBuilder);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}