{"ast":null,"code":"import _last from \"lodash/last\";import _isEmpty from \"lodash/isEmpty\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ColumnOption, D3_TIME_FORMAT_OPTIONS, defineSavedMetrics, getStandardizedControls, QueryModeLabel, sections, sharedControls } from '@superset-ui/chart-controls';\nimport { ensureIsArray, GenericDataType, getMetricLabel, isAdhocColumn, isPhysicalColumn, QueryMode, SMART_DATE_ID, t } from '@superset-ui/core';\n\nimport { PAGE_SIZE_OPTIONS } from './consts';\nimport { ColorSchemeEnum } from './types';import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nfunction getQueryMode(controls) {var _controls$query_mode, _controls$all_columns;\n  const mode = controls == null ? void 0 : (_controls$query_mode = controls.query_mode) == null ? void 0 : _controls$query_mode.value;\n  if (mode === QueryMode.Aggregate || mode === QueryMode.Raw) {\n    return mode;\n  }\n  const rawColumns = controls == null ? void 0 : (_controls$all_columns = controls.all_columns) == null ? void 0 : _controls$all_columns.value;\n  const hasRawColumns = rawColumns && rawColumns.length > 0;\n  return hasRawColumns ? QueryMode.Raw : QueryMode.Aggregate;\n}\n/**\n * Visibility check\n */\nfunction isQueryMode(mode) {\n  return ({ controls }) => getQueryMode(controls) === mode;\n}\nconst isAggMode = isQueryMode(QueryMode.Aggregate);\nconst isRawMode = isQueryMode(QueryMode.Raw);\nconst validateAggControlValues = (controls, values) => {\n  const areControlsEmpty = values.every((val) => ensureIsArray(val).length === 0);\n  return areControlsEmpty && isAggMode({ controls }) ?\n  [t('Group By, Metrics or Percentage Metrics must have a value')] :\n  [];\n};\nconst queryMode = {\n  type: 'RadioButtonControl',\n  label: t('Query mode'),\n  default: null,\n  options: [\n  [QueryMode.Aggregate, QueryModeLabel[QueryMode.Aggregate]],\n  [QueryMode.Raw, QueryModeLabel[QueryMode.Raw]]],\n\n  mapStateToProps: ({ controls }) => ({ value: getQueryMode(controls) }),\n  rerender: ['all_columns', 'groupby', 'metrics', 'percent_metrics']\n};\nconst allColumnsControl = {\n  ...sharedControls.groupby,\n  label: t('Columns'),\n  description: t('Columns to display'),\n  multi: true,\n  freeForm: true,\n  allowAll: true,\n  commaChoosesOption: false,\n  optionRenderer: (c) => _jsx(ColumnOption, { showType: true, column: c }),\n  valueRenderer: (c) => _jsx(ColumnOption, { column: c }),\n  valueKey: 'column_name',\n  mapStateToProps: ({ datasource, controls }, controlState) => ({\n    options: (datasource == null ? void 0 : datasource.columns) || [],\n    queryMode: getQueryMode(controls),\n    externalValidationErrors: isRawMode({ controls }) && ensureIsArray(controlState == null ? void 0 : controlState.value).length === 0 ?\n    [t('must have a value')] :\n    []\n  }),\n  visibility: isRawMode,\n  resetOnHide: false\n};\nconst percentMetricsControl = {\n  ...sharedControls.metrics,\n  label: t('Percentage metrics'),\n  description: t('Select one or many metrics to display, that will be displayed in the percentages of total. ' +\n  'Percentage metrics will be calculated only from data within the row limit. ' +\n  'You can use an aggregation function on a column or write custom SQL to create a percentage metric.'),\n  visibility: isAggMode,\n  resetOnHide: false,\n  mapStateToProps: ({ datasource, controls }, controlState) => {var _controls$groupby, _controls$metrics;return {\n      columns: (datasource == null ? void 0 : datasource.columns) || [],\n      savedMetrics: defineSavedMetrics(datasource),\n      datasource,\n      datasourceType: datasource == null ? void 0 : datasource.type,\n      queryMode: getQueryMode(controls),\n      externalValidationErrors: validateAggControlValues(controls, [(_controls$groupby =\n      controls.groupby) == null ? void 0 : _controls$groupby.value, (_controls$metrics =\n      controls.metrics) == null ? void 0 : _controls$metrics.value,\n      controlState == null ? void 0 : controlState.value]\n      )\n    };},\n  rerender: ['groupby', 'metrics'],\n  default: [],\n  validators: []\n};\n/**\n * Generate comparison column names for a given column.\n */\nconst generateComparisonColumns = (colname) => [\n`${t('Main')} ${colname}`,\n`# ${colname}`,\n`△ ${colname}`,\n`% ${colname}`];\n\n/**\n * Generate column types for the comparison columns.\n */\nconst generateComparisonColumnTypes = (count) => Array(count).fill(GenericDataType.Numeric);\nconst processComparisonColumns = (columns, suffix) => columns.\nmap((col) => {\n  if (!col.label.includes(suffix)) {\n    return [\n    {\n      label: `${t('Main')} ${col.label}`,\n      value: `${t('Main')} ${col.value}`\n    },\n    {\n      label: `# ${col.label}`,\n      value: `# ${col.value}`\n    },\n    {\n      label: `△ ${col.label}`,\n      value: `△ ${col.value}`\n    },\n    {\n      label: `% ${col.label}`,\n      value: `% ${col.value}`\n    }];\n\n  }\n  return [];\n}).\nflat();\nconst config = {\n  controlPanelSections: [\n  {\n    label: t('Query'),\n    expanded: true,\n    controlSetRows: [\n    [\n    {\n      name: 'query_mode',\n      config: queryMode\n    }],\n\n    [\n    {\n      name: 'groupby',\n      override: {\n        visibility: isAggMode,\n        resetOnHide: false,\n        mapStateToProps: (state, controlState) => {var _sharedControls$group, _originalMapStateToPr, _controls$metrics2, _controls$percent_met;\n          const { controls } = state;\n          const originalMapStateToProps = sharedControls == null ? void 0 : (_sharedControls$group = sharedControls.groupby) == null ? void 0 : _sharedControls$group.mapStateToProps;\n          const newState = (_originalMapStateToPr = originalMapStateToProps == null ? void 0 : originalMapStateToProps(state, controlState)) != null ? _originalMapStateToPr : {};\n          newState.externalValidationErrors = validateAggControlValues(controls, [(_controls$metrics2 =\n          controls.metrics) == null ? void 0 : _controls$metrics2.value, (_controls$percent_met =\n          controls.percent_metrics) == null ? void 0 : _controls$percent_met.value,\n          controlState.value]\n          );\n          return newState;\n        },\n        rerender: ['metrics', 'percent_metrics']\n      }\n    }],\n\n    [\n    {\n      name: 'time_grain_sqla',\n      config: {\n        ...sharedControls.time_grain_sqla,\n        visibility: ({ controls }) => {var _controls$groupby2;\n          const dttmLookup = Object.fromEntries(ensureIsArray(controls == null ? void 0 : (_controls$groupby2 = controls.groupby) == null ? void 0 : _controls$groupby2.options).map((option) => [\n          option.column_name,\n          option.is_dttm]\n          ));\n          return ensureIsArray(controls == null ? void 0 : controls.groupby.value).\n          map((selection) => {\n            if (isAdhocColumn(selection)) {\n              return true;\n            }\n            if (isPhysicalColumn(selection)) {\n              return !!dttmLookup[selection];\n            }\n            return false;\n          }).\n          some(Boolean);\n        }\n      }\n    },\n    'temporal_columns_lookup'],\n\n    [\n    {\n      name: 'metrics',\n      override: {\n        validators: [],\n        visibility: isAggMode,\n        resetOnHide: false,\n        mapStateToProps: ({ controls, datasource, form_data }, controlState) => {var _datasource$columns$, _datasource$columns, _controls$groupby3, _controls$percent_met2;return {\n            columns: datasource != null && (_datasource$columns$ = datasource.columns[0]) != null && _datasource$columns$.hasOwnProperty('filterable') ?\n            datasource == null ? void 0 : (_datasource$columns = datasource.columns) == null ? void 0 : _datasource$columns.filter((c) => c.filterable) :\n            datasource == null ? void 0 : datasource.columns,\n            savedMetrics: defineSavedMetrics(datasource),\n            // current active adhoc metrics\n            selectedMetrics: form_data.metrics || (\n            form_data.metric ? [form_data.metric] : []),\n            datasource,\n            externalValidationErrors: validateAggControlValues(controls, [(_controls$groupby3 =\n            controls.groupby) == null ? void 0 : _controls$groupby3.value, (_controls$percent_met2 =\n            controls.percent_metrics) == null ? void 0 : _controls$percent_met2.value,\n            controlState.value]\n            )\n          };},\n        rerender: ['groupby', 'percent_metrics']\n      }\n    },\n    {\n      name: 'all_columns',\n      config: allColumnsControl\n    }],\n\n    [\n    {\n      name: 'percent_metrics',\n      config: percentMetricsControl\n    }],\n\n    ['adhoc_filters'],\n    [\n    {\n      name: 'timeseries_limit_metric',\n      override: {\n        visibility: isAggMode,\n        resetOnHide: false\n      }\n    },\n    {\n      name: 'order_by_cols',\n      config: {\n        type: 'SelectControl',\n        label: t('Ordering'),\n        description: t('Order results by selected columns'),\n        multi: true,\n        default: [],\n        mapStateToProps: ({ datasource }) => ({\n          choices: datasource != null && datasource.hasOwnProperty('order_by_choices') ?\n          datasource == null ? void 0 : datasource.order_by_choices :\n          (datasource == null ? void 0 : datasource.columns) || []\n        }),\n        visibility: isRawMode,\n        resetOnHide: false\n      }\n    }],\n\n    [\n    {\n      name: 'server_pagination',\n      config: {\n        type: 'CheckboxControl',\n        label: t('Server pagination'),\n        description: t('Enable server side pagination of results (experimental feature)'),\n        default: false\n      }\n    }],\n\n    [\n    {\n      name: 'row_limit',\n      override: {\n        default: 1000,\n        visibility: ({ controls }) => {var _controls$server_pagi;return !(controls != null && (_controls$server_pagi = controls.server_pagination) != null && _controls$server_pagi.value);}\n      }\n    },\n    {\n      name: 'server_page_length',\n      config: {\n        type: 'SelectControl',\n        freeForm: true,\n        label: t('Server Page Length'),\n        default: 10,\n        choices: PAGE_SIZE_OPTIONS,\n        description: t('Rows per page, 0 means no pagination'),\n        visibility: ({ controls }) => {var _controls$server_pagi2;return Boolean(controls == null ? void 0 : (_controls$server_pagi2 = controls.server_pagination) == null ? void 0 : _controls$server_pagi2.value);}\n      }\n    }],\n\n    [\n    {\n      name: 'order_desc',\n      config: {\n        type: 'CheckboxControl',\n        label: t('Sort descending'),\n        default: true,\n        description: t('If enabled, this control sorts the results/values descending, otherwise it sorts the results ascending.'),\n        visibility: isAggMode,\n        resetOnHide: false\n      }\n    }],\n\n    [\n    {\n      name: 'show_totals',\n      config: {\n        type: 'CheckboxControl',\n        label: t('Show summary'),\n        default: false,\n        description: t('Show total aggregations of selected metrics. Note that row limit does not apply to the result.'),\n        visibility: isAggMode,\n        resetOnHide: false\n      }\n    }]]\n\n\n  },\n  {\n    label: t('Options'),\n    expanded: true,\n    controlSetRows: [\n    [\n    {\n      name: 'table_timestamp_format',\n      config: {\n        type: 'SelectControl',\n        freeForm: true,\n        label: t('Timestamp format'),\n        default: SMART_DATE_ID,\n        renderTrigger: true,\n        clearable: false,\n        choices: D3_TIME_FORMAT_OPTIONS,\n        description: t('D3 time format for datetime columns')\n      }\n    }],\n\n    [\n    {\n      name: 'page_length',\n      config: {\n        type: 'SelectControl',\n        freeForm: true,\n        renderTrigger: true,\n        label: t('Page length'),\n        default: null,\n        choices: PAGE_SIZE_OPTIONS,\n        description: t('Rows per page, 0 means no pagination'),\n        visibility: ({ controls }) => {var _controls$server_pagi3;return !(controls != null && (_controls$server_pagi3 = controls.server_pagination) != null && _controls$server_pagi3.value);}\n      }\n    },\n    null],\n\n    [\n    {\n      name: 'include_search',\n      config: {\n        type: 'CheckboxControl',\n        label: t('Search box'),\n        renderTrigger: true,\n        default: false,\n        description: t('Whether to include a client-side search box')\n      }\n    }],\n\n    [\n    {\n      name: 'allow_rearrange_columns',\n      config: {\n        type: 'CheckboxControl',\n        label: t('Allow columns to be rearranged'),\n        renderTrigger: true,\n        default: false,\n        description: t(\"Allow end user to drag-and-drop column headers to rearrange them. Note their changes won't persist for the next time they open the chart.\"),\n        visibility: ({ controls }) => {var _controls$time_compar;return _isEmpty(controls == null ? void 0 : (_controls$time_compar = controls.time_compare) == null ? void 0 : _controls$time_compar.value);}\n      }\n    }],\n\n    [\n    {\n      name: 'allow_render_html',\n      config: {\n        type: 'CheckboxControl',\n        label: t('Render columns in HTML format'),\n        renderTrigger: true,\n        default: true,\n        description: t('Renders table cells as HTML when applicable. For example, HTML <a> tags will be rendered as hyperlinks.')\n      }\n    }],\n\n    [\n    {\n      name: 'column_config',\n      config: {\n        type: 'ColumnConfigControl',\n        label: t('Customize columns'),\n        description: t('Further customize how to display each column'),\n        width: 400,\n        height: 320,\n        renderTrigger: true,\n        shouldMapStateToProps() {\n          return true;\n        },\n        mapStateToProps(explore, _, chart) {var _explore$controls, _explore$controls$tim, _chart$queriesRespons, _chart$queriesRespons2;\n          const timeComparisonValue = explore == null ? void 0 : (_explore$controls = explore.controls) == null ? void 0 : (_explore$controls$tim = _explore$controls.time_compare) == null ? void 0 : _explore$controls$tim.value;\n          const { colnames: _colnames, coltypes: _coltypes } = (_chart$queriesRespons = chart == null ? void 0 : (_chart$queriesRespons2 = chart.queriesResponse) == null ? void 0 : _chart$queriesRespons2[0]) != null ? _chart$queriesRespons : {};\n          let colnames = _colnames || [];\n          let coltypes = _coltypes || [];\n          const childColumnMap = {};\n          const timeComparisonColumnMap = {};\n          if (!_isEmpty(timeComparisonValue)) {\n            /**\n             * Replace numeric columns with sets of comparison columns.\n             */\n            const updatedColnames = [];\n            const updatedColtypes = [];\n            colnames.\n            filter((colname) => _last(colname.split('__')) !== timeComparisonValue).\n            forEach((colname, index) => {var _explore$form_data$me, _explore$form_data$pe;\n              if ((_explore$form_data$me = explore.form_data.metrics) != null && _explore$form_data$me.some((metric) => getMetricLabel(metric) === colname) || (_explore$form_data$pe =\n              explore.form_data.percent_metrics) != null && _explore$form_data$pe.some((metric) => getMetricLabel(metric) === colname)) {\n                const comparisonColumns = generateComparisonColumns(colname);\n                comparisonColumns.forEach((name, idx) => {\n                  updatedColnames.push(name);\n                  updatedColtypes.push(...generateComparisonColumnTypes(4));\n                  timeComparisonColumnMap[name] = true;\n                  if (idx === 0 && name.startsWith('Main ')) {\n                    childColumnMap[name] = false;\n                  } else\n                  {\n                    childColumnMap[name] = true;\n                  }\n                });\n              } else\n              {\n                updatedColnames.push(colname);\n                updatedColtypes.push(coltypes[index]);\n                childColumnMap[colname] = false;\n                timeComparisonColumnMap[colname] = false;\n              }\n            });\n            colnames = updatedColnames;\n            coltypes = updatedColtypes;\n          }\n          return {\n            columnsPropsObject: {\n              colnames,\n              coltypes,\n              childColumnMap,\n              timeComparisonColumnMap\n            }\n          };\n        }\n      }\n    }]]\n\n\n  },\n  {\n    label: t('Visual formatting'),\n    expanded: true,\n    controlSetRows: [\n    [\n    {\n      name: 'show_cell_bars',\n      config: {\n        type: 'CheckboxControl',\n        label: t('Show Cell bars'),\n        renderTrigger: true,\n        default: true,\n        description: t('Whether to display a bar chart background in table columns')\n      }\n    }],\n\n    [\n    {\n      name: 'align_pn',\n      config: {\n        type: 'CheckboxControl',\n        label: t('Align +/-'),\n        renderTrigger: true,\n        default: false,\n        description: t('Whether to align background charts with both positive and negative values at 0')\n      }\n    }],\n\n    [\n    {\n      name: 'color_pn',\n      config: {\n        type: 'CheckboxControl',\n        label: t('add colors to cell bars for +/-'),\n        renderTrigger: true,\n        default: true,\n        description: t('Whether to colorize numeric values by whether they are positive or negative')\n      }\n    }],\n\n    [\n    {\n      name: 'comparison_color_enabled',\n      config: {\n        type: 'CheckboxControl',\n        label: t('basic conditional formatting'),\n        renderTrigger: true,\n        visibility: ({ controls }) => {var _controls$time_compar2;return !_isEmpty(controls == null ? void 0 : (_controls$time_compar2 = controls.time_compare) == null ? void 0 : _controls$time_compar2.value);},\n        default: false,\n        description: t('This will be applied to the whole table. Arrows (↑ and ↓) will be added to ' +\n        'main columns for increase and decrease. Basic conditional formatting can be ' +\n        'overwritten by conditional formatting below.')\n      }\n    }],\n\n    [\n    {\n      name: 'comparison_color_scheme',\n      config: {\n        type: 'SelectControl',\n        label: t('color type'),\n        default: ColorSchemeEnum.Green,\n        renderTrigger: true,\n        choices: [\n        [ColorSchemeEnum.Green, 'Green for increase, red for decrease'],\n        [ColorSchemeEnum.Red, 'Red for increase, green for decrease']],\n\n        visibility: ({ controls }) => {var _controls$time_compar3, _controls$comparison_;return !_isEmpty(controls == null ? void 0 : (_controls$time_compar3 = controls.time_compare) == null ? void 0 : _controls$time_compar3.value) &&\n          Boolean(controls == null ? void 0 : (_controls$comparison_ = controls.comparison_color_enabled) == null ? void 0 : _controls$comparison_.value);},\n        description: t('Adds color to the chart symbols based on the positive or ' +\n        'negative change from the comparison value.')\n      }\n    }],\n\n    [\n    {\n      name: 'conditional_formatting',\n      config: {\n        type: 'ConditionalFormattingControl',\n        renderTrigger: true,\n        label: t('Custom Conditional Formatting'),\n        extraColorChoices: [\n        {\n          value: ColorSchemeEnum.Green,\n          label: t('Green for increase, red for decrease')\n        },\n        {\n          value: ColorSchemeEnum.Red,\n          label: t('Red for increase, green for decrease')\n        }],\n\n        description: t('Apply conditional color formatting to numeric columns'),\n        shouldMapStateToProps() {\n          return true;\n        },\n        mapStateToProps(explore, _, chart) {var _explore$datasource, _explore$datasource2, _explore$datasource$c, _explore$datasource3, _chart$queriesRespons3, _chart$queriesRespons4, _explore$controls2, _explore$controls2$ti, _ensureIsArray$, _explore$controls3, _explore$controls3$ti;\n          const verboseMap = explore != null && (_explore$datasource = explore.datasource) != null && _explore$datasource.hasOwnProperty('verbose_map') ?\n          explore == null ? void 0 : (_explore$datasource2 = explore.datasource) == null ? void 0 : _explore$datasource2.verbose_map : (_explore$datasource$c =\n          explore == null ? void 0 : (_explore$datasource3 = explore.datasource) == null ? void 0 : _explore$datasource3.columns) != null ? _explore$datasource$c : {};\n          const chartStatus = chart == null ? void 0 : chart.chartStatus;\n          const { colnames, coltypes } = (_chart$queriesRespons3 = chart == null ? void 0 : (_chart$queriesRespons4 = chart.queriesResponse) == null ? void 0 : _chart$queriesRespons4[0]) != null ? _chart$queriesRespons3 : {};\n          const numericColumns = Array.isArray(colnames) && Array.isArray(coltypes) ?\n          colnames.\n          filter((colname, index) => coltypes[index] === GenericDataType.Numeric).\n          map((colname) => {var _verboseMap$colname;return {\n              value: colname,\n              label: Array.isArray(verboseMap) ?\n              colname : (_verboseMap$colname =\n              verboseMap[colname]) != null ? _verboseMap$colname : colname\n            };}) :\n          [];\n          const columnOptions = explore != null && (_explore$controls2 = explore.controls) != null && (_explore$controls2$ti = _explore$controls2.time_compare) != null && _explore$controls2$ti.value ?\n          processComparisonColumns(numericColumns || [], ((_ensureIsArray$ = ensureIsArray(explore == null ? void 0 : (_explore$controls3 = explore.controls) == null ? void 0 : (_explore$controls3$ti = _explore$controls3.time_compare) == null ? void 0 : _explore$controls3$ti.value)[0]) == null ? void 0 : _ensureIsArray$.toString()) || '') :\n          numericColumns;\n          return {\n            removeIrrelevantConditions: chartStatus === 'success',\n            columnOptions,\n            verboseMap\n          };\n        }\n      }\n    }]]\n\n\n  },\n  {\n    ...sections.timeComparisonControls({\n      multi: false,\n      showCalculationType: false,\n      showFullChoices: false\n    }),\n    visibility: isAggMode\n  }],\n\n  formDataOverrides: (formData) => ({\n    ...formData,\n    metrics: getStandardizedControls().popAllMetrics(),\n    groupby: getStandardizedControls().popAllColumns()\n  })\n};const _default =\nconfig;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getQueryMode, \"getQueryMode\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(isQueryMode, \"isQueryMode\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(isAggMode, \"isAggMode\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(isRawMode, \"isRawMode\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(validateAggControlValues, \"validateAggControlValues\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(queryMode, \"queryMode\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(allColumnsControl, \"allColumnsControl\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(percentMetricsControl, \"percentMetricsControl\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(generateComparisonColumns, \"generateComparisonColumns\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(generateComparisonColumnTypes, \"generateComparisonColumnTypes\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(processComparisonColumns, \"processComparisonColumns\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(config, \"config\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["ColumnOption","D3_TIME_FORMAT_OPTIONS","defineSavedMetrics","getStandardizedControls","QueryModeLabel","sections","sharedControls","ensureIsArray","GenericDataType","getMetricLabel","isAdhocColumn","isPhysicalColumn","QueryMode","SMART_DATE_ID","t","PAGE_SIZE_OPTIONS","ColorSchemeEnum","jsx","_jsx","getQueryMode","controls","_controls$query_mode","_controls$all_columns","mode","query_mode","value","Aggregate","Raw","rawColumns","all_columns","hasRawColumns","length","isQueryMode","isAggMode","isRawMode","validateAggControlValues","values","areControlsEmpty","every","val","queryMode","type","label","default","options","mapStateToProps","rerender","allColumnsControl","groupby","description","multi","freeForm","allowAll","commaChoosesOption","optionRenderer","c","showType","column","valueRenderer","valueKey","datasource","controlState","columns","externalValidationErrors","visibility","resetOnHide","percentMetricsControl","metrics","_controls$groupby","_controls$metrics","savedMetrics","datasourceType","validators","generateComparisonColumns","colname","generateComparisonColumnTypes","count","Array","fill","Numeric","processComparisonColumns","suffix","map","col","includes","flat","config","controlPanelSections","expanded","controlSetRows","name","override","state","_sharedControls$group","_originalMapStateToPr","_controls$metrics2","_controls$percent_met","originalMapStateToProps","newState","percent_metrics","time_grain_sqla","_controls$groupby2","dttmLookup","Object","fromEntries","option","column_name","is_dttm","selection","some","Boolean","form_data","_datasource$columns$","_datasource$columns","_controls$groupby3","_controls$percent_met2","hasOwnProperty","filter","filterable","selectedMetrics","metric","choices","order_by_choices","_controls$server_pagi","server_pagination","_controls$server_pagi2","renderTrigger","clearable","_controls$server_pagi3","_controls$time_compar","_isEmpty","time_compare","width","height","shouldMapStateToProps","explore","_","chart","_explore$controls","_explore$controls$tim","_chart$queriesRespons","_chart$queriesRespons2","timeComparisonValue","colnames","_colnames","coltypes","_coltypes","queriesResponse","childColumnMap","timeComparisonColumnMap","updatedColnames","updatedColtypes","_last","split","forEach","index","_explore$form_data$me","_explore$form_data$pe","comparisonColumns","idx","push","startsWith","columnsPropsObject","_controls$time_compar2","Green","Red","_controls$time_compar3","_controls$comparison_","comparison_color_enabled","extraColorChoices","_explore$datasource","_explore$datasource2","_explore$datasource$c","_explore$datasource3","_chart$queriesRespons3","_chart$queriesRespons4","_explore$controls2","_explore$controls2$ti","_ensureIsArray$","_explore$controls3","_explore$controls3$ti","verboseMap","verbose_map","chartStatus","numericColumns","isArray","_verboseMap$colname","columnOptions","toString","removeIrrelevantConditions","timeComparisonControls","showCalculationType","showFullChoices","formDataOverrides","formData","popAllMetrics","popAllColumns","_default","reactHotLoader","reactHotLoaderGlobal","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-table/src/controlPanel.tsx"],"sourcesContent":["/* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  ColumnMeta,\n  ColumnOption,\n  ControlConfig,\n  ControlPanelConfig,\n  ControlPanelsContainerProps,\n  ControlPanelState,\n  ControlState,\n  ControlStateMapping,\n  D3_TIME_FORMAT_OPTIONS,\n  Dataset,\n  defineSavedMetrics,\n  getStandardizedControls,\n  QueryModeLabel,\n  sections,\n  sharedControls,\n} from '@superset-ui/chart-controls';\nimport {\n  ensureIsArray,\n  GenericDataType,\n  getMetricLabel,\n  isAdhocColumn,\n  isPhysicalColumn,\n  QueryFormColumn,\n  QueryFormMetric,\n  QueryMode,\n  SMART_DATE_ID,\n  t,\n} from '@superset-ui/core';\n\nimport { isEmpty, last } from 'lodash';\nimport { PAGE_SIZE_OPTIONS } from './consts';\nimport { ColorSchemeEnum } from './types';\n\nfunction getQueryMode(controls: ControlStateMapping): QueryMode {\n  const mode = controls?.query_mode?.value;\n  if (mode === QueryMode.Aggregate || mode === QueryMode.Raw) {\n    return mode as QueryMode;\n  }\n  const rawColumns = controls?.all_columns?.value as\n    | QueryFormColumn[]\n    | undefined;\n  const hasRawColumns = rawColumns && rawColumns.length > 0;\n  return hasRawColumns ? QueryMode.Raw : QueryMode.Aggregate;\n}\n\n/**\n * Visibility check\n */\nfunction isQueryMode(mode: QueryMode) {\n  return ({ controls }: Pick<ControlPanelsContainerProps, 'controls'>) =>\n    getQueryMode(controls) === mode;\n}\n\nconst isAggMode = isQueryMode(QueryMode.Aggregate);\nconst isRawMode = isQueryMode(QueryMode.Raw);\n\nconst validateAggControlValues = (\n  controls: ControlStateMapping,\n  values: any[],\n) => {\n  const areControlsEmpty = values.every(val => ensureIsArray(val).length === 0);\n  return areControlsEmpty && isAggMode({ controls })\n    ? [t('Group By, Metrics or Percentage Metrics must have a value')]\n    : [];\n};\n\nconst queryMode: ControlConfig<'RadioButtonControl'> = {\n  type: 'RadioButtonControl',\n  label: t('Query mode'),\n  default: null,\n  options: [\n    [QueryMode.Aggregate, QueryModeLabel[QueryMode.Aggregate]],\n    [QueryMode.Raw, QueryModeLabel[QueryMode.Raw]],\n  ],\n  mapStateToProps: ({ controls }) => ({ value: getQueryMode(controls) }),\n  rerender: ['all_columns', 'groupby', 'metrics', 'percent_metrics'],\n};\n\nconst allColumnsControl: typeof sharedControls.groupby = {\n  ...sharedControls.groupby,\n  label: t('Columns'),\n  description: t('Columns to display'),\n  multi: true,\n  freeForm: true,\n  allowAll: true,\n  commaChoosesOption: false,\n  optionRenderer: c => <ColumnOption showType column={c} />,\n  valueRenderer: c => <ColumnOption column={c} />,\n  valueKey: 'column_name',\n  mapStateToProps: ({ datasource, controls }, controlState) => ({\n    options: datasource?.columns || [],\n    queryMode: getQueryMode(controls),\n    externalValidationErrors:\n      isRawMode({ controls }) && ensureIsArray(controlState?.value).length === 0\n        ? [t('must have a value')]\n        : [],\n  }),\n  visibility: isRawMode,\n  resetOnHide: false,\n};\n\nconst percentMetricsControl: typeof sharedControls.metrics = {\n  ...sharedControls.metrics,\n  label: t('Percentage metrics'),\n  description: t(\n    'Select one or many metrics to display, that will be displayed in the percentages of total. ' +\n      'Percentage metrics will be calculated only from data within the row limit. ' +\n      'You can use an aggregation function on a column or write custom SQL to create a percentage metric.',\n  ),\n  visibility: isAggMode,\n  resetOnHide: false,\n  mapStateToProps: ({ datasource, controls }, controlState) => ({\n    columns: datasource?.columns || [],\n    savedMetrics: defineSavedMetrics(datasource),\n    datasource,\n    datasourceType: datasource?.type,\n    queryMode: getQueryMode(controls),\n    externalValidationErrors: validateAggControlValues(controls, [\n      controls.groupby?.value,\n      controls.metrics?.value,\n      controlState?.value,\n    ]),\n  }),\n  rerender: ['groupby', 'metrics'],\n  default: [],\n  validators: [],\n};\n\n/**\n * Generate comparison column names for a given column.\n */\nconst generateComparisonColumns = (colname: string) => [\n  `${t('Main')} ${colname}`,\n  `# ${colname}`,\n  `△ ${colname}`,\n  `% ${colname}`,\n];\n/**\n * Generate column types for the comparison columns.\n */\nconst generateComparisonColumnTypes = (count: number) =>\n  Array(count).fill(GenericDataType.Numeric);\n\nconst processComparisonColumns = (columns: any[], suffix: string) =>\n  columns\n    .map(col => {\n      if (!col.label.includes(suffix)) {\n        return [\n          {\n            label: `${t('Main')} ${col.label}`,\n            value: `${t('Main')} ${col.value}`,\n          },\n          {\n            label: `# ${col.label}`,\n            value: `# ${col.value}`,\n          },\n          {\n            label: `△ ${col.label}`,\n            value: `△ ${col.value}`,\n          },\n          {\n            label: `% ${col.label}`,\n            value: `% ${col.value}`,\n          },\n        ];\n      }\n      return [];\n    })\n    .flat();\n\nconst config: ControlPanelConfig = {\n  controlPanelSections: [\n    {\n      label: t('Query'),\n      expanded: true,\n      controlSetRows: [\n        [\n          {\n            name: 'query_mode',\n            config: queryMode,\n          },\n        ],\n        [\n          {\n            name: 'groupby',\n            override: {\n              visibility: isAggMode,\n              resetOnHide: false,\n              mapStateToProps: (\n                state: ControlPanelState,\n                controlState: ControlState,\n              ) => {\n                const { controls } = state;\n                const originalMapStateToProps =\n                  sharedControls?.groupby?.mapStateToProps;\n                const newState =\n                  originalMapStateToProps?.(state, controlState) ?? {};\n                newState.externalValidationErrors = validateAggControlValues(\n                  controls,\n                  [\n                    controls.metrics?.value,\n                    controls.percent_metrics?.value,\n                    controlState.value,\n                  ],\n                );\n\n                return newState;\n              },\n              rerender: ['metrics', 'percent_metrics'],\n            },\n          },\n        ],\n        [\n          {\n            name: 'time_grain_sqla',\n            config: {\n              ...sharedControls.time_grain_sqla,\n              visibility: ({ controls }) => {\n                const dttmLookup = Object.fromEntries(\n                  ensureIsArray(controls?.groupby?.options).map(option => [\n                    option.column_name,\n                    option.is_dttm,\n                  ]),\n                );\n\n                return ensureIsArray(controls?.groupby.value)\n                  .map(selection => {\n                    if (isAdhocColumn(selection)) {\n                      return true;\n                    }\n                    if (isPhysicalColumn(selection)) {\n                      return !!dttmLookup[selection];\n                    }\n                    return false;\n                  })\n                  .some(Boolean);\n              },\n            },\n          },\n          'temporal_columns_lookup',\n        ],\n        [\n          {\n            name: 'metrics',\n            override: {\n              validators: [],\n              visibility: isAggMode,\n              resetOnHide: false,\n              mapStateToProps: (\n                { controls, datasource, form_data }: ControlPanelState,\n                controlState: ControlState,\n              ) => ({\n                columns: datasource?.columns[0]?.hasOwnProperty('filterable')\n                  ? (datasource as Dataset)?.columns?.filter(\n                      (c: ColumnMeta) => c.filterable,\n                    )\n                  : datasource?.columns,\n                savedMetrics: defineSavedMetrics(datasource),\n                // current active adhoc metrics\n                selectedMetrics:\n                  form_data.metrics ||\n                  (form_data.metric ? [form_data.metric] : []),\n                datasource,\n                externalValidationErrors: validateAggControlValues(controls, [\n                  controls.groupby?.value,\n                  controls.percent_metrics?.value,\n                  controlState.value,\n                ]),\n              }),\n              rerender: ['groupby', 'percent_metrics'],\n            },\n          },\n          {\n            name: 'all_columns',\n            config: allColumnsControl,\n          },\n        ],\n        [\n          {\n            name: 'percent_metrics',\n            config: percentMetricsControl,\n          },\n        ],\n        ['adhoc_filters'],\n        [\n          {\n            name: 'timeseries_limit_metric',\n            override: {\n              visibility: isAggMode,\n              resetOnHide: false,\n            },\n          },\n          {\n            name: 'order_by_cols',\n            config: {\n              type: 'SelectControl',\n              label: t('Ordering'),\n              description: t('Order results by selected columns'),\n              multi: true,\n              default: [],\n              mapStateToProps: ({ datasource }) => ({\n                choices: datasource?.hasOwnProperty('order_by_choices')\n                  ? (datasource as Dataset)?.order_by_choices\n                  : datasource?.columns || [],\n              }),\n              visibility: isRawMode,\n              resetOnHide: false,\n            },\n          },\n        ],\n        [\n          {\n            name: 'server_pagination',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Server pagination'),\n              description: t(\n                'Enable server side pagination of results (experimental feature)',\n              ),\n              default: false,\n            },\n          },\n        ],\n        [\n          {\n            name: 'row_limit',\n            override: {\n              default: 1000,\n              visibility: ({ controls }: ControlPanelsContainerProps) =>\n                !controls?.server_pagination?.value,\n            },\n          },\n          {\n            name: 'server_page_length',\n            config: {\n              type: 'SelectControl',\n              freeForm: true,\n              label: t('Server Page Length'),\n              default: 10,\n              choices: PAGE_SIZE_OPTIONS,\n              description: t('Rows per page, 0 means no pagination'),\n              visibility: ({ controls }: ControlPanelsContainerProps) =>\n                Boolean(controls?.server_pagination?.value),\n            },\n          },\n        ],\n        [\n          {\n            name: 'order_desc',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Sort descending'),\n              default: true,\n              description: t(\n                'If enabled, this control sorts the results/values descending, otherwise it sorts the results ascending.',\n              ),\n              visibility: isAggMode,\n              resetOnHide: false,\n            },\n          },\n        ],\n        [\n          {\n            name: 'show_totals',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Show summary'),\n              default: false,\n              description: t(\n                'Show total aggregations of selected metrics. Note that row limit does not apply to the result.',\n              ),\n              visibility: isAggMode,\n              resetOnHide: false,\n            },\n          },\n        ],\n      ],\n    },\n    {\n      label: t('Options'),\n      expanded: true,\n      controlSetRows: [\n        [\n          {\n            name: 'table_timestamp_format',\n            config: {\n              type: 'SelectControl',\n              freeForm: true,\n              label: t('Timestamp format'),\n              default: SMART_DATE_ID,\n              renderTrigger: true,\n              clearable: false,\n              choices: D3_TIME_FORMAT_OPTIONS,\n              description: t('D3 time format for datetime columns'),\n            },\n          },\n        ],\n        [\n          {\n            name: 'page_length',\n            config: {\n              type: 'SelectControl',\n              freeForm: true,\n              renderTrigger: true,\n              label: t('Page length'),\n              default: null,\n              choices: PAGE_SIZE_OPTIONS,\n              description: t('Rows per page, 0 means no pagination'),\n              visibility: ({ controls }: ControlPanelsContainerProps) =>\n                !controls?.server_pagination?.value,\n            },\n          },\n          null,\n        ],\n        [\n          {\n            name: 'include_search',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Search box'),\n              renderTrigger: true,\n              default: false,\n              description: t('Whether to include a client-side search box'),\n            },\n          },\n        ],\n        [\n          {\n            name: 'allow_rearrange_columns',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Allow columns to be rearranged'),\n              renderTrigger: true,\n              default: false,\n              description: t(\n                \"Allow end user to drag-and-drop column headers to rearrange them. Note their changes won't persist for the next time they open the chart.\",\n              ),\n              visibility: ({ controls }) =>\n                isEmpty(controls?.time_compare?.value),\n            },\n          },\n        ],\n        [\n          {\n            name: 'allow_render_html',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Render columns in HTML format'),\n              renderTrigger: true,\n              default: true,\n              description: t(\n                'Renders table cells as HTML when applicable. For example, HTML <a> tags will be rendered as hyperlinks.',\n              ),\n            },\n          },\n        ],\n        [\n          {\n            name: 'column_config',\n            config: {\n              type: 'ColumnConfigControl',\n              label: t('Customize columns'),\n              description: t('Further customize how to display each column'),\n              width: 400,\n              height: 320,\n              renderTrigger: true,\n              shouldMapStateToProps() {\n                return true;\n              },\n              mapStateToProps(explore, _, chart) {\n                const timeComparisonValue =\n                  explore?.controls?.time_compare?.value;\n                const { colnames: _colnames, coltypes: _coltypes } =\n                  chart?.queriesResponse?.[0] ?? {};\n                let colnames: string[] = _colnames || [];\n                let coltypes: GenericDataType[] = _coltypes || [];\n                const childColumnMap: Record<string, boolean> = {};\n                const timeComparisonColumnMap: Record<string, boolean> = {};\n\n                if (!isEmpty(timeComparisonValue)) {\n                  /**\n                   * Replace numeric columns with sets of comparison columns.\n                   */\n                  const updatedColnames: string[] = [];\n                  const updatedColtypes: GenericDataType[] = [];\n\n                  colnames\n                    .filter(\n                      colname =>\n                        last(colname.split('__')) !== timeComparisonValue,\n                    )\n                    .forEach((colname, index) => {\n                      if (\n                        explore.form_data.metrics?.some(\n                          metric => getMetricLabel(metric) === colname,\n                        ) ||\n                        explore.form_data.percent_metrics?.some(\n                          (metric: QueryFormMetric) =>\n                            getMetricLabel(metric) === colname,\n                        )\n                      ) {\n                        const comparisonColumns =\n                          generateComparisonColumns(colname);\n                        comparisonColumns.forEach((name, idx) => {\n                          updatedColnames.push(name);\n                          updatedColtypes.push(\n                            ...generateComparisonColumnTypes(4),\n                          );\n                          timeComparisonColumnMap[name] = true;\n                          if (idx === 0 && name.startsWith('Main ')) {\n                            childColumnMap[name] = false;\n                          } else {\n                            childColumnMap[name] = true;\n                          }\n                        });\n                      } else {\n                        updatedColnames.push(colname);\n                        updatedColtypes.push(coltypes[index]);\n                        childColumnMap[colname] = false;\n                        timeComparisonColumnMap[colname] = false;\n                      }\n                    });\n\n                  colnames = updatedColnames;\n                  coltypes = updatedColtypes;\n                }\n                return {\n                  columnsPropsObject: {\n                    colnames,\n                    coltypes,\n                    childColumnMap,\n                    timeComparisonColumnMap,\n                  },\n                };\n              },\n            },\n          },\n        ],\n      ],\n    },\n    {\n      label: t('Visual formatting'),\n      expanded: true,\n      controlSetRows: [\n        [\n          {\n            name: 'show_cell_bars',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Show Cell bars'),\n              renderTrigger: true,\n              default: true,\n              description: t(\n                'Whether to display a bar chart background in table columns',\n              ),\n            },\n          },\n        ],\n        [\n          {\n            name: 'align_pn',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Align +/-'),\n              renderTrigger: true,\n              default: false,\n              description: t(\n                'Whether to align background charts with both positive and negative values at 0',\n              ),\n            },\n          },\n        ],\n        [\n          {\n            name: 'color_pn',\n            config: {\n              type: 'CheckboxControl',\n              label: t('add colors to cell bars for +/-'),\n              renderTrigger: true,\n              default: true,\n              description: t(\n                'Whether to colorize numeric values by whether they are positive or negative',\n              ),\n            },\n          },\n        ],\n        [\n          {\n            name: 'comparison_color_enabled',\n            config: {\n              type: 'CheckboxControl',\n              label: t('basic conditional formatting'),\n              renderTrigger: true,\n              visibility: ({ controls }) =>\n                !isEmpty(controls?.time_compare?.value),\n              default: false,\n              description: t(\n                'This will be applied to the whole table. Arrows (↑ and ↓) will be added to ' +\n                  'main columns for increase and decrease. Basic conditional formatting can be ' +\n                  'overwritten by conditional formatting below.',\n              ),\n            },\n          },\n        ],\n        [\n          {\n            name: 'comparison_color_scheme',\n            config: {\n              type: 'SelectControl',\n              label: t('color type'),\n              default: ColorSchemeEnum.Green,\n              renderTrigger: true,\n              choices: [\n                [ColorSchemeEnum.Green, 'Green for increase, red for decrease'],\n                [ColorSchemeEnum.Red, 'Red for increase, green for decrease'],\n              ],\n              visibility: ({ controls }) =>\n                !isEmpty(controls?.time_compare?.value) &&\n                Boolean(controls?.comparison_color_enabled?.value),\n              description: t(\n                'Adds color to the chart symbols based on the positive or ' +\n                  'negative change from the comparison value.',\n              ),\n            },\n          },\n        ],\n        [\n          {\n            name: 'conditional_formatting',\n            config: {\n              type: 'ConditionalFormattingControl',\n              renderTrigger: true,\n              label: t('Custom Conditional Formatting'),\n              extraColorChoices: [\n                {\n                  value: ColorSchemeEnum.Green,\n                  label: t('Green for increase, red for decrease'),\n                },\n                {\n                  value: ColorSchemeEnum.Red,\n                  label: t('Red for increase, green for decrease'),\n                },\n              ],\n              description: t(\n                'Apply conditional color formatting to numeric columns',\n              ),\n              shouldMapStateToProps() {\n                return true;\n              },\n              mapStateToProps(explore, _, chart) {\n                const verboseMap = explore?.datasource?.hasOwnProperty(\n                  'verbose_map',\n                )\n                  ? (explore?.datasource as Dataset)?.verbose_map\n                  : (explore?.datasource?.columns ?? {});\n                const chartStatus = chart?.chartStatus;\n                const { colnames, coltypes } =\n                  chart?.queriesResponse?.[0] ?? {};\n                const numericColumns =\n                  Array.isArray(colnames) && Array.isArray(coltypes)\n                    ? colnames\n                        .filter(\n                          (colname: string, index: number) =>\n                            coltypes[index] === GenericDataType.Numeric,\n                        )\n                        .map((colname: string) => ({\n                          value: colname,\n                          label: Array.isArray(verboseMap)\n                            ? colname\n                            : (verboseMap[colname] ?? colname),\n                        }))\n                    : [];\n                const columnOptions = explore?.controls?.time_compare?.value\n                  ? processComparisonColumns(\n                      numericColumns || [],\n                      ensureIsArray(\n                        explore?.controls?.time_compare?.value,\n                      )[0]?.toString() || '',\n                    )\n                  : numericColumns;\n\n                return {\n                  removeIrrelevantConditions: chartStatus === 'success',\n                  columnOptions,\n                  verboseMap,\n                };\n              },\n            },\n          },\n        ],\n      ],\n    },\n    {\n      ...sections.timeComparisonControls({\n        multi: false,\n        showCalculationType: false,\n        showFullChoices: false,\n      }),\n      visibility: isAggMode,\n    },\n  ],\n  formDataOverrides: formData => ({\n    ...formData,\n    metrics: getStandardizedControls().popAllMetrics(),\n    groupby: getStandardizedControls().popAllColumns(),\n  }),\n};\n\nexport default config;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}