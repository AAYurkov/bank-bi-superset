{"ast":null,"code":"import { css as _css } from \"@emotion/react\";import _isEmpty from \"lodash/isEmpty\";import _get from \"lodash/get\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// TODO: Remove fa-icon\n/* eslint-disable icons/no-fa-icons-usage */\nimport { Fragment, useState, useEffect, PureComponent } from 'react';\nimport rison from 'rison';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { useQueryParams, BooleanParam } from 'use-query-params';\n\nimport { t, styled, css, SupersetClient, getExtensionsRegistry, useTheme } from '@superset-ui/core';\nimport { Menu } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Icons } from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport { ensureAppRoot } from 'src/utils/pathUtils';\nimport { findPermission } from 'src/utils/findPermission';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport DatabaseModal from 'src/features/databases/DatabaseModal';\nimport UploadDataModal from 'src/features/databases/UploadDataModel';\nimport { uploadUserPerms } from 'src/views/CRUD/utils';\nimport TelemetryPixel from 'src/components/TelemetryPixel';\nimport LanguagePicker from './LanguagePicker';\nimport { GlobalMenuDataOptions } from './types';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst extensionsRegistry = getExtensionsRegistry();\nconst versionInfoStyles = (theme) => css`\n  padding: ${theme.gridUnit * 1.5}px ${theme.gridUnit * 4}px\n    ${theme.gridUnit * 4}px ${theme.gridUnit * 7}px;\n  color: ${theme.colors.grayscale.base};\n  font-size: ${theme.typography.sizes.xs}px;\n  white-space: nowrap;\n`;\nconst styledDisabled = (theme) => css`\n  color: ${theme.colors.grayscale.light1};\n`;\nconst StyledDiv = styled.div`\n  display: flex;\n  height: 100%;\n  flex-direction: row;\n  justify-content: ${({ align }) => align};\n  align-items: center;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\nconst StyledMenuItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\nconst StyledAnchor = styled.a`\n  padding-right: ${({ theme }) => theme.gridUnit}px;\n  padding-left: ${({ theme }) => theme.gridUnit}px;\n`;\nconst tagStyles = (theme) => css`\n  color: ${theme.colors.grayscale.light5};\n`;\nconst styledChildMenu = (theme) => css`\n  &:hover {\n    color: ${theme.colors.primary.base} !important;\n    cursor: pointer !important;\n  }\n`;\nconst { SubMenu } = Menu;\nconst StyledSubMenu = styled(SubMenu)`\n  ${({ theme }) => css`\n    [data-icon='caret-down'] {\n      color: ${theme.colors.grayscale.base};\n      font-size: ${theme.typography.sizes.xxs}px;\n      margin-left: ${theme.gridUnit}px;\n    }\n    &.antd5-menu-submenu-active {\n      .antd5-menu-title-content {\n        color: ${theme.colors.primary.base};\n      }\n    }\n  `}\n`;\nconst RightMenu = ({ align, settings, navbarRight, isFrontendRoute, environmentTag, setQuery }) => {\n  const user = useSelector((state) => state.user);\n  const dashboardId = useSelector((state) => {var _state$dashboardInfo;return (_state$dashboardInfo = state.dashboardInfo) == null ? void 0 : _state$dashboardInfo.id;});\n  const userValues = user || {};\n  const { roles } = userValues;\n  const { CSV_EXTENSIONS, COLUMNAR_EXTENSIONS, EXCEL_EXTENSIONS, ALLOWED_EXTENSIONS, HAS_GSHEETS_INSTALLED } = useSelector((state) => state.common.conf);\n  const [showDatabaseModal, setShowDatabaseModal] = useState(false);\n  const [showCSVUploadModal, setShowCSVUploadModal] = useState(false);\n  const [showExcelUploadModal, setShowExcelUploadModal] = useState(false);\n  const [showColumnarUploadModal, setShowColumnarUploadModal] = useState(false);\n  const [engine, setEngine] = useState('');\n  const canSql = findPermission('can_sqllab', 'Superset', roles);\n  const canDashboard = findPermission('can_write', 'Dashboard', roles);\n  const canChart = findPermission('can_write', 'Chart', roles);\n  const canDatabase = findPermission('can_write', 'Database', roles);\n  const canDataset = findPermission('can_write', 'Dataset', roles);\n  const { canUploadData, canUploadCSV, canUploadColumnar, canUploadExcel } = uploadUserPerms(roles, CSV_EXTENSIONS, COLUMNAR_EXTENSIONS, EXCEL_EXTENSIONS, ALLOWED_EXTENSIONS);\n  const showActionDropdown = canSql || canChart || canDashboard;\n  const [allowUploads, setAllowUploads] = useState(false);\n  const [nonExamplesDBConnected, setNonExamplesDBConnected] = useState(false);\n  const isAdmin = isUserAdmin(user);\n  const showUploads = allowUploads || isAdmin;\n  const dropdownItems = [\n  {\n    label: t('Data'),\n    icon: 'fa-database',\n    childs: [\n    {\n      label: t('Connect database'),\n      name: GlobalMenuDataOptions.DbConnection,\n      perm: canDatabase && !nonExamplesDBConnected\n    },\n    {\n      label: t('Create dataset'),\n      name: GlobalMenuDataOptions.DatasetCreation,\n      url: '/dataset/add/',\n      perm: canDataset && nonExamplesDBConnected\n    },\n    {\n      label: t('Connect Google Sheet'),\n      name: GlobalMenuDataOptions.GoogleSheets,\n      perm: canDatabase && HAS_GSHEETS_INSTALLED\n    },\n    {\n      label: t('Upload CSV to database'),\n      name: GlobalMenuDataOptions.CSVUpload,\n      perm: canUploadCSV && showUploads,\n      disable: isAdmin && !allowUploads\n    },\n    {\n      label: t('Upload Excel to database'),\n      name: GlobalMenuDataOptions.ExcelUpload,\n      perm: canUploadExcel && showUploads,\n      disable: isAdmin && !allowUploads\n    },\n    {\n      label: t('Upload Columnar file to database'),\n      name: GlobalMenuDataOptions.ColumnarUpload,\n      perm: canUploadColumnar && showUploads,\n      disable: isAdmin && !allowUploads\n    }]\n\n  },\n  {\n    label: t('SQL query'),\n    url: '/sqllab?new=true',\n    icon: 'fa-fw fa-search',\n    perm: 'can_sqllab',\n    view: 'Superset'\n  },\n  {\n    label: t('Chart'),\n    url: Number.isInteger(dashboardId) ?\n    `/chart/add?dashboard_id=${dashboardId}` :\n    '/chart/add',\n    icon: 'fa-fw fa-bar-chart',\n    perm: 'can_write',\n    view: 'Chart'\n  },\n  {\n    label: t('Dashboard'),\n    url: '/dashboard/new',\n    icon: 'fa-fw fa-dashboard',\n    perm: 'can_write',\n    view: 'Dashboard'\n  }];\n\n  const checkAllowUploads = () => {\n    const payload = {\n      filters: [\n      { col: 'allow_file_upload', opr: 'upload_is_enabled', value: true }]\n\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`\n    }).then(({ json }) => {var _json$result;\n      // There might be some existing Gsheets and Clickhouse DBs\n      // with allow_file_upload set as True which is not possible from now on\n      const allowedDatabasesWithFileUpload = (json == null ? void 0 : (_json$result = json.result) == null ? void 0 : _json$result.filter((database) => {var _database$engine_info;return database == null ? void 0 : (_database$engine_info = database.engine_information) == null ? void 0 : _database$engine_info.supports_file_upload;})) || [];\n      setAllowUploads((allowedDatabasesWithFileUpload == null ? void 0 : allowedDatabasesWithFileUpload.length) >= 1);\n    });\n  };\n  const existsNonExamplesDatabases = () => {\n    const payload = {\n      filters: [{ col: 'database_name', opr: 'neq', value: 'examples' }]\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`\n    }).then(({ json }) => {\n      setNonExamplesDBConnected(json.count >= 1);\n    });\n  };\n  useEffect(() => {\n    if (canUploadData) {\n      checkAllowUploads();\n    }\n  }, [canUploadData]);\n  useEffect(() => {\n    if (canDatabase || canDataset) {\n      existsNonExamplesDatabases();\n    }\n  }, [canDatabase, canDataset]);\n  const menuIcon = (menu) => _jsx(\"i\", { \"data-test\": `menu-item-${menu.label}`, className: `fa ${menu.icon}` });\n  const handleMenuSelection = (itemChose) => {\n    if (itemChose.key === GlobalMenuDataOptions.DbConnection) {\n      setShowDatabaseModal(true);\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.GoogleSheets) {\n      setShowDatabaseModal(true);\n      setEngine('Google Sheets');\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.CSVUpload) {\n      setShowCSVUploadModal(true);\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.ExcelUpload) {\n      setShowExcelUploadModal(true);\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.ColumnarUpload) {\n      setShowColumnarUploadModal(true);\n    }\n  };\n  const handleOnHideModal = () => {\n    setEngine('');\n    setShowDatabaseModal(false);\n  };\n  const tooltipText = t(\"Enable 'Allow file uploads to database' in any database's settings\");\n  const buildMenuItem = (item) => item.disable ? _jsx(Menu.Item, { css: styledDisabled, disabled: true, children:\n    _jsx(Tooltip, { placement: \"top\", title: tooltipText, children:\n      item.label }\n    ) }, item.name\n  ) : _jsx(Menu.Item, { css: styledChildMenu, children:\n    item.url ? _jsxs(\"a\", { href: ensureAppRoot(item.url), children: [\" \", item.label, \" \"] }) : item.label }, item.name\n  );\n  const onMenuOpen = (openKeys) => {\n    // We should query the API only if opening Data submenus\n    // because the rest don't need this information. Not using\n    // \"Data\" directly since we might change the label later on?\n    if (openKeys.length > 1 &&\n    !_isEmpty(openKeys == null ? void 0 : openKeys.filter((key) => {var _dropdownItems$;return key.includes(`sub2_${dropdownItems == null ? void 0 : (_dropdownItems$ = dropdownItems[0]) == null ? void 0 : _dropdownItems$.label}`);}))) {\n      if (canUploadData)\n      checkAllowUploads();\n      if (canDatabase || canDataset)\n      existsNonExamplesDatabases();\n    }\n    return null;\n  };\n  const RightMenuExtension = extensionsRegistry.get('navbar.right');\n  const RightMenuItemIconExtension = extensionsRegistry.get('navbar.right-menu.item.icon');\n  const handleDatabaseAdd = () => setQuery({ databaseAdded: true });\n  const handleLogout = () => {\n    localStorage.removeItem('redux');\n  };\n  const theme = useTheme();\n  return _jsxs(StyledDiv, { align: align, children: [\n    canDatabase && _jsx(DatabaseModal, { onHide: handleOnHideModal, show: showDatabaseModal, dbEngine: engine, onDatabaseAdd: handleDatabaseAdd }),\n    canUploadCSV && _jsx(UploadDataModal, { onHide: () => setShowCSVUploadModal(false), show: showCSVUploadModal, allowedExtensions: CSV_EXTENSIONS, type: \"csv\" }),\n    canUploadExcel && _jsx(UploadDataModal, { onHide: () => setShowExcelUploadModal(false), show: showExcelUploadModal, allowedExtensions: EXCEL_EXTENSIONS, type: \"excel\" }),\n    canUploadColumnar && _jsx(UploadDataModal, { onHide: () => setShowColumnarUploadModal(false), show: showColumnarUploadModal, allowedExtensions: COLUMNAR_EXTENSIONS, type: \"columnar\" }),\n    (environmentTag == null ? void 0 : environmentTag.text) && _jsx(Label, { css: /*#__PURE__*/_css({ borderRadius: `${theme.gridUnit * 125}px` }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:RightMenu;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZmVhdHVyZXMvaG9tZS9SaWdodE1lbnUudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQStRdUMiLCJmaWxlIjoiL1VzZXJzL2FyeXVya292L3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9mZWF0dXJlcy9ob21lL1JpZ2h0TWVudS50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPOiBSZW1vdmUgZmEtaWNvblxuLyogZXNsaW50LWRpc2FibGUgaWNvbnMvbm8tZmEtaWNvbnMtdXNhZ2UgKi9cbmltcG9ydCB7IEZyYWdtZW50LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBQdXJlQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uJztcbmltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHsgdXNlUXVlcnlQYXJhbXMsIEJvb2xlYW5QYXJhbSB9IGZyb20gJ3VzZS1xdWVyeS1wYXJhbXMnO1xuaW1wb3J0IHsgZ2V0LCBpc0VtcHR5IH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHQsIHN0eWxlZCwgY3NzLCBTdXBlcnNldENsaWVudCwgZ2V0RXh0ZW5zaW9uc1JlZ2lzdHJ5LCB1c2VUaGVtZSwgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBNZW51IH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvTWVudSc7XG5pbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvVG9vbHRpcCc7XG5pbXBvcnQgeyBJY29ucyB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0ljb25zJztcbmltcG9ydCBMYWJlbCBmcm9tICdzcmMvY29tcG9uZW50cy9MYWJlbCc7XG5pbXBvcnQgeyBlbnN1cmVBcHBSb290IH0gZnJvbSAnc3JjL3V0aWxzL3BhdGhVdGlscyc7XG5pbXBvcnQgeyBmaW5kUGVybWlzc2lvbiB9IGZyb20gJ3NyYy91dGlscy9maW5kUGVybWlzc2lvbic7XG5pbXBvcnQgeyBpc1VzZXJBZG1pbiB9IGZyb20gJ3NyYy9kYXNoYm9hcmQvdXRpbC9wZXJtaXNzaW9uVXRpbHMnO1xuaW1wb3J0IERhdGFiYXNlTW9kYWwgZnJvbSAnc3JjL2ZlYXR1cmVzL2RhdGFiYXNlcy9EYXRhYmFzZU1vZGFsJztcbmltcG9ydCBVcGxvYWREYXRhTW9kYWwgZnJvbSAnc3JjL2ZlYXR1cmVzL2RhdGFiYXNlcy9VcGxvYWREYXRhTW9kZWwnO1xuaW1wb3J0IHsgdXBsb2FkVXNlclBlcm1zIH0gZnJvbSAnc3JjL3ZpZXdzL0NSVUQvdXRpbHMnO1xuaW1wb3J0IFRlbGVtZXRyeVBpeGVsIGZyb20gJ3NyYy9jb21wb25lbnRzL1RlbGVtZXRyeVBpeGVsJztcbmltcG9ydCBMYW5ndWFnZVBpY2tlciBmcm9tICcuL0xhbmd1YWdlUGlja2VyJztcbmltcG9ydCB7IEdsb2JhbE1lbnVEYXRhT3B0aW9ucywgfSBmcm9tICcuL3R5cGVzJztcbmNvbnN0IGV4dGVuc2lvbnNSZWdpc3RyeSA9IGdldEV4dGVuc2lvbnNSZWdpc3RyeSgpO1xuY29uc3QgdmVyc2lvbkluZm9TdHlsZXMgPSAodGhlbWUpID0+IGNzcyBgXG4gIHBhZGRpbmc6ICR7dGhlbWUuZ3JpZFVuaXQgKiAxLjV9cHggJHt0aGVtZS5ncmlkVW5pdCAqIDR9cHhcbiAgICAke3RoZW1lLmdyaWRVbml0ICogNH1weCAke3RoZW1lLmdyaWRVbml0ICogN31weDtcbiAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfTtcbiAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuc2l6ZXMueHN9cHg7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG5gO1xuY29uc3Qgc3R5bGVkRGlzYWJsZWQgPSAodGhlbWUpID0+IGNzcyBgXG4gIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQxfTtcbmA7XG5jb25zdCBTdHlsZWREaXYgPSBzdHlsZWQuZGl2IGBcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiAxMDAlO1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBqdXN0aWZ5LWNvbnRlbnQ6ICR7KHsgYWxpZ24gfSkgPT4gYWxpZ259O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBtYXJnaW4tcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG5gO1xuY29uc3QgU3R5bGVkTWVudUl0ZW1XaXRoSWNvbiA9IHN0eWxlZC5kaXYgYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5gO1xuY29uc3QgU3R5bGVkQW5jaG9yID0gc3R5bGVkLmEgYFxuICBwYWRkaW5nLXJpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICBwYWRkaW5nLWxlZnQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG5gO1xuY29uc3QgdGFnU3R5bGVzID0gKHRoZW1lKSA9PiBjc3MgYFxuICBjb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0NX07XG5gO1xuY29uc3Qgc3R5bGVkQ2hpbGRNZW51ID0gKHRoZW1lKSA9PiBjc3MgYFxuICAmOmhvdmVyIHtcbiAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeS5iYXNlfSAhaW1wb3J0YW50O1xuICAgIGN1cnNvcjogcG9pbnRlciAhaW1wb3J0YW50O1xuICB9XG5gO1xuY29uc3QgeyBTdWJNZW51IH0gPSBNZW51O1xuY29uc3QgU3R5bGVkU3ViTWVudSA9IHN0eWxlZChTdWJNZW51KSBgXG4gICR7KHsgdGhlbWUgfSkgPT4gY3NzIGBcbiAgICBbZGF0YS1pY29uPSdjYXJldC1kb3duJ10ge1xuICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfTtcbiAgICAgIGZvbnQtc2l6ZTogJHt0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnh4c31weDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAke3RoZW1lLmdyaWRVbml0fXB4O1xuICAgIH1cbiAgICAmLmFudGQ1LW1lbnUtc3VibWVudS1hY3RpdmUge1xuICAgICAgLmFudGQ1LW1lbnUtdGl0bGUtY29udGVudCB7XG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wcmltYXJ5LmJhc2V9O1xuICAgICAgfVxuICAgIH1cbiAgYH1cbmA7XG5jb25zdCBSaWdodE1lbnUgPSAoeyBhbGlnbiwgc2V0dGluZ3MsIG5hdmJhclJpZ2h0LCBpc0Zyb250ZW5kUm91dGUsIGVudmlyb25tZW50VGFnLCBzZXRRdWVyeSwgfSkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS51c2VyKTtcbiAgICBjb25zdCBkYXNoYm9hcmRJZCA9IHVzZVNlbGVjdG9yKHN0YXRlID0+IHN0YXRlLmRhc2hib2FyZEluZm8/LmlkKTtcbiAgICBjb25zdCB1c2VyVmFsdWVzID0gdXNlciB8fCB7fTtcbiAgICBjb25zdCB7IHJvbGVzIH0gPSB1c2VyVmFsdWVzO1xuICAgIGNvbnN0IHsgQ1NWX0VYVEVOU0lPTlMsIENPTFVNTkFSX0VYVEVOU0lPTlMsIEVYQ0VMX0VYVEVOU0lPTlMsIEFMTE9XRURfRVhURU5TSU9OUywgSEFTX0dTSEVFVFNfSU5TVEFMTEVELCB9ID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUuY29tbW9uLmNvbmYpO1xuICAgIGNvbnN0IFtzaG93RGF0YWJhc2VNb2RhbCwgc2V0U2hvd0RhdGFiYXNlTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtzaG93Q1NWVXBsb2FkTW9kYWwsIHNldFNob3dDU1ZVcGxvYWRNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW3Nob3dFeGNlbFVwbG9hZE1vZGFsLCBzZXRTaG93RXhjZWxVcGxvYWRNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW3Nob3dDb2x1bW5hclVwbG9hZE1vZGFsLCBzZXRTaG93Q29sdW1uYXJVcGxvYWRNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2VuZ2luZSwgc2V0RW5naW5lXSA9IHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBjYW5TcWwgPSBmaW5kUGVybWlzc2lvbignY2FuX3NxbGxhYicsICdTdXBlcnNldCcsIHJvbGVzKTtcbiAgICBjb25zdCBjYW5EYXNoYm9hcmQgPSBmaW5kUGVybWlzc2lvbignY2FuX3dyaXRlJywgJ0Rhc2hib2FyZCcsIHJvbGVzKTtcbiAgICBjb25zdCBjYW5DaGFydCA9IGZpbmRQZXJtaXNzaW9uKCdjYW5fd3JpdGUnLCAnQ2hhcnQnLCByb2xlcyk7XG4gICAgY29uc3QgY2FuRGF0YWJhc2UgPSBmaW5kUGVybWlzc2lvbignY2FuX3dyaXRlJywgJ0RhdGFiYXNlJywgcm9sZXMpO1xuICAgIGNvbnN0IGNhbkRhdGFzZXQgPSBmaW5kUGVybWlzc2lvbignY2FuX3dyaXRlJywgJ0RhdGFzZXQnLCByb2xlcyk7XG4gICAgY29uc3QgeyBjYW5VcGxvYWREYXRhLCBjYW5VcGxvYWRDU1YsIGNhblVwbG9hZENvbHVtbmFyLCBjYW5VcGxvYWRFeGNlbCB9ID0gdXBsb2FkVXNlclBlcm1zKHJvbGVzLCBDU1ZfRVhURU5TSU9OUywgQ09MVU1OQVJfRVhURU5TSU9OUywgRVhDRUxfRVhURU5TSU9OUywgQUxMT1dFRF9FWFRFTlNJT05TKTtcbiAgICBjb25zdCBzaG93QWN0aW9uRHJvcGRvd24gPSBjYW5TcWwgfHwgY2FuQ2hhcnQgfHwgY2FuRGFzaGJvYXJkO1xuICAgIGNvbnN0IFthbGxvd1VwbG9hZHMsIHNldEFsbG93VXBsb2Fkc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW25vbkV4YW1wbGVzREJDb25uZWN0ZWQsIHNldE5vbkV4YW1wbGVzREJDb25uZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IGlzQWRtaW4gPSBpc1VzZXJBZG1pbih1c2VyKTtcbiAgICBjb25zdCBzaG93VXBsb2FkcyA9IGFsbG93VXBsb2FkcyB8fCBpc0FkbWluO1xuICAgIGNvbnN0IGRyb3Bkb3duSXRlbXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiB0KCdEYXRhJyksXG4gICAgICAgICAgICBpY29uOiAnZmEtZGF0YWJhc2UnLFxuICAgICAgICAgICAgY2hpbGRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnQ29ubmVjdCBkYXRhYmFzZScpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBHbG9iYWxNZW51RGF0YU9wdGlvbnMuRGJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBwZXJtOiBjYW5EYXRhYmFzZSAmJiAhbm9uRXhhbXBsZXNEQkNvbm5lY3RlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ0NyZWF0ZSBkYXRhc2V0JyksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IEdsb2JhbE1lbnVEYXRhT3B0aW9ucy5EYXRhc2V0Q3JlYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9kYXRhc2V0L2FkZC8nLFxuICAgICAgICAgICAgICAgICAgICBwZXJtOiBjYW5EYXRhc2V0ICYmIG5vbkV4YW1wbGVzREJDb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdDb25uZWN0IEdvb2dsZSBTaGVldCcpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBHbG9iYWxNZW51RGF0YU9wdGlvbnMuR29vZ2xlU2hlZXRzLFxuICAgICAgICAgICAgICAgICAgICBwZXJtOiBjYW5EYXRhYmFzZSAmJiBIQVNfR1NIRUVUU19JTlNUQUxMRUQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdVcGxvYWQgQ1NWIHRvIGRhdGFiYXNlJyksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IEdsb2JhbE1lbnVEYXRhT3B0aW9ucy5DU1ZVcGxvYWQsXG4gICAgICAgICAgICAgICAgICAgIHBlcm06IGNhblVwbG9hZENTViAmJiBzaG93VXBsb2FkcyxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZTogaXNBZG1pbiAmJiAhYWxsb3dVcGxvYWRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnVXBsb2FkIEV4Y2VsIHRvIGRhdGFiYXNlJyksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IEdsb2JhbE1lbnVEYXRhT3B0aW9ucy5FeGNlbFVwbG9hZCxcbiAgICAgICAgICAgICAgICAgICAgcGVybTogY2FuVXBsb2FkRXhjZWwgJiYgc2hvd1VwbG9hZHMsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IGlzQWRtaW4gJiYgIWFsbG93VXBsb2FkcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ1VwbG9hZCBDb2x1bW5hciBmaWxlIHRvIGRhdGFiYXNlJyksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IEdsb2JhbE1lbnVEYXRhT3B0aW9ucy5Db2x1bW5hclVwbG9hZCxcbiAgICAgICAgICAgICAgICAgICAgcGVybTogY2FuVXBsb2FkQ29sdW1uYXIgJiYgc2hvd1VwbG9hZHMsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IGlzQWRtaW4gJiYgIWFsbG93VXBsb2FkcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbGFiZWw6IHQoJ1NRTCBxdWVyeScpLFxuICAgICAgICAgICAgdXJsOiAnL3NxbGxhYj9uZXc9dHJ1ZScsXG4gICAgICAgICAgICBpY29uOiAnZmEtZncgZmEtc2VhcmNoJyxcbiAgICAgICAgICAgIHBlcm06ICdjYW5fc3FsbGFiJyxcbiAgICAgICAgICAgIHZpZXc6ICdTdXBlcnNldCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiB0KCdDaGFydCcpLFxuICAgICAgICAgICAgdXJsOiBOdW1iZXIuaXNJbnRlZ2VyKGRhc2hib2FyZElkKVxuICAgICAgICAgICAgICAgID8gYC9jaGFydC9hZGQ/ZGFzaGJvYXJkX2lkPSR7ZGFzaGJvYXJkSWR9YFxuICAgICAgICAgICAgICAgIDogJy9jaGFydC9hZGQnLFxuICAgICAgICAgICAgaWNvbjogJ2ZhLWZ3IGZhLWJhci1jaGFydCcsXG4gICAgICAgICAgICBwZXJtOiAnY2FuX3dyaXRlJyxcbiAgICAgICAgICAgIHZpZXc6ICdDaGFydCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiB0KCdEYXNoYm9hcmQnKSxcbiAgICAgICAgICAgIHVybDogJy9kYXNoYm9hcmQvbmV3JyxcbiAgICAgICAgICAgIGljb246ICdmYS1mdyBmYS1kYXNoYm9hcmQnLFxuICAgICAgICAgICAgcGVybTogJ2Nhbl93cml0ZScsXG4gICAgICAgICAgICB2aWV3OiAnRGFzaGJvYXJkJyxcbiAgICAgICAgfSxcbiAgICBdO1xuICAgIGNvbnN0IGNoZWNrQWxsb3dVcGxvYWRzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgZmlsdGVyczogW1xuICAgICAgICAgICAgICAgIHsgY29sOiAnYWxsb3dfZmlsZV91cGxvYWQnLCBvcHI6ICd1cGxvYWRfaXNfZW5hYmxlZCcsIHZhbHVlOiB0cnVlIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgICAgICBTdXBlcnNldENsaWVudC5nZXQoe1xuICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2RhdGFiYXNlLz9xPSR7cmlzb24uZW5jb2RlKHBheWxvYWQpfWAsXG4gICAgICAgIH0pLnRoZW4oKHsganNvbiB9KSA9PiB7XG4gICAgICAgICAgICAvLyBUaGVyZSBtaWdodCBiZSBzb21lIGV4aXN0aW5nIEdzaGVldHMgYW5kIENsaWNraG91c2UgREJzXG4gICAgICAgICAgICAvLyB3aXRoIGFsbG93X2ZpbGVfdXBsb2FkIHNldCBhcyBUcnVlIHdoaWNoIGlzIG5vdCBwb3NzaWJsZSBmcm9tIG5vdyBvblxuICAgICAgICAgICAgY29uc3QgYWxsb3dlZERhdGFiYXNlc1dpdGhGaWxlVXBsb2FkID0ganNvbj8ucmVzdWx0Py5maWx0ZXIoKGRhdGFiYXNlKSA9PiBkYXRhYmFzZT8uZW5naW5lX2luZm9ybWF0aW9uPy5zdXBwb3J0c19maWxlX3VwbG9hZCkgfHwgW107XG4gICAgICAgICAgICBzZXRBbGxvd1VwbG9hZHMoYWxsb3dlZERhdGFiYXNlc1dpdGhGaWxlVXBsb2FkPy5sZW5ndGggPj0gMSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgZXhpc3RzTm9uRXhhbXBsZXNEYXRhYmFzZXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICBmaWx0ZXJzOiBbeyBjb2w6ICdkYXRhYmFzZV9uYW1lJywgb3ByOiAnbmVxJywgdmFsdWU6ICdleGFtcGxlcycgfV0sXG4gICAgICAgIH07XG4gICAgICAgIFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICAgICAgICBlbmRwb2ludDogYC9hcGkvdjEvZGF0YWJhc2UvP3E9JHtyaXNvbi5lbmNvZGUocGF5bG9hZCl9YCxcbiAgICAgICAgfSkudGhlbigoeyBqc29uIH0pID0+IHtcbiAgICAgICAgICAgIHNldE5vbkV4YW1wbGVzREJDb25uZWN0ZWQoanNvbi5jb3VudCA+PSAxKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoY2FuVXBsb2FkRGF0YSkge1xuICAgICAgICAgICAgY2hlY2tBbGxvd1VwbG9hZHMoKTtcbiAgICAgICAgfVxuICAgIH0sIFtjYW5VcGxvYWREYXRhXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGNhbkRhdGFiYXNlIHx8IGNhbkRhdGFzZXQpIHtcbiAgICAgICAgICAgIGV4aXN0c05vbkV4YW1wbGVzRGF0YWJhc2VzKCk7XG4gICAgICAgIH1cbiAgICB9LCBbY2FuRGF0YWJhc2UsIGNhbkRhdGFzZXRdKTtcbiAgICBjb25zdCBtZW51SWNvbiA9IChtZW51KSA9PiAoPGkgZGF0YS10ZXN0PXtgbWVudS1pdGVtLSR7bWVudS5sYWJlbH1gfSBjbGFzc05hbWU9e2BmYSAke21lbnUuaWNvbn1gfS8+KTtcbiAgICBjb25zdCBoYW5kbGVNZW51U2VsZWN0aW9uID0gKGl0ZW1DaG9zZSkgPT4ge1xuICAgICAgICBpZiAoaXRlbUNob3NlLmtleSA9PT0gR2xvYmFsTWVudURhdGFPcHRpb25zLkRiQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgc2V0U2hvd0RhdGFiYXNlTW9kYWwodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbUNob3NlLmtleSA9PT0gR2xvYmFsTWVudURhdGFPcHRpb25zLkdvb2dsZVNoZWV0cykge1xuICAgICAgICAgICAgc2V0U2hvd0RhdGFiYXNlTW9kYWwodHJ1ZSk7XG4gICAgICAgICAgICBzZXRFbmdpbmUoJ0dvb2dsZSBTaGVldHMnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtQ2hvc2Uua2V5ID09PSBHbG9iYWxNZW51RGF0YU9wdGlvbnMuQ1NWVXBsb2FkKSB7XG4gICAgICAgICAgICBzZXRTaG93Q1NWVXBsb2FkTW9kYWwodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbUNob3NlLmtleSA9PT0gR2xvYmFsTWVudURhdGFPcHRpb25zLkV4Y2VsVXBsb2FkKSB7XG4gICAgICAgICAgICBzZXRTaG93RXhjZWxVcGxvYWRNb2RhbCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtQ2hvc2Uua2V5ID09PSBHbG9iYWxNZW51RGF0YU9wdGlvbnMuQ29sdW1uYXJVcGxvYWQpIHtcbiAgICAgICAgICAgIHNldFNob3dDb2x1bW5hclVwbG9hZE1vZGFsKHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVPbkhpZGVNb2RhbCA9ICgpID0+IHtcbiAgICAgICAgc2V0RW5naW5lKCcnKTtcbiAgICAgICAgc2V0U2hvd0RhdGFiYXNlTW9kYWwoZmFsc2UpO1xuICAgIH07XG4gICAgY29uc3QgdG9vbHRpcFRleHQgPSB0KFwiRW5hYmxlICdBbGxvdyBmaWxlIHVwbG9hZHMgdG8gZGF0YWJhc2UnIGluIGFueSBkYXRhYmFzZSdzIHNldHRpbmdzXCIpO1xuICAgIGNvbnN0IGJ1aWxkTWVudUl0ZW0gPSAoaXRlbSkgPT4gaXRlbS5kaXNhYmxlID8gKDxNZW51Lkl0ZW0ga2V5PXtpdGVtLm5hbWV9IGNzcz17c3R5bGVkRGlzYWJsZWR9IGRpc2FibGVkPlxuICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJ0b3BcIiB0aXRsZT17dG9vbHRpcFRleHR9PlxuICAgICAgICAgIHtpdGVtLmxhYmVsfVxuICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICA8L01lbnUuSXRlbT4pIDogKDxNZW51Lkl0ZW0ga2V5PXtpdGVtLm5hbWV9IGNzcz17c3R5bGVkQ2hpbGRNZW51fT5cbiAgICAgICAge2l0ZW0udXJsID8gKDxhIGhyZWY9e2Vuc3VyZUFwcFJvb3QoaXRlbS51cmwpfT4ge2l0ZW0ubGFiZWx9IDwvYT4pIDogKGl0ZW0ubGFiZWwpfVxuICAgICAgPC9NZW51Lkl0ZW0+KTtcbiAgICBjb25zdCBvbk1lbnVPcGVuID0gKG9wZW5LZXlzKSA9PiB7XG4gICAgICAgIC8vIFdlIHNob3VsZCBxdWVyeSB0aGUgQVBJIG9ubHkgaWYgb3BlbmluZyBEYXRhIHN1Ym1lbnVzXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIHJlc3QgZG9uJ3QgbmVlZCB0aGlzIGluZm9ybWF0aW9uLiBOb3QgdXNpbmdcbiAgICAgICAgLy8gXCJEYXRhXCIgZGlyZWN0bHkgc2luY2Ugd2UgbWlnaHQgY2hhbmdlIHRoZSBsYWJlbCBsYXRlciBvbj9cbiAgICAgICAgaWYgKG9wZW5LZXlzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgICAgICFpc0VtcHR5KG9wZW5LZXlzPy5maWx0ZXIoKGtleSkgPT4ga2V5LmluY2x1ZGVzKGBzdWIyXyR7ZHJvcGRvd25JdGVtcz8uWzBdPy5sYWJlbH1gKSkpKSB7XG4gICAgICAgICAgICBpZiAoY2FuVXBsb2FkRGF0YSlcbiAgICAgICAgICAgICAgICBjaGVja0FsbG93VXBsb2FkcygpO1xuICAgICAgICAgICAgaWYgKGNhbkRhdGFiYXNlIHx8IGNhbkRhdGFzZXQpXG4gICAgICAgICAgICAgICAgZXhpc3RzTm9uRXhhbXBsZXNEYXRhYmFzZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IFJpZ2h0TWVudUV4dGVuc2lvbiA9IGV4dGVuc2lvbnNSZWdpc3RyeS5nZXQoJ25hdmJhci5yaWdodCcpO1xuICAgIGNvbnN0IFJpZ2h0TWVudUl0ZW1JY29uRXh0ZW5zaW9uID0gZXh0ZW5zaW9uc1JlZ2lzdHJ5LmdldCgnbmF2YmFyLnJpZ2h0LW1lbnUuaXRlbS5pY29uJyk7XG4gICAgY29uc3QgaGFuZGxlRGF0YWJhc2VBZGQgPSAoKSA9PiBzZXRRdWVyeSh7IGRhdGFiYXNlQWRkZWQ6IHRydWUgfSk7XG4gICAgY29uc3QgaGFuZGxlTG9nb3V0ID0gKCkgPT4ge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncmVkdXgnKTtcbiAgICB9O1xuICAgIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcbiAgICByZXR1cm4gKDxTdHlsZWREaXYgYWxpZ249e2FsaWdufT5cbiAgICAgIHtjYW5EYXRhYmFzZSAmJiAoPERhdGFiYXNlTW9kYWwgb25IaWRlPXtoYW5kbGVPbkhpZGVNb2RhbH0gc2hvdz17c2hvd0RhdGFiYXNlTW9kYWx9IGRiRW5naW5lPXtlbmdpbmV9IG9uRGF0YWJhc2VBZGQ9e2hhbmRsZURhdGFiYXNlQWRkfS8+KX1cbiAgICAgIHtjYW5VcGxvYWRDU1YgJiYgKDxVcGxvYWREYXRhTW9kYWwgb25IaWRlPXsoKSA9PiBzZXRTaG93Q1NWVXBsb2FkTW9kYWwoZmFsc2UpfSBzaG93PXtzaG93Q1NWVXBsb2FkTW9kYWx9IGFsbG93ZWRFeHRlbnNpb25zPXtDU1ZfRVhURU5TSU9OU30gdHlwZT1cImNzdlwiLz4pfVxuICAgICAge2NhblVwbG9hZEV4Y2VsICYmICg8VXBsb2FkRGF0YU1vZGFsIG9uSGlkZT17KCkgPT4gc2V0U2hvd0V4Y2VsVXBsb2FkTW9kYWwoZmFsc2UpfSBzaG93PXtzaG93RXhjZWxVcGxvYWRNb2RhbH0gYWxsb3dlZEV4dGVuc2lvbnM9e0VYQ0VMX0VYVEVOU0lPTlN9IHR5cGU9XCJleGNlbFwiLz4pfVxuICAgICAge2NhblVwbG9hZENvbHVtbmFyICYmICg8VXBsb2FkRGF0YU1vZGFsIG9uSGlkZT17KCkgPT4gc2V0U2hvd0NvbHVtbmFyVXBsb2FkTW9kYWwoZmFsc2UpfSBzaG93PXtzaG93Q29sdW1uYXJVcGxvYWRNb2RhbH0gYWxsb3dlZEV4dGVuc2lvbnM9e0NPTFVNTkFSX0VYVEVOU0lPTlN9IHR5cGU9XCJjb2x1bW5hclwiLz4pfVxuICAgICAge2Vudmlyb25tZW50VGFnPy50ZXh0ICYmICg8TGFiZWwgY3NzPXt7IGJvcmRlclJhZGl1czogYCR7dGhlbWUuZ3JpZFVuaXQgKiAxMjV9cHhgIH19IGNvbG9yPXsvXiMoPzpbMC05YS1mXXszfSl7MSwyfSQvaS50ZXN0KGVudmlyb25tZW50VGFnLmNvbG9yKVxuICAgICAgICAgICAgICAgID8gZW52aXJvbm1lbnRUYWcuY29sb3JcbiAgICAgICAgICAgICAgICA6IGdldCh0aGVtZS5jb2xvcnMsIGVudmlyb25tZW50VGFnLmNvbG9yKX0+XG4gICAgICAgICAgPHNwYW4gY3NzPXt0YWdTdHlsZXN9PntlbnZpcm9ubWVudFRhZy50ZXh0fTwvc3Bhbj5cbiAgICAgICAgPC9MYWJlbD4pfVxuICAgICAgPE1lbnUgY3NzPXtjc3MgYFxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgICAgYH0gc2VsZWN0YWJsZT17ZmFsc2V9IG1vZGU9XCJob3Jpem9udGFsXCIgb25DbGljaz17aGFuZGxlTWVudVNlbGVjdGlvbn0gb25PcGVuQ2hhbmdlPXtvbk1lbnVPcGVufSBkaXNhYmxlZE92ZXJmbG93PlxuICAgICAgICB7UmlnaHRNZW51RXh0ZW5zaW9uICYmIDxSaWdodE1lbnVFeHRlbnNpb24gLz59XG4gICAgICAgIHshbmF2YmFyUmlnaHQudXNlcl9pc19hbm9ueW1vdXMgJiYgc2hvd0FjdGlvbkRyb3Bkb3duICYmICg8U3R5bGVkU3ViTWVudSBrZXk9XCJzdWIxXCIgZGF0YS10ZXN0PVwibmV3LWRyb3Bkb3duXCIgdGl0bGU9ezxJY29ucy5QbHVzT3V0bGluZWQgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMX0gZGF0YS10ZXN0PVwibmV3LWRyb3Bkb3duLWljb25cIi8+fSBpY29uPXs8SWNvbnMuQ2FyZXREb3duT3V0bGluZWQgaWNvblNpemU9XCJ4c1wiLz59PlxuICAgICAgICAgICAge2Ryb3Bkb3duSXRlbXM/Lm1hcD8uKG1lbnUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhblNob3dDaGlsZCA9IG1lbnUuY2hpbGRzPy5zb21lKGl0ZW0gPT4gdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICEhaXRlbS5wZXJtKTtcbiAgICAgICAgICAgICAgICBpZiAobWVudS5jaGlsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhblNob3dDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICg8U3R5bGVkU3ViTWVudSBrZXk9e2BzdWIyXyR7bWVudS5sYWJlbH1gfSBjbGFzc05hbWU9XCJkYXRhLW1lbnVcIiB0aXRsZT17bWVudS5sYWJlbH0gaWNvbj17bWVudUljb24obWVudSl9PlxuICAgICAgICAgICAgICAgICAgICAgIHttZW51Py5jaGlsZHM/Lm1hcD8uKChpdGVtLCBpZHgpID0+IHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJyAmJiBpdGVtLm5hbWUgJiYgaXRlbS5wZXJtID8gKDxGcmFnbWVudCBrZXk9e2l0ZW0ubmFtZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2lkeCA9PT0gMyAmJiA8TWVudS5EaXZpZGVyIC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidWlsZE1lbnVJdGVtKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0ZyYWdtZW50PikgOiBudWxsKX1cbiAgICAgICAgICAgICAgICAgICAgPC9TdHlsZWRTdWJNZW51Pik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZW51LnVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChmaW5kUGVybWlzc2lvbihtZW51LnBlcm0sIG1lbnUudmlldywgcm9sZXMpICYmICg8TWVudS5JdGVtIGtleT17bWVudS5sYWJlbH0+XG4gICAgICAgICAgICAgICAgICAgIHtpc0Zyb250ZW5kUm91dGUobWVudS51cmwpID8gKDxMaW5rIHRvPXttZW51LnVybCB8fCAnJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBkYXRhLXRlc3Q9e2BtZW51LWl0ZW0tJHttZW51LmxhYmVsfWB9IGNsYXNzTmFtZT17YGZhICR7bWVudS5pY29ufWB9Lz57JyAnfVxuICAgICAgICAgICAgICAgICAgICAgICAge21lbnUubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPikgOiAoPGEgaHJlZj17ZW5zdXJlQXBwUm9vdChtZW51LnVybCB8fCAnJyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgZGF0YS10ZXN0PXtgbWVudS1pdGVtLSR7bWVudS5sYWJlbH1gfSBjbGFzc05hbWU9e2BmYSAke21lbnUuaWNvbn1gfS8+eycgJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZW51LmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIDwvYT4pfVxuICAgICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KSk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L1N0eWxlZFN1Yk1lbnU+KX1cbiAgICAgICAgPFN0eWxlZFN1Yk1lbnUga2V5PVwic3ViM19zZXR0aW5nc1wiIHRpdGxlPXt0KCdTZXR0aW5ncycpfSBpY29uPXs8SWNvbnMuQ2FyZXREb3duT3V0bGluZWQgaWNvblNpemU9XCJ4c1wiLz59PlxuICAgICAgICAgIHtzZXR0aW5ncz8ubWFwPy4oKHNlY3Rpb24sIGluZGV4KSA9PiBbXG4gICAgICAgICAgICA8TWVudS5JdGVtR3JvdXAga2V5PXtgJHtzZWN0aW9uLmxhYmVsfWB9IHRpdGxlPXtzZWN0aW9uLmxhYmVsfT5cbiAgICAgICAgICAgICAge3NlY3Rpb24/LmNoaWxkcz8ubWFwPy4oY2hpbGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVudUl0ZW1EaXNwbGF5ID0gUmlnaHRNZW51SXRlbUljb25FeHRlbnNpb24gPyAoPFN0eWxlZE1lbnVJdGVtV2l0aEljb24+XG4gICAgICAgICAgICAgICAgICAgICAge2NoaWxkLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIDxSaWdodE1lbnVJdGVtSWNvbkV4dGVuc2lvbiBtZW51Q2hpbGQ9e2NoaWxkfS8+XG4gICAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTWVudUl0ZW1XaXRoSWNvbj4pIDogKGNoaWxkLmxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoPE1lbnUuSXRlbSBrZXk9e2Ake2NoaWxkLmxhYmVsfWB9PlxuICAgICAgICAgICAgICAgICAgICAgIHtpc0Zyb250ZW5kUm91dGUoY2hpbGQudXJsKSA/ICg8TGluayB0bz17Y2hpbGQudXJsIHx8ICcnfT57bWVudUl0ZW1EaXNwbGF5fTwvTGluaz4pIDogKDxhIGhyZWY9e2NoaWxkLnVybCB8fCAnJ30+e21lbnVJdGVtRGlzcGxheX08L2E+KX1cbiAgICAgICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvTWVudS5JdGVtR3JvdXA+LFxuICAgICAgICAgICAgaW5kZXggPCBzZXR0aW5ncy5sZW5ndGggLSAxICYmICg8TWVudS5EaXZpZGVyIGtleT17YGRpdmlkZXJfJHtpbmRleH1gfS8+KSxcbiAgICAgICAgXSl9XG5cbiAgICAgICAgICB7IW5hdmJhclJpZ2h0LnVzZXJfaXNfYW5vbnltb3VzICYmIFtcbiAgICAgICAgICAgIDxNZW51LkRpdmlkZXIga2V5PVwidXNlci1kaXZpZGVyXCIvPixcbiAgICAgICAgICAgIDxNZW51Lkl0ZW1Hcm91cCBrZXk9XCJ1c2VyLXNlY3Rpb25cIiB0aXRsZT17dCgnVXNlcicpfT5cbiAgICAgICAgICAgICAge25hdmJhclJpZ2h0LnVzZXJfaW5mb191cmwgJiYgKDxNZW51Lkl0ZW0ga2V5PVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj17bmF2YmFyUmlnaHQudXNlcl9pbmZvX3VybH0+e3QoJ0luZm8nKX08L2E+XG4gICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KX1cbiAgICAgICAgICAgICAgPE1lbnUuSXRlbSBrZXk9XCJsb2dvdXRcIiBvbkNsaWNrPXtoYW5kbGVMb2dvdXR9PlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9e25hdmJhclJpZ2h0LnVzZXJfbG9nb3V0X3VybH0+e3QoJ0xvZ291dCcpfTwvYT5cbiAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+XG4gICAgICAgICAgICA8L01lbnUuSXRlbUdyb3VwPixcbiAgICAgICAgXX1cbiAgICAgICAgICB7KG5hdmJhclJpZ2h0LnZlcnNpb25fc3RyaW5nIHx8IG5hdmJhclJpZ2h0LnZlcnNpb25fc2hhKSAmJiBbXG4gICAgICAgICAgICA8TWVudS5EaXZpZGVyIGtleT1cInZlcnNpb24taW5mby1kaXZpZGVyXCIvPixcbiAgICAgICAgICAgIDxNZW51Lkl0ZW1Hcm91cCBrZXk9XCJhYm91dC1zZWN0aW9uXCIgdGl0bGU9e3QoJ0Fib3V0Jyl9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFib3V0LXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICB7bmF2YmFyUmlnaHQuc2hvd193YXRlcm1hcmsgJiYgKDxkaXYgY3NzPXt2ZXJzaW9uSW5mb1N0eWxlc30+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdQb3dlcmVkIGJ5IEFwYWNoZSBTdXBlcnNldCcpfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICAgICAgICB7bmF2YmFyUmlnaHQudmVyc2lvbl9zdHJpbmcgJiYgKDxkaXYgY3NzPXt2ZXJzaW9uSW5mb1N0eWxlc30+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdWZXJzaW9uJyl9OiB7bmF2YmFyUmlnaHQudmVyc2lvbl9zdHJpbmd9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj4pfVxuICAgICAgICAgICAgICAgIHtuYXZiYXJSaWdodC52ZXJzaW9uX3NoYSAmJiAoPGRpdiBjc3M9e3ZlcnNpb25JbmZvU3R5bGVzfT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ1NIQScpfToge25hdmJhclJpZ2h0LnZlcnNpb25fc2hhfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICAgICAgICB7bmF2YmFyUmlnaHQuYnVpbGRfbnVtYmVyICYmICg8ZGl2IGNzcz17dmVyc2lvbkluZm9TdHlsZXN9PlxuICAgICAgICAgICAgICAgICAgICB7dCgnQnVpbGQnKX06IHtuYXZiYXJSaWdodC5idWlsZF9udW1iZXJ9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj4pfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvTWVudS5JdGVtR3JvdXA+LFxuICAgICAgICBdfVxuICAgICAgICA8L1N0eWxlZFN1Yk1lbnU+XG4gICAgICAgIHtuYXZiYXJSaWdodC5zaG93X2xhbmd1YWdlX3BpY2tlciAmJiAoPExhbmd1YWdlUGlja2VyIGxvY2FsZT17bmF2YmFyUmlnaHQubG9jYWxlfSBsYW5ndWFnZXM9e25hdmJhclJpZ2h0Lmxhbmd1YWdlc30vPil9XG4gICAgICA8L01lbnU+XG4gICAgICB7bmF2YmFyUmlnaHQuZG9jdW1lbnRhdGlvbl91cmwgJiYgKDw+XG4gICAgICAgICAgPFN0eWxlZEFuY2hvciBocmVmPXtuYXZiYXJSaWdodC5kb2N1bWVudGF0aW9uX3VybH0gdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9yZWZlcnJlclwiIHRpdGxlPXtuYXZiYXJSaWdodC5kb2N1bWVudGF0aW9uX3RleHQgfHwgdCgnRG9jdW1lbnRhdGlvbicpfT5cbiAgICAgICAgICAgIHtuYXZiYXJSaWdodC5kb2N1bWVudGF0aW9uX2ljb24gPyAoPGkgY2xhc3NOYW1lPXtuYXZiYXJSaWdodC5kb2N1bWVudGF0aW9uX2ljb259Lz4pIDogKDxpIGNsYXNzTmFtZT1cImZhIGZhLXF1ZXN0aW9uXCIvPil9XG4gICAgICAgICAgPC9TdHlsZWRBbmNob3I+XG4gICAgICAgICAgPHNwYW4+Jm5ic3A7PC9zcGFuPlxuICAgICAgICA8Lz4pfVxuICAgICAge25hdmJhclJpZ2h0LmJ1Z19yZXBvcnRfdXJsICYmICg8PlxuICAgICAgICAgIDxTdHlsZWRBbmNob3IgaHJlZj17bmF2YmFyUmlnaHQuYnVnX3JlcG9ydF91cmx9IHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vcmVmZXJyZXJcIiB0aXRsZT17bmF2YmFyUmlnaHQuYnVnX3JlcG9ydF90ZXh0IHx8IHQoJ1JlcG9ydCBhIGJ1ZycpfT5cbiAgICAgICAgICAgIHtuYXZiYXJSaWdodC5idWdfcmVwb3J0X2ljb24gPyAoPGkgY2xhc3NOYW1lPXtuYXZiYXJSaWdodC5idWdfcmVwb3J0X2ljb259Lz4pIDogKDxpIGNsYXNzTmFtZT1cImZhIGZhLWJ1Z1wiLz4pfVxuICAgICAgICAgIDwvU3R5bGVkQW5jaG9yPlxuICAgICAgICAgIDxzcGFuPiZuYnNwOzwvc3Bhbj5cbiAgICAgICAgPC8+KX1cbiAgICAgIHtuYXZiYXJSaWdodC51c2VyX2lzX2Fub255bW91cyAmJiAoPFN0eWxlZEFuY2hvciBocmVmPXtuYXZiYXJSaWdodC51c2VyX2xvZ2luX3VybH0+XG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZncgZmEtc2lnbi1pblwiLz5cbiAgICAgICAgICB7dCgnTG9naW4nKX1cbiAgICAgICAgPC9TdHlsZWRBbmNob3I+KX1cbiAgICAgIDxUZWxlbWV0cnlQaXhlbCB2ZXJzaW9uPXtuYXZiYXJSaWdodC52ZXJzaW9uX3N0cmluZ30gc2hhPXtuYXZiYXJSaWdodC52ZXJzaW9uX3NoYX0gYnVpbGQ9e25hdmJhclJpZ2h0LmJ1aWxkX251bWJlcn0vPlxuICAgIDwvU3R5bGVkRGl2Pik7XG59O1xuY29uc3QgUmlnaHRNZW51V2l0aFF1ZXJ5V3JhcHBlciA9IHByb3BzID0+IHtcbiAgICBjb25zdCBbLCBzZXRRdWVyeV0gPSB1c2VRdWVyeVBhcmFtcyh7XG4gICAgICAgIGRhdGFiYXNlQWRkZWQ6IEJvb2xlYW5QYXJhbSxcbiAgICAgICAgZGF0YXNldEFkZGVkOiBCb29sZWFuUGFyYW0sXG4gICAgfSk7XG4gICAgcmV0dXJuIDxSaWdodE1lbnUgc2V0UXVlcnk9e3NldFF1ZXJ5fSB7Li4ucHJvcHN9Lz47XG59O1xuLy8gUXVlcnkgcGFyYW0gbWFuaXB1bGF0aW9uIHJlcXVpcmVzIHRoYXQsIGR1cmluZyB0aGUgc2V0dXAsIHRoZVxuLy8gUXVlcnlQYXJhbVByb3ZpZGVyIGlzIHByZXNlbnQgYW5kIGNvbmZpZ3VyZWQuXG4vLyBTdXBlcnNldCBzdGlsbCBoYXMgbXVsdGlwbGUgZW50cnkgcG9pbnRzLCBhbmQgbm90IGFsbCBvZiB0aGVtIGhhdmVcbi8vIHRoZSBzYW1lIHNldHVwLCBhbmQgY3JpdGljYWxseSwgbm90IGFsbCBvZiB0aGVtIGhhdmUgdGhlIFF1ZXJ5UGFyYW1Qcm92aWRlci5cbi8vIFRoaXMgd3JhcHBlciBlbnN1cmVzIHRoZSBSaWdodE1lbnUgcmVuZGVycyByZWdhcmRsZXNzIG9mIHRoZSBwcm92aWRlciBiZWluZyBwcmVzZW50LlxuY2xhc3MgUmlnaHRNZW51RXJyb3JXcmFwcGVyIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICB9O1xuICAgIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB7IGhhc0Vycm9yOiB0cnVlIH07XG4gICAgfVxuICAgIG5vb3AgPSAoKSA9PiB7IH07XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIDxSaWdodE1lbnUgc2V0UXVlcnk9e3RoaXMubm9vcH0gey4uLnRoaXMucHJvcHN9Lz47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47XG4gICAgfVxufVxuY29uc3QgUmlnaHRNZW51V3JhcHBlciA9IHByb3BzID0+ICg8UmlnaHRNZW51RXJyb3JXcmFwcGVyIHsuLi5wcm9wc30+XG4gICAgPFJpZ2h0TWVudVdpdGhRdWVyeVdyYXBwZXIgey4uLnByb3BzfS8+XG4gIDwvUmlnaHRNZW51RXJyb3JXcmFwcGVyPik7XG5leHBvcnQgZGVmYXVsdCBSaWdodE1lbnVXcmFwcGVyO1xuIl19 */\"), color: /^#(?:[0-9a-f]{3}){1,2}$/i.test(environmentTag.color) ?\n      environmentTag.color :\n      _get(theme.colors, environmentTag.color), children:\n      _jsx(\"span\", { css: tagStyles, children: environmentTag.text }) }\n    ),\n    _jsxs(Menu, { css: css`\n          display: flex;\n          flex-direction: row;\n        `, selectable: false, mode: \"horizontal\", onClick: handleMenuSelection, onOpenChange: onMenuOpen, disabledOverflow: true, children: [\n      RightMenuExtension && _jsx(RightMenuExtension, {}),\n      !navbarRight.user_is_anonymous && showActionDropdown && _jsx(StyledSubMenu, { \"data-test\": \"new-dropdown\", title: _jsx(Icons.PlusOutlined, { iconColor: theme.colors.primary.dark1, \"data-test\": \"new-dropdown-icon\" }), icon: _jsx(Icons.CaretDownOutlined, { iconSize: \"xs\" }), children:\n        dropdownItems == null ? void 0 : dropdownItems.map == null ? void 0 : dropdownItems.map((menu) => {var _menu$childs;\n          const canShowChild = (_menu$childs = menu.childs) == null ? void 0 : _menu$childs.some((item) => typeof item === 'object' && !!item.perm);\n          if (menu.childs) {\n            if (canShowChild) {var _menu$childs2;\n              return _jsx(StyledSubMenu, { className: \"data-menu\", title: menu.label, icon: menuIcon(menu), children:\n                menu == null ? void 0 : (_menu$childs2 = menu.childs) == null ? void 0 : _menu$childs2.map == null ? void 0 : _menu$childs2.map((item, idx) => typeof item !== 'string' && item.name && item.perm ? _jsxs(Fragment, { children: [\n                  idx === 3 && _jsx(Menu.Divider, {}),\n                  buildMenuItem(item)] }, item.name\n                ) : null) }, `sub2_${menu.label}`\n              );\n            }\n            if (!menu.url) {\n              return null;\n            }\n          }\n          return findPermission(menu.perm, menu.view, roles) && _jsx(Menu.Item, { children:\n            isFrontendRoute(menu.url) ? _jsxs(Link, { to: menu.url || '', children: [\n              _jsx(\"i\", { \"data-test\": `menu-item-${menu.label}`, className: `fa ${menu.icon}` }), ' ',\n              menu.label] }\n            ) : _jsxs(\"a\", { href: ensureAppRoot(menu.url || ''), children: [\n              _jsx(\"i\", { \"data-test\": `menu-item-${menu.label}`, className: `fa ${menu.icon}` }), ' ',\n              menu.label] }\n            ) }, menu.label\n          );\n        }) }, \"sub1\"\n      ),\n      _jsxs(StyledSubMenu, { title: t('Settings'), icon: _jsx(Icons.CaretDownOutlined, { iconSize: \"xs\" }), children: [\n        settings == null ? void 0 : settings.map == null ? void 0 : settings.map((section, index) => {var _section$childs;return [\n          _jsx(Menu.ItemGroup, { title: section.label, children:\n            section == null ? void 0 : (_section$childs = section.childs) == null ? void 0 : _section$childs.map == null ? void 0 : _section$childs.map((child) => {\n              if (typeof child !== 'string') {\n                const menuItemDisplay = RightMenuItemIconExtension ? _jsxs(StyledMenuItemWithIcon, { children: [\n                  child.label,\n                  _jsx(RightMenuItemIconExtension, { menuChild: child })] }\n                ) : child.label;\n                return _jsx(Menu.Item, { children:\n                  isFrontendRoute(child.url) ? _jsx(Link, { to: child.url || '', children: menuItemDisplay }) : _jsx(\"a\", { href: child.url || '', children: menuItemDisplay }) }, `${child.label}`\n                );\n              }\n              return null;\n            }) }, `${section.label}`\n          ),\n          index < settings.length - 1 && _jsx(Menu.Divider, {}, `divider_${index}`)];}\n        ),\n\n        !navbarRight.user_is_anonymous && [\n        _jsx(Menu.Divider, {}, \"user-divider\"),\n        _jsxs(Menu.ItemGroup, { title: t('User'), children: [\n          navbarRight.user_info_url && _jsx(Menu.Item, { children:\n            _jsx(\"a\", { href: navbarRight.user_info_url, children: t('Info') }) }, \"info\"\n          ),\n          _jsx(Menu.Item, { onClick: handleLogout, children:\n            _jsx(\"a\", { href: navbarRight.user_logout_url, children: t('Logout') }) }, \"logout\"\n          )] }, \"user-section\"\n        )],\n\n        (navbarRight.version_string || navbarRight.version_sha) && [\n        _jsx(Menu.Divider, {}, \"version-info-divider\"),\n        _jsx(Menu.ItemGroup, { title: t('About'), children:\n          _jsxs(\"div\", { className: \"about-section\", children: [\n            navbarRight.show_watermark && _jsx(\"div\", { css: versionInfoStyles, children:\n              t('Powered by Apache Superset') }\n            ),\n            navbarRight.version_string && _jsxs(\"div\", { css: versionInfoStyles, children: [\n              t('Version'), \": \", navbarRight.version_string] }\n            ),\n            navbarRight.version_sha && _jsxs(\"div\", { css: versionInfoStyles, children: [\n              t('SHA'), \": \", navbarRight.version_sha] }\n            ),\n            navbarRight.build_number && _jsxs(\"div\", { css: versionInfoStyles, children: [\n              t('Build'), \": \", navbarRight.build_number] }\n            )] }\n          ) }, \"about-section\"\n        )]] }, \"sub3_settings\"\n\n      ),\n      navbarRight.show_language_picker && _jsx(LanguagePicker, { locale: navbarRight.locale, languages: navbarRight.languages })] }\n    ),\n    navbarRight.documentation_url && _jsxs(_Fragment, { children: [\n      _jsx(StyledAnchor, { href: navbarRight.documentation_url, target: \"_blank\", rel: \"noreferrer\", title: navbarRight.documentation_text || t('Documentation'), children:\n        navbarRight.documentation_icon ? _jsx(\"i\", { className: navbarRight.documentation_icon }) : _jsx(\"i\", { className: \"fa fa-question\" }) }\n      ),\n      _jsx(\"span\", { children: \"\\xA0\" })] }\n    ),\n    navbarRight.bug_report_url && _jsxs(_Fragment, { children: [\n      _jsx(StyledAnchor, { href: navbarRight.bug_report_url, target: \"_blank\", rel: \"noreferrer\", title: navbarRight.bug_report_text || t('Report a bug'), children:\n        navbarRight.bug_report_icon ? _jsx(\"i\", { className: navbarRight.bug_report_icon }) : _jsx(\"i\", { className: \"fa fa-bug\" }) }\n      ),\n      _jsx(\"span\", { children: \"\\xA0\" })] }\n    ),\n    navbarRight.user_is_anonymous && _jsxs(StyledAnchor, { href: navbarRight.user_login_url, children: [\n      _jsx(\"i\", { className: \"fa fa-fw fa-sign-in\" }),\n      t('Login')] }\n    ),\n    _jsx(TelemetryPixel, { version: navbarRight.version_string, sha: navbarRight.version_sha, build: navbarRight.build_number })] }\n  );\n};__signature__(RightMenu, \"useSelector{user}\\nuseSelector{dashboardId}\\nuseSelector{{ CSV_EXTENSIONS, COLUMNAR_EXTENSIONS, EXCEL_EXTENSIONS, ALLOWED_EXTENSIONS, HAS_GSHEETS_INSTALLED, }}\\nuseState{[showDatabaseModal, setShowDatabaseModal](false)}\\nuseState{[showCSVUploadModal, setShowCSVUploadModal](false)}\\nuseState{[showExcelUploadModal, setShowExcelUploadModal](false)}\\nuseState{[showColumnarUploadModal, setShowColumnarUploadModal](false)}\\nuseState{[engine, setEngine]('')}\\nuseState{[allowUploads, setAllowUploads](false)}\\nuseState{[nonExamplesDBConnected, setNonExamplesDBConnected](false)}\\nuseEffect{}\\nuseEffect{}\\nuseTheme{theme}\", () => [useSelector, useSelector, useSelector, useTheme]);\nconst RightMenuWithQueryWrapper = (props) => {\n  const [, setQuery] = useQueryParams({\n    databaseAdded: BooleanParam,\n    datasetAdded: BooleanParam\n  });\n  return _jsx(RightMenu, { setQuery: setQuery, ...props });\n};\n// Query param manipulation requires that, during the setup, the\n// QueryParamProvider is present and configured.\n// Superset still has multiple entry points, and not all of them have\n// the same setup, and critically, not all of them have the QueryParamProvider.\n// This wrapper ensures the RightMenu renders regardless of the provider being present.\n__signature__(RightMenuWithQueryWrapper, \"useQueryParams{[, setQuery]}\", () => [useQueryParams]);class RightMenuErrorWrapper extends PureComponent {constructor(...args) {super(...args);this.\n    state = {\n      hasError: false\n    };this.\n\n\n\n    noop = () => {};}static getDerivedStateFromError() {return { hasError: true };}\n  render() {\n    if (this.state.hasError) {\n      return _jsx(RightMenu, { setQuery: this.noop, ...this.props });\n    }\n    return this.props.children;\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}const RightMenuWrapper = (props) => _jsx(RightMenuErrorWrapper, { ...props, children:\n  _jsx(RightMenuWithQueryWrapper, { ...props }) }\n);const _default =\nRightMenuWrapper;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extensionsRegistry, \"extensionsRegistry\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(versionInfoStyles, \"versionInfoStyles\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(styledDisabled, \"styledDisabled\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(StyledDiv, \"StyledDiv\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(StyledMenuItemWithIcon, \"StyledMenuItemWithIcon\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(StyledAnchor, \"StyledAnchor\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(tagStyles, \"tagStyles\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(styledChildMenu, \"styledChildMenu\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(SubMenu, \"SubMenu\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(StyledSubMenu, \"StyledSubMenu\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(RightMenu, \"RightMenu\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(RightMenuWithQueryWrapper, \"RightMenuWithQueryWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(RightMenuErrorWrapper, \"RightMenuErrorWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(RightMenuWrapper, \"RightMenuWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["Fragment","useState","useEffect","PureComponent","rison","useSelector","Link","useQueryParams","BooleanParam","t","styled","css","SupersetClient","getExtensionsRegistry","useTheme","Menu","Tooltip","Icons","Label","ensureAppRoot","findPermission","isUserAdmin","DatabaseModal","UploadDataModal","uploadUserPerms","TelemetryPixel","LanguagePicker","GlobalMenuDataOptions","jsx","_jsx","jsxs","_jsxs","_Fragment","extensionsRegistry","versionInfoStyles","theme","gridUnit","colors","grayscale","base","typography","sizes","xs","styledDisabled","light1","StyledDiv","div","align","StyledMenuItemWithIcon","StyledAnchor","a","tagStyles","light5","styledChildMenu","primary","SubMenu","StyledSubMenu","xxs","RightMenu","settings","navbarRight","isFrontendRoute","environmentTag","setQuery","user","state","dashboardId","_state$dashboardInfo","dashboardInfo","id","userValues","roles","CSV_EXTENSIONS","COLUMNAR_EXTENSIONS","EXCEL_EXTENSIONS","ALLOWED_EXTENSIONS","HAS_GSHEETS_INSTALLED","common","conf","showDatabaseModal","setShowDatabaseModal","showCSVUploadModal","setShowCSVUploadModal","showExcelUploadModal","setShowExcelUploadModal","showColumnarUploadModal","setShowColumnarUploadModal","engine","setEngine","canSql","canDashboard","canChart","canDatabase","canDataset","canUploadData","canUploadCSV","canUploadColumnar","canUploadExcel","showActionDropdown","allowUploads","setAllowUploads","nonExamplesDBConnected","setNonExamplesDBConnected","isAdmin","showUploads","dropdownItems","label","icon","childs","name","DbConnection","perm","DatasetCreation","url","GoogleSheets","CSVUpload","disable","ExcelUpload","ColumnarUpload","view","Number","isInteger","checkAllowUploads","payload","filters","col","opr","value","get","endpoint","encode","then","json","_json$result","allowedDatabasesWithFileUpload","result","filter","database","_database$engine_info","engine_information","supports_file_upload","length","existsNonExamplesDatabases","count","menuIcon","menu","className","handleMenuSelection","itemChose","key","handleOnHideModal","tooltipText","buildMenuItem","item","Item","disabled","children","placement","title","href","onMenuOpen","openKeys","_isEmpty","_dropdownItems$","includes","RightMenuExtension","RightMenuItemIconExtension","handleDatabaseAdd","databaseAdded","handleLogout","localStorage","removeItem","onHide","show","dbEngine","onDatabaseAdd","allowedExtensions","type","text","_css","borderRadius","process","env","NODE_ENV","color","test","_get","selectable","mode","onClick","onOpenChange","disabledOverflow","user_is_anonymous","PlusOutlined","iconColor","dark1","CaretDownOutlined","iconSize","map","_menu$childs","canShowChild","some","_menu$childs2","idx","Divider","to","section","index","_section$childs","ItemGroup","child","menuItemDisplay","menuChild","user_info_url","user_logout_url","version_string","version_sha","show_watermark","build_number","show_language_picker","locale","languages","documentation_url","target","rel","documentation_text","documentation_icon","bug_report_url","bug_report_text","bug_report_icon","user_login_url","version","sha","build","__signature__","RightMenuWithQueryWrapper","props","datasetAdded","RightMenuErrorWrapper","constructor","args","hasError","noop","getDerivedStateFromError","render","__reactstandin__regenerateByEval","code","eval","RightMenuWrapper","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/features/home/RightMenu.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// TODO: Remove fa-icon\n/* eslint-disable icons/no-fa-icons-usage */\nimport { Fragment, useState, useEffect, FC, PureComponent } from 'react';\n\nimport rison from 'rison';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { useQueryParams, BooleanParam } from 'use-query-params';\nimport { get, isEmpty } from 'lodash';\n\nimport {\n  t,\n  styled,\n  css,\n  SupersetTheme,\n  SupersetClient,\n  getExtensionsRegistry,\n  useTheme,\n} from '@superset-ui/core';\nimport { Menu } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Icons } from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport { ensureAppRoot } from 'src/utils/pathUtils';\nimport { findPermission } from 'src/utils/findPermission';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport {\n  MenuObjectProps,\n  UserWithPermissionsAndRoles,\n  MenuObjectChildProps,\n} from 'src/types/bootstrapTypes';\nimport { RootState } from 'src/dashboard/types';\nimport DatabaseModal from 'src/features/databases/DatabaseModal';\nimport UploadDataModal from 'src/features/databases/UploadDataModel';\nimport { uploadUserPerms } from 'src/views/CRUD/utils';\nimport TelemetryPixel from 'src/components/TelemetryPixel';\nimport LanguagePicker from './LanguagePicker';\nimport {\n  ExtensionConfigs,\n  GlobalMenuDataOptions,\n  RightMenuProps,\n} from './types';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst versionInfoStyles = (theme: SupersetTheme) => css`\n  padding: ${theme.gridUnit * 1.5}px ${theme.gridUnit * 4}px\n    ${theme.gridUnit * 4}px ${theme.gridUnit * 7}px;\n  color: ${theme.colors.grayscale.base};\n  font-size: ${theme.typography.sizes.xs}px;\n  white-space: nowrap;\n`;\n\nconst styledDisabled = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light1};\n`;\n\nconst StyledDiv = styled.div<{ align: string }>`\n  display: flex;\n  height: 100%;\n  flex-direction: row;\n  justify-content: ${({ align }) => align};\n  align-items: center;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst StyledMenuItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst StyledAnchor = styled.a`\n  padding-right: ${({ theme }) => theme.gridUnit}px;\n  padding-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst tagStyles = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light5};\n`;\n\nconst styledChildMenu = (theme: SupersetTheme) => css`\n  &:hover {\n    color: ${theme.colors.primary.base} !important;\n    cursor: pointer !important;\n  }\n`;\n\nconst { SubMenu } = Menu;\n\nconst StyledSubMenu = styled(SubMenu)`\n  ${({ theme }) => css`\n    [data-icon='caret-down'] {\n      color: ${theme.colors.grayscale.base};\n      font-size: ${theme.typography.sizes.xxs}px;\n      margin-left: ${theme.gridUnit}px;\n    }\n    &.antd5-menu-submenu-active {\n      .antd5-menu-title-content {\n        color: ${theme.colors.primary.base};\n      }\n    }\n  `}\n`;\n\nconst RightMenu = ({\n  align,\n  settings,\n  navbarRight,\n  isFrontendRoute,\n  environmentTag,\n  setQuery,\n}: RightMenuProps & {\n  setQuery: ({\n    databaseAdded,\n    datasetAdded,\n  }: {\n    databaseAdded?: boolean;\n    datasetAdded?: boolean;\n  }) => void;\n}) => {\n  const user = useSelector<any, UserWithPermissionsAndRoles>(\n    state => state.user,\n  );\n  const dashboardId = useSelector<RootState, number | undefined>(\n    state => state.dashboardInfo?.id,\n  );\n  const userValues = user || {};\n  const { roles } = userValues;\n  const {\n    CSV_EXTENSIONS,\n    COLUMNAR_EXTENSIONS,\n    EXCEL_EXTENSIONS,\n    ALLOWED_EXTENSIONS,\n    HAS_GSHEETS_INSTALLED,\n  } = useSelector<any, ExtensionConfigs>(state => state.common.conf);\n  const [showDatabaseModal, setShowDatabaseModal] = useState<boolean>(false);\n  const [showCSVUploadModal, setShowCSVUploadModal] = useState<boolean>(false);\n  const [showExcelUploadModal, setShowExcelUploadModal] =\n    useState<boolean>(false);\n  const [showColumnarUploadModal, setShowColumnarUploadModal] =\n    useState<boolean>(false);\n  const [engine, setEngine] = useState<string>('');\n  const canSql = findPermission('can_sqllab', 'Superset', roles);\n  const canDashboard = findPermission('can_write', 'Dashboard', roles);\n  const canChart = findPermission('can_write', 'Chart', roles);\n  const canDatabase = findPermission('can_write', 'Database', roles);\n  const canDataset = findPermission('can_write', 'Dataset', roles);\n\n  const { canUploadData, canUploadCSV, canUploadColumnar, canUploadExcel } =\n    uploadUserPerms(\n      roles,\n      CSV_EXTENSIONS,\n      COLUMNAR_EXTENSIONS,\n      EXCEL_EXTENSIONS,\n      ALLOWED_EXTENSIONS,\n    );\n\n  const showActionDropdown = canSql || canChart || canDashboard;\n  const [allowUploads, setAllowUploads] = useState<boolean>(false);\n  const [nonExamplesDBConnected, setNonExamplesDBConnected] =\n    useState<boolean>(false);\n  const isAdmin = isUserAdmin(user);\n  const showUploads = allowUploads || isAdmin;\n  const dropdownItems: MenuObjectProps[] = [\n    {\n      label: t('Data'),\n      icon: 'fa-database',\n      childs: [\n        {\n          label: t('Connect database'),\n          name: GlobalMenuDataOptions.DbConnection,\n          perm: canDatabase && !nonExamplesDBConnected,\n        },\n        {\n          label: t('Create dataset'),\n          name: GlobalMenuDataOptions.DatasetCreation,\n          url: '/dataset/add/',\n          perm: canDataset && nonExamplesDBConnected,\n        },\n        {\n          label: t('Connect Google Sheet'),\n          name: GlobalMenuDataOptions.GoogleSheets,\n          perm: canDatabase && HAS_GSHEETS_INSTALLED,\n        },\n        {\n          label: t('Upload CSV to database'),\n          name: GlobalMenuDataOptions.CSVUpload,\n          perm: canUploadCSV && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n        {\n          label: t('Upload Excel to database'),\n          name: GlobalMenuDataOptions.ExcelUpload,\n          perm: canUploadExcel && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n        {\n          label: t('Upload Columnar file to database'),\n          name: GlobalMenuDataOptions.ColumnarUpload,\n          perm: canUploadColumnar && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n      ],\n    },\n    {\n      label: t('SQL query'),\n      url: '/sqllab?new=true',\n      icon: 'fa-fw fa-search',\n      perm: 'can_sqllab',\n      view: 'Superset',\n    },\n    {\n      label: t('Chart'),\n      url: Number.isInteger(dashboardId)\n        ? `/chart/add?dashboard_id=${dashboardId}`\n        : '/chart/add',\n      icon: 'fa-fw fa-bar-chart',\n      perm: 'can_write',\n      view: 'Chart',\n    },\n    {\n      label: t('Dashboard'),\n      url: '/dashboard/new',\n      icon: 'fa-fw fa-dashboard',\n      perm: 'can_write',\n      view: 'Dashboard',\n    },\n  ];\n\n  const checkAllowUploads = () => {\n    const payload = {\n      filters: [\n        { col: 'allow_file_upload', opr: 'upload_is_enabled', value: true },\n      ],\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`,\n    }).then(({ json }: Record<string, any>) => {\n      // There might be some existing Gsheets and Clickhouse DBs\n      // with allow_file_upload set as True which is not possible from now on\n      const allowedDatabasesWithFileUpload =\n        json?.result?.filter(\n          (database: any) => database?.engine_information?.supports_file_upload,\n        ) || [];\n      setAllowUploads(allowedDatabasesWithFileUpload?.length >= 1);\n    });\n  };\n\n  const existsNonExamplesDatabases = () => {\n    const payload = {\n      filters: [{ col: 'database_name', opr: 'neq', value: 'examples' }],\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`,\n    }).then(({ json }: Record<string, any>) => {\n      setNonExamplesDBConnected(json.count >= 1);\n    });\n  };\n\n  useEffect(() => {\n    if (canUploadData) {\n      checkAllowUploads();\n    }\n  }, [canUploadData]);\n\n  useEffect(() => {\n    if (canDatabase || canDataset) {\n      existsNonExamplesDatabases();\n    }\n  }, [canDatabase, canDataset]);\n\n  const menuIcon = (menu: MenuObjectProps) => (\n    <i data-test={`menu-item-${menu.label}`} className={`fa ${menu.icon}`} />\n  );\n\n  const handleMenuSelection = (itemChose: any) => {\n    if (itemChose.key === GlobalMenuDataOptions.DbConnection) {\n      setShowDatabaseModal(true);\n    } else if (itemChose.key === GlobalMenuDataOptions.GoogleSheets) {\n      setShowDatabaseModal(true);\n      setEngine('Google Sheets');\n    } else if (itemChose.key === GlobalMenuDataOptions.CSVUpload) {\n      setShowCSVUploadModal(true);\n    } else if (itemChose.key === GlobalMenuDataOptions.ExcelUpload) {\n      setShowExcelUploadModal(true);\n    } else if (itemChose.key === GlobalMenuDataOptions.ColumnarUpload) {\n      setShowColumnarUploadModal(true);\n    }\n  };\n\n  const handleOnHideModal = () => {\n    setEngine('');\n    setShowDatabaseModal(false);\n  };\n\n  const tooltipText = t(\n    \"Enable 'Allow file uploads to database' in any database's settings\",\n  );\n\n  const buildMenuItem = (item: MenuObjectChildProps) =>\n    item.disable ? (\n      <Menu.Item key={item.name} css={styledDisabled} disabled>\n        <Tooltip placement=\"top\" title={tooltipText}>\n          {item.label}\n        </Tooltip>\n      </Menu.Item>\n    ) : (\n      <Menu.Item key={item.name} css={styledChildMenu}>\n        {item.url ? (\n          <a href={ensureAppRoot(item.url)}> {item.label} </a>\n        ) : (\n          item.label\n        )}\n      </Menu.Item>\n    );\n\n  const onMenuOpen = (openKeys: string[]) => {\n    // We should query the API only if opening Data submenus\n    // because the rest don't need this information. Not using\n    // \"Data\" directly since we might change the label later on?\n    if (\n      openKeys.length > 1 &&\n      !isEmpty(\n        openKeys?.filter((key: string) =>\n          key.includes(`sub2_${dropdownItems?.[0]?.label}`),\n        ),\n      )\n    ) {\n      if (canUploadData) checkAllowUploads();\n      if (canDatabase || canDataset) existsNonExamplesDatabases();\n    }\n    return null;\n  };\n  const RightMenuExtension = extensionsRegistry.get('navbar.right');\n  const RightMenuItemIconExtension = extensionsRegistry.get(\n    'navbar.right-menu.item.icon',\n  );\n\n  const handleDatabaseAdd = () => setQuery({ databaseAdded: true });\n\n  const handleLogout = () => {\n    localStorage.removeItem('redux');\n  };\n\n  const theme = useTheme();\n\n  return (\n    <StyledDiv align={align}>\n      {canDatabase && (\n        <DatabaseModal\n          onHide={handleOnHideModal}\n          show={showDatabaseModal}\n          dbEngine={engine}\n          onDatabaseAdd={handleDatabaseAdd}\n        />\n      )}\n      {canUploadCSV && (\n        <UploadDataModal\n          onHide={() => setShowCSVUploadModal(false)}\n          show={showCSVUploadModal}\n          allowedExtensions={CSV_EXTENSIONS}\n          type=\"csv\"\n        />\n      )}\n      {canUploadExcel && (\n        <UploadDataModal\n          onHide={() => setShowExcelUploadModal(false)}\n          show={showExcelUploadModal}\n          allowedExtensions={EXCEL_EXTENSIONS}\n          type=\"excel\"\n        />\n      )}\n      {canUploadColumnar && (\n        <UploadDataModal\n          onHide={() => setShowColumnarUploadModal(false)}\n          show={showColumnarUploadModal}\n          allowedExtensions={COLUMNAR_EXTENSIONS}\n          type=\"columnar\"\n        />\n      )}\n      {environmentTag?.text && (\n        <Label\n          css={{ borderRadius: `${theme.gridUnit * 125}px` }}\n          color={\n            /^#(?:[0-9a-f]{3}){1,2}$/i.test(environmentTag.color)\n              ? environmentTag.color\n              : get(theme.colors, environmentTag.color)\n          }\n        >\n          <span css={tagStyles}>{environmentTag.text}</span>\n        </Label>\n      )}\n      <Menu\n        css={css`\n          display: flex;\n          flex-direction: row;\n        `}\n        selectable={false}\n        mode=\"horizontal\"\n        onClick={handleMenuSelection}\n        onOpenChange={onMenuOpen}\n        disabledOverflow\n      >\n        {RightMenuExtension && <RightMenuExtension />}\n        {!navbarRight.user_is_anonymous && showActionDropdown && (\n          <StyledSubMenu\n            key=\"sub1\"\n            data-test=\"new-dropdown\"\n            title={\n              <Icons.PlusOutlined\n                iconColor={theme.colors.primary.dark1}\n                data-test=\"new-dropdown-icon\"\n              />\n            }\n            icon={<Icons.CaretDownOutlined iconSize=\"xs\" />}\n          >\n            {dropdownItems?.map?.(menu => {\n              const canShowChild = menu.childs?.some(\n                item => typeof item === 'object' && !!item.perm,\n              );\n              if (menu.childs) {\n                if (canShowChild) {\n                  return (\n                    <StyledSubMenu\n                      key={`sub2_${menu.label}`}\n                      className=\"data-menu\"\n                      title={menu.label}\n                      icon={menuIcon(menu)}\n                    >\n                      {menu?.childs?.map?.((item, idx) =>\n                        typeof item !== 'string' && item.name && item.perm ? (\n                          <Fragment key={item.name}>\n                            {idx === 3 && <Menu.Divider />}\n                            {buildMenuItem(item)}\n                          </Fragment>\n                        ) : null,\n                      )}\n                    </StyledSubMenu>\n                  );\n                }\n                if (!menu.url) {\n                  return null;\n                }\n              }\n              return (\n                findPermission(\n                  menu.perm as string,\n                  menu.view as string,\n                  roles,\n                ) && (\n                  <Menu.Item key={menu.label}>\n                    {isFrontendRoute(menu.url) ? (\n                      <Link to={menu.url || ''}>\n                        <i\n                          data-test={`menu-item-${menu.label}`}\n                          className={`fa ${menu.icon}`}\n                        />{' '}\n                        {menu.label}\n                      </Link>\n                    ) : (\n                      <a href={ensureAppRoot(menu.url || '')}>\n                        <i\n                          data-test={`menu-item-${menu.label}`}\n                          className={`fa ${menu.icon}`}\n                        />{' '}\n                        {menu.label}\n                      </a>\n                    )}\n                  </Menu.Item>\n                )\n              );\n            })}\n          </StyledSubMenu>\n        )}\n        <StyledSubMenu\n          key=\"sub3_settings\"\n          title={t('Settings')}\n          icon={<Icons.CaretDownOutlined iconSize=\"xs\" />}\n        >\n          {settings?.map?.((section, index) => [\n            <Menu.ItemGroup key={`${section.label}`} title={section.label}>\n              {section?.childs?.map?.(child => {\n                if (typeof child !== 'string') {\n                  const menuItemDisplay = RightMenuItemIconExtension ? (\n                    <StyledMenuItemWithIcon>\n                      {child.label}\n                      <RightMenuItemIconExtension menuChild={child} />\n                    </StyledMenuItemWithIcon>\n                  ) : (\n                    child.label\n                  );\n                  return (\n                    <Menu.Item key={`${child.label}`}>\n                      {isFrontendRoute(child.url) ? (\n                        <Link to={child.url || ''}>{menuItemDisplay}</Link>\n                      ) : (\n                        <a href={child.url || ''}>{menuItemDisplay}</a>\n                      )}\n                    </Menu.Item>\n                  );\n                }\n                return null;\n              })}\n            </Menu.ItemGroup>,\n            index < settings.length - 1 && (\n              <Menu.Divider key={`divider_${index}`} />\n            ),\n          ])}\n\n          {!navbarRight.user_is_anonymous && [\n            <Menu.Divider key=\"user-divider\" />,\n            <Menu.ItemGroup key=\"user-section\" title={t('User')}>\n              {navbarRight.user_info_url && (\n                <Menu.Item key=\"info\">\n                  <a href={navbarRight.user_info_url}>{t('Info')}</a>\n                </Menu.Item>\n              )}\n              <Menu.Item key=\"logout\" onClick={handleLogout}>\n                <a href={navbarRight.user_logout_url}>{t('Logout')}</a>\n              </Menu.Item>\n            </Menu.ItemGroup>,\n          ]}\n          {(navbarRight.version_string || navbarRight.version_sha) && [\n            <Menu.Divider key=\"version-info-divider\" />,\n            <Menu.ItemGroup key=\"about-section\" title={t('About')}>\n              <div className=\"about-section\">\n                {navbarRight.show_watermark && (\n                  <div css={versionInfoStyles}>\n                    {t('Powered by Apache Superset')}\n                  </div>\n                )}\n                {navbarRight.version_string && (\n                  <div css={versionInfoStyles}>\n                    {t('Version')}: {navbarRight.version_string}\n                  </div>\n                )}\n                {navbarRight.version_sha && (\n                  <div css={versionInfoStyles}>\n                    {t('SHA')}: {navbarRight.version_sha}\n                  </div>\n                )}\n                {navbarRight.build_number && (\n                  <div css={versionInfoStyles}>\n                    {t('Build')}: {navbarRight.build_number}\n                  </div>\n                )}\n              </div>\n            </Menu.ItemGroup>,\n          ]}\n        </StyledSubMenu>\n        {navbarRight.show_language_picker && (\n          <LanguagePicker\n            locale={navbarRight.locale}\n            languages={navbarRight.languages}\n          />\n        )}\n      </Menu>\n      {navbarRight.documentation_url && (\n        <>\n          <StyledAnchor\n            href={navbarRight.documentation_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            title={navbarRight.documentation_text || t('Documentation')}\n          >\n            {navbarRight.documentation_icon ? (\n              <i className={navbarRight.documentation_icon} />\n            ) : (\n              <i className=\"fa fa-question\" />\n            )}\n          </StyledAnchor>\n          <span>&nbsp;</span>\n        </>\n      )}\n      {navbarRight.bug_report_url && (\n        <>\n          <StyledAnchor\n            href={navbarRight.bug_report_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            title={navbarRight.bug_report_text || t('Report a bug')}\n          >\n            {navbarRight.bug_report_icon ? (\n              <i className={navbarRight.bug_report_icon} />\n            ) : (\n              <i className=\"fa fa-bug\" />\n            )}\n          </StyledAnchor>\n          <span>&nbsp;</span>\n        </>\n      )}\n      {navbarRight.user_is_anonymous && (\n        <StyledAnchor href={navbarRight.user_login_url}>\n          <i className=\"fa fa-fw fa-sign-in\" />\n          {t('Login')}\n        </StyledAnchor>\n      )}\n      <TelemetryPixel\n        version={navbarRight.version_string}\n        sha={navbarRight.version_sha}\n        build={navbarRight.build_number}\n      />\n    </StyledDiv>\n  );\n};\n\nconst RightMenuWithQueryWrapper: FC<RightMenuProps> = props => {\n  const [, setQuery] = useQueryParams({\n    databaseAdded: BooleanParam,\n    datasetAdded: BooleanParam,\n  });\n\n  return <RightMenu setQuery={setQuery} {...props} />;\n};\n\n// Query param manipulation requires that, during the setup, the\n// QueryParamProvider is present and configured.\n// Superset still has multiple entry points, and not all of them have\n// the same setup, and critically, not all of them have the QueryParamProvider.\n// This wrapper ensures the RightMenu renders regardless of the provider being present.\nclass RightMenuErrorWrapper extends PureComponent<RightMenuProps> {\n  state = {\n    hasError: false,\n  };\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  noop = () => {};\n\n  render() {\n    if (this.state.hasError) {\n      return <RightMenu setQuery={this.noop} {...this.props} />;\n    }\n\n    return this.props.children;\n  }\n}\n\nconst RightMenuWrapper: FC<RightMenuProps> = props => (\n  <RightMenuErrorWrapper {...props}>\n    <RightMenuWithQueryWrapper {...props} />\n  </RightMenuErrorWrapper>\n);\n\nexport default RightMenuWrapper;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}