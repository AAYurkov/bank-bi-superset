{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent } from 'react';\nclass UndoRedoKeyListeners extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleKeydown = this.handleKeydown.bind(this);\n  }\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeydown);\n  }\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeydown);\n  }\n  handleKeydown(event) {\n    const controlOrCommand = event.ctrlKey || event.metaKey;\n    if (controlOrCommand) {var _document, _document2;\n      const isZChar = event.key === 'z' || event.keyCode === 90;\n      const isYChar = event.key === 'y' || event.keyCode === 89;\n      const isEditingMarkdown = (_document = document) == null ? void 0 : _document.querySelector('.dashboard-markdown--editing');\n      const isEditingTitle = (_document2 = document) == null ? void 0 : _document2.querySelector('.editable-title--editing');\n      if (!isEditingMarkdown && !isEditingTitle && (isZChar || isYChar)) {\n        event.preventDefault();\n        const func = isZChar ? this.props.onUndo : this.props.onRedo;\n        func();\n      }\n    }\n  }\n  render() {\n    return null;\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}const _default = UndoRedoKeyListeners;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(UndoRedoKeyListeners, \"UndoRedoKeyListeners\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/UndoRedoKeyListeners/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/dashboard/components/UndoRedoKeyListeners/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["PureComponent","UndoRedoKeyListeners","constructor","props","handleKeydown","bind","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","event","controlOrCommand","ctrlKey","metaKey","_document","_document2","isZChar","key","keyCode","isYChar","isEditingMarkdown","querySelector","isEditingTitle","preventDefault","func","onUndo","onRedo","render","__reactstandin__regenerateByEval","code","eval","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/dashboard/components/UndoRedoKeyListeners/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent } from 'react';\nimport { HeaderProps } from '../Header/types';\n\ntype UndoRedoKeyListenersProps = {\n  onUndo: HeaderProps['onUndo'];\n  onRedo: HeaderProps['onRedo'];\n};\n\nclass UndoRedoKeyListeners extends PureComponent<UndoRedoKeyListenersProps> {\n  constructor(props: UndoRedoKeyListenersProps) {\n    super(props);\n    this.handleKeydown = this.handleKeydown.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  handleKeydown(event: KeyboardEvent) {\n    const controlOrCommand = event.ctrlKey || event.metaKey;\n    if (controlOrCommand) {\n      const isZChar = event.key === 'z' || event.keyCode === 90;\n      const isYChar = event.key === 'y' || event.keyCode === 89;\n      const isEditingMarkdown = document?.querySelector(\n        '.dashboard-markdown--editing',\n      );\n      const isEditingTitle = document?.querySelector(\n        '.editable-title--editing',\n      );\n\n      if (!isEditingMarkdown && !isEditingTitle && (isZChar || isYChar)) {\n        event.preventDefault();\n        const func = isZChar ? this.props.onUndo : this.props.onRedo;\n        func();\n      }\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default UndoRedoKeyListeners;\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SAASA,aAAa,QAAQ,OAAO;AAQrC,MAAMC,oBAAqB,SAAQD,aAAwC;EACzEE,YAAYC,KAAgC;IAC1C,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,aAAa,GAAG,IAAI,CAACA,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC;EACpD;EAEAC,iBAAiBA,CAAA;IACfC,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACJ,aAAa,CAAC;EAC1D;EAEAK,oBAAoBA,CAAA;IAClBF,QAAQ,CAACG,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACN,aAAa,CAAC;EAC7D;EAEAA,aAAaA,CAACO,KAAoB;IAChC,MAAMC,gBAAgB,GAAGD,KAAK,CAACE,OAAO,IAAIF,KAAK,CAACG,OAAO;IACvD,IAAIF,gBAAgB,EAAE,KAAAG,SAAA,EAAAC,UAAA;MACpB,MAAMC,OAAO,GAAGN,KAAK,CAACO,GAAG,KAAK,GAAG,IAAIP,KAAK,CAACQ,OAAO,KAAK,EAAE;MACzD,MAAMC,OAAO,GAAGT,KAAK,CAACO,GAAG,KAAK,GAAG,IAAIP,KAAK,CAACQ,OAAO,KAAK,EAAE;MACzD,MAAME,iBAAiB,IAAAN,SAAA,GAAGR,QAAQ,qBAARQ,SAAA,CAAUO,aAAa,CAC/C,8BAA8B,CAC/B;MACD,MAAMC,cAAc,IAAAP,UAAA,GAAGT,QAAQ,qBAARS,UAAA,CAAUM,aAAa,CAC5C,0BAA0B,CAC3B;MAED,IAAI,CAACD,iBAAiB,IAAI,CAACE,cAAc,KAAKN,OAAO,IAAIG,OAAO,CAAC,EAAE;QACjET,KAAK,CAACa,cAAc,EAAE;QACtB,MAAMC,IAAI,GAAGR,OAAO,GAAG,IAAI,CAACd,KAAK,CAACuB,MAAM,GAAG,IAAI,CAACvB,KAAK,CAACwB,MAAM;QAC5DF,IAAI,EAAE;;;EAGZ;EAEAG,MAAMA,CAAA;IACJ,OAAO,IAAI;EACb,CAAC;EAAAC,iCAAAX,GAAA,EAAAY,IAAA;IAAA,KAAAZ,GAAA,IAAAa,IAAA,CAAAD,IAAA,G,CACF,MAAAE,QAAA,GAEc/B,oBAAoB,CAAnC,eAAA+B,QAAA,CAAoC,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAvC9BpC,oBAAqB,gIAAAgC,cAAA,CAAAI,QAAA,CAAAL,QAAA,2IAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}