{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect } from 'react';\nimport { css, styled, t, useTheme } from '@superset-ui/core';\nimport { useSingleViewResource } from 'src/views/CRUD/hooks';\nimport { RangePicker } from 'src/components/DatePicker';\nimport { extendedDayjs } from 'src/utils/dates';\nimport { Icons } from 'src/components/Icons';\nimport Modal from 'src/components/Modal';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { JsonEditor } from 'src/components/AsyncAceEditor';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst StyledAnnotationTitle = styled.div`\n  margin: ${({ theme }) => theme.gridUnit * 2}px auto\n    ${({ theme }) => theme.gridUnit * 4}px auto;\n`;\nconst StyledJsonEditor = styled(JsonEditor)`\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light2};\n`;\nconst AnnotationContainer = styled.div`\n  margin-bottom: ${({ theme }) => theme.gridUnit * 5}px;\n\n  .control-label {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n\n  .required {\n    margin-left: ${({ theme }) => theme.gridUnit / 2}px;\n    color: ${({ theme }) => theme.colors.error.base};\n  }\n\n  textarea {\n    flex: 1 1 auto;\n    height: ${({ theme }) => theme.gridUnit * 17}px;\n    resize: none;\n    width: 100%;\n  }\n\n  textarea,\n  input[type='text'] {\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 2}px;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n  }\n\n  input[type='text'] {\n    width: 65%;\n  }\n`;\nconst AnnotationModal = ({ addDangerToast, addSuccessToast, annotationLayerId, annotation = null, onAnnotationAdd, onHide, show }) => {var _currentAnnotation$st2, _currentAnnotation$en2;\n  const theme = useTheme();\n  const [disableSave, setDisableSave] = useState(true);\n  const [currentAnnotation, setCurrentAnnotation] = useState(null);\n  const isEditMode = annotation !== null;\n  // annotation fetch logic\n  const { state: { loading, resource }, fetchResource, createResource, updateResource } = useSingleViewResource(`annotation_layer/${annotationLayerId}/annotation`, t('annotation'), addDangerToast);\n  const resetAnnotation = () => {\n    // Reset annotation\n    setCurrentAnnotation({\n      short_descr: '',\n      start_dttm: '',\n      end_dttm: '',\n      json_metadata: '',\n      long_descr: ''\n    });\n  };\n  const hide = () => {\n    if (isEditMode) {\n      setCurrentAnnotation(resource);\n    } else\n    {\n      resetAnnotation();\n    }\n    onHide();\n  };\n  const onSave = () => {\n    if (isEditMode) {\n      // Edit\n      if (currentAnnotation != null && currentAnnotation.id) {\n        const update_id = currentAnnotation.id;\n        delete currentAnnotation.id;\n        delete currentAnnotation.created_by;\n        delete currentAnnotation.changed_by;\n        delete currentAnnotation.changed_on_delta_humanized;\n        delete currentAnnotation.layer;\n        updateResource(update_id, currentAnnotation).then((response) => {\n          // No response on error\n          if (!response) {\n            return;\n          }\n          if (onAnnotationAdd) {\n            onAnnotationAdd();\n          }\n          hide();\n          addSuccessToast(t('The annotation has been updated'));\n        });\n      }\n    } else\n    if (currentAnnotation) {\n      // Create\n      createResource(currentAnnotation).then((response) => {\n        if (!response) {\n          return;\n        }\n        if (onAnnotationAdd) {\n          onAnnotationAdd();\n        }\n        hide();\n        addSuccessToast(t('The annotation has been saved'));\n      });\n    }\n  };\n  const onAnnotationTextChange = (event) => {\n    const { target } = event;\n    const data = {\n      ...currentAnnotation,\n      end_dttm: currentAnnotation ? currentAnnotation.end_dttm : '',\n      short_descr: currentAnnotation ? currentAnnotation.short_descr : '',\n      start_dttm: currentAnnotation ? currentAnnotation.start_dttm : ''\n    };\n    data[target.name] = target.value;\n    setCurrentAnnotation(data);\n  };\n  const onJsonChange = (json) => {\n    const data = {\n      ...currentAnnotation,\n      end_dttm: currentAnnotation ? currentAnnotation.end_dttm : '',\n      json_metadata: json,\n      short_descr: currentAnnotation ? currentAnnotation.short_descr : '',\n      start_dttm: currentAnnotation ? currentAnnotation.start_dttm : ''\n    };\n    setCurrentAnnotation(data);\n  };\n  const onDateChange = (dates, dateString) => {var _currentAnnotation$sh2;\n    if (!(dates != null && dates[0]) || !(dates != null && dates[1])) {var _currentAnnotation$sh;\n      const data = {\n        ...currentAnnotation,\n        start_dttm: '',\n        end_dttm: '',\n        short_descr: (_currentAnnotation$sh = currentAnnotation == null ? void 0 : currentAnnotation.short_descr) != null ? _currentAnnotation$sh : ''\n      };\n      setCurrentAnnotation(data);\n      return;\n    }\n    const data = {\n      ...currentAnnotation,\n      start_dttm: dates[0].format('YYYY-MM-DD HH:mm'),\n      end_dttm: dates[1].format('YYYY-MM-DD HH:mm'),\n      short_descr: (_currentAnnotation$sh2 = currentAnnotation == null ? void 0 : currentAnnotation.short_descr) != null ? _currentAnnotation$sh2 : ''\n    };\n    setCurrentAnnotation(data);\n  };\n  const validate = () => {var _currentAnnotation$sh3, _currentAnnotation$st, _currentAnnotation$en;\n    if (currentAnnotation != null && (_currentAnnotation$sh3 = currentAnnotation.short_descr) != null && _currentAnnotation$sh3.length &&\n    currentAnnotation != null && (_currentAnnotation$st = currentAnnotation.start_dttm) != null && _currentAnnotation$st.length &&\n    currentAnnotation != null && (_currentAnnotation$en = currentAnnotation.end_dttm) != null && _currentAnnotation$en.length) {\n      setDisableSave(false);\n    } else\n    {\n      setDisableSave(true);\n    }\n  };\n  // Initialize\n  useEffect(() => {\n    if (isEditMode && (\n    !(currentAnnotation != null && currentAnnotation.id) ||\n    annotation && annotation.id !== currentAnnotation.id ||\n    show)) {\n      if ((annotation == null ? void 0 : annotation.id) !== null && !loading) {\n        const id = annotation.id || 0;\n        fetchResource(id);\n      }\n    } else\n    if (!isEditMode && (\n    !currentAnnotation || currentAnnotation.id || show)) {\n      resetAnnotation();\n    }\n  }, [annotation]);\n  useEffect(() => {\n    if (resource) {\n      setCurrentAnnotation(resource);\n    }\n  }, [resource]);\n  // Validation\n  useEffect(() => {\n    validate();\n  }, [\n  currentAnnotation ? currentAnnotation.short_descr : '',\n  currentAnnotation ? currentAnnotation.start_dttm : '',\n  currentAnnotation ? currentAnnotation.end_dttm : '']\n  );\n  return _jsxs(Modal, { disablePrimaryButton: disableSave, onHandledPrimaryAction: onSave, onHide: hide, primaryButtonName: isEditMode ? t('Save') : t('Add'), show: show, width: \"55%\", title: _jsxs(\"h4\", { \"data-test\": \"annotation-modal-title\", children: [\n      isEditMode ? _jsx(Icons.EditOutlined, { iconSize: \"l\", css: css`\n                margin: auto ${theme.gridUnit * 2}px auto 0;\n              ` }) : _jsx(Icons.PlusOutlined, { iconSize: \"l\", css: css`\n                margin: auto ${theme.gridUnit * 2}px auto 0;\n              ` }),\n      isEditMode ? t('Edit annotation') : t('Add annotation')] }\n    ), children: [\n    _jsx(StyledAnnotationTitle, { children:\n      _jsx(\"h4\", { children: t('Basic information') }) }\n    ),\n    _jsxs(AnnotationContainer, { children: [\n      _jsxs(\"div\", { className: \"control-label\", children: [\n        t('Name'),\n        _jsx(\"span\", { className: \"required\", children: \"*\" })] }\n      ),\n      _jsx(\"input\", { name: \"short_descr\", onChange: onAnnotationTextChange, type: \"text\", value: currentAnnotation == null ? void 0 : currentAnnotation.short_descr })] }\n    ),\n    _jsxs(AnnotationContainer, { children: [\n      _jsxs(\"div\", { className: \"control-label\", children: [\n        t('date'),\n        _jsx(\"span\", { className: \"required\", children: \"*\" })] }\n      ),\n      _jsx(RangePicker, { placeholder: [t('Start date'), t('End date')], format: \"YYYY-MM-DD HH:mm\", onCalendarChange: onDateChange, showTime: { format: 'hh:mm a' }, use12Hours: true, value: currentAnnotation != null && (_currentAnnotation$st2 = currentAnnotation.start_dttm) != null && _currentAnnotation$st2.length ||\n        currentAnnotation != null && (_currentAnnotation$en2 = currentAnnotation.end_dttm) != null && _currentAnnotation$en2.length ?\n        [\n        extendedDayjs(currentAnnotation.start_dttm),\n        extendedDayjs(currentAnnotation.end_dttm)] :\n\n        null })] }\n    ),\n    _jsx(StyledAnnotationTitle, { children:\n      _jsx(\"h4\", { children: t('Additional information') }) }\n    ),\n    _jsxs(AnnotationContainer, { children: [\n      _jsx(\"div\", { className: \"control-label\", children: t('description') }),\n      _jsx(\"textarea\", { name: \"long_descr\", value: currentAnnotation ? currentAnnotation.long_descr : '', placeholder: t('Description (this can be seen in the list)'), onChange: onAnnotationTextChange })] }\n    ),\n    _jsxs(AnnotationContainer, { children: [\n      _jsx(\"div\", { className: \"control-label\", children: t('JSON metadata') }),\n      _jsx(StyledJsonEditor, { onChange: onJsonChange, value: currentAnnotation != null && currentAnnotation.json_metadata ?\n        currentAnnotation.json_metadata :\n        '', width: \"100%\", height: \"120px\" })] }\n    )] }\n  );\n};__signature__(AnnotationModal, \"useTheme{theme}\\nuseState{[disableSave, setDisableSave](true)}\\nuseState{[currentAnnotation, setCurrentAnnotation](null)}\\nuseSingleViewResource{{ state: { loading, resource }, fetchResource, createResource, updateResource, }}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\", () => [useTheme, useSingleViewResource]);const _default =\nwithToasts(AnnotationModal);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledAnnotationTitle, \"StyledAnnotationTitle\", \"/Users/aryurkov/superset/superset-frontend/src/features/annotations/AnnotationModal.tsx\");reactHotLoader.register(StyledJsonEditor, \"StyledJsonEditor\", \"/Users/aryurkov/superset/superset-frontend/src/features/annotations/AnnotationModal.tsx\");reactHotLoader.register(AnnotationContainer, \"AnnotationContainer\", \"/Users/aryurkov/superset/superset-frontend/src/features/annotations/AnnotationModal.tsx\");reactHotLoader.register(AnnotationModal, \"AnnotationModal\", \"/Users/aryurkov/superset/superset-frontend/src/features/annotations/AnnotationModal.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/features/annotations/AnnotationModal.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useEffect","css","styled","t","useTheme","useSingleViewResource","RangePicker","extendedDayjs","Icons","Modal","withToasts","JsonEditor","jsx","_jsx","jsxs","_jsxs","StyledAnnotationTitle","div","theme","gridUnit","StyledJsonEditor","borderRadius","colors","secondary","light2","AnnotationContainer","error","base","grayscale","AnnotationModal","addDangerToast","addSuccessToast","annotationLayerId","annotation","onAnnotationAdd","onHide","show","_currentAnnotation$st2","_currentAnnotation$en2","disableSave","setDisableSave","currentAnnotation","setCurrentAnnotation","isEditMode","state","loading","resource","fetchResource","createResource","updateResource","resetAnnotation","short_descr","start_dttm","end_dttm","json_metadata","long_descr","hide","onSave","id","update_id","created_by","changed_by","changed_on_delta_humanized","layer","then","response","onAnnotationTextChange","event","target","data","name","value","onJsonChange","json","onDateChange","dates","dateString","_currentAnnotation$sh2","_currentAnnotation$sh","format","validate","_currentAnnotation$sh3","_currentAnnotation$st","_currentAnnotation$en","length","disablePrimaryButton","onHandledPrimaryAction","primaryButtonName","width","title","children","EditOutlined","iconSize","PlusOutlined","className","onChange","type","placeholder","onCalendarChange","showTime","use12Hours","height","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/features/annotations/AnnotationModal.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FunctionComponent, useState, useEffect, ChangeEvent } from 'react';\n\nimport { css, styled, t, useTheme } from '@superset-ui/core';\nimport { useSingleViewResource } from 'src/views/CRUD/hooks';\nimport { RangePicker } from 'src/components/DatePicker';\nimport { extendedDayjs } from 'src/utils/dates';\nimport { Icons } from 'src/components/Icons';\nimport Modal from 'src/components/Modal';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { JsonEditor } from 'src/components/AsyncAceEditor';\n\nimport { OnlyKeyWithType } from 'src/utils/types';\nimport { AnnotationObject } from './types';\n\ninterface AnnotationModalProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  annotationLayerId: number;\n  annotation?: AnnotationObject | null;\n  onAnnotationAdd?: (annotation?: AnnotationObject) => void;\n  onHide: () => void;\n  show: boolean;\n}\n\nconst StyledAnnotationTitle = styled.div`\n  margin: ${({ theme }) => theme.gridUnit * 2}px auto\n    ${({ theme }) => theme.gridUnit * 4}px auto;\n`;\n\nconst StyledJsonEditor = styled(JsonEditor)`\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light2};\n`;\n\nconst AnnotationContainer = styled.div`\n  margin-bottom: ${({ theme }) => theme.gridUnit * 5}px;\n\n  .control-label {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n\n  .required {\n    margin-left: ${({ theme }) => theme.gridUnit / 2}px;\n    color: ${({ theme }) => theme.colors.error.base};\n  }\n\n  textarea {\n    flex: 1 1 auto;\n    height: ${({ theme }) => theme.gridUnit * 17}px;\n    resize: none;\n    width: 100%;\n  }\n\n  textarea,\n  input[type='text'] {\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 2}px;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n  }\n\n  input[type='text'] {\n    width: 65%;\n  }\n`;\n\nconst AnnotationModal: FunctionComponent<AnnotationModalProps> = ({\n  addDangerToast,\n  addSuccessToast,\n  annotationLayerId,\n  annotation = null,\n  onAnnotationAdd,\n  onHide,\n  show,\n}) => {\n  const theme = useTheme();\n  const [disableSave, setDisableSave] = useState<boolean>(true);\n  const [currentAnnotation, setCurrentAnnotation] =\n    useState<AnnotationObject | null>(null);\n  const isEditMode = annotation !== null;\n\n  // annotation fetch logic\n  const {\n    state: { loading, resource },\n    fetchResource,\n    createResource,\n    updateResource,\n  } = useSingleViewResource<AnnotationObject>(\n    `annotation_layer/${annotationLayerId}/annotation`,\n    t('annotation'),\n    addDangerToast,\n  );\n\n  const resetAnnotation = () => {\n    // Reset annotation\n    setCurrentAnnotation({\n      short_descr: '',\n      start_dttm: '',\n      end_dttm: '',\n      json_metadata: '',\n      long_descr: '',\n    });\n  };\n\n  const hide = () => {\n    if (isEditMode) {\n      setCurrentAnnotation(resource);\n    } else {\n      resetAnnotation();\n    }\n    onHide();\n  };\n\n  const onSave = () => {\n    if (isEditMode) {\n      // Edit\n      if (currentAnnotation?.id) {\n        const update_id = currentAnnotation.id;\n        delete currentAnnotation.id;\n        delete currentAnnotation.created_by;\n        delete currentAnnotation.changed_by;\n        delete currentAnnotation.changed_on_delta_humanized;\n        delete currentAnnotation.layer;\n        updateResource(update_id, currentAnnotation).then(response => {\n          // No response on error\n          if (!response) {\n            return;\n          }\n\n          if (onAnnotationAdd) {\n            onAnnotationAdd();\n          }\n\n          hide();\n\n          addSuccessToast(t('The annotation has been updated'));\n        });\n      }\n    } else if (currentAnnotation) {\n      // Create\n      createResource(currentAnnotation).then(response => {\n        if (!response) {\n          return;\n        }\n\n        if (onAnnotationAdd) {\n          onAnnotationAdd();\n        }\n\n        hide();\n\n        addSuccessToast(t('The annotation has been saved'));\n      });\n    }\n  };\n\n  const onAnnotationTextChange = (\n    event: ChangeEvent<HTMLInputElement> | ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    const { target } = event;\n\n    const data = {\n      ...currentAnnotation,\n      end_dttm: currentAnnotation ? currentAnnotation.end_dttm : '',\n      short_descr: currentAnnotation ? currentAnnotation.short_descr : '',\n      start_dttm: currentAnnotation ? currentAnnotation.start_dttm : '',\n    };\n\n    data[target.name as OnlyKeyWithType<typeof data, string>] = target.value;\n    setCurrentAnnotation(data);\n  };\n\n  const onJsonChange = (json: string) => {\n    const data = {\n      ...currentAnnotation,\n      end_dttm: currentAnnotation ? currentAnnotation.end_dttm : '',\n      json_metadata: json,\n      short_descr: currentAnnotation ? currentAnnotation.short_descr : '',\n      start_dttm: currentAnnotation ? currentAnnotation.start_dttm : '',\n    };\n    setCurrentAnnotation(data);\n  };\n\n  const onDateChange = (dates: any, dateString: Array<string>) => {\n    if (!dates?.[0] || !dates?.[1]) {\n      const data = {\n        ...currentAnnotation,\n        start_dttm: '',\n        end_dttm: '',\n        short_descr: currentAnnotation?.short_descr ?? '',\n      };\n      setCurrentAnnotation(data);\n      return;\n    }\n\n    const data = {\n      ...currentAnnotation,\n      start_dttm: dates[0].format('YYYY-MM-DD HH:mm'),\n      end_dttm: dates[1].format('YYYY-MM-DD HH:mm'),\n      short_descr: currentAnnotation?.short_descr ?? '',\n    };\n    setCurrentAnnotation(data);\n  };\n\n  const validate = () => {\n    if (\n      currentAnnotation?.short_descr?.length &&\n      currentAnnotation?.start_dttm?.length &&\n      currentAnnotation?.end_dttm?.length\n    ) {\n      setDisableSave(false);\n    } else {\n      setDisableSave(true);\n    }\n  };\n\n  // Initialize\n  useEffect(() => {\n    if (\n      isEditMode &&\n      (!currentAnnotation?.id ||\n        (annotation && annotation.id !== currentAnnotation.id) ||\n        show)\n    ) {\n      if (annotation?.id !== null && !loading) {\n        const id = annotation.id || 0;\n\n        fetchResource(id);\n      }\n    } else if (\n      !isEditMode &&\n      (!currentAnnotation || currentAnnotation.id || show)\n    ) {\n      resetAnnotation();\n    }\n  }, [annotation]);\n\n  useEffect(() => {\n    if (resource) {\n      setCurrentAnnotation(resource);\n    }\n  }, [resource]);\n\n  // Validation\n  useEffect(() => {\n    validate();\n  }, [\n    currentAnnotation ? currentAnnotation.short_descr : '',\n    currentAnnotation ? currentAnnotation.start_dttm : '',\n    currentAnnotation ? currentAnnotation.end_dttm : '',\n  ]);\n\n  return (\n    <Modal\n      disablePrimaryButton={disableSave}\n      onHandledPrimaryAction={onSave}\n      onHide={hide}\n      primaryButtonName={isEditMode ? t('Save') : t('Add')}\n      show={show}\n      width=\"55%\"\n      title={\n        <h4 data-test=\"annotation-modal-title\">\n          {isEditMode ? (\n            <Icons.EditOutlined\n              iconSize=\"l\"\n              css={css`\n                margin: auto ${theme.gridUnit * 2}px auto 0;\n              `}\n            />\n          ) : (\n            <Icons.PlusOutlined\n              iconSize=\"l\"\n              css={css`\n                margin: auto ${theme.gridUnit * 2}px auto 0;\n              `}\n            />\n          )}\n          {isEditMode ? t('Edit annotation') : t('Add annotation')}\n        </h4>\n      }\n    >\n      <StyledAnnotationTitle>\n        <h4>{t('Basic information')}</h4>\n      </StyledAnnotationTitle>\n      <AnnotationContainer>\n        <div className=\"control-label\">\n          {t('Name')}\n          <span className=\"required\">*</span>\n        </div>\n        <input\n          name=\"short_descr\"\n          onChange={onAnnotationTextChange}\n          type=\"text\"\n          value={currentAnnotation?.short_descr}\n        />\n      </AnnotationContainer>\n      <AnnotationContainer>\n        <div className=\"control-label\">\n          {t('date')}\n          <span className=\"required\">*</span>\n        </div>\n        <RangePicker\n          placeholder={[t('Start date'), t('End date')]}\n          format=\"YYYY-MM-DD HH:mm\"\n          onCalendarChange={onDateChange}\n          showTime={{ format: 'hh:mm a' }}\n          use12Hours\n          value={\n            currentAnnotation?.start_dttm?.length ||\n            currentAnnotation?.end_dttm?.length\n              ? [\n                  extendedDayjs(currentAnnotation.start_dttm),\n                  extendedDayjs(currentAnnotation.end_dttm),\n                ]\n              : null\n          }\n        />\n      </AnnotationContainer>\n      <StyledAnnotationTitle>\n        <h4>{t('Additional information')}</h4>\n      </StyledAnnotationTitle>\n      <AnnotationContainer>\n        <div className=\"control-label\">{t('description')}</div>\n        <textarea\n          name=\"long_descr\"\n          value={currentAnnotation ? currentAnnotation.long_descr : ''}\n          placeholder={t('Description (this can be seen in the list)')}\n          onChange={onAnnotationTextChange}\n        />\n      </AnnotationContainer>\n      <AnnotationContainer>\n        <div className=\"control-label\">{t('JSON metadata')}</div>\n        <StyledJsonEditor\n          onChange={onJsonChange}\n          value={\n            currentAnnotation?.json_metadata\n              ? currentAnnotation.json_metadata\n              : ''\n          }\n          width=\"100%\"\n          height=\"120px\"\n        />\n      </AnnotationContainer>\n    </Modal>\n  );\n};\n\nexport default withToasts(AnnotationModal);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}