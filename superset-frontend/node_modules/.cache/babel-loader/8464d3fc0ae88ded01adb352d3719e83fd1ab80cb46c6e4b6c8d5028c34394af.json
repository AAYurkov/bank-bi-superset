{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, forwardRef, useImperativeHandle } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { InputNumber } from 'src/components/Input';\nimport { FormLabel } from 'src/components/Form';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst RangeFilterContainer = styled.div`\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 360px;\n`;\nconst InputContainer = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  position: relative;\n`;\nconst StyledDivider = styled.span`\n  margin: 0 ${({ theme }) => theme.gridUnit * 2}px;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n  font-size: ${({ theme }) => theme.typography.sizes.m}px;\n`;\nconst ErrorMessage = styled.div`\n  color: ${({ theme }) => theme.colors.error.base};\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n  position: absolute;\n  bottom: -50%;\n  left: 0;\n`;\nfunction NumericalRangeFilter({ Header, initialValue, onSubmit }, ref) {\n  const [value, setValue] = useState(initialValue != null ? initialValue : [null, null]);\n  const [hasError, setHasError] = useState(false);\n  const handleMinChange = (newMin) => {\n    const newValue = [newMin, value[1]];\n    setValue(newValue);\n    if (newMin !== null && value[1] !== null && newMin >= value[1]) {\n      setHasError(true);\n      return;\n    }\n    setHasError(false);\n    onSubmit(newValue);\n  };\n  const handleMaxChange = (newMax) => {\n    const newValue = [value[0], newMax];\n    setValue(newValue);\n    if (value[0] !== null && newMax !== null && value[0] >= newMax) {\n      setHasError(true);\n      return;\n    }\n    setHasError(false);\n    onSubmit(newValue);\n  };\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue([null, null]);\n      setHasError(false);\n      onSubmit([null, null]);\n    }\n  }));\n  return _jsxs(RangeFilterContainer, { children: [\n    _jsx(FormLabel, { children: Header }),\n    _jsxs(InputContainer, { children: [\n      _jsx(InputNumber, { value: value[0], onChange: handleMinChange, placeholder: t('Value greater than'), style: { width: '100%' }, \"data-test\": \"numerical-filter-min-input\" }),\n      _jsx(StyledDivider, { children: \"-\" }),\n      _jsx(InputNumber, { value: value[1], onChange: handleMaxChange, placeholder: t('Value less than'), style: { width: '100%' }, \"data-test\": \"numerical-filter-max-input\" }),\n      hasError && _jsx(ErrorMessage, { children:\n        t('Minimum must be strictly less than maximum') }\n      )] }\n    )] }\n  );\n}__signature__(NumericalRangeFilter, \"useState{[value, setValue](initialValue ?? [null, null])}\\nuseState{[hasError, setHasError](false)}\\nuseImperativeHandle{}\", () => [useImperativeHandle]);const _default = /*#__PURE__*/\nforwardRef(NumericalRangeFilter);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(RangeFilterContainer, \"RangeFilterContainer\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/NumericalRange.tsx\");reactHotLoader.register(InputContainer, \"InputContainer\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/NumericalRange.tsx\");reactHotLoader.register(StyledDivider, \"StyledDivider\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/NumericalRange.tsx\");reactHotLoader.register(ErrorMessage, \"ErrorMessage\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/NumericalRange.tsx\");reactHotLoader.register(NumericalRangeFilter, \"NumericalRangeFilter\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/NumericalRange.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/NumericalRange.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","forwardRef","useImperativeHandle","styled","t","InputNumber","FormLabel","jsx","_jsx","jsxs","_jsxs","RangeFilterContainer","div","InputContainer","StyledDivider","span","theme","gridUnit","colors","grayscale","base","typography","weights","bold","sizes","m","ErrorMessage","error","s","NumericalRangeFilter","Header","initialValue","onSubmit","ref","value","setValue","hasError","setHasError","handleMinChange","newMin","newValue","handleMaxChange","newMax","clearFilter","children","onChange","placeholder","style","width","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/NumericalRange.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, forwardRef, useImperativeHandle, RefObject } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { InputNumber } from 'src/components/Input';\nimport { FormLabel } from 'src/components/Form';\nimport { BaseFilter, FilterHandler } from './Base';\n\nconst RangeFilterContainer = styled.div`\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 360px;\n`;\n\nconst InputContainer = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  position: relative;\n`;\n\nconst StyledDivider = styled.span`\n  margin: 0 ${({ theme }) => theme.gridUnit * 2}px;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n  font-size: ${({ theme }) => theme.typography.sizes.m}px;\n`;\n\nconst ErrorMessage = styled.div`\n  color: ${({ theme }) => theme.colors.error.base};\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n  position: absolute;\n  bottom: -50%;\n  left: 0;\n`;\n\ninterface NumericalRangeFilterProps extends BaseFilter {\n  onSubmit: (val: [number | null, number | null]) => void;\n  name: string;\n  min?: number;\n  max?: number;\n}\n\nfunction NumericalRangeFilter(\n  { Header, initialValue, onSubmit }: NumericalRangeFilterProps,\n  ref: RefObject<FilterHandler>,\n) {\n  const [value, setValue] = useState<[number | null, number | null]>(\n    initialValue ?? [null, null],\n  );\n  const [hasError, setHasError] = useState(false);\n\n  const handleMinChange = (newMin: number | null) => {\n    const newValue: [number | null, number | null] = [newMin, value[1]];\n    setValue(newValue);\n\n    if (newMin !== null && value[1] !== null && newMin >= value[1]) {\n      setHasError(true);\n      return;\n    }\n\n    setHasError(false);\n    onSubmit(newValue);\n  };\n  const handleMaxChange = (newMax: number | null) => {\n    const newValue: [number | null, number | null] = [value[0], newMax];\n    setValue(newValue);\n\n    if (value[0] !== null && newMax !== null && value[0] >= newMax) {\n      setHasError(true);\n      return;\n    }\n\n    setHasError(false);\n    onSubmit(newValue);\n  };\n\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue([null, null]);\n      setHasError(false);\n      onSubmit([null, null]);\n    },\n  }));\n\n  return (\n    <RangeFilterContainer>\n      <FormLabel>{Header}</FormLabel>\n      <InputContainer>\n        <InputNumber\n          value={value[0]}\n          onChange={handleMinChange}\n          placeholder={t('Value greater than')}\n          style={{ width: '100%' }}\n          data-test=\"numerical-filter-min-input\"\n        />\n        <StyledDivider>-</StyledDivider>\n        <InputNumber\n          value={value[1]}\n          onChange={handleMaxChange}\n          placeholder={t('Value less than')}\n          style={{ width: '100%' }}\n          data-test=\"numerical-filter-max-input\"\n        />\n        {hasError && (\n          <ErrorMessage>\n            {t('Minimum must be strictly less than maximum')}\n          </ErrorMessage>\n        )}\n      </InputContainer>\n    </RangeFilterContainer>\n  );\n}\n\nexport default forwardRef(NumericalRangeFilter);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}