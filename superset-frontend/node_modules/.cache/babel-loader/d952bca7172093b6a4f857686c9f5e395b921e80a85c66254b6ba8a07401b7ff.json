{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { extendedDayjs } from 'src/utils/dates';\nimport { t, styled } from '@superset-ui/core';\nimport TableView, { EmptyWrapperType } from 'src/components/TableView';\nimport { TagsList } from 'src/components/Tags';\nimport FacePile from 'src/components/FacePile';\nimport { EmptyState } from 'src/components/EmptyState';\nimport { NumberParam, useQueryParam } from 'use-query-params';import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst MAX_TAGS_TO_SHOW = 3;\nconst PAGE_SIZE = 10;\nconst AllEntitiesTableContainer = styled.div`\n  text-align: left;\n  border-radius: ${({ theme }) => theme.gridUnit * 1}px 0;\n  .table {\n    table-layout: fixed;\n  }\n  .td {\n    width: 33%;\n  }\n  .entity-title {\n    font-family: Inter;\n    font-size: ${({ theme }) => theme.typography.sizes.m}px;\n    font-weight: ${({ theme }) => theme.typography.weights.medium};\n    line-height: 17px;\n    letter-spacing: 0px;\n    text-align: left;\n    margin: ${({ theme }) => theme.gridUnit * 4}px 0;\n  }\n`;\nexport default function AllEntitiesTable({ search = '', setShowTagModal, objects }) {\n  const [tagId] = useQueryParam('id', NumberParam);\n  const showListViewObjs = objects.dashboard.length > 0 ||\n  objects.chart.length > 0 ||\n  objects.query.length > 0;\n  const renderTable = (type) => {\n    const data = objects[type].map((o) => ({\n      [type]: _jsx(\"a\", { href: o.url, children: o.name }),\n      modified: extendedDayjs.utc(o.changed_on).fromNow(),\n      tags: o.tags,\n      owners: o.owners\n    }));\n    return _jsx(TableView, { className: \"table-condensed\", emptyWrapperType: EmptyWrapperType.Small, data: data, pageSize: PAGE_SIZE, columns: [\n      {\n        accessor: type,\n        Header: 'Title'\n      },\n      {\n        Cell: ({ row: { original: { tags = [] } } }) =>\n        // Only show custom type tags\n        _jsx(TagsList, { tags: tags.filter((tag) => tag.type !== undefined &&\n          ['TagType.custom', 1].includes(tag.type) &&\n          tag.id !== tagId), maxTags: MAX_TAGS_TO_SHOW }),\n        Header: t('Tags'),\n        accessor: 'tags',\n        disableSortBy: true\n      },\n      {\n        Cell: ({ row: { original: { owners = [] } } }) => _jsx(FacePile, { users: owners }),\n        Header: t('Owners'),\n        accessor: 'owners',\n        disableSortBy: true,\n        size: 'xl'\n      }] }\n    );\n  };\n  return _jsx(AllEntitiesTableContainer, { children:\n    showListViewObjs ? _jsxs(_Fragment, { children: [\n      _jsx(\"div\", { className: \"entity-title\", children: t('Dashboards') }),\n      renderTable('dashboard'),\n      _jsx(\"div\", { className: \"entity-title\", children: t('Charts') }),\n      renderTable('chart'),\n      _jsx(\"div\", { className: \"entity-title\", children: t('Queries') }),\n      renderTable('query')] }\n    ) : _jsx(EmptyState, { image: \"dashboard.svg\", size: \"large\", title: t('No entities have this tag currently assigned'), buttonAction: () => setShowTagModal(true), buttonText: t('Add tag to entities') }) }\n  );\n}__signature__(AllEntitiesTable, \"useQueryParam{[tagId]}\", () => [useQueryParam]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(MAX_TAGS_TO_SHOW, \"MAX_TAGS_TO_SHOW\", \"/Users/aryurkov/superset/superset-frontend/src/features/allEntities/AllEntitiesTable.tsx\");reactHotLoader.register(PAGE_SIZE, \"PAGE_SIZE\", \"/Users/aryurkov/superset/superset-frontend/src/features/allEntities/AllEntitiesTable.tsx\");reactHotLoader.register(AllEntitiesTableContainer, \"AllEntitiesTableContainer\", \"/Users/aryurkov/superset/superset-frontend/src/features/allEntities/AllEntitiesTable.tsx\");reactHotLoader.register(AllEntitiesTable, \"AllEntitiesTable\", \"/Users/aryurkov/superset/superset-frontend/src/features/allEntities/AllEntitiesTable.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["extendedDayjs","t","styled","TableView","EmptyWrapperType","TagsList","FacePile","EmptyState","NumberParam","useQueryParam","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","MAX_TAGS_TO_SHOW","PAGE_SIZE","AllEntitiesTableContainer","div","theme","gridUnit","typography","sizes","m","weights","medium","AllEntitiesTable","search","setShowTagModal","objects","tagId","showListViewObjs","dashboard","length","chart","query","renderTable","type","data","map","o","href","url","children","name","modified","utc","changed_on","fromNow","tags","owners","className","emptyWrapperType","Small","pageSize","columns","accessor","Header","Cell","row","original","filter","tag","undefined","includes","id","maxTags","disableSortBy","users","size","image","title","buttonAction","buttonText","__signature__","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/features/allEntities/AllEntitiesTable.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { extendedDayjs } from 'src/utils/dates';\nimport { t, styled } from '@superset-ui/core';\nimport TableView, { EmptyWrapperType } from 'src/components/TableView';\nimport { TagsList } from 'src/components/Tags';\nimport FacePile from 'src/components/FacePile';\nimport Tag from 'src/types/TagType';\nimport { EmptyState } from 'src/components/EmptyState';\nimport { NumberParam, useQueryParam } from 'use-query-params';\nimport { TaggedObject, TaggedObjects } from 'src/types/TaggedObject';\n\nconst MAX_TAGS_TO_SHOW = 3;\nconst PAGE_SIZE = 10;\n\nconst AllEntitiesTableContainer = styled.div`\n  text-align: left;\n  border-radius: ${({ theme }) => theme.gridUnit * 1}px 0;\n  .table {\n    table-layout: fixed;\n  }\n  .td {\n    width: 33%;\n  }\n  .entity-title {\n    font-family: Inter;\n    font-size: ${({ theme }) => theme.typography.sizes.m}px;\n    font-weight: ${({ theme }) => theme.typography.weights.medium};\n    line-height: 17px;\n    letter-spacing: 0px;\n    text-align: left;\n    margin: ${({ theme }) => theme.gridUnit * 4}px 0;\n  }\n`;\n\ninterface AllEntitiesTableProps {\n  search?: string;\n  setShowTagModal: (show: boolean) => void;\n  objects: TaggedObjects;\n}\n\nexport default function AllEntitiesTable({\n  search = '',\n  setShowTagModal,\n  objects,\n}: AllEntitiesTableProps) {\n  type objectType = 'dashboard' | 'chart' | 'query';\n\n  const [tagId] = useQueryParam('id', NumberParam);\n  const showListViewObjs =\n    objects.dashboard.length > 0 ||\n    objects.chart.length > 0 ||\n    objects.query.length > 0;\n\n  const renderTable = (type: objectType) => {\n    const data = objects[type].map((o: TaggedObject) => ({\n      [type]: <a href={o.url}>{o.name}</a>,\n      modified: extendedDayjs.utc(o.changed_on).fromNow(),\n      tags: o.tags,\n      owners: o.owners,\n    }));\n\n    return (\n      <TableView\n        className=\"table-condensed\"\n        emptyWrapperType={EmptyWrapperType.Small}\n        data={data}\n        pageSize={PAGE_SIZE}\n        columns={[\n          {\n            accessor: type,\n            Header: 'Title',\n          },\n          {\n            Cell: ({\n              row: {\n                original: { tags = [] },\n              },\n            }: {\n              row: {\n                original: {\n                  tags: Tag[];\n                };\n              };\n            }) => (\n              // Only show custom type tags\n              <TagsList\n                tags={tags.filter(\n                  (tag: Tag) =>\n                    tag.type !== undefined &&\n                    ['TagType.custom', 1].includes(tag.type) &&\n                    tag.id !== tagId,\n                )}\n                maxTags={MAX_TAGS_TO_SHOW}\n              />\n            ),\n            Header: t('Tags'),\n            accessor: 'tags',\n            disableSortBy: true,\n          },\n          {\n            Cell: ({\n              row: {\n                original: { owners = [] },\n              },\n            }: any) => <FacePile users={owners} />,\n            Header: t('Owners'),\n            accessor: 'owners',\n            disableSortBy: true,\n            size: 'xl',\n          },\n        ]}\n      />\n    );\n  };\n\n  return (\n    <AllEntitiesTableContainer>\n      {showListViewObjs ? (\n        <>\n          <div className=\"entity-title\">{t('Dashboards')}</div>\n          {renderTable('dashboard')}\n          <div className=\"entity-title\">{t('Charts')}</div>\n          {renderTable('chart')}\n          <div className=\"entity-title\">{t('Queries')}</div>\n          {renderTable('query')}\n        </>\n      ) : (\n        <EmptyState\n          image=\"dashboard.svg\"\n          size=\"large\"\n          title={t('No entities have this tag currently assigned')}\n          buttonAction={() => setShowTagModal(true)}\n          buttonText={t('Add tag to entities')}\n        />\n      )}\n    </AllEntitiesTableContainer>\n  );\n}\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SAASA,aAAa,QAAQ,iBAAiB;AAC/C,SAASC,CAAC,EAAEC,MAAM,QAAQ,mBAAmB;AAC7C,OAAOC,SAAS,IAAIC,gBAAgB,QAAQ,0BAA0B;AACtE,SAASC,QAAQ,QAAQ,qBAAqB;AAC9C,OAAOC,QAAQ,MAAM,yBAAyB;AAE9C,SAASC,UAAU,QAAQ,2BAA2B;AACtD,SAASC,WAAW,EAAEC,aAAa,QAAQ,kBAAkB,CAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,QAAA,IAAAC,SAAA,EAAAC,IAAA,IAAAC,KAAA;AAG9D,MAAMC,gBAAgB,GAAG,CAAC;AAC1B,MAAMC,SAAS,GAAG,EAAE;AAEpB,MAAMC,yBAAyB,GAAGhB,MAAM,CAACiB,GAAG;;mBAEzB,CAAC,EAAEC,KAAK,EAAE,KAAKA,KAAK,CAACC,QAAQ,GAAG,CAAC;;;;;;;;;iBASnC,CAAC,EAAED,KAAK,EAAE,KAAKA,KAAK,CAACE,UAAU,CAACC,KAAK,CAACC,CAAC;mBACrC,CAAC,EAAEJ,KAAK,EAAE,KAAKA,KAAK,CAACE,UAAU,CAACG,OAAO,CAACC,MAAM;;;;cAInD,CAAC,EAAEN,KAAK,EAAE,KAAKA,KAAK,CAACC,QAAQ,GAAG,CAAC;;CAE9C;AAQD,eAAc,SAAUM,gBAAgBA,CAAC,EACvCC,MAAM,GAAG,EAAE,EACXC,eAAe,EACfC,OAAO,EACe;EAGtB,MAAM,CAACC,KAAK,CAAC,GAAGtB,aAAa,CAAC,IAAI,EAAED,WAAW,CAAC;EAChD,MAAMwB,gBAAgB,GACpBF,OAAO,CAACG,SAAS,CAACC,MAAM,GAAG,CAAC;EAC5BJ,OAAO,CAACK,KAAK,CAACD,MAAM,GAAG,CAAC;EACxBJ,OAAO,CAACM,KAAK,CAACF,MAAM,GAAG,CAAC;EAE1B,MAAMG,WAAW,GAAGA,CAACC,IAAgB,KAAI;IACvC,MAAMC,IAAI,GAAGT,OAAO,CAACQ,IAAI,CAAC,CAACE,GAAG,CAAC,CAACC,CAAe,MAAM;MACnD,CAACH,IAAI,GAAG3B,IAAA,QAAG+B,IAAI,EAAED,CAAC,CAACE,GAAI,EAAAC,QAAA,EAAEH,CAAC,CAACI,IAAI,EAAI,CAAC;MACpCC,QAAQ,EAAE9C,aAAa,CAAC+C,GAAG,CAACN,CAAC,CAACO,UAAU,CAAC,CAACC,OAAO,EAAE;MACnDC,IAAI,EAAET,CAAC,CAACS,IAAI;MACZC,MAAM,EAAEV,CAAC,CAACU;KACX,CAAC,CAAC;IAEH,OACExC,IAAA,CAACR,SAAS,IACRiD,SAAS,EAAC,iBAAiB,EAC3BC,gBAAgB,EAAEjD,gBAAgB,CAACkD,KAAM,EACzCf,IAAI,EAAEA,IAAK,EACXgB,QAAQ,EAAEtC,SAAU,EACpBuC,OAAO,EAAE;MACP;QACEC,QAAQ,EAAEnB,IAAI;QACdoB,MAAM,EAAE;OACT;MACD;QACEC,IAAI,EAAEA,CAAC,EACLC,GAAG,EAAE,EACHC,QAAQ,EAAE,EAAEX,IAAI,GAAG,EAAE,EAAE,EACxB,EAOF;QACC;QACAvC,IAAA,CAACN,QAAQ,IACP6C,IAAI,EAAEA,IAAI,CAACY,MAAM,CACf,CAACC,GAAQ,KACPA,GAAG,CAACzB,IAAI,KAAK0B,SAAS;UACtB,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAACC,QAAQ,CAACF,GAAG,CAACzB,IAAI,CAAC;UACxCyB,GAAG,CAACG,EAAE,KAAKnC,KAAK,CAClB,EACFoC,OAAO,EAAEnD,gBAAiB,GAE7B;QACD0C,MAAM,EAAEzD,CAAC,CAAC,MAAM,CAAC;QACjBwD,QAAQ,EAAE,MAAM;QAChBW,aAAa,EAAE;OAChB;MACD;QACET,IAAI,EAAEA,CAAC,EACLC,GAAG,EAAE,EACHC,QAAQ,EAAE,EAAEV,MAAM,GAAG,EAAE,EAAE,EAC1B,EACG,KAAKxC,IAAA,CAACL,QAAQ,IAAC+D,KAAK,EAAElB,MAAO,GAAG;QACtCO,MAAM,EAAEzD,CAAC,CAAC,QAAQ,CAAC;QACnBwD,QAAQ,EAAE,QAAQ;QAClBW,aAAa,EAAE,IAAI;QACnBE,IAAI,EAAE;OACP,CACD;IAAA,CACF;EAEN,CAAC;EAED,OACE3D,IAAA,CAACO,yBAAyB,IAAA0B,QAAA;IACvBZ,gBAAgB,GACfjB,KAAA,CAAAF,SAAA,IAAA+B,QAAA;MACEjC,IAAA,UAAKyC,SAAS,EAAC,cAAc,EAAAR,QAAA,EAAE3C,CAAC,CAAC,YAAY,CAAC,EAAM,CACpD;MAACoC,WAAW,CAAC,WAAW,CAAC;MACzB1B,IAAA,UAAKyC,SAAS,EAAC,cAAc,EAAAR,QAAA,EAAE3C,CAAC,CAAC,QAAQ,CAAC,EAAM,CAChD;MAACoC,WAAW,CAAC,OAAO,CAAC;MACrB1B,IAAA,UAAKyC,SAAS,EAAC,cAAc,EAAAR,QAAA,EAAE3C,CAAC,CAAC,SAAS,CAAC,EAAM,CACjD;MAACoC,WAAW,CAAC,OAAO,CAAC;IACvB,CAAG,GAEH1B,IAAA,CAACJ,UAAU,IACTgE,KAAK,EAAC,eAAe,EACrBD,IAAI,EAAC,OAAO,EACZE,KAAK,EAAEvE,CAAC,CAAC,8CAA8C,CAAE,EACzDwE,YAAY,EAAEA,CAAA,KAAM5C,eAAe,CAAC,IAAI,CAAE,EAC1C6C,UAAU,EAAEzE,CAAC,CAAC,qBAAqB,CAAE,GAExC;EACwB,CAAC;AAEhC,CAAC0E,aAAA,CAjGuBhD,gBAAgB,mCAOtBlB,aAAa,sBAAAmE,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAd,SAAA,MAAAY,cAAA,WAAAA,cAAA,CAAAG,QAAA,CApCzB/D,gBAAgB,kHAAA4D,cAAA,CAAAG,QAAA,CAChB9D,SAAS,2GAAA2D,cAAA,CAAAG,QAAA,CAET7D,yBAAyB,2HAAA0D,cAAA,CAAAG,QAAA,CA0BPpD,gBAAgB,0IAAAqD,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAhB,SAAA,CAAAgB,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}