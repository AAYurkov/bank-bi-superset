{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { GenericDataType, getColumnLabel, isPhysicalColumn } from '@superset-ui/core';\nimport { checkColumnType } from '..';\nexport function isSortable(controls) {var _controls$x_axis, _controls$datasource, _controls$xAxisForceC, _controls$x_axis2, _controls$datasource2;\n  const isForcedCategorical = checkColumnType(getColumnLabel(controls == null ? void 0 : (_controls$x_axis = controls.x_axis) == null ? void 0 : _controls$x_axis.value), controls == null ? void 0 : (_controls$datasource = controls.datasource) == null ? void 0 : _controls$datasource.datasource, [GenericDataType.Numeric]) && !!(controls != null && (_controls$xAxisForceC = controls.xAxisForceCategorical) != null && _controls$xAxisForceC.value);\n  const xAxisValue = controls == null ? void 0 : (_controls$x_axis2 = controls.x_axis) == null ? void 0 : _controls$x_axis2.value;\n  // Given that we don't know the type of a custom SQL column,\n  // we treat it as sortable and give the responsibility to the\n  // user to provide a sortable result.\n  const isCustomSQL = !isPhysicalColumn(xAxisValue);\n  return isForcedCategorical ||\n  isCustomSQL ||\n  checkColumnType(getColumnLabel(xAxisValue), controls == null ? void 0 : (_controls$datasource2 = controls.datasource) == null ? void 0 : _controls$datasource2.datasource, [GenericDataType.String, GenericDataType.Boolean]);\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(isSortable, \"isSortable\", \"/Users/aryurkov/superset/superset-frontend/packages/superset-ui-chart-controls/src/utils/isSortable.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["GenericDataType","getColumnLabel","isPhysicalColumn","checkColumnType","isSortable","controls","_controls$x_axis","_controls$datasource","_controls$xAxisForceC","_controls$x_axis2","_controls$datasource2","isForcedCategorical","x_axis","value","datasource","Numeric","xAxisForceCategorical","xAxisValue","isCustomSQL","String","Boolean","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/packages/superset-ui-chart-controls/src/utils/isSortable.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  GenericDataType,\n  getColumnLabel,\n  isPhysicalColumn,\n  QueryFormColumn,\n} from '@superset-ui/core';\nimport { checkColumnType, ControlStateMapping } from '..';\n\nexport function isSortable(controls: ControlStateMapping): boolean {\n  const isForcedCategorical =\n    checkColumnType(\n      getColumnLabel(controls?.x_axis?.value as QueryFormColumn),\n      controls?.datasource?.datasource,\n      [GenericDataType.Numeric],\n    ) && !!controls?.xAxisForceCategorical?.value;\n\n  const xAxisValue = controls?.x_axis?.value as QueryFormColumn;\n\n  // Given that we don't know the type of a custom SQL column,\n  // we treat it as sortable and give the responsibility to the\n  // user to provide a sortable result.\n  const isCustomSQL = !isPhysicalColumn(xAxisValue);\n\n  return (\n    isForcedCategorical ||\n    isCustomSQL ||\n    checkColumnType(\n      getColumnLabel(xAxisValue),\n      controls?.datasource?.datasource,\n      [GenericDataType.String, GenericDataType.Boolean],\n    )\n  );\n}\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SACEA,eAAe,EACfC,cAAc,EACdC,gBAAgB,QAEX,mBAAmB;AAC1B,SAASC,eAAe,QAA6B,IAAI;AAEzD,OAAM,SAAUC,UAAUA,CAACC,QAA6B,OAAAC,gBAAA,EAAAC,oBAAA,EAAAC,qBAAA,EAAAC,iBAAA,EAAAC,qBAAA;EACtD,MAAMC,mBAAmB,GACvBR,eAAe,CACbF,cAAc,CAACI,QAAQ,qBAAAC,gBAAA,GAARD,QAAQ,CAAEO,MAAM,qBAAhBN,gBAAA,CAAkBO,KAAwB,CAAC,EAC1DR,QAAQ,qBAAAE,oBAAA,GAARF,QAAQ,CAAES,UAAU,qBAApBP,oBAAA,CAAsBO,UAAU,EAChC,CAACd,eAAe,CAACe,OAAO,CAAC,CAC1B,IAAI,CAAC,EAACV,QAAQ,aAAAG,qBAAA,GAARH,QAAQ,CAAEW,qBAAqB,aAA/BR,qBAAA,CAAiCK,KAAK;EAE/C,MAAMI,UAAU,GAAGZ,QAAQ,qBAAAI,iBAAA,GAARJ,QAAQ,CAAEO,MAAM,qBAAhBH,iBAAA,CAAkBI,KAAwB;EAE7D;EACA;EACA;EACA,MAAMK,WAAW,GAAG,CAAChB,gBAAgB,CAACe,UAAU,CAAC;EAEjD,OACEN,mBAAmB;EACnBO,WAAW;EACXf,eAAe,CACbF,cAAc,CAACgB,UAAU,CAAC,EAC1BZ,QAAQ,qBAAAK,qBAAA,GAARL,QAAQ,CAAES,UAAU,qBAApBJ,qBAAA,CAAsBI,UAAU,EAChC,CAACd,eAAe,CAACmB,MAAM,EAAEnB,eAAe,CAACoB,OAAO,CAAC,CAClD;AAEL,CAAC,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAxBerB,UAAU,kJAAAsB,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}