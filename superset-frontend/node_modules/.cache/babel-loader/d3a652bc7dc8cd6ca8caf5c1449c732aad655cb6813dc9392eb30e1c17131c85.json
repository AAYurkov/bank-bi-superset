{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { getExtensionsRegistry, styled, SupersetClient, useTheme, css, t } from '@superset-ui/core';\nimport { useState, useMemo, useCallback } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport rison from 'rison';\nimport { createFetchRelated, createFetchDistinct, createErrorHandler } from 'src/views/CRUD/utils';\nimport { useListViewResource } from 'src/views/CRUD/hooks';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport { DatasourceModal } from 'src/components/Datasource';\nimport DeleteModal from 'src/components/DeleteModal';\nimport handleResourceExport from 'src/utils/export';\nimport ListView, { FilterOperator } from 'src/components/ListView';\nimport { DatasetTypeLabel } from 'src/components/Label';\nimport Loading from 'src/components/Loading';\nimport SubMenu from 'src/features/home/SubMenu';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Icons } from 'src/components/Icons';\nimport FacePile from 'src/components/FacePile';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport ImportModelsModal from 'src/components/ImportModal/index';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport { GenericLink } from 'src/components/GenericLink/GenericLink';\nimport { PAGE_SIZE, SORT_BY, PASSWORDS_NEEDED_MESSAGE, CONFIRM_OVERWRITE_MESSAGE } from 'src/features/datasets/constants';\nimport DuplicateDatasetModal from 'src/features/datasets/DuplicateDatasetModal';\nimport { useSelector } from 'react-redux';\nimport { ModifiedInfo } from 'src/components/AuditInfo';\nimport { QueryObjectColumns } from 'src/views/CRUD/types';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst extensionsRegistry = getExtensionsRegistry();\nconst DatasetDeleteRelatedExtension = extensionsRegistry.get('dataset.delete.related');\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\nconst Actions = styled.div`\n  ${({ theme }) => css`\n    color: ${theme.colors.grayscale.base};\n\n    .disabled {\n      svg,\n      i {\n        &:hover {\n          path {\n            fill: ${theme.colors.grayscale.light1};\n          }\n        }\n      }\n      color: ${theme.colors.grayscale.light1};\n      .antd5-menu-item:hover {\n        cursor: default;\n      }\n      &::after {\n        color: ${theme.colors.grayscale.light1};\n      }\n    }\n  `}\n`;\nconst DatasetList = ({ addDangerToast, addSuccessToast, user }) => {\n  const history = useHistory();\n  const theme = useTheme();\n  const { state: { loading, resourceCount: datasetCount, resourceCollection: datasets, bulkSelectEnabled }, hasPerm, fetchData, toggleBulkSelect, refreshData } = useListViewResource('dataset', t('dataset'), addDangerToast);\n  const [datasetCurrentlyDeleting, setDatasetCurrentlyDeleting] = useState(null);\n  const [datasetCurrentlyEditing, setDatasetCurrentlyEditing] = useState(null);\n  const [datasetCurrentlyDuplicating, setDatasetCurrentlyDuplicating] = useState(null);\n  const [importingDataset, showImportModal] = useState(false);\n  const [passwordFields, setPasswordFields] = useState([]);\n  const [preparingExport, setPreparingExport] = useState(false);\n  const [sshTunnelPasswordFields, setSSHTunnelPasswordFields] = useState([]);\n  const [sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields] = useState([]);\n  const [sshTunnelPrivateKeyPasswordFields, setSSHTunnelPrivateKeyPasswordFields] = useState([]);\n  const PREVENT_UNSAFE_DEFAULT_URLS_ON_DATASET = useSelector((state) => {var _state$common, _state$common$conf;return ((_state$common = state.common) == null ? void 0 : (_state$common$conf = _state$common.conf) == null ? void 0 : _state$common$conf.PREVENT_UNSAFE_DEFAULT_URLS_ON_DATASET) || false;});\n  const openDatasetImportModal = () => {\n    showImportModal(true);\n  };\n  const closeDatasetImportModal = () => {\n    showImportModal(false);\n  };\n  const handleDatasetImport = () => {\n    showImportModal(false);\n    refreshData();\n    addSuccessToast(t('Dataset imported'));\n  };\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canCreate = hasPerm('can_write');\n  const canDuplicate = hasPerm('can_duplicate');\n  const canExport = hasPerm('can_export');\n  const initialSort = SORT_BY;\n  const openDatasetEditModal = useCallback(({ id }) => {\n    SupersetClient.get({\n      endpoint: `/api/v1/dataset/${id}`\n    }).\n    then(({ json = {} }) => {\n      const addCertificationFields = json.result.columns.map((column) => {\n        const { certification: { details = '', certified_by = '' } = {} } = JSON.parse(column.extra || '{}') || {};\n        return {\n          ...column,\n          certification_details: details || '',\n          certified_by: certified_by || '',\n          is_certified: details || certified_by\n        };\n      });\n      // eslint-disable-next-line no-param-reassign\n      json.result.columns = [...addCertificationFields];\n      setDatasetCurrentlyEditing(json.result);\n    }).\n    catch(() => {\n      addDangerToast(t('An error occurred while fetching dataset related data'));\n    });\n  }, [addDangerToast]);\n  const openDatasetDeleteModal = (dataset) => SupersetClient.get({\n    endpoint: `/api/v1/dataset/${dataset.id}/related_objects`\n  }).\n  then(({ json = {} }) => {\n    setDatasetCurrentlyDeleting({\n      ...dataset,\n      charts: json.charts,\n      dashboards: json.dashboards\n    });\n  }).\n  catch(createErrorHandler((errMsg) => t('An error occurred while fetching dataset related data: %s', errMsg)));\n  const openDatasetDuplicateModal = (dataset) => {\n    setDatasetCurrentlyDuplicating(dataset);\n  };\n  const handleBulkDatasetExport = (datasetsToExport) => {\n    const ids = datasetsToExport.map(({ id }) => id);\n    handleResourceExport('dataset', ids, () => {\n      setPreparingExport(false);\n    });\n    setPreparingExport(true);\n  };\n  const columns = useMemo(() => [\n  {\n    Cell: ({ row: { original: { kind } } }) => null,\n    accessor: 'kind_icon',\n    disableSortBy: true,\n    size: 'xs',\n    id: 'id'\n  },\n  {\n    Cell: ({ row: { original: { extra, table_name: datasetTitle, description, explore_url: exploreURL } } }) => {\n      let titleLink;\n      if (PREVENT_UNSAFE_DEFAULT_URLS_ON_DATASET) {\n        titleLink = _jsx(Link, { \"data-test\": \"internal-link\", to: exploreURL, children:\n          datasetTitle }\n        );\n      } else\n      {\n        titleLink =\n        // exploreUrl can be a link to Explore or an external link\n        // in the first case use SPA routing, else use HTML anchor\n        _jsx(GenericLink, { to: exploreURL, children: datasetTitle });\n      }\n      try {\n        const parsedExtra = JSON.parse(extra);\n        return _jsxs(FlexRowContainer, { children: [\n          (parsedExtra == null ? void 0 : parsedExtra.certification) && _jsx(CertifiedBadge, { certifiedBy: parsedExtra.certification.certified_by, details: parsedExtra.certification.details, size: \"l\" }),\n          (parsedExtra == null ? void 0 : parsedExtra.warning_markdown) && _jsx(WarningIconWithTooltip, { warningMarkdown: parsedExtra.warning_markdown, size: \"l\" }),\n          titleLink,\n          description && _jsx(InfoTooltip, { tooltip: description })] }\n        );\n      }\n      catch {\n        return titleLink;\n      }\n    },\n    Header: t('Name'),\n    accessor: 'table_name'\n  },\n  {\n    Cell: ({ row: { original: { kind } } }) => _jsx(DatasetTypeLabel, { datasetType: kind }),\n    Header: t('Type'),\n    accessor: 'kind',\n    disableSortBy: true,\n    size: 'md'\n  },\n  {\n    Header: t('Database'),\n    accessor: 'database.database_name',\n    size: 'lg'\n  },\n  {\n    Header: t('Schema'),\n    accessor: 'schema',\n    size: 'lg'\n  },\n  {\n    accessor: 'database',\n    disableSortBy: true,\n    hidden: true\n  },\n  {\n    Cell: ({ row: { original: { owners = [] } } }) => _jsx(FacePile, { users: owners }),\n    Header: t('Owners'),\n    id: 'owners',\n    disableSortBy: true,\n    size: 'lg'\n  },\n  {\n    Cell: ({ row: { original: { changed_on_delta_humanized: changedOn, changed_by: changedBy } } }) => _jsx(ModifiedInfo, { date: changedOn, user: changedBy }),\n    Header: t('Last modified'),\n    accessor: 'changed_on_delta_humanized',\n    size: 'xl'\n  },\n  {\n    accessor: 'sql',\n    hidden: true,\n    disableSortBy: true\n  },\n  {\n    Cell: ({ row: { original } }) => {\n      // Verify owner or isAdmin\n      const allowEdit = original.owners.map((o) => o.id).includes(user.userId) ||\n      isUserAdmin(user);\n      const handleEdit = () => openDatasetEditModal(original);\n      const handleDelete = () => openDatasetDeleteModal(original);\n      const handleExport = () => handleBulkDatasetExport([original]);\n      const handleDuplicate = () => openDatasetDuplicateModal(original);\n      if (!canEdit && !canDelete && !canExport && !canDuplicate) {\n        return null;\n      }\n      return _jsxs(Actions, { className: \"actions\", children: [\n        canDelete && _jsx(Tooltip, { id: \"delete-action-tooltip\", title: t('Delete'), placement: \"bottom\", children:\n          _jsx(\"span\", { role: \"button\", tabIndex: 0, className: \"action-button\", onClick: handleDelete, children:\n            _jsx(Icons.DeleteOutlined, { iconSize: \"l\" }) }\n          ) }\n        ),\n        canExport && _jsx(Tooltip, { id: \"export-action-tooltip\", title: t('Export'), placement: \"bottom\", children:\n          _jsx(\"span\", { role: \"button\", tabIndex: 0, className: \"action-button\", onClick: handleExport, children:\n            _jsx(Icons.UploadOutlined, { iconSize: \"l\" }) }\n          ) }\n        ),\n        canEdit && _jsx(Tooltip, { id: \"edit-action-tooltip\", title: allowEdit ?\n          t('Edit') :\n          t('You must be a dataset owner in order to edit. Please reach out to a dataset owner to request modifications or edit access.'), placement: \"bottomRight\", children:\n          _jsx(\"span\", { role: \"button\", tabIndex: 0, className: allowEdit ? 'action-button' : 'disabled', onClick: allowEdit ? handleEdit : undefined, children:\n            _jsx(Icons.EditOutlined, { iconSize: \"l\" }) }\n          ) }\n        ),\n        canDuplicate && original.kind === 'virtual' && _jsx(Tooltip, { id: \"duplicate-action-tooltip\", title: t('Duplicate'), placement: \"bottom\", children:\n          _jsx(\"span\", { role: \"button\", tabIndex: 0, className: \"action-button\", onClick: handleDuplicate, children:\n            _jsx(Icons.CopyOutlined, {}) }\n          ) }\n        )] }\n      );\n    },\n    Header: t('Actions'),\n    id: 'actions',\n    hidden: !canEdit && !canDelete && !canDuplicate,\n    disableSortBy: true\n  },\n  {\n    accessor: QueryObjectColumns.ChangedBy,\n    hidden: true\n  }],\n  [canEdit, canDelete, canExport, openDatasetEditModal, canDuplicate, user]);\n  const filterTypes = useMemo(() => [\n  {\n    Header: t('Name'),\n    key: 'search',\n    id: 'table_name',\n    input: 'search',\n    operator: FilterOperator.Contains\n  },\n  {\n    Header: t('Type'),\n    key: 'sql',\n    id: 'sql',\n    input: 'select',\n    operator: FilterOperator.DatasetIsNullOrEmpty,\n    unfilteredLabel: 'All',\n    selects: [\n    { label: t('Virtual'), value: false },\n    { label: t('Physical'), value: true }]\n\n  },\n  {\n    Header: t('Database'),\n    key: 'database',\n    id: 'database',\n    input: 'select',\n    operator: FilterOperator.RelationOneMany,\n    unfilteredLabel: 'All',\n    fetchSelects: createFetchRelated('dataset', 'database', createErrorHandler((errMsg) => t('An error occurred while fetching datasets: %s', errMsg))),\n    paginate: true\n  },\n  {\n    Header: t('Schema'),\n    key: 'schema',\n    id: 'schema',\n    input: 'select',\n    operator: FilterOperator.Equals,\n    unfilteredLabel: 'All',\n    fetchSelects: createFetchDistinct('dataset', 'schema', createErrorHandler((errMsg) => t('An error occurred while fetching schema values: %s', errMsg))),\n    paginate: true\n  },\n  {\n    Header: t('Owner'),\n    key: 'owner',\n    id: 'owners',\n    input: 'select',\n    operator: FilterOperator.RelationManyMany,\n    unfilteredLabel: 'All',\n    fetchSelects: createFetchRelated('dataset', 'owners', createErrorHandler((errMsg) => t('An error occurred while fetching dataset owner values: %s', errMsg)), user),\n    paginate: true\n  },\n  {\n    Header: t('Certified'),\n    key: 'certified',\n    id: 'id',\n    urlDisplay: 'certified',\n    input: 'select',\n    operator: FilterOperator.DatasetIsCertified,\n    unfilteredLabel: t('Any'),\n    selects: [\n    { label: t('Yes'), value: true },\n    { label: t('No'), value: false }]\n\n  },\n  {\n    Header: t('Modified by'),\n    key: 'changed_by',\n    id: 'changed_by',\n    input: 'select',\n    operator: FilterOperator.RelationOneMany,\n    unfilteredLabel: t('All'),\n    fetchSelects: createFetchRelated('dataset', 'changed_by', createErrorHandler((errMsg) => t('An error occurred while fetching dataset datasource values: %s', errMsg)), user),\n    paginate: true\n  }],\n  [user]);\n  const menuData = {\n    activeChild: 'Datasets',\n    name: t('Datasets')\n  };\n  const buttonArr = [];\n  if (canDelete || canExport) {\n    buttonArr.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary'\n    });\n  }\n  if (canCreate) {\n    buttonArr.push({\n      name: _jsxs(_Fragment, { children: [\n        _jsx(Icons.PlusOutlined, { iconColor: theme.colors.primary.light5, iconSize: \"m\", css: css`\n              vertical-align: text-top;\n            ` }),\n        t('Dataset')] }\n      ),\n      onClick: () => {\n        history.push('/dataset/add/');\n      },\n      buttonStyle: 'primary'\n    });\n    buttonArr.push({\n      name: _jsx(Tooltip, { id: \"import-tooltip\", title: t('Import datasets'), placement: \"bottomRight\", children:\n        _jsx(Icons.DownloadOutlined, { iconColor: theme.colors.primary.dark1, \"data-test\": \"import-button\" }) }\n      ),\n      buttonStyle: 'link',\n      onClick: openDatasetImportModal\n    });\n  }\n  menuData.buttons = buttonArr;\n  const closeDatasetDeleteModal = () => {\n    setDatasetCurrentlyDeleting(null);\n  };\n  const closeDatasetEditModal = () => {\n    setDatasetCurrentlyEditing(null);\n  };\n  const closeDatasetDuplicateModal = () => {\n    setDatasetCurrentlyDuplicating(null);\n  };\n  const handleDatasetDelete = ({ id, table_name: tableName }) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/dataset/${id}`\n    }).then(() => {\n      refreshData();\n      setDatasetCurrentlyDeleting(null);\n      addSuccessToast(t('Deleted: %s', tableName));\n    }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue deleting %s: %s', tableName, errMsg))));\n  };\n  const handleBulkDatasetDelete = (datasetsToDelete) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/dataset/?q=${rison.encode(datasetsToDelete.map(({ id }) => id))}`\n    }).then(({ json = {} }) => {\n      refreshData();\n      addSuccessToast(json.message);\n    }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue deleting the selected datasets: %s', errMsg))));\n  };\n  const handleDatasetDuplicate = (newDatasetName) => {\n    if (datasetCurrentlyDuplicating === null) {\n      addDangerToast(t('There was an issue duplicating the dataset.'));\n    }\n    SupersetClient.post({\n      endpoint: `/api/v1/dataset/duplicate`,\n      jsonPayload: {\n        base_model_id: datasetCurrentlyDuplicating == null ? void 0 : datasetCurrentlyDuplicating.id,\n        table_name: newDatasetName\n      }\n    }).then(() => {\n      setDatasetCurrentlyDuplicating(null);\n      refreshData();\n    }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue duplicating the selected datasets: %s', errMsg))));\n  };\n  return _jsxs(_Fragment, { children: [\n    _jsx(SubMenu, { ...menuData }),\n    datasetCurrentlyDeleting && _jsx(DeleteModal, { description: _jsxs(_Fragment, { children: [\n        _jsxs(\"p\", { children: [\n          t('The dataset'),\n          _jsxs(\"b\", { children: [\" \", datasetCurrentlyDeleting.table_name, \" \"] }),\n          t('is linked to %s charts that appear on %s dashboards. Are you sure you want to continue? Deleting the dataset will break those objects.', datasetCurrentlyDeleting.charts.count, datasetCurrentlyDeleting.dashboards.count)] }\n        ),\n        datasetCurrentlyDeleting.dashboards.count >= 1 && _jsxs(_Fragment, { children: [\n          _jsx(\"h4\", { children: t('Affected Dashboards') }),\n          _jsxs(\"ul\", { children: [\n            datasetCurrentlyDeleting.dashboards.result.\n            slice(0, 10).\n            map((result, index) => _jsx(\"li\", { children:\n              _jsx(\"a\", { href: `/superset/dashboard/${result.id}`, target: \"_atRiskItem\", children:\n                result.title }\n              ) }, result.id\n            )),\n            datasetCurrentlyDeleting.dashboards.result.length > 10 && _jsx(\"li\", { children:\n              t('... and %s others', datasetCurrentlyDeleting.dashboards.result.length -\n              10) }\n            )] }\n          )] }\n        ),\n        datasetCurrentlyDeleting.charts.count >= 1 && _jsxs(_Fragment, { children: [\n          _jsx(\"h4\", { children: t('Affected Charts') }),\n          _jsxs(\"ul\", { children: [\n            datasetCurrentlyDeleting.charts.result.slice(0, 10).map((result, index) => _jsx(\"li\", { children:\n              _jsx(\"a\", { href: `/explore/?slice_id=${result.id}`, target: \"_atRiskItem\", children:\n                result.slice_name }\n              ) }, result.id\n            )),\n            datasetCurrentlyDeleting.charts.result.length > 10 && _jsx(\"li\", { children:\n              t('... and %s others', datasetCurrentlyDeleting.charts.result.length - 10) }\n            )] }\n          )] }\n        ),\n        DatasetDeleteRelatedExtension && _jsx(DatasetDeleteRelatedExtension, { dataset: datasetCurrentlyDeleting })] }\n      ), onConfirm: () => {\n        if (datasetCurrentlyDeleting) {\n          handleDatasetDelete(datasetCurrentlyDeleting);\n        }\n      }, onHide: closeDatasetDeleteModal, open: true, title: t('Delete Dataset?') }),\n    datasetCurrentlyEditing && _jsx(DatasourceModal, { datasource: datasetCurrentlyEditing, onDatasourceSave: refreshData, onHide: closeDatasetEditModal, show: true }),\n    _jsx(DuplicateDatasetModal, { dataset: datasetCurrentlyDuplicating, onHide: closeDatasetDuplicateModal, onDuplicate: handleDatasetDuplicate }),\n    _jsx(ConfirmStatusChange, { title: t('Please confirm'), description: t('Are you sure you want to delete the selected datasets?'), onConfirm: handleBulkDatasetDelete, children:\n      (confirmDelete) => {\n        const bulkActions = [];\n        if (canDelete) {\n          bulkActions.push({\n            key: 'delete',\n            name: t('Delete'),\n            onSelect: confirmDelete,\n            type: 'danger'\n          });\n        }\n        if (canExport) {\n          bulkActions.push({\n            key: 'export',\n            name: t('Export'),\n            type: 'primary',\n            onSelect: handleBulkDatasetExport\n          });\n        }\n        return _jsx(ListView, { className: \"dataset-list-view\", columns: columns, data: datasets, count: datasetCount, pageSize: PAGE_SIZE, fetchData: fetchData, filters: filterTypes, loading: loading, initialSort: initialSort, bulkActions: bulkActions, bulkSelectEnabled: bulkSelectEnabled, disableBulkSelect: toggleBulkSelect, addDangerToast: addDangerToast, addSuccessToast: addSuccessToast, refreshData: refreshData, renderBulkSelectCopy: (selected) => {\n            const { virtualCount, physicalCount } = selected.reduce((acc, e) => {\n              if (e.original.kind === 'physical')\n              acc.physicalCount += 1;else\n              if (e.original.kind === 'virtual') {\n                acc.virtualCount += 1;\n              }\n              return acc;\n            }, { virtualCount: 0, physicalCount: 0 });\n            if (!selected.length) {\n              return t('0 Selected');\n            }\n            if (virtualCount && !physicalCount) {\n              return t('%s Selected (Virtual)', selected.length, virtualCount);\n            }\n            if (physicalCount && !virtualCount) {\n              return t('%s Selected (Physical)', selected.length, physicalCount);\n            }\n            return t('%s Selected (%s Physical, %s Virtual)', selected.length, physicalCount, virtualCount);\n          } });\n      } }\n    ),\n\n    _jsx(ImportModelsModal, { resourceName: \"dataset\", resourceLabel: t('dataset'), passwordsNeededMessage: PASSWORDS_NEEDED_MESSAGE, confirmOverwriteMessage: CONFIRM_OVERWRITE_MESSAGE, addDangerToast: addDangerToast, addSuccessToast: addSuccessToast, onModelImport: handleDatasetImport, show: importingDataset, onHide: closeDatasetImportModal, passwordFields: passwordFields, setPasswordFields: setPasswordFields, sshTunnelPasswordFields: sshTunnelPasswordFields, setSSHTunnelPasswordFields: setSSHTunnelPasswordFields, sshTunnelPrivateKeyFields: sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields: setSSHTunnelPrivateKeyFields, sshTunnelPrivateKeyPasswordFields: sshTunnelPrivateKeyPasswordFields, setSSHTunnelPrivateKeyPasswordFields: setSSHTunnelPrivateKeyPasswordFields }),\n    preparingExport && _jsx(Loading, {})] }\n  );\n};__signature__(DatasetList, \"useHistory{history}\\nuseTheme{theme}\\nuseListViewResource{{ state: { loading, resourceCount: datasetCount, resourceCollection: datasets, bulkSelectEnabled, }, hasPerm, fetchData, toggleBulkSelect, refreshData, }}\\nuseState{[datasetCurrentlyDeleting, setDatasetCurrentlyDeleting](null)}\\nuseState{[datasetCurrentlyEditing, setDatasetCurrentlyEditing](null)}\\nuseState{[datasetCurrentlyDuplicating, setDatasetCurrentlyDuplicating](null)}\\nuseState{[importingDataset, showImportModal](false)}\\nuseState{[passwordFields, setPasswordFields]([])}\\nuseState{[preparingExport, setPreparingExport](false)}\\nuseState{[sshTunnelPasswordFields, setSSHTunnelPasswordFields]([])}\\nuseState{[sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields]([])}\\nuseState{[sshTunnelPrivateKeyPasswordFields, setSSHTunnelPrivateKeyPasswordFields,]([])}\\nuseSelector{PREVENT_UNSAFE_DEFAULT_URLS_ON_DATASET}\\nuseCallback{openDatasetEditModal}\\nuseMemo{columns}\\nuseMemo{filterTypes}\", () => [useHistory, useTheme, useListViewResource, useSelector]);const _default =\nwithToasts(DatasetList);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extensionsRegistry, \"extensionsRegistry\", \"/Users/aryurkov/superset/superset-frontend/src/pages/DatasetList/index.tsx\");reactHotLoader.register(DatasetDeleteRelatedExtension, \"DatasetDeleteRelatedExtension\", \"/Users/aryurkov/superset/superset-frontend/src/pages/DatasetList/index.tsx\");reactHotLoader.register(FlexRowContainer, \"FlexRowContainer\", \"/Users/aryurkov/superset/superset-frontend/src/pages/DatasetList/index.tsx\");reactHotLoader.register(Actions, \"Actions\", \"/Users/aryurkov/superset/superset-frontend/src/pages/DatasetList/index.tsx\");reactHotLoader.register(DatasetList, \"DatasetList\", \"/Users/aryurkov/superset/superset-frontend/src/pages/DatasetList/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/pages/DatasetList/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["getExtensionsRegistry","styled","SupersetClient","useTheme","css","t","useState","useMemo","useCallback","Link","useHistory","rison","createFetchRelated","createFetchDistinct","createErrorHandler","useListViewResource","ConfirmStatusChange","DatasourceModal","DeleteModal","handleResourceExport","ListView","FilterOperator","DatasetTypeLabel","Loading","SubMenu","withToasts","Tooltip","Icons","FacePile","CertifiedBadge","InfoTooltip","ImportModelsModal","WarningIconWithTooltip","isUserAdmin","GenericLink","PAGE_SIZE","SORT_BY","PASSWORDS_NEEDED_MESSAGE","CONFIRM_OVERWRITE_MESSAGE","DuplicateDatasetModal","useSelector","ModifiedInfo","QueryObjectColumns","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","extensionsRegistry","DatasetDeleteRelatedExtension","get","FlexRowContainer","div","theme","gridUnit","Actions","colors","grayscale","base","light1","DatasetList","addDangerToast","addSuccessToast","user","history","state","loading","resourceCount","datasetCount","resourceCollection","datasets","bulkSelectEnabled","hasPerm","fetchData","toggleBulkSelect","refreshData","datasetCurrentlyDeleting","setDatasetCurrentlyDeleting","datasetCurrentlyEditing","setDatasetCurrentlyEditing","datasetCurrentlyDuplicating","setDatasetCurrentlyDuplicating","importingDataset","showImportModal","passwordFields","setPasswordFields","preparingExport","setPreparingExport","sshTunnelPasswordFields","setSSHTunnelPasswordFields","sshTunnelPrivateKeyFields","setSSHTunnelPrivateKeyFields","sshTunnelPrivateKeyPasswordFields","setSSHTunnelPrivateKeyPasswordFields","PREVENT_UNSAFE_DEFAULT_URLS_ON_DATASET","_state$common","_state$common$conf","common","conf","openDatasetImportModal","closeDatasetImportModal","handleDatasetImport","canEdit","canDelete","canCreate","canDuplicate","canExport","initialSort","openDatasetEditModal","id","endpoint","then","json","addCertificationFields","result","columns","map","column","certification","details","certified_by","JSON","parse","extra","certification_details","is_certified","catch","openDatasetDeleteModal","dataset","charts","dashboards","errMsg","openDatasetDuplicateModal","handleBulkDatasetExport","datasetsToExport","ids","Cell","row","original","kind","accessor","disableSortBy","size","table_name","datasetTitle","description","explore_url","exploreURL","titleLink","to","children","parsedExtra","certifiedBy","warning_markdown","warningMarkdown","tooltip","Header","datasetType","hidden","owners","users","changed_on_delta_humanized","changedOn","changed_by","changedBy","date","allowEdit","o","includes","userId","handleEdit","handleDelete","handleExport","handleDuplicate","className","title","placement","role","tabIndex","onClick","DeleteOutlined","iconSize","UploadOutlined","undefined","EditOutlined","CopyOutlined","ChangedBy","filterTypes","key","input","operator","Contains","DatasetIsNullOrEmpty","unfilteredLabel","selects","label","value","RelationOneMany","fetchSelects","paginate","Equals","RelationManyMany","urlDisplay","DatasetIsCertified","menuData","activeChild","name","buttonArr","push","buttonStyle","PlusOutlined","iconColor","primary","light5","DownloadOutlined","dark1","buttons","closeDatasetDeleteModal","closeDatasetEditModal","closeDatasetDuplicateModal","handleDatasetDelete","tableName","delete","handleBulkDatasetDelete","datasetsToDelete","encode","message","handleDatasetDuplicate","newDatasetName","post","jsonPayload","base_model_id","count","slice","index","href","target","length","slice_name","onConfirm","onHide","open","datasource","onDatasourceSave","show","onDuplicate","confirmDelete","bulkActions","onSelect","type","data","pageSize","filters","disableBulkSelect","renderBulkSelectCopy","selected","virtualCount","physicalCount","reduce","acc","e","resourceName","resourceLabel","passwordsNeededMessage","confirmOverwriteMessage","onModelImport","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/pages/DatasetList/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  getExtensionsRegistry,\n  styled,\n  SupersetClient,\n  useTheme,\n  css,\n  t,\n} from '@superset-ui/core';\nimport { FunctionComponent, useState, useMemo, useCallback, Key } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport rison from 'rison';\nimport {\n  createFetchRelated,\n  createFetchDistinct,\n  createErrorHandler,\n} from 'src/views/CRUD/utils';\nimport { ColumnObject } from 'src/features/datasets/types';\nimport { useListViewResource } from 'src/views/CRUD/hooks';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport { DatasourceModal } from 'src/components/Datasource';\nimport DeleteModal from 'src/components/DeleteModal';\nimport handleResourceExport from 'src/utils/export';\nimport ListView, {\n  ListViewProps,\n  Filters,\n  FilterOperator,\n} from 'src/components/ListView';\nimport { DatasetTypeLabel } from 'src/components/Label';\nimport Loading from 'src/components/Loading';\nimport SubMenu, { SubMenuProps, ButtonProps } from 'src/features/home/SubMenu';\nimport Owner from 'src/types/Owner';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Icons } from 'src/components/Icons';\nimport FacePile from 'src/components/FacePile';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport ImportModelsModal from 'src/components/ImportModal/index';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport { GenericLink } from 'src/components/GenericLink/GenericLink';\n\nimport {\n  PAGE_SIZE,\n  SORT_BY,\n  PASSWORDS_NEEDED_MESSAGE,\n  CONFIRM_OVERWRITE_MESSAGE,\n} from 'src/features/datasets/constants';\nimport DuplicateDatasetModal from 'src/features/datasets/DuplicateDatasetModal';\nimport { useSelector } from 'react-redux';\nimport { ModifiedInfo } from 'src/components/AuditInfo';\nimport { QueryObjectColumns } from 'src/views/CRUD/types';\n\nconst extensionsRegistry = getExtensionsRegistry();\nconst DatasetDeleteRelatedExtension = extensionsRegistry.get(\n  'dataset.delete.related',\n);\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst Actions = styled.div`\n  ${({ theme }) => css`\n    color: ${theme.colors.grayscale.base};\n\n    .disabled {\n      svg,\n      i {\n        &:hover {\n          path {\n            fill: ${theme.colors.grayscale.light1};\n          }\n        }\n      }\n      color: ${theme.colors.grayscale.light1};\n      .antd5-menu-item:hover {\n        cursor: default;\n      }\n      &::after {\n        color: ${theme.colors.grayscale.light1};\n      }\n    }\n  `}\n`;\n\ntype Dataset = {\n  changed_by_name: string;\n  changed_by: string;\n  changed_on_delta_humanized: string;\n  database: {\n    id: string;\n    database_name: string;\n  };\n  kind: string;\n  explore_url: string;\n  id: number;\n  owners: Array<Owner>;\n  schema: string;\n  table_name: string;\n};\n\ninterface VirtualDataset extends Dataset {\n  extra: Record<string, any>;\n  sql: string;\n}\n\ninterface DatasetListProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  user: {\n    userId: string | number;\n    firstName: string;\n    lastName: string;\n  };\n}\n\nconst DatasetList: FunctionComponent<DatasetListProps> = ({\n  addDangerToast,\n  addSuccessToast,\n  user,\n}) => {\n  const history = useHistory();\n  const theme = useTheme();\n  const {\n    state: {\n      loading,\n      resourceCount: datasetCount,\n      resourceCollection: datasets,\n      bulkSelectEnabled,\n    },\n    hasPerm,\n    fetchData,\n    toggleBulkSelect,\n    refreshData,\n  } = useListViewResource<Dataset>('dataset', t('dataset'), addDangerToast);\n\n  const [datasetCurrentlyDeleting, setDatasetCurrentlyDeleting] = useState<\n    | (Dataset & {\n        charts: any;\n        dashboards: any;\n      })\n    | null\n  >(null);\n\n  const [datasetCurrentlyEditing, setDatasetCurrentlyEditing] =\n    useState<Dataset | null>(null);\n\n  const [datasetCurrentlyDuplicating, setDatasetCurrentlyDuplicating] =\n    useState<VirtualDataset | null>(null);\n\n  const [importingDataset, showImportModal] = useState<boolean>(false);\n  const [passwordFields, setPasswordFields] = useState<string[]>([]);\n  const [preparingExport, setPreparingExport] = useState<boolean>(false);\n  const [sshTunnelPasswordFields, setSSHTunnelPasswordFields] = useState<\n    string[]\n  >([]);\n  const [sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields] = useState<\n    string[]\n  >([]);\n  const [\n    sshTunnelPrivateKeyPasswordFields,\n    setSSHTunnelPrivateKeyPasswordFields,\n  ] = useState<string[]>([]);\n\n  const PREVENT_UNSAFE_DEFAULT_URLS_ON_DATASET = useSelector<any, boolean>(\n    state =>\n      state.common?.conf?.PREVENT_UNSAFE_DEFAULT_URLS_ON_DATASET || false,\n  );\n\n  const openDatasetImportModal = () => {\n    showImportModal(true);\n  };\n\n  const closeDatasetImportModal = () => {\n    showImportModal(false);\n  };\n\n  const handleDatasetImport = () => {\n    showImportModal(false);\n    refreshData();\n    addSuccessToast(t('Dataset imported'));\n  };\n\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canCreate = hasPerm('can_write');\n  const canDuplicate = hasPerm('can_duplicate');\n  const canExport = hasPerm('can_export');\n\n  const initialSort = SORT_BY;\n\n  const openDatasetEditModal = useCallback(\n    ({ id }: Dataset) => {\n      SupersetClient.get({\n        endpoint: `/api/v1/dataset/${id}`,\n      })\n        .then(({ json = {} }) => {\n          const addCertificationFields = json.result.columns.map(\n            (column: ColumnObject) => {\n              const {\n                certification: { details = '', certified_by = '' } = {},\n              } = JSON.parse(column.extra || '{}') || {};\n              return {\n                ...column,\n                certification_details: details || '',\n                certified_by: certified_by || '',\n                is_certified: details || certified_by,\n              };\n            },\n          );\n          // eslint-disable-next-line no-param-reassign\n          json.result.columns = [...addCertificationFields];\n          setDatasetCurrentlyEditing(json.result);\n        })\n        .catch(() => {\n          addDangerToast(\n            t('An error occurred while fetching dataset related data'),\n          );\n        });\n    },\n    [addDangerToast],\n  );\n\n  const openDatasetDeleteModal = (dataset: Dataset) =>\n    SupersetClient.get({\n      endpoint: `/api/v1/dataset/${dataset.id}/related_objects`,\n    })\n      .then(({ json = {} }) => {\n        setDatasetCurrentlyDeleting({\n          ...dataset,\n          charts: json.charts,\n          dashboards: json.dashboards,\n        });\n      })\n      .catch(\n        createErrorHandler(errMsg =>\n          t(\n            'An error occurred while fetching dataset related data: %s',\n            errMsg,\n          ),\n        ),\n      );\n\n  const openDatasetDuplicateModal = (dataset: VirtualDataset) => {\n    setDatasetCurrentlyDuplicating(dataset);\n  };\n\n  const handleBulkDatasetExport = (datasetsToExport: Dataset[]) => {\n    const ids = datasetsToExport.map(({ id }) => id);\n    handleResourceExport('dataset', ids, () => {\n      setPreparingExport(false);\n    });\n    setPreparingExport(true);\n  };\n\n  const columns = useMemo(\n    () => [\n      {\n        Cell: ({\n          row: {\n            original: { kind },\n          },\n        }: any) => null,\n        accessor: 'kind_icon',\n        disableSortBy: true,\n        size: 'xs',\n        id: 'id',\n      },\n      {\n        Cell: ({\n          row: {\n            original: {\n              extra,\n              table_name: datasetTitle,\n              description,\n              explore_url: exploreURL,\n            },\n          },\n        }: any) => {\n          let titleLink: JSX.Element;\n          if (PREVENT_UNSAFE_DEFAULT_URLS_ON_DATASET) {\n            titleLink = (\n              <Link data-test=\"internal-link\" to={exploreURL}>\n                {datasetTitle}\n              </Link>\n            );\n          } else {\n            titleLink = (\n              // exploreUrl can be a link to Explore or an external link\n              // in the first case use SPA routing, else use HTML anchor\n              <GenericLink to={exploreURL}>{datasetTitle}</GenericLink>\n            );\n          }\n          try {\n            const parsedExtra = JSON.parse(extra);\n            return (\n              <FlexRowContainer>\n                {parsedExtra?.certification && (\n                  <CertifiedBadge\n                    certifiedBy={parsedExtra.certification.certified_by}\n                    details={parsedExtra.certification.details}\n                    size=\"l\"\n                  />\n                )}\n                {parsedExtra?.warning_markdown && (\n                  <WarningIconWithTooltip\n                    warningMarkdown={parsedExtra.warning_markdown}\n                    size=\"l\"\n                  />\n                )}\n                {titleLink}\n                {description && <InfoTooltip tooltip={description} />}\n              </FlexRowContainer>\n            );\n          } catch {\n            return titleLink;\n          }\n        },\n        Header: t('Name'),\n        accessor: 'table_name',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { kind },\n          },\n        }: any) => <DatasetTypeLabel datasetType={kind} />,\n        Header: t('Type'),\n        accessor: 'kind',\n        disableSortBy: true,\n        size: 'md',\n      },\n      {\n        Header: t('Database'),\n        accessor: 'database.database_name',\n        size: 'lg',\n      },\n      {\n        Header: t('Schema'),\n        accessor: 'schema',\n        size: 'lg',\n      },\n      {\n        accessor: 'database',\n        disableSortBy: true,\n        hidden: true,\n      },\n      {\n        Cell: ({\n          row: {\n            original: { owners = [] },\n          },\n        }: any) => <FacePile users={owners} />,\n        Header: t('Owners'),\n        id: 'owners',\n        disableSortBy: true,\n        size: 'lg',\n      },\n      {\n        Cell: ({\n          row: {\n            original: {\n              changed_on_delta_humanized: changedOn,\n              changed_by: changedBy,\n            },\n          },\n        }: any) => <ModifiedInfo date={changedOn} user={changedBy} />,\n        Header: t('Last modified'),\n        accessor: 'changed_on_delta_humanized',\n        size: 'xl',\n      },\n      {\n        accessor: 'sql',\n        hidden: true,\n        disableSortBy: true,\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          // Verify owner or isAdmin\n          const allowEdit =\n            original.owners.map((o: Owner) => o.id).includes(user.userId) ||\n            isUserAdmin(user);\n\n          const handleEdit = () => openDatasetEditModal(original);\n          const handleDelete = () => openDatasetDeleteModal(original);\n          const handleExport = () => handleBulkDatasetExport([original]);\n          const handleDuplicate = () => openDatasetDuplicateModal(original);\n          if (!canEdit && !canDelete && !canExport && !canDuplicate) {\n            return null;\n          }\n          return (\n            <Actions className=\"actions\">\n              {canDelete && (\n                <Tooltip\n                  id=\"delete-action-tooltip\"\n                  title={t('Delete')}\n                  placement=\"bottom\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className=\"action-button\"\n                    onClick={handleDelete}\n                  >\n                    <Icons.DeleteOutlined iconSize=\"l\" />\n                  </span>\n                </Tooltip>\n              )}\n              {canExport && (\n                <Tooltip\n                  id=\"export-action-tooltip\"\n                  title={t('Export')}\n                  placement=\"bottom\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className=\"action-button\"\n                    onClick={handleExport}\n                  >\n                    <Icons.UploadOutlined iconSize=\"l\" />\n                  </span>\n                </Tooltip>\n              )}\n              {canEdit && (\n                <Tooltip\n                  id=\"edit-action-tooltip\"\n                  title={\n                    allowEdit\n                      ? t('Edit')\n                      : t(\n                          'You must be a dataset owner in order to edit. Please reach out to a dataset owner to request modifications or edit access.',\n                        )\n                  }\n                  placement=\"bottomRight\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className={allowEdit ? 'action-button' : 'disabled'}\n                    onClick={allowEdit ? handleEdit : undefined}\n                  >\n                    <Icons.EditOutlined iconSize=\"l\" />\n                  </span>\n                </Tooltip>\n              )}\n              {canDuplicate && original.kind === 'virtual' && (\n                <Tooltip\n                  id=\"duplicate-action-tooltip\"\n                  title={t('Duplicate')}\n                  placement=\"bottom\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className=\"action-button\"\n                    onClick={handleDuplicate}\n                  >\n                    <Icons.CopyOutlined />\n                  </span>\n                </Tooltip>\n              )}\n            </Actions>\n          );\n        },\n        Header: t('Actions'),\n        id: 'actions',\n        hidden: !canEdit && !canDelete && !canDuplicate,\n        disableSortBy: true,\n      },\n      {\n        accessor: QueryObjectColumns.ChangedBy,\n        hidden: true,\n      },\n    ],\n    [canEdit, canDelete, canExport, openDatasetEditModal, canDuplicate, user],\n  );\n\n  const filterTypes: Filters = useMemo(\n    () => [\n      {\n        Header: t('Name'),\n        key: 'search',\n        id: 'table_name',\n        input: 'search',\n        operator: FilterOperator.Contains,\n      },\n      {\n        Header: t('Type'),\n        key: 'sql',\n        id: 'sql',\n        input: 'select',\n        operator: FilterOperator.DatasetIsNullOrEmpty,\n        unfilteredLabel: 'All',\n        selects: [\n          { label: t('Virtual'), value: false },\n          { label: t('Physical'), value: true },\n        ],\n      },\n      {\n        Header: t('Database'),\n        key: 'database',\n        id: 'database',\n        input: 'select',\n        operator: FilterOperator.RelationOneMany,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchRelated(\n          'dataset',\n          'database',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching datasets: %s', errMsg),\n          ),\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Schema'),\n        key: 'schema',\n        id: 'schema',\n        input: 'select',\n        operator: FilterOperator.Equals,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchDistinct(\n          'dataset',\n          'schema',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching schema values: %s', errMsg),\n          ),\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Owner'),\n        key: 'owner',\n        id: 'owners',\n        input: 'select',\n        operator: FilterOperator.RelationManyMany,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchRelated(\n          'dataset',\n          'owners',\n          createErrorHandler(errMsg =>\n            t(\n              'An error occurred while fetching dataset owner values: %s',\n              errMsg,\n            ),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Certified'),\n        key: 'certified',\n        id: 'id',\n        urlDisplay: 'certified',\n        input: 'select',\n        operator: FilterOperator.DatasetIsCertified,\n        unfilteredLabel: t('Any'),\n        selects: [\n          { label: t('Yes'), value: true },\n          { label: t('No'), value: false },\n        ],\n      },\n      {\n        Header: t('Modified by'),\n        key: 'changed_by',\n        id: 'changed_by',\n        input: 'select',\n        operator: FilterOperator.RelationOneMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'dataset',\n          'changed_by',\n          createErrorHandler(errMsg =>\n            t(\n              'An error occurred while fetching dataset datasource values: %s',\n              errMsg,\n            ),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n    ],\n    [user],\n  );\n\n  const menuData: SubMenuProps = {\n    activeChild: 'Datasets',\n    name: t('Datasets'),\n  };\n\n  const buttonArr: Array<ButtonProps> = [];\n\n  if (canDelete || canExport) {\n    buttonArr.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary',\n    });\n  }\n\n  if (canCreate) {\n    buttonArr.push({\n      name: (\n        <>\n          <Icons.PlusOutlined\n            iconColor={theme.colors.primary.light5}\n            iconSize=\"m\"\n            css={css`\n              vertical-align: text-top;\n            `}\n          />\n          {t('Dataset')}\n        </>\n      ),\n      onClick: () => {\n        history.push('/dataset/add/');\n      },\n      buttonStyle: 'primary',\n    });\n\n    buttonArr.push({\n      name: (\n        <Tooltip\n          id=\"import-tooltip\"\n          title={t('Import datasets')}\n          placement=\"bottomRight\"\n        >\n          <Icons.DownloadOutlined\n            iconColor={theme.colors.primary.dark1}\n            data-test=\"import-button\"\n          />\n        </Tooltip>\n      ),\n      buttonStyle: 'link',\n      onClick: openDatasetImportModal,\n    });\n  }\n\n  menuData.buttons = buttonArr;\n\n  const closeDatasetDeleteModal = () => {\n    setDatasetCurrentlyDeleting(null);\n  };\n\n  const closeDatasetEditModal = () => {\n    setDatasetCurrentlyEditing(null);\n  };\n\n  const closeDatasetDuplicateModal = () => {\n    setDatasetCurrentlyDuplicating(null);\n  };\n\n  const handleDatasetDelete = ({ id, table_name: tableName }: Dataset) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/dataset/${id}`,\n    }).then(\n      () => {\n        refreshData();\n        setDatasetCurrentlyDeleting(null);\n        addSuccessToast(t('Deleted: %s', tableName));\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t('There was an issue deleting %s: %s', tableName, errMsg),\n        ),\n      ),\n    );\n  };\n\n  const handleBulkDatasetDelete = (datasetsToDelete: Dataset[]) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/dataset/?q=${rison.encode(\n        datasetsToDelete.map(({ id }) => id),\n      )}`,\n    }).then(\n      ({ json = {} }) => {\n        refreshData();\n        addSuccessToast(json.message);\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t('There was an issue deleting the selected datasets: %s', errMsg),\n        ),\n      ),\n    );\n  };\n\n  const handleDatasetDuplicate = (newDatasetName: string) => {\n    if (datasetCurrentlyDuplicating === null) {\n      addDangerToast(t('There was an issue duplicating the dataset.'));\n    }\n\n    SupersetClient.post({\n      endpoint: `/api/v1/dataset/duplicate`,\n      jsonPayload: {\n        base_model_id: datasetCurrentlyDuplicating?.id,\n        table_name: newDatasetName,\n      },\n    }).then(\n      () => {\n        setDatasetCurrentlyDuplicating(null);\n        refreshData();\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t('There was an issue duplicating the selected datasets: %s', errMsg),\n        ),\n      ),\n    );\n  };\n\n  return (\n    <>\n      <SubMenu {...menuData} />\n      {datasetCurrentlyDeleting && (\n        <DeleteModal\n          description={\n            <>\n              <p>\n                {t('The dataset')}\n                <b> {datasetCurrentlyDeleting.table_name} </b>\n                {t(\n                  'is linked to %s charts that appear on %s dashboards. Are you sure you want to continue? Deleting the dataset will break those objects.',\n                  datasetCurrentlyDeleting.charts.count,\n                  datasetCurrentlyDeleting.dashboards.count,\n                )}\n              </p>\n              {datasetCurrentlyDeleting.dashboards.count >= 1 && (\n                <>\n                  <h4>{t('Affected Dashboards')}</h4>\n                  <ul>\n                    {datasetCurrentlyDeleting.dashboards.result\n                      .slice(0, 10)\n                      .map(\n                        (\n                          result: { id: Key | null | undefined; title: string },\n                          index: number,\n                        ) => (\n                          <li key={result.id}>\n                            <a\n                              href={`/superset/dashboard/${result.id}`}\n                              target=\"_atRiskItem\"\n                            >\n                              {result.title}\n                            </a>\n                          </li>\n                        ),\n                      )}\n                    {datasetCurrentlyDeleting.dashboards.result.length > 10 && (\n                      <li>\n                        {t(\n                          '... and %s others',\n                          datasetCurrentlyDeleting.dashboards.result.length -\n                            10,\n                        )}\n                      </li>\n                    )}\n                  </ul>\n                </>\n              )}\n              {datasetCurrentlyDeleting.charts.count >= 1 && (\n                <>\n                  <h4>{t('Affected Charts')}</h4>\n                  <ul>\n                    {datasetCurrentlyDeleting.charts.result.slice(0, 10).map(\n                      (\n                        result: {\n                          id: Key | null | undefined;\n                          slice_name: string;\n                        },\n                        index: number,\n                      ) => (\n                        <li key={result.id}>\n                          <a\n                            href={`/explore/?slice_id=${result.id}`}\n                            target=\"_atRiskItem\"\n                          >\n                            {result.slice_name}\n                          </a>\n                        </li>\n                      ),\n                    )}\n                    {datasetCurrentlyDeleting.charts.result.length > 10 && (\n                      <li>\n                        {t(\n                          '... and %s others',\n                          datasetCurrentlyDeleting.charts.result.length - 10,\n                        )}\n                      </li>\n                    )}\n                  </ul>\n                </>\n              )}\n              {DatasetDeleteRelatedExtension && (\n                <DatasetDeleteRelatedExtension\n                  dataset={datasetCurrentlyDeleting}\n                />\n              )}\n            </>\n          }\n          onConfirm={() => {\n            if (datasetCurrentlyDeleting) {\n              handleDatasetDelete(datasetCurrentlyDeleting);\n            }\n          }}\n          onHide={closeDatasetDeleteModal}\n          open\n          title={t('Delete Dataset?')}\n        />\n      )}\n      {datasetCurrentlyEditing && (\n        <DatasourceModal\n          datasource={datasetCurrentlyEditing}\n          onDatasourceSave={refreshData}\n          onHide={closeDatasetEditModal}\n          show\n        />\n      )}\n      <DuplicateDatasetModal\n        dataset={datasetCurrentlyDuplicating}\n        onHide={closeDatasetDuplicateModal}\n        onDuplicate={handleDatasetDuplicate}\n      />\n      <ConfirmStatusChange\n        title={t('Please confirm')}\n        description={t(\n          'Are you sure you want to delete the selected datasets?',\n        )}\n        onConfirm={handleBulkDatasetDelete}\n      >\n        {confirmDelete => {\n          const bulkActions: ListViewProps['bulkActions'] = [];\n          if (canDelete) {\n            bulkActions.push({\n              key: 'delete',\n              name: t('Delete'),\n              onSelect: confirmDelete,\n              type: 'danger',\n            });\n          }\n          if (canExport) {\n            bulkActions.push({\n              key: 'export',\n              name: t('Export'),\n              type: 'primary',\n              onSelect: handleBulkDatasetExport,\n            });\n          }\n          return (\n            <ListView<Dataset>\n              className=\"dataset-list-view\"\n              columns={columns}\n              data={datasets}\n              count={datasetCount}\n              pageSize={PAGE_SIZE}\n              fetchData={fetchData}\n              filters={filterTypes}\n              loading={loading}\n              initialSort={initialSort}\n              bulkActions={bulkActions}\n              bulkSelectEnabled={bulkSelectEnabled}\n              disableBulkSelect={toggleBulkSelect}\n              addDangerToast={addDangerToast}\n              addSuccessToast={addSuccessToast}\n              refreshData={refreshData}\n              renderBulkSelectCopy={selected => {\n                const { virtualCount, physicalCount } = selected.reduce(\n                  (acc, e) => {\n                    if (e.original.kind === 'physical') acc.physicalCount += 1;\n                    else if (e.original.kind === 'virtual') {\n                      acc.virtualCount += 1;\n                    }\n                    return acc;\n                  },\n                  { virtualCount: 0, physicalCount: 0 },\n                );\n\n                if (!selected.length) {\n                  return t('0 Selected');\n                }\n                if (virtualCount && !physicalCount) {\n                  return t(\n                    '%s Selected (Virtual)',\n                    selected.length,\n                    virtualCount,\n                  );\n                }\n                if (physicalCount && !virtualCount) {\n                  return t(\n                    '%s Selected (Physical)',\n                    selected.length,\n                    physicalCount,\n                  );\n                }\n\n                return t(\n                  '%s Selected (%s Physical, %s Virtual)',\n                  selected.length,\n                  physicalCount,\n                  virtualCount,\n                );\n              }}\n            />\n          );\n        }}\n      </ConfirmStatusChange>\n\n      <ImportModelsModal\n        resourceName=\"dataset\"\n        resourceLabel={t('dataset')}\n        passwordsNeededMessage={PASSWORDS_NEEDED_MESSAGE}\n        confirmOverwriteMessage={CONFIRM_OVERWRITE_MESSAGE}\n        addDangerToast={addDangerToast}\n        addSuccessToast={addSuccessToast}\n        onModelImport={handleDatasetImport}\n        show={importingDataset}\n        onHide={closeDatasetImportModal}\n        passwordFields={passwordFields}\n        setPasswordFields={setPasswordFields}\n        sshTunnelPasswordFields={sshTunnelPasswordFields}\n        setSSHTunnelPasswordFields={setSSHTunnelPasswordFields}\n        sshTunnelPrivateKeyFields={sshTunnelPrivateKeyFields}\n        setSSHTunnelPrivateKeyFields={setSSHTunnelPrivateKeyFields}\n        sshTunnelPrivateKeyPasswordFields={sshTunnelPrivateKeyPasswordFields}\n        setSSHTunnelPrivateKeyPasswordFields={\n          setSSHTunnelPrivateKeyPasswordFields\n        }\n      />\n      {preparingExport && <Loading />}\n    </>\n  );\n};\n\nexport default withToasts(DatasetList);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}