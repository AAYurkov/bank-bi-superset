{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useState } from 'react';\nimport { extendedDayjs } from 'src/utils/dates';\nimport { t, styled, css } from '@superset-ui/core';\nimport { Icons } from 'src/components/Icons';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst REFRESH_INTERVAL = 60000; // every minute\nextendedDayjs.updateLocale('en', {\n  calendar: {\n    lastDay: '[Yesterday at] LTS',\n    sameDay: '[Today at] LTS',\n    nextDay: '[Tomorrow at] LTS',\n    lastWeek: '[last] dddd [at] LTS',\n    nextWeek: 'dddd [at] LTS',\n    sameElse: 'L'\n  }\n});\nconst TextStyles = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\nconst RefreshIcon = styled(Icons.SyncOutlined)`\n  ${({ theme }) => `\n  width: auto;\n  height: ${theme.gridUnit * 5}px;\n  position: relative;\n  top: ${theme.gridUnit}px;\n  left: ${theme.gridUnit}px;\n  cursor: pointer;\n`};\n`;\nexport const LastUpdated = ({ updatedAt, update }) => {\n  const [timeSince, setTimeSince] = useState(extendedDayjs(updatedAt));\n  useEffect(() => {\n    setTimeSince(() => extendedDayjs(updatedAt));\n    // update UI every minute in case day changes\n    const interval = setInterval(() => {\n      setTimeSince(() => extendedDayjs(updatedAt));\n    }, REFRESH_INTERVAL);\n    return () => clearInterval(interval);\n  }, [updatedAt]);\n  return _jsxs(TextStyles, { children: [\n    t('Last Updated %s', timeSince.isValid() ? timeSince.calendar() : '--'),\n    update && _jsx(RefreshIcon, { iconSize: \"l\", css: css`\n            vertical-align: text-bottom;\n          `, onClick: update })] }\n  );\n};__signature__(LastUpdated, \"useState{[timeSince, setTimeSince](extendedDayjs(updatedAt))}\\nuseEffect{}\");const _default =\nLastUpdated;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(REFRESH_INTERVAL, \"REFRESH_INTERVAL\", \"/Users/aryurkov/superset/superset-frontend/src/components/LastUpdated/index.tsx\");reactHotLoader.register(TextStyles, \"TextStyles\", \"/Users/aryurkov/superset/superset-frontend/src/components/LastUpdated/index.tsx\");reactHotLoader.register(RefreshIcon, \"RefreshIcon\", \"/Users/aryurkov/superset/superset-frontend/src/components/LastUpdated/index.tsx\");reactHotLoader.register(LastUpdated, \"LastUpdated\", \"/Users/aryurkov/superset/superset-frontend/src/components/LastUpdated/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/components/LastUpdated/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useEffect","useState","extendedDayjs","t","styled","css","Icons","jsx","_jsx","jsxs","_jsxs","REFRESH_INTERVAL","updateLocale","calendar","lastDay","sameDay","nextDay","lastWeek","nextWeek","sameElse","TextStyles","span","theme","colors","grayscale","base","RefreshIcon","SyncOutlined","gridUnit","LastUpdated","updatedAt","update","timeSince","setTimeSince","interval","setInterval","clearInterval","children","isValid","iconSize","onClick","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/components/LastUpdated/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  useEffect,\n  useState,\n  FunctionComponent,\n  MouseEventHandler,\n} from 'react';\n\nimport { extendedDayjs } from 'src/utils/dates';\nimport { t, styled, css } from '@superset-ui/core';\nimport { Icons } from 'src/components/Icons';\nimport dayjs from 'dayjs';\n\nconst REFRESH_INTERVAL = 60000; // every minute\n\ninterface LastUpdatedProps {\n  updatedAt: string | number | Date | undefined;\n  update?: MouseEventHandler<HTMLSpanElement>;\n}\nextendedDayjs.updateLocale('en', {\n  calendar: {\n    lastDay: '[Yesterday at] LTS',\n    sameDay: '[Today at] LTS',\n    nextDay: '[Tomorrow at] LTS',\n    lastWeek: '[last] dddd [at] LTS',\n    nextWeek: 'dddd [at] LTS',\n    sameElse: 'L',\n  },\n});\n\nconst TextStyles = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst RefreshIcon = styled(Icons.SyncOutlined)`\n  ${({ theme }) => `\n  width: auto;\n  height: ${theme.gridUnit * 5}px;\n  position: relative;\n  top: ${theme.gridUnit}px;\n  left: ${theme.gridUnit}px;\n  cursor: pointer;\n`};\n`;\n\nexport const LastUpdated: FunctionComponent<LastUpdatedProps> = ({\n  updatedAt,\n  update,\n}) => {\n  const [timeSince, setTimeSince] = useState<dayjs.Dayjs>(\n    extendedDayjs(updatedAt),\n  );\n\n  useEffect(() => {\n    setTimeSince(() => extendedDayjs(updatedAt));\n\n    // update UI every minute in case day changes\n    const interval = setInterval(() => {\n      setTimeSince(() => extendedDayjs(updatedAt));\n    }, REFRESH_INTERVAL);\n\n    return () => clearInterval(interval);\n  }, [updatedAt]);\n\n  return (\n    <TextStyles>\n      {t('Last Updated %s', timeSince.isValid() ? timeSince.calendar() : '--')}\n      {update && (\n        <RefreshIcon\n          iconSize=\"l\"\n          css={css`\n            vertical-align: text-bottom;\n          `}\n          onClick={update}\n        />\n      )}\n    </TextStyles>\n  );\n};\n\nexport default LastUpdated;\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SACEA,SAAS,EACTC,QAAQ,QAGH,OAAO;AAEd,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,SAASC,CAAC,EAAEC,MAAM,EAAEC,GAAG,QAAQ,mBAAmB;AAClD,SAASC,KAAK,QAAQ,sBAAsB,CAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAG7C,MAAMC,gBAAgB,GAAG,KAAK,CAAC,CAAC;AAMhCT,aAAa,CAACU,YAAY,CAAC,IAAI,EAAE;EAC/BC,QAAQ,EAAE;IACRC,OAAO,EAAE,oBAAoB;IAC7BC,OAAO,EAAE,gBAAgB;IACzBC,OAAO,EAAE,mBAAmB;IAC5BC,QAAQ,EAAE,sBAAsB;IAChCC,QAAQ,EAAE,eAAe;IACzBC,QAAQ,EAAE;;CAEb,CAAC;AAEF,MAAMC,UAAU,GAAGhB,MAAM,CAACiB,IAAI;WACnB,CAAC,EAAEC,KAAK,EAAE,KAAKA,KAAK,CAACC,MAAM,CAACC,SAAS,CAACC,IAAI;CACpD;AAED,MAAMC,WAAW,GAAGtB,MAAM,CAACE,KAAK,CAACqB,YAAY,CAAC;IAC1C,CAAC,EAAEL,KAAK,EAAE,KAAK;;YAEPA,KAAK,CAACM,QAAQ,GAAG,CAAC;;SAErBN,KAAK,CAACM,QAAQ;UACbN,KAAK,CAACM,QAAQ;;CAEvB;CACA;AAED,OAAO,MAAMC,WAAW,GAAwCA,CAAC,EAC/DC,SAAS,EACTC,MAAM,EACP,KAAI;EACH,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGhC,QAAQ,CACxCC,aAAa,CAAC4B,SAAS,CAAC,CACzB;EAED9B,SAAS,CAAC,MAAK;IACbiC,YAAY,CAAC,MAAM/B,aAAa,CAAC4B,SAAS,CAAC,CAAC;IAE5C;IACA,MAAMI,QAAQ,GAAGC,WAAW,CAAC,MAAK;MAChCF,YAAY,CAAC,MAAM/B,aAAa,CAAC4B,SAAS,CAAC,CAAC;IAC9C,CAAC,EAAEnB,gBAAgB,CAAC;IAEpB,OAAO,MAAMyB,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,CAACJ,SAAS,CAAC,CAAC;EAEf,OACEpB,KAAA,CAACU,UAAU,IAAAiB,QAAA;IACRlC,CAAC,CAAC,iBAAiB,EAAE6B,SAAS,CAACM,OAAO,EAAE,GAAGN,SAAS,CAACnB,QAAQ,EAAE,GAAG,IAAI,CAAC;IACvEkB,MAAM,IACLvB,IAAA,CAACkB,WAAW,IACVa,QAAQ,EAAC,GAAG,EACZlC,GAAG,EAAEA,GAAG;;WAEN,EACFmC,OAAO,EAAET,MAAO,GAEnB;EACS,CAAC;AAEjB,CAAC,CAACU,aAAA,CAjCWZ,WAAW,sFAAAa,QAAA;AAmCTb,WAAW,CAA1B,eAAAa,QAAA,CAA2B,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAnErBpC,gBAAgB,yGAAAgC,cAAA,CAAAI,QAAA,CAiBhB3B,UAAU,mGAAAuB,cAAA,CAAAI,QAAA,CAIVrB,WAAW,oGAAAiB,cAAA,CAAAI,QAAA,CAWJlB,WAAW,oGAAAc,cAAA,CAAAI,QAAA,CAAAL,QAAA,wHAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}