{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\nimport rison from 'rison';\nimport { t, SupersetClient, styled, isFeatureEnabled, FeatureFlag, getClientErrorObject, ensureIsArray, useTheme, css } from '@superset-ui/core';\nimport { Icons } from 'src/components/Icons';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { fetchTags, OBJECT_TYPES } from 'src/features/tags/tags';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst FormItem = AntdForm.Item;\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;var _ref = process.env.NODE_ENV === \"production\" ? { name: \"1blj7km\", styles: \"margin-top:1em\" } : { name: \"1gtq0eh-PropertiesModal\", styles: \"margin-top:1em;label:PropertiesModal;/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL1Byb3BlcnRpZXNNb2RhbC9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBb1BpRSIsImZpbGUiOiIvVXNlcnMvYXJ5dXJrb3Yvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Qcm9wZXJ0aWVzTW9kYWwvaW5kZXgudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgdXNlTWVtbywgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTW9kYWwnO1xuaW1wb3J0IHsgSW5wdXQsIFRleHRBcmVhIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSW5wdXQnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IHsgQXN5bmNTZWxlY3QsIFJvdywgQ29sLCBBbnRkRm9ybSB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcbmltcG9ydCByaXNvbiBmcm9tICdyaXNvbic7XG5pbXBvcnQgeyB0LCBTdXBlcnNldENsaWVudCwgc3R5bGVkLCBpc0ZlYXR1cmVFbmFibGVkLCBGZWF0dXJlRmxhZywgZ2V0Q2xpZW50RXJyb3JPYmplY3QsIGVuc3VyZUlzQXJyYXksIHVzZVRoZW1lLCBjc3MsIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgSWNvbnMgfSBmcm9tICdzcmMvY29tcG9uZW50cy9JY29ucyc7XG5pbXBvcnQgd2l0aFRvYXN0cyBmcm9tICdzcmMvY29tcG9uZW50cy9NZXNzYWdlVG9hc3RzL3dpdGhUb2FzdHMnO1xuaW1wb3J0IHsgbG9hZFRhZ3MgfSBmcm9tICdzcmMvY29tcG9uZW50cy9UYWdzL3V0aWxzJztcbmltcG9ydCB7IGZldGNoVGFncywgT0JKRUNUX1RZUEVTIH0gZnJvbSAnc3JjL2ZlYXR1cmVzL3RhZ3MvdGFncyc7XG5jb25zdCBGb3JtSXRlbSA9IEFudGRGb3JtLkl0ZW07XG5jb25zdCBTdHlsZWRGb3JtSXRlbSA9IHN0eWxlZChBbnRkRm9ybS5JdGVtKSBgXG4gIG1hcmdpbi1ib3R0b206IDA7XG5gO1xuY29uc3QgU3R5bGVkSGVscEJsb2NrID0gc3R5bGVkLnNwYW4gYFxuICBtYXJnaW4tYm90dG9tOiAwO1xuYDtcbmZ1bmN0aW9uIFByb3BlcnRpZXNNb2RhbCh7IHNsaWNlLCBvbkhpZGUsIG9uU2F2ZSwgc2hvdywgYWRkU3VjY2Vzc1RvYXN0LCB9KSB7XG4gICAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuICAgIGNvbnN0IFtzdWJtaXR0aW5nLCBzZXRTdWJtaXR0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbZm9ybV0gPSBBbnRkRm9ybS51c2VGb3JtKCk7XG4gICAgLy8gdmFsdWVzIG9mIGZvcm0gaW5wdXRzXG4gICAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGUoc2xpY2Uuc2xpY2VfbmFtZSB8fCAnJyk7XG4gICAgY29uc3QgW3NlbGVjdGVkT3duZXJzLCBzZXRTZWxlY3RlZE93bmVyc10gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbdGFncywgc2V0VGFnc10gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgdGFnc0FzU2VsZWN0VmFsdWVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdFRhZ3MgPSB0YWdzLm1hcCgodGFnKSA9PiAoe1xuICAgICAgICAgICAgdmFsdWU6IHRhZy5pZCxcbiAgICAgICAgICAgIGxhYmVsOiB0YWcubmFtZSxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gc2VsZWN0VGFncztcbiAgICB9LCBbdGFncy5sZW5ndGhdKTtcbiAgICBmdW5jdGlvbiBzaG93RXJyb3IoeyBlcnJvciwgc3RhdHVzVGV4dCwgbWVzc2FnZSB9KSB7XG4gICAgICAgIGxldCBlcnJvclRleHQgPSBlcnJvciB8fCBzdGF0dXNUZXh0IHx8IHQoJ0FuIGVycm9yIGhhcyBvY2N1cnJlZCcpO1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gJ0ZvcmJpZGRlbicpIHtcbiAgICAgICAgICAgIGVycm9yVGV4dCA9IHQoJ1lvdSBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGVkaXQgdGhpcyBjaGFydCcpO1xuICAgICAgICB9XG4gICAgICAgIE1vZGFsLmVycm9yKHtcbiAgICAgICAgICAgIHRpdGxlOiB0KCdFcnJvcicpLFxuICAgICAgICAgICAgY29udGVudDogZXJyb3JUZXh0LFxuICAgICAgICAgICAgb2tCdXR0b25Qcm9wczogeyBkYW5nZXI6IHRydWUsIGNsYXNzTmFtZTogJ2J0bi1kYW5nZXInIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBmZXRjaENoYXJ0T3duZXJzID0gdXNlQ2FsbGJhY2soYXN5bmMgZnVuY3Rpb24gZmV0Y2hDaGFydE93bmVycygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvJHtzbGljZS5zbGljZV9pZH1gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjaGFydCA9IHJlc3BvbnNlLmpzb24ucmVzdWx0O1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRPd25lcnMoY2hhcnQ/Lm93bmVycz8ubWFwKChvd25lcikgPT4gKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogb3duZXIuaWQsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGAke293bmVyLmZpcnN0X25hbWV9ICR7b3duZXIubGFzdF9uYW1lfWAsXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChyZXNwb25zZSkge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50RXJyb3IgPSBhd2FpdCBnZXRDbGllbnRFcnJvck9iamVjdChyZXNwb25zZSk7XG4gICAgICAgICAgICBzaG93RXJyb3IoY2xpZW50RXJyb3IpO1xuICAgICAgICB9XG4gICAgfSwgW3NsaWNlLnNsaWNlX2lkXSk7XG4gICAgY29uc3QgbG9hZE9wdGlvbnMgPSB1c2VNZW1vKCgpID0+IChpbnB1dCA9ICcnLCBwYWdlLCBwYWdlU2l6ZSkgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeSA9IHJpc29uLmVuY29kZSh7XG4gICAgICAgICAgICBmaWx0ZXI6IGlucHV0LFxuICAgICAgICAgICAgcGFnZSxcbiAgICAgICAgICAgIHBhZ2Vfc2l6ZTogcGFnZVNpemUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgICAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC9yZWxhdGVkL293bmVycz9xPSR7cXVlcnl9YCxcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiAoe1xuICAgICAgICAgICAgZGF0YTogcmVzcG9uc2UuanNvbi5yZXN1bHRcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmV4dHJhLmFjdGl2ZSlcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLnRleHQsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB0b3RhbENvdW50OiByZXNwb25zZS5qc29uLmNvdW50LFxuICAgICAgICB9KSk7XG4gICAgfSwgW10pO1xuICAgIGNvbnN0IG9uU3VibWl0ID0gYXN5bmMgKHZhbHVlcykgPT4ge1xuICAgICAgICBzZXRTdWJtaXR0aW5nKHRydWUpO1xuICAgICAgICBjb25zdCB7IGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnksIGNlcnRpZmljYXRpb25fZGV0YWlsczogY2VydGlmaWNhdGlvbkRldGFpbHMsIGRlc2NyaXB0aW9uLCBjYWNoZV90aW1lb3V0OiBjYWNoZVRpbWVvdXQsIH0gPSB2YWx1ZXM7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICBzbGljZV9uYW1lOiBuYW1lIHx8IG51bGwsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfHwgbnVsbCxcbiAgICAgICAgICAgIGNhY2hlX3RpbWVvdXQ6IGNhY2hlVGltZW91dCB8fCBudWxsLFxuICAgICAgICAgICAgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeSB8fCBudWxsLFxuICAgICAgICAgICAgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBjZXJ0aWZpZWRCeSAmJiBjZXJ0aWZpY2F0aW9uRGV0YWlscyA/IGNlcnRpZmljYXRpb25EZXRhaWxzIDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNlbGVjdGVkT3duZXJzKSB7XG4gICAgICAgICAgICBwYXlsb2FkLm93bmVycyA9IHNlbGVjdGVkT3duZXJzLm1hcChvID0+IG8udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLlRhZ2dpbmdTeXN0ZW0pKSB7XG4gICAgICAgICAgICBwYXlsb2FkLnRhZ3MgPSB0YWdzLm1hcCh0YWcgPT4gdGFnLmlkKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgU3VwZXJzZXRDbGllbnQucHV0KHtcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvJHtzbGljZS5zbGljZV9pZH1gLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHJlZHV4IHN0YXRlXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkQ2hhcnQgPSB7XG4gICAgICAgICAgICAgICAgLi4ucGF5bG9hZCxcbiAgICAgICAgICAgICAgICAuLi5yZXMuanNvbi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgdGFncyxcbiAgICAgICAgICAgICAgICBpZDogc2xpY2Uuc2xpY2VfaWQsXG4gICAgICAgICAgICAgICAgb3duZXJzOiBzZWxlY3RlZE93bmVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvblNhdmUodXBkYXRlZENoYXJ0KTtcbiAgICAgICAgICAgIGFkZFN1Y2Nlc3NUb2FzdCh0KCdDaGFydCBwcm9wZXJ0aWVzIHVwZGF0ZWQnKSk7XG4gICAgICAgICAgICBvbkhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocmVzKSB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRFcnJvciA9IGF3YWl0IGdldENsaWVudEVycm9yT2JqZWN0KHJlcyk7XG4gICAgICAgICAgICBzaG93RXJyb3IoY2xpZW50RXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHNldFN1Ym1pdHRpbmcoZmFsc2UpO1xuICAgIH07XG4gICAgY29uc3Qgb3duZXJzTGFiZWwgPSB0KCdPd25lcnMnKTtcbiAgICAvLyBnZXQgdGhlIG93bmVycyBvZiB0aGlzIHNsaWNlXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZmV0Y2hDaGFydE93bmVycygpO1xuICAgIH0sIFtmZXRjaENoYXJ0T3duZXJzXSk7XG4gICAgLy8gdXBkYXRlIG5hbWUgYWZ0ZXIgaXQncyBjaGFuZ2VkIGluIGFub3RoZXIgbW9kYWxcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXROYW1lKHNsaWNlLnNsaWNlX25hbWUgfHwgJycpO1xuICAgIH0sIFtzbGljZS5zbGljZV9uYW1lXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLlRhZ2dpbmdTeXN0ZW0pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmV0Y2hUYWdzKHtcbiAgICAgICAgICAgICAgICBvYmplY3RUeXBlOiBPQkpFQ1RfVFlQRVMuQ0hBUlQsXG4gICAgICAgICAgICAgICAgb2JqZWN0SWQ6IHNsaWNlLnNsaWNlX2lkLFxuICAgICAgICAgICAgICAgIGluY2x1ZGVUeXBlczogZmFsc2UsXG4gICAgICAgICAgICB9LCAodGFncykgPT4gc2V0VGFncyh0YWdzKSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHNob3dFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNob3dFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9LCBbc2xpY2Uuc2xpY2VfaWRdKTtcbiAgICBjb25zdCBoYW5kbGVDaGFuZ2VUYWdzID0gKHRhZ3MpID0+IHtcbiAgICAgICAgY29uc3QgcGFyc2VkVGFncyA9IGVuc3VyZUlzQXJyYXkodGFncykubWFwKHIgPT4gKHtcbiAgICAgICAgICAgIGlkOiByLnZhbHVlLFxuICAgICAgICAgICAgbmFtZTogci5sYWJlbCxcbiAgICAgICAgfSkpO1xuICAgICAgICBzZXRUYWdzKHBhcnNlZFRhZ3MpO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlQ2xlYXJUYWdzID0gKCkgPT4ge1xuICAgICAgICBzZXRUYWdzKFtdKTtcbiAgICB9O1xuICAgIHJldHVybiAoPE1vZGFsIHNob3c9e3Nob3d9IG9uSGlkZT17b25IaWRlfSB0aXRsZT17PHNwYW4+XG4gICAgICAgICAgPEljb25zLkVkaXRPdXRsaW5lZCBjc3M9e2NzcyBgXG4gICAgICAgICAgICAgIG1hcmdpbjogYXV0byAke3RoZW1lLmdyaWRVbml0ICogMn1weCBhdXRvIDA7XG4gICAgICAgICAgICBgfSBkYXRhLXRlc3Q9XCJlZGl0LWFsdFwiLz5cbiAgICAgICAgICB7dCgnRWRpdCBDaGFydCBQcm9wZXJ0aWVzJyl9XG4gICAgICAgIDwvc3Bhbj59IGZvb3Rlcj17PD5cbiAgICAgICAgICA8QnV0dG9uIGRhdGEtdGVzdD1cInByb3BlcnRpZXMtbW9kYWwtY2FuY2VsLWJ1dHRvblwiIGh0bWxUeXBlPVwiYnV0dG9uXCIgYnV0dG9uU2l6ZT1cInNtYWxsXCIgb25DbGljaz17b25IaWRlfSBjdGE+XG4gICAgICAgICAgICB7dCgnQ2FuY2VsJyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPEJ1dHRvbiBkYXRhLXRlc3Q9XCJwcm9wZXJ0aWVzLW1vZGFsLXNhdmUtYnV0dG9uXCIgaHRtbFR5cGU9XCJzdWJtaXRcIiBidXR0b25TaXplPVwic21hbGxcIiBidXR0b25TdHlsZT1cInByaW1hcnlcIiBvbkNsaWNrPXtmb3JtLnN1Ym1pdH0gZGlzYWJsZWQ9e3N1Ym1pdHRpbmcgfHwgIW5hbWUgfHwgc2xpY2UuaXNfbWFuYWdlZF9leHRlcm5hbGx5fSB0b29sdGlwPXtzbGljZS5pc19tYW5hZ2VkX2V4dGVybmFsbHlcbiAgICAgICAgICAgICAgICA/IHQoXCJUaGlzIGNoYXJ0IGlzIG1hbmFnZWQgZXh0ZXJuYWxseSwgYW5kIGNhbid0IGJlIGVkaXRlZCBpbiBTdXBlcnNldFwiKVxuICAgICAgICAgICAgICAgIDogJyd9IGN0YT5cbiAgICAgICAgICAgIHt0KCdTYXZlJyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvPn0gcmVzcG9uc2l2ZSB3cmFwUHJvcHM9e3sgJ2RhdGEtdGVzdCc6ICdwcm9wZXJ0aWVzLWVkaXQtbW9kYWwnIH19PlxuICAgICAgPEFudGRGb3JtIGZvcm09e2Zvcm19IG9uRmluaXNoPXtvblN1Ym1pdH0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXt7XG4gICAgICAgICAgICBuYW1lOiBzbGljZS5zbGljZV9uYW1lIHx8ICcnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHNsaWNlLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgICAgY2FjaGVfdGltZW91dDogc2xpY2UuY2FjaGVfdGltZW91dCAhPSBudWxsID8gc2xpY2UuY2FjaGVfdGltZW91dCA6ICcnLFxuICAgICAgICAgICAgY2VydGlmaWVkX2J5OiBzbGljZS5jZXJ0aWZpZWRfYnkgfHwgJycsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IHNsaWNlLmNlcnRpZmllZF9ieSAmJiBzbGljZS5jZXJ0aWZpY2F0aW9uX2RldGFpbHNcbiAgICAgICAgICAgICAgICA/IHNsaWNlLmNlcnRpZmljYXRpb25fZGV0YWlsc1xuICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgIH19PlxuICAgICAgICA8Um93IGd1dHRlcj17MTZ9PlxuICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgPGgzPnt0KCdCYXNpYyBpbmZvcm1hdGlvbicpfTwvaDM+XG4gICAgICAgICAgICA8Rm9ybUl0ZW0gbGFiZWw9e3QoJ05hbWUnKX0gcmVxdWlyZWQ+XG4gICAgICAgICAgICAgIDxJbnB1dCBhcmlhLWxhYmVsPXt0KCdOYW1lJyl9IG5hbWU9XCJuYW1lXCIgZGF0YS10ZXN0PVwicHJvcGVydGllcy1tb2RhbC1uYW1lLWlucHV0XCIgdHlwZT1cInRleHRcIiB2YWx1ZT17bmFtZX0gb25DaGFuZ2U9eyhldmVudCkgPT4gc2V0TmFtZShldmVudC50YXJnZXQudmFsdWUgPz8gJycpfS8+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkRm9ybUl0ZW0gbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9IG5hbWU9XCJkZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgIDxUZXh0QXJlYSByb3dzPXszfSBzdHlsZT17eyBtYXhXaWR0aDogJzEwMCUnIH19Lz5cbiAgICAgICAgICAgICAgPC9TdHlsZWRGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAge3QoJ1RoZSBkZXNjcmlwdGlvbiBjYW4gYmUgZGlzcGxheWVkIGFzIHdpZGdldCBoZWFkZXJzIGluIHRoZSBkYXNoYm9hcmQgdmlldy4gU3VwcG9ydHMgbWFya2Rvd24uJyl9XG4gICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIDxoMz57dCgnQ2VydGlmaWNhdGlvbicpfTwvaDM+XG4gICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRGb3JtSXRlbSBsYWJlbD17dCgnQ2VydGlmaWVkIGJ5Jyl9IG5hbWU9XCJjZXJ0aWZpZWRfYnlcIj5cbiAgICAgICAgICAgICAgICA8SW5wdXQgYXJpYS1sYWJlbD17dCgnQ2VydGlmaWVkIGJ5Jyl9Lz5cbiAgICAgICAgICAgICAgPC9TdHlsZWRGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAge3QoJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBjaGFydC4nKX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkRm9ybUl0ZW0gbGFiZWw9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfSBuYW1lPVwiY2VydGlmaWNhdGlvbl9kZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgPElucHV0IGFyaWEtbGFiZWw9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfS8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkRm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KCdBbnkgYWRkaXRpb25hbCBkZXRhaWwgdG8gc2hvdyBpbiB0aGUgY2VydGlmaWNhdGlvbiB0b29sdGlwLicpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgPC9Db2w+XG4gICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICA8aDM+e3QoJ0NvbmZpZ3VyYXRpb24nKX08L2gzPlxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkRm9ybUl0ZW0gbGFiZWw9e3QoJ0NhY2hlIHRpbWVvdXQnKX0gbmFtZT1cImNhY2hlX3RpbWVvdXRcIj5cbiAgICAgICAgICAgICAgICA8SW5wdXQgYXJpYS1sYWJlbD1cIkNhY2hlIHRpbWVvdXRcIi8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkRm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KFwiRHVyYXRpb24gKGluIHNlY29uZHMpIG9mIHRoZSBjYWNoaW5nIHRpbWVvdXQgZm9yIHRoaXMgY2hhcnQuIFNldCB0byAtMSB0byBieXBhc3MgdGhlIGNhY2hlLiBOb3RlIHRoaXMgZGVmYXVsdHMgdG8gdGhlIGRhdGFzZXQncyB0aW1lb3V0IGlmIHVuZGVmaW5lZC5cIil9XG4gICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIDxoMyBzdHlsZT17eyBtYXJnaW5Ub3A6ICcxZW0nIH19Pnt0KCdBY2Nlc3MnKX08L2gzPlxuICAgICAgICAgICAgPEZvcm1JdGVtIGxhYmVsPXtvd25lcnNMYWJlbH0+XG4gICAgICAgICAgICAgIDxBc3luY1NlbGVjdCBhcmlhTGFiZWw9e293bmVyc0xhYmVsfSBtb2RlPVwibXVsdGlwbGVcIiBuYW1lPVwib3duZXJzXCIgdmFsdWU9e3NlbGVjdGVkT3duZXJzIHx8IFtdfSBvbkNoYW5nZT17c2V0U2VsZWN0ZWRPd25lcnN9IG9wdGlvbnM9e2xvYWRPcHRpb25zfSBkaXNhYmxlZD17IXNlbGVjdGVkT3duZXJzfSBhbGxvd0NsZWFyLz5cbiAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAge3QoJ0EgbGlzdCBvZiB1c2VycyB3aG8gY2FuIGFsdGVyIHRoZSBjaGFydC4gU2VhcmNoYWJsZSBieSBuYW1lIG9yIHVzZXJuYW1lLicpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICB7aXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5UYWdnaW5nU3lzdGVtKSAmJiAoPGgzIGNzcz17eyBtYXJnaW5Ub3A6ICcxZW0nIH19Pnt0KCdUYWdzJyl9PC9oMz4pfVxuICAgICAgICAgICAge2lzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuVGFnZ2luZ1N5c3RlbSkgJiYgKDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICA8QXN5bmNTZWxlY3QgYXJpYUxhYmVsPVwiVGFnc1wiIG1vZGU9XCJtdWx0aXBsZVwiIHZhbHVlPXt0YWdzQXNTZWxlY3RWYWx1ZXN9IG9wdGlvbnM9e2xvYWRUYWdzfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlVGFnc30gb25DbGVhcj17aGFuZGxlQ2xlYXJUYWdzfSBhbGxvd0NsZWFyLz5cbiAgICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgIHt0KCdBIGxpc3Qgb2YgdGFncyB0aGF0IGhhdmUgYmVlbiBhcHBsaWVkIHRvIHRoaXMgY2hhcnQuJyl9XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICAgIDwvRm9ybUl0ZW0+KX1cbiAgICAgICAgICA8L0NvbD5cbiAgICAgICAgPC9Sb3c+XG4gICAgICA8L0FudGRGb3JtPlxuICAgIDwvTW9kYWw+KTtcbn1cbmV4cG9ydCBkZWZhdWx0IHdpdGhUb2FzdHMoUHJvcGVydGllc01vZGFsKTtcbiJdfQ== */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nfunction PropertiesModal({ slice, onHide, onSave, show, addSuccessToast }) {\n  const theme = useTheme();\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState(null);\n  const [tags, setTags] = useState([]);\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map((tag) => ({\n      value: tag.id,\n      label: tag.name\n    }));\n    return selectTags;\n  }, [tags.length]);\n  function showError({ error, statusText, message }) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' }\n    });\n  }\n  const fetchChartOwners = useCallback(async function fetchChartOwners() {\n    try {var _chart$owners;\n      const response = await SupersetClient.get({\n        endpoint: `/api/v1/chart/${slice.slice_id}`\n      });\n      const chart = response.json.result;\n      setSelectedOwners(chart == null ? void 0 : (_chart$owners = chart.owners) == null ? void 0 : _chart$owners.map((owner) => ({\n        value: owner.id,\n        label: `${owner.first_name} ${owner.last_name}`\n      })));\n    }\n    catch (response) {\n      const clientError = await getClientErrorObject(response);\n      showError(clientError);\n    }\n  }, [slice.slice_id]);\n  const loadOptions = useMemo(() => (input = '', page, pageSize) => {\n    const query = rison.encode({\n      filter: input,\n      page,\n      page_size: pageSize\n    });\n    return SupersetClient.get({\n      endpoint: `/api/v1/chart/related/owners?q=${query}`\n    }).then((response) => ({\n      data: response.json.result.\n      filter((item) => item.extra.active).\n      map((item) => ({\n        value: item.value,\n        label: item.text\n      })),\n      totalCount: response.json.count\n    }));\n  }, []);\n  const onSubmit = async (values) => {\n    setSubmitting(true);\n    const { certified_by: certifiedBy, certification_details: certificationDetails, description, cache_timeout: cacheTimeout } = values;\n    const payload = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details: certifiedBy && certificationDetails ? certificationDetails : null\n    };\n    if (selectedOwners) {\n      payload.owners = selectedOwners.map((o) => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TaggingSystem)) {\n      payload.tags = tags.map((tag) => tag.id);\n    }\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    }\n    catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n  const ownersLabel = t('Owners');\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TaggingSystem))\n    return;\n    try {\n      fetchTags({\n        objectType: OBJECT_TYPES.CHART,\n        objectId: slice.slice_id,\n        includeTypes: false\n      }, (tags) => setTags(tags), (error) => {\n        showError(error);\n      });\n    }\n    catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n  const handleChangeTags = (tags) => {\n    const parsedTags = ensureIsArray(tags).map((r) => ({\n      id: r.value,\n      name: r.label\n    }));\n    setTags(parsedTags);\n  };\n  const handleClearTags = () => {\n    setTags([]);\n  };\n  return _jsx(Modal, { show: show, onHide: onHide, title: _jsxs(\"span\", { children: [\n      _jsx(Icons.EditOutlined, { css: css`\n              margin: auto ${theme.gridUnit * 2}px auto 0;\n            `, \"data-test\": \"edit-alt\" }),\n      t('Edit Chart Properties')] }\n    ), footer: _jsxs(_Fragment, { children: [\n      _jsx(Button, { \"data-test\": \"properties-modal-cancel-button\", htmlType: \"button\", buttonSize: \"small\", onClick: onHide, cta: true, children:\n        t('Cancel') }\n      ),\n      _jsx(Button, { \"data-test\": \"properties-modal-save-button\", htmlType: \"submit\", buttonSize: \"small\", buttonStyle: \"primary\", onClick: form.submit, disabled: submitting || !name || slice.is_managed_externally, tooltip: slice.is_managed_externally ?\n        t(\"This chart is managed externally, and can't be edited in Superset\") :\n        '', cta: true, children:\n        t('Save') }\n      )] }\n    ), responsive: true, wrapProps: { 'data-test': 'properties-edit-modal' }, children:\n    _jsx(AntdForm, { form: form, onFinish: onSubmit, layout: \"vertical\", initialValues: {\n        name: slice.slice_name || '',\n        description: slice.description || '',\n        cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n        certified_by: slice.certified_by || '',\n        certification_details: slice.certified_by && slice.certification_details ?\n        slice.certification_details :\n        ''\n      }, children:\n      _jsxs(Row, { gutter: 16, children: [\n        _jsxs(Col, { xs: 24, md: 12, children: [\n          _jsx(\"h3\", { children: t('Basic information') }),\n          _jsx(FormItem, { label: t('Name'), required: true, children:\n            _jsx(Input, { \"aria-label\": t('Name'), name: \"name\", \"data-test\": \"properties-modal-name-input\", type: \"text\", value: name, onChange: (event) => {var _event$target$value;return setName((_event$target$value = event.target.value) != null ? _event$target$value : '');} }) }\n          ),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Description'), name: \"description\", children:\n              _jsx(TextArea, { rows: 3, style: { maxWidth: '100%' } }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('The description can be displayed as widget headers in the dashboard view. Supports markdown.') }\n            )] }\n          ),\n          _jsx(\"h3\", { children: t('Certification') }),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Certified by'), name: \"certified_by\", children:\n              _jsx(Input, { \"aria-label\": t('Certified by') }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('Person or group that has certified this chart.') }\n            )] }\n          ),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Certification details'), name: \"certification_details\", children:\n              _jsx(Input, { \"aria-label\": t('Certification details') }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('Any additional detail to show in the certification tooltip.') }\n            )] }\n          )] }\n        ),\n        _jsxs(Col, { xs: 24, md: 12, children: [\n          _jsx(\"h3\", { children: t('Configuration') }),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Cache timeout'), name: \"cache_timeout\", children:\n              _jsx(Input, { \"aria-label\": \"Cache timeout\" }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t(\"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\") }\n            )] }\n          ),\n          _jsx(\"h3\", { style: { marginTop: '1em' }, children: t('Access') }),\n          _jsxs(FormItem, { label: ownersLabel, children: [\n            _jsx(AsyncSelect, { ariaLabel: ownersLabel, mode: \"multiple\", name: \"owners\", value: selectedOwners || [], onChange: setSelectedOwners, options: loadOptions, disabled: !selectedOwners, allowClear: true }),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('A list of users who can alter the chart. Searchable by name or username.') }\n            )] }\n          ),\n          isFeatureEnabled(FeatureFlag.TaggingSystem) && _jsx(\"h3\", { css: _ref, children: t('Tags') }),\n          isFeatureEnabled(FeatureFlag.TaggingSystem) && _jsxs(FormItem, { children: [\n            _jsx(AsyncSelect, { ariaLabel: \"Tags\", mode: \"multiple\", value: tagsAsSelectValues, options: loadTags, onChange: handleChangeTags, onClear: handleClearTags, allowClear: true }),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('A list of tags that have been applied to this chart.') }\n            )] }\n          )] }\n        )] }\n      ) }\n    ) }\n  );\n}__signature__(PropertiesModal, \"useTheme{theme}\\nuseState{[submitting, setSubmitting](false)}\\nuseForm{[form]}\\nuseState{[name, setName](slice.slice_name || '')}\\nuseState{[selectedOwners, setSelectedOwners](null)}\\nuseState{[tags, setTags]([])}\\nuseMemo{tagsAsSelectValues}\\nuseCallback{fetchChartOwners}\\nuseMemo{loadOptions}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\", () => [useTheme]);const _default =\nwithToasts(PropertiesModal);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FormItem, \"FormItem\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(StyledFormItem, \"StyledFormItem\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(StyledHelpBlock, \"StyledHelpBlock\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(PropertiesModal, \"PropertiesModal\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useMemo","useState","useCallback","useEffect","Modal","Input","TextArea","Button","AsyncSelect","Row","Col","AntdForm","rison","t","SupersetClient","styled","isFeatureEnabled","FeatureFlag","getClientErrorObject","ensureIsArray","useTheme","css","Icons","withToasts","loadTags","fetchTags","OBJECT_TYPES","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FormItem","Item","StyledFormItem","StyledHelpBlock","span","_ref","process","env","NODE_ENV","name","styles","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","PropertiesModal","slice","onHide","onSave","show","addSuccessToast","theme","submitting","setSubmitting","form","useForm","setName","slice_name","selectedOwners","setSelectedOwners","tags","setTags","tagsAsSelectValues","selectTags","map","tag","value","id","label","length","showError","error","statusText","message","errorText","title","content","okButtonProps","danger","className","fetchChartOwners","_chart$owners","response","get","endpoint","slice_id","chart","json","result","owners","owner","first_name","last_name","clientError","loadOptions","input","page","pageSize","query","encode","filter","page_size","then","data","item","extra","active","text","totalCount","count","onSubmit","values","certified_by","certifiedBy","certification_details","certificationDetails","description","cache_timeout","cacheTimeout","payload","o","TaggingSystem","res","put","headers","body","JSON","stringify","updatedChart","ownersLabel","objectType","CHART","objectId","includeTypes","handleChangeTags","parsedTags","r","handleClearTags","children","EditOutlined","gridUnit","footer","htmlType","buttonSize","onClick","cta","buttonStyle","submit","disabled","is_managed_externally","tooltip","responsive","wrapProps","onFinish","layout","initialValues","gutter","xs","md","required","type","onChange","event","_event$target$value","target","rows","style","maxWidth","marginTop","ariaLabel","mode","options","allowClear","onClear","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ChangeEvent, useMemo, useState, useCallback, useEffect } from 'react';\n\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\n// eslint-disable-next-line no-restricted-imports\nimport { SelectValue } from 'antd/lib/select'; // TODO: Remove antd\nimport rison from 'rison';\nimport {\n  t,\n  SupersetClient,\n  styled,\n  isFeatureEnabled,\n  FeatureFlag,\n  getClientErrorObject,\n  ensureIsArray,\n  useTheme,\n  css,\n} from '@superset-ui/core';\nimport { Icons } from 'src/components/Icons';\nimport Chart, { Slice } from 'src/types/Chart';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { fetchTags, OBJECT_TYPES } from 'src/features/tags/tags';\nimport TagType from 'src/types/TagType';\n\nexport type PropertiesModalProps = {\n  slice: Slice;\n  show: boolean;\n  onHide: () => void;\n  onSave: (chart: Chart) => void;\n  permissionsError?: string;\n  existingOwners?: SelectValue;\n  addSuccessToast: (msg: string) => void;\n};\n\nconst FormItem = AntdForm.Item;\n\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\n\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;\n\nfunction PropertiesModal({\n  slice,\n  onHide,\n  onSave,\n  show,\n  addSuccessToast,\n}: PropertiesModalProps) {\n  const theme = useTheme();\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState<SelectValue | null>(\n    null,\n  );\n\n  const [tags, setTags] = useState<TagType[]>([]);\n\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map((tag: { id: number; name: string }) => ({\n      value: tag.id,\n      label: tag.name,\n    }));\n    return selectTags;\n  }, [tags.length]);\n\n  function showError({ error, statusText, message }: any) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' },\n    });\n  }\n\n  const fetchChartOwners = useCallback(\n    async function fetchChartOwners() {\n      try {\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/chart/${slice.slice_id}`,\n        });\n        const chart = response.json.result;\n        setSelectedOwners(\n          chart?.owners?.map((owner: any) => ({\n            value: owner.id,\n            label: `${owner.first_name} ${owner.last_name}`,\n          })),\n        );\n      } catch (response) {\n        const clientError = await getClientErrorObject(response);\n        showError(clientError);\n      }\n    },\n    [slice.slice_id],\n  );\n\n  const loadOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/chart/related/owners?q=${query}`,\n        }).then(response => ({\n          data: response.json.result\n            .filter((item: { extra: { active: boolean } }) => item.extra.active)\n            .map((item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            })),\n          totalCount: response.json.count,\n        }));\n      },\n    [],\n  );\n\n  const onSubmit = async (values: {\n    certified_by?: string;\n    certification_details?: string;\n    description?: string;\n    cache_timeout?: number;\n  }) => {\n    setSubmitting(true);\n    const {\n      certified_by: certifiedBy,\n      certification_details: certificationDetails,\n      description,\n      cache_timeout: cacheTimeout,\n    } = values;\n    const payload: { [key: string]: any } = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details:\n        certifiedBy && certificationDetails ? certificationDetails : null,\n    };\n    if (selectedOwners) {\n      payload.owners = (\n        selectedOwners as {\n          value: number;\n          label: string;\n        }[]\n      ).map(o => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TaggingSystem)) {\n      payload.tags = tags.map(tag => tag.id);\n    }\n\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners,\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    } catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n\n  const ownersLabel = t('Owners');\n\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TaggingSystem)) return;\n    try {\n      fetchTags(\n        {\n          objectType: OBJECT_TYPES.CHART,\n          objectId: slice.slice_id,\n          includeTypes: false,\n        },\n        (tags: TagType[]) => setTags(tags),\n        error => {\n          showError(error);\n        },\n      );\n    } catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n\n  const handleChangeTags = (tags: { label: string; value: number }[]) => {\n    const parsedTags: TagType[] = ensureIsArray(tags).map(r => ({\n      id: r.value,\n      name: r.label,\n    }));\n    setTags(parsedTags);\n  };\n\n  const handleClearTags = () => {\n    setTags([]);\n  };\n\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      title={\n        <span>\n          <Icons.EditOutlined\n            css={css`\n              margin: auto ${theme.gridUnit * 2}px auto 0;\n            `}\n            data-test=\"edit-alt\"\n          />\n          {t('Edit Chart Properties')}\n        </span>\n      }\n      footer={\n        <>\n          <Button\n            data-test=\"properties-modal-cancel-button\"\n            htmlType=\"button\"\n            buttonSize=\"small\"\n            onClick={onHide}\n            cta\n          >\n            {t('Cancel')}\n          </Button>\n          <Button\n            data-test=\"properties-modal-save-button\"\n            htmlType=\"submit\"\n            buttonSize=\"small\"\n            buttonStyle=\"primary\"\n            onClick={form.submit}\n            disabled={submitting || !name || slice.is_managed_externally}\n            tooltip={\n              slice.is_managed_externally\n                ? t(\n                    \"This chart is managed externally, and can't be edited in Superset\",\n                  )\n                : ''\n            }\n            cta\n          >\n            {t('Save')}\n          </Button>\n        </>\n      }\n      responsive\n      wrapProps={{ 'data-test': 'properties-edit-modal' }}\n    >\n      <AntdForm\n        form={form}\n        onFinish={onSubmit}\n        layout=\"vertical\"\n        initialValues={{\n          name: slice.slice_name || '',\n          description: slice.description || '',\n          cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n          certified_by: slice.certified_by || '',\n          certification_details:\n            slice.certified_by && slice.certification_details\n              ? slice.certification_details\n              : '',\n        }}\n      >\n        <Row gutter={16}>\n          <Col xs={24} md={12}>\n            <h3>{t('Basic information')}</h3>\n            <FormItem label={t('Name')} required>\n              <Input\n                aria-label={t('Name')}\n                name=\"name\"\n                data-test=\"properties-modal-name-input\"\n                type=\"text\"\n                value={name}\n                onChange={(event: ChangeEvent<HTMLInputElement>) =>\n                  setName(event.target.value ?? '')\n                }\n              />\n            </FormItem>\n            <FormItem>\n              <StyledFormItem label={t('Description')} name=\"description\">\n                <TextArea rows={3} style={{ maxWidth: '100%' }} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'The description can be displayed as widget headers in the dashboard view. Supports markdown.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3>{t('Certification')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Certified by')} name=\"certified_by\">\n                <Input aria-label={t('Certified by')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t('Person or group that has certified this chart.')}\n              </StyledHelpBlock>\n            </FormItem>\n            <FormItem>\n              <StyledFormItem\n                label={t('Certification details')}\n                name=\"certification_details\"\n              >\n                <Input aria-label={t('Certification details')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'Any additional detail to show in the certification tooltip.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n          </Col>\n          <Col xs={24} md={12}>\n            <h3>{t('Configuration')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Cache timeout')} name=\"cache_timeout\">\n                <Input aria-label=\"Cache timeout\" />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  \"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\",\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3 style={{ marginTop: '1em' }}>{t('Access')}</h3>\n            <FormItem label={ownersLabel}>\n              <AsyncSelect\n                ariaLabel={ownersLabel}\n                mode=\"multiple\"\n                name=\"owners\"\n                value={selectedOwners || []}\n                onChange={setSelectedOwners}\n                options={loadOptions}\n                disabled={!selectedOwners}\n                allowClear\n              />\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'A list of users who can alter the chart. Searchable by name or username.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            {isFeatureEnabled(FeatureFlag.TaggingSystem) && (\n              <h3 css={{ marginTop: '1em' }}>{t('Tags')}</h3>\n            )}\n            {isFeatureEnabled(FeatureFlag.TaggingSystem) && (\n              <FormItem>\n                <AsyncSelect\n                  ariaLabel=\"Tags\"\n                  mode=\"multiple\"\n                  value={tagsAsSelectValues}\n                  options={loadTags}\n                  onChange={handleChangeTags}\n                  onClear={handleClearTags}\n                  allowClear\n                />\n                <StyledHelpBlock className=\"help-block\">\n                  {t('A list of tags that have been applied to this chart.')}\n                </StyledHelpBlock>\n              </FormItem>\n            )}\n          </Col>\n        </Row>\n      </AntdForm>\n    </Modal>\n  );\n}\n\nexport default withToasts(PropertiesModal);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}