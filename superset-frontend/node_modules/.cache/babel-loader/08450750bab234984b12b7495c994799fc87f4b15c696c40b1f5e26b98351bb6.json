{"ast":null,"code":"import { css as _css } from \"@emotion/react\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport rison from 'rison';\nimport { PureComponent, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Radio } from 'src/components/Radio';\nimport Card from 'src/components/Card';\nimport Alert from 'src/components/Alert';\nimport Badge from 'src/components/Badge';\nimport {\n  css,\n  isFeatureEnabled,\n  getCurrencySymbol,\n  ensureIsArray,\n  FeatureFlag,\n  styled,\n  SupersetClient,\n  t,\n  withTheme,\n  getClientErrorObject } from\n'@superset-ui/core';\nimport { Select, AsyncSelect, Row, Col } from 'src/components';\nimport { FormLabel } from 'src/components/Form';\nimport Button from 'src/components/Button';\nimport Tabs from 'src/components/Tabs';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport DatabaseSelector from 'src/components/DatabaseSelector';\nimport Label from 'src/components/Label';\nimport Loading from 'src/components/Loading';\nimport TableSelector from 'src/components/TableSelector';\nimport EditableTitle from 'src/components/EditableTitle';\nimport CheckboxControl from 'src/explore/components/controls/CheckboxControl';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport TextAreaControl from 'src/explore/components/controls/TextAreaControl';\nimport SpatialControl from 'src/explore/components/controls/SpatialControl';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { Icons } from 'src/components/Icons';\nimport CurrencyControl from 'src/explore/components/controls/CurrencyControl';\nimport CollectionTable from './CollectionTable';\nimport Fieldset from './Fieldset';\nimport Field from './Field';\nimport { fetchSyncedColumns, updateColumns } from './utils';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\n\nconst DatasourceContainer = styled.div`\n  .change-warning {\n    margin: 16px 10px 0;\n    color: ${({ theme }) => theme.colors.warning.base};\n  }\n\n  .change-warning .bold {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n\n  .form-group.has-feedback > .help-block {\n    margin-top: 8px;\n  }\n\n  .form-group.form-group-md {\n    margin-bottom: 8px;\n  }\n`;\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledTableTabs = styled(Tabs)`\n  overflow: visible;\n  .ant-tabs-content-holder {\n    overflow: visible;\n  }\n`;\n\nconst StyledBadge = styled(Badge)`\n  .antd5-badge-count {\n    line-height: ${({ theme }) => theme.gridUnit * 4}px;\n    height: ${({ theme }) => theme.gridUnit * 4}px;\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst EditLockContainer = styled.div`\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  display: flex;\n  align-items: center;\n  a {\n    padding: 0 10px;\n  }\n`;\n\nconst ColumnButtonWrapper = styled.div`\n  text-align: right;\n  ${({ theme }) => `margin-bottom: ${theme.gridUnit * 2}px`}\n`;\n\nconst StyledLabelWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  span {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledColumnsTabWrapper = styled.div`\n  .table > tbody > tr > td {\n    vertical-align: middle;\n  }\n\n  .ant-tag {\n    margin-top: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledButtonWrapper = styled.span`\n  ${({ theme }) => `\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-left: ${theme.gridUnit * 3}px;\n    button>span>:first-of-type {\n      margin-right: 0;\n    }\n  `}\n`;\n\nconst sqlTooltipOptions = {\n  placement: 'topRight',\n  title: t(\n    'If changes are made to your SQL query, ' +\n    'columns in your dataset will be synced when saving the dataset.'\n  )\n};\n\nconst checkboxGenerator = (d, onChange) =>\n_jsx(CheckboxControl, { value: d, onChange: onChange });\n\nconst DATA_TYPES = [\n{ value: 'STRING', label: t('STRING') },\n{ value: 'NUMERIC', label: t('NUMERIC') },\n{ value: 'DATETIME', label: t('DATETIME') },\n{ value: 'BOOLEAN', label: t('BOOLEAN') }];\n\n\nconst DATASOURCE_TYPES_ARR = [\n{ key: 'physical', label: t('Physical (table or view)') },\n{ key: 'virtual', label: t('Virtual (SQL)') }];\n\nconst DATASOURCE_TYPES = {};\nDATASOURCE_TYPES_ARR.forEach((o) => {\n  DATASOURCE_TYPES[o.key] = o;\n});var _ref = process.env.NODE_ENV === \"production\" ? { name: \"s5xdrg\", styles: \"display:flex;align-items:center\" } : { name: \"l0hchv-CollectionTabTitle\", styles: \"display:flex;align-items:center;label:CollectionTabTitle;/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9EYXRhc291cmNlL0RhdGFzb3VyY2VFZGl0b3IuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQStLTSIsImZpbGUiOiIvVXNlcnMvYXJ5dXJrb3Yvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvRGF0YXNvdXJjZS9EYXRhc291cmNlRWRpdG9yLmpzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCByaXNvbiBmcm9tICdyaXNvbic7XG5pbXBvcnQgeyBQdXJlQ29tcG9uZW50LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBSYWRpbyB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1JhZGlvJztcbmltcG9ydCBDYXJkIGZyb20gJ3NyYy9jb21wb25lbnRzL0NhcmQnO1xuaW1wb3J0IEFsZXJ0IGZyb20gJ3NyYy9jb21wb25lbnRzL0FsZXJ0JztcbmltcG9ydCBCYWRnZSBmcm9tICdzcmMvY29tcG9uZW50cy9CYWRnZSc7XG5pbXBvcnQge1xuICBjc3MsXG4gIGlzRmVhdHVyZUVuYWJsZWQsXG4gIGdldEN1cnJlbmN5U3ltYm9sLFxuICBlbnN1cmVJc0FycmF5LFxuICBGZWF0dXJlRmxhZyxcbiAgc3R5bGVkLFxuICBTdXBlcnNldENsaWVudCxcbiAgdCxcbiAgd2l0aFRoZW1lLFxuICBnZXRDbGllbnRFcnJvck9iamVjdCxcbn0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgU2VsZWN0LCBBc3luY1NlbGVjdCwgUm93LCBDb2wgfSBmcm9tICdzcmMvY29tcG9uZW50cyc7XG5pbXBvcnQgeyBGb3JtTGFiZWwgfSBmcm9tICdzcmMvY29tcG9uZW50cy9Gb3JtJztcbmltcG9ydCBCdXR0b24gZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uJztcbmltcG9ydCBUYWJzIGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYnMnO1xuaW1wb3J0IENlcnRpZmllZEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0NlcnRpZmllZEJhZGdlJztcbmltcG9ydCBXYXJuaW5nSWNvbldpdGhUb29sdGlwIGZyb20gJ3NyYy9jb21wb25lbnRzL1dhcm5pbmdJY29uV2l0aFRvb2x0aXAnO1xuaW1wb3J0IERhdGFiYXNlU2VsZWN0b3IgZnJvbSAnc3JjL2NvbXBvbmVudHMvRGF0YWJhc2VTZWxlY3Rvcic7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnc3JjL2NvbXBvbmVudHMvTG9hZGluZyc7XG5pbXBvcnQgVGFibGVTZWxlY3RvciBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJsZVNlbGVjdG9yJztcbmltcG9ydCBFZGl0YWJsZVRpdGxlIGZyb20gJ3NyYy9jb21wb25lbnRzL0VkaXRhYmxlVGl0bGUnO1xuaW1wb3J0IENoZWNrYm94Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0NoZWNrYm94Q29udHJvbCc7XG5pbXBvcnQgVGV4dENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0Q29udHJvbCc7XG5pbXBvcnQgVGV4dEFyZWFDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVGV4dEFyZWFDb250cm9sJztcbmltcG9ydCBTcGF0aWFsQ29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1NwYXRpYWxDb250cm9sJztcbmltcG9ydCB3aXRoVG9hc3RzIGZyb20gJ3NyYy9jb21wb25lbnRzL01lc3NhZ2VUb2FzdHMvd2l0aFRvYXN0cyc7XG5pbXBvcnQgeyBJY29ucyB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0ljb25zJztcbmltcG9ydCBDdXJyZW5jeUNvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9DdXJyZW5jeUNvbnRyb2wnO1xuaW1wb3J0IENvbGxlY3Rpb25UYWJsZSBmcm9tICcuL0NvbGxlY3Rpb25UYWJsZSc7XG5pbXBvcnQgRmllbGRzZXQgZnJvbSAnLi9GaWVsZHNldCc7XG5pbXBvcnQgRmllbGQgZnJvbSAnLi9GaWVsZCc7XG5pbXBvcnQgeyBmZXRjaFN5bmNlZENvbHVtbnMsIHVwZGF0ZUNvbHVtbnMgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgRGF0YXNvdXJjZUNvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIC5jaGFuZ2Utd2FybmluZyB7XG4gICAgbWFyZ2luOiAxNnB4IDEwcHggMDtcbiAgICBjb2xvcjogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jb2xvcnMud2FybmluZy5iYXNlfTtcbiAgfVxuXG4gIC5jaGFuZ2Utd2FybmluZyAuYm9sZCB7XG4gICAgZm9udC13ZWlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUudHlwb2dyYXBoeS53ZWlnaHRzLmJvbGR9O1xuICB9XG5cbiAgLmZvcm0tZ3JvdXAuaGFzLWZlZWRiYWNrID4gLmhlbHAtYmxvY2sge1xuICAgIG1hcmdpbi10b3A6IDhweDtcbiAgfVxuXG4gIC5mb3JtLWdyb3VwLmZvcm0tZ3JvdXAtbWQge1xuICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgfVxuYDtcblxuY29uc3QgRmxleFJvd0NvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG5cbiAgc3ZnIHtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZFRhYmxlVGFicyA9IHN0eWxlZChUYWJzKWBcbiAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIC5hbnQtdGFicy1jb250ZW50LWhvbGRlciB7XG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZEJhZGdlID0gc3R5bGVkKEJhZGdlKWBcbiAgLmFudGQ1LWJhZGdlLWNvdW50IHtcbiAgICBsaW5lLWhlaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdCAqIDR9cHg7XG4gICAgaGVpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBtYXJnaW4tbGVmdDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbiAgfVxuYDtcblxuY29uc3QgRWRpdExvY2tDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBmb250LXNpemU6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUudHlwb2dyYXBoeS5zaXplcy5zfXB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBhIHtcbiAgICBwYWRkaW5nOiAwIDEwcHg7XG4gIH1cbmA7XG5cbmNvbnN0IENvbHVtbkJ1dHRvbldyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgJHsoeyB0aGVtZSB9KSA9PiBgbWFyZ2luLWJvdHRvbTogJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHhgfVxuYDtcblxuY29uc3QgU3R5bGVkTGFiZWxXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgc3BhbiB7XG4gICAgbWFyZ2luLXJpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRDb2x1bW5zVGFiV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIC50YWJsZSA+IHRib2R5ID4gdHIgPiB0ZCB7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgfVxuXG4gIC5hbnQtdGFnIHtcbiAgICBtYXJnaW4tdG9wOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRCdXR0b25XcmFwcGVyID0gc3R5bGVkLnNwYW5gXG4gICR7KHsgdGhlbWUgfSkgPT4gYFxuICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuZ3JpZFVuaXQgKiAzfXB4O1xuICAgIG1hcmdpbi1sZWZ0OiAke3RoZW1lLmdyaWRVbml0ICogM31weDtcbiAgICBidXR0b24+c3Bhbj46Zmlyc3Qtb2YtdHlwZSB7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gICAgfVxuICBgfVxuYDtcblxuY29uc3Qgc3FsVG9vbHRpcE9wdGlvbnMgPSB7XG4gIHBsYWNlbWVudDogJ3RvcFJpZ2h0JyxcbiAgdGl0bGU6IHQoXG4gICAgJ0lmIGNoYW5nZXMgYXJlIG1hZGUgdG8geW91ciBTUUwgcXVlcnksICcgK1xuICAgICAgJ2NvbHVtbnMgaW4geW91ciBkYXRhc2V0IHdpbGwgYmUgc3luY2VkIHdoZW4gc2F2aW5nIHRoZSBkYXRhc2V0LicsXG4gICksXG59O1xuXG5jb25zdCBjaGVja2JveEdlbmVyYXRvciA9IChkLCBvbkNoYW5nZSkgPT4gKFxuICA8Q2hlY2tib3hDb250cm9sIHZhbHVlPXtkfSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+XG4pO1xuY29uc3QgREFUQV9UWVBFUyA9IFtcbiAgeyB2YWx1ZTogJ1NUUklORycsIGxhYmVsOiB0KCdTVFJJTkcnKSB9LFxuICB7IHZhbHVlOiAnTlVNRVJJQycsIGxhYmVsOiB0KCdOVU1FUklDJykgfSxcbiAgeyB2YWx1ZTogJ0RBVEVUSU1FJywgbGFiZWw6IHQoJ0RBVEVUSU1FJykgfSxcbiAgeyB2YWx1ZTogJ0JPT0xFQU4nLCBsYWJlbDogdCgnQk9PTEVBTicpIH0sXG5dO1xuXG5jb25zdCBEQVRBU09VUkNFX1RZUEVTX0FSUiA9IFtcbiAgeyBrZXk6ICdwaHlzaWNhbCcsIGxhYmVsOiB0KCdQaHlzaWNhbCAodGFibGUgb3IgdmlldyknKSB9LFxuICB7IGtleTogJ3ZpcnR1YWwnLCBsYWJlbDogdCgnVmlydHVhbCAoU1FMKScpIH0sXG5dO1xuY29uc3QgREFUQVNPVVJDRV9UWVBFUyA9IHt9O1xuREFUQVNPVVJDRV9UWVBFU19BUlIuZm9yRWFjaChvID0+IHtcbiAgREFUQVNPVVJDRV9UWVBFU1tvLmtleV0gPSBvO1xufSk7XG5cbmZ1bmN0aW9uIENvbGxlY3Rpb25UYWJUaXRsZSh7IHRpdGxlLCBjb2xsZWN0aW9uIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjc3M9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJyB9fVxuICAgICAgZGF0YS10ZXN0PXtgY29sbGVjdGlvbi10YWItJHt0aXRsZX1gfVxuICAgID5cbiAgICAgIHt0aXRsZX17JyAnfVxuICAgICAgPFN0eWxlZEJhZGdlIGNvdW50PXtjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwfSBzaG93WmVybyAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5Db2xsZWN0aW9uVGFiVGl0bGUucHJvcFR5cGVzID0ge1xuICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29sbGVjdGlvbjogUHJvcFR5cGVzLmFycmF5LFxufTtcblxuZnVuY3Rpb24gQ29sdW1uQ29sbGVjdGlvblRhYmxlKHtcbiAgY29sdW1ucyxcbiAgZGF0YXNvdXJjZSxcbiAgb25Db2x1bW5zQ2hhbmdlLFxuICBvbkRhdGFzb3VyY2VDaGFuZ2UsXG4gIGVkaXRhYmxlQ29sdW1uTmFtZSxcbiAgc2hvd0V4cHJlc3Npb24sXG4gIGFsbG93QWRkSXRlbSxcbiAgYWxsb3dFZGl0RGF0YVR5cGUsXG4gIGl0ZW1HZW5lcmF0b3IsXG4gIGNvbHVtbkxhYmVsVG9vbHRpcHMsXG59KSB7XG4gIHJldHVybiAoXG4gICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgdGFibGVDb2x1bW5zPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FbmFibGVBZHZhbmNlZERhdGFUeXBlcylcbiAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgJ2NvbHVtbl9uYW1lJyxcbiAgICAgICAgICAgICAgJ2FkdmFuY2VkX2RhdGFfdHlwZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAndHlwZScsXG4gICAgICAgICAgICAgICdpc19kdHRtJyxcbiAgICAgICAgICAgICAgJ21haW5fZHR0bV9jb2wnLFxuICAgICAgICAgICAgICAnZmlsdGVyYWJsZScsXG4gICAgICAgICAgICAgICdncm91cGJ5JyxcbiAgICAgICAgICAgIF1cbiAgICAgIH1cbiAgICAgIHNvcnRDb2x1bW5zPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FbmFibGVBZHZhbmNlZERhdGFUeXBlcylcbiAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgJ2NvbHVtbl9uYW1lJyxcbiAgICAgICAgICAgICAgJ2FkdmFuY2VkX2RhdGFfdHlwZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAndHlwZScsXG4gICAgICAgICAgICAgICdpc19kdHRtJyxcbiAgICAgICAgICAgICAgJ21haW5fZHR0bV9jb2wnLFxuICAgICAgICAgICAgICAnZmlsdGVyYWJsZScsXG4gICAgICAgICAgICAgICdncm91cGJ5JyxcbiAgICAgICAgICAgIF1cbiAgICAgIH1cbiAgICAgIGFsbG93RGVsZXRlc1xuICAgICAgYWxsb3dBZGRJdGVtPXthbGxvd0FkZEl0ZW19XG4gICAgICBpdGVtR2VuZXJhdG9yPXtpdGVtR2VuZXJhdG9yfVxuICAgICAgY29sbGVjdGlvbj17Y29sdW1uc31cbiAgICAgIGNvbHVtbkxhYmVsVG9vbHRpcHM9e2NvbHVtbkxhYmVsVG9vbHRpcHN9XG4gICAgICBzdGlja3lIZWFkZXJcbiAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgPEZvcm1Db250YWluZXI+XG4gICAgICAgICAgPEZpZWxkc2V0IGNvbXBhY3Q+XG4gICAgICAgICAgICB7c2hvd0V4cHJlc3Npb24gJiYgKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImV4cHJlc3Npb25cIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdTUUwgZXhwcmVzc2lvbicpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT1cIm1hcmtkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cInZlcmJvc2VfbmFtZVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdMYWJlbCcpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInZlcmJvc2VfbmFtZVwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnTGFiZWwnKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge2FsbG93RWRpdERhdGFUeXBlICYmIChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0eXBlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e0RBVEFfVFlQRVN9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dOZXdPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKSA/IChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJhZHZhbmNlZF9kYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdBZHZhbmNlZCBkYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJhZHZhbmNlZF9kYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQWR2YW5jZWQgRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDw+PC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwicHl0aG9uX2RhdGVfZm9ybWF0XCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0RhdGV0aW1lIGZvcm1hdCcpfVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgICAgICAgICAgLyogTm90ZSB0aGUgZnJhZ21lbnRlZCB0cmFuc2xhdGlvbnMgbWF5IG5vdCB3b3JrLiAqL1xuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICB7dCgnVGhlIHBhdHRlcm4gb2YgdGltZXN0YW1wIGZvcm1hdC4gRm9yIHN0cmluZ3MgdXNlICcpfVxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5weXRob24ub3JnLzIvbGlicmFyeS9kYXRldGltZS5odG1sI3N0cmZ0aW1lLXN0cnB0aW1lLWJlaGF2aW9yXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdQeXRob24gZGF0ZXRpbWUgc3RyaW5nIHBhdHRlcm4nKX1cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIHt0KCcgZXhwcmVzc2lvbiB3aGljaCBuZWVkcyB0byBhZGhlcmUgdG8gdGhlICcpfVxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdJU08gODYwMScpfVxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAge3QoYCBzdGFuZGFyZCB0byBlbnN1cmUgdGhhdCB0aGUgbGV4aWNvZ3JhcGhpY2FsIG9yZGVyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgY29pbmNpZGVzIHdpdGggdGhlIGNocm9ub2xvZ2ljYWwgb3JkZXJpbmcuIElmIHRoZVxuICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCBmb3JtYXQgZG9lcyBub3QgYWRoZXJlIHRvIHRoZSBJU08gODYwMSBzdGFuZGFyZFxuICAgICAgICAgICAgICAgICAgICAgIHlvdSB3aWxsIG5lZWQgdG8gZGVmaW5lIGFuIGV4cHJlc3Npb24gYW5kIHR5cGUgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtaW5nIHRoZSBzdHJpbmcgaW50byBhIGRhdGUgb3IgdGltZXN0YW1wLiBOb3RlXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5IHRpbWUgem9uZXMgYXJlIG5vdCBzdXBwb3J0ZWQuIElmIHRpbWUgaXMgc3RvcmVkXG4gICAgICAgICAgICAgICAgICAgICAgaW4gZXBvY2ggZm9ybWF0LCBwdXQgXFxgZXBvY2hfc1xcYCBvciBcXGBlcG9jaF9tc1xcYC4gSWYgbm8gcGF0dGVyblxuICAgICAgICAgICAgICAgICAgICAgIGlzIHNwZWNpZmllZCB3ZSBmYWxsIGJhY2sgdG8gdXNpbmcgdGhlIG9wdGlvbmFsIGRlZmF1bHRzIG9uIGEgcGVyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UvY29sdW1uIG5hbWUgbGV2ZWwgdmlhIHRoZSBleHRyYSBwYXJhbWV0ZXIuYCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJweXRob25fZGF0ZV9mb3JtYXRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIlWS0lbS0lZFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpZWQgQnknKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpZWRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdEZXRhaWxzIG9mIHRoZSBjZXJ0aWZpY2F0aW9uJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWNhdGlvbkRldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9GaWVsZHNldD5cbiAgICAgICAgPC9Gb3JtQ29udGFpbmVyPlxuICAgICAgfVxuICAgICAgY29sdW1uTGFiZWxzPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FbmFibGVBZHZhbmNlZERhdGFUeXBlcylcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6IHQoJ0NvbHVtbicpLFxuICAgICAgICAgICAgICBhZHZhbmNlZF9kYXRhX3R5cGU6IHQoJ0FkdmFuY2VkIGRhdGEgdHlwZScpLFxuICAgICAgICAgICAgICB0eXBlOiB0KCdEYXRhIHR5cGUnKSxcbiAgICAgICAgICAgICAgZ3JvdXBieTogdCgnSXMgZGltZW5zaW9uJyksXG4gICAgICAgICAgICAgIGlzX2R0dG06IHQoJ0lzIHRlbXBvcmFsJyksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHQoJ0RlZmF1bHQgZGF0ZXRpbWUnKSxcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogdCgnSXMgZmlsdGVyYWJsZScpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnQ29sdW1uJyksXG4gICAgICAgICAgICAgIHR5cGU6IHQoJ0RhdGEgdHlwZScpLFxuICAgICAgICAgICAgICBncm91cGJ5OiB0KCdJcyBkaW1lbnNpb24nKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogdCgnSXMgdGVtcG9yYWwnKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogdCgnRGVmYXVsdCBkYXRldGltZScpLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0KCdJcyBmaWx0ZXJhYmxlJyksXG4gICAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbkNoYW5nZT17b25Db2x1bW5zQ2hhbmdlfVxuICAgICAgaXRlbVJlbmRlcmVycz17XG4gICAgICAgIGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRW5hYmxlQWR2YW5jZWREYXRhVHlwZXMpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiAodiwgb25JdGVtQ2hhbmdlLCBfLCByZWNvcmQpID0+XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgY2FuRWRpdFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt2fVxuICAgICAgICAgICAgICAgICAgICAgIG9uU2F2ZVRpdGxlPXtvbkl0ZW1DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHt2fVxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogKHZhbHVlLCBfb25JdGVtQ2hhbmdlLCBfbGFiZWwsIHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBkYXRhc291cmNlLm1haW5fZHR0bV9jb2wgPT09IHJlY29yZC5jb2x1bW5fbmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlZCA9ICFjb2x1bW5zLmZpbmQoXG4gICAgICAgICAgICAgICAgICBjb2x1bW4gPT4gY29sdW1uLmNvbHVtbl9uYW1lID09PSByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgKS5pc19kdHRtO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PXtgcmFkaW8tZGVmYXVsdC1kdHRtLSR7cmVjb3JkLmNvbHVtbl9uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0eXBlOiBkID0+IChkID8gPExhYmVsPntkfTwvTGFiZWw+IDogbnVsbCksXG4gICAgICAgICAgICAgIGFkdmFuY2VkX2RhdGFfdHlwZTogZCA9PiAoXG4gICAgICAgICAgICAgICAgPExhYmVsIG9uQ2hhbmdlPXtvbkNvbHVtbnNDaGFuZ2V9PntkfTwvTGFiZWw+XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIGlzX2R0dG06IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZ3JvdXBieTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiAodiwgb25JdGVtQ2hhbmdlLCBfLCByZWNvcmQpID0+XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uSXRlbUNoYW5nZX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3Z9XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiAodmFsdWUsIF9vbkl0ZW1DaGFuZ2UsIF9sYWJlbCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGRhdGFzb3VyY2UubWFpbl9kdHRtX2NvbCA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gIWNvbHVtbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIGNvbHVtbiA9PiBjb2x1bW4uY29sdW1uX25hbWUgPT09IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICApLmlzX2R0dG07XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9e2ByYWRpby1kZWZhdWx0LWR0dG0tJHtyZWNvcmQuY29sdW1uX25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHR5cGU6IGQgPT4gKGQgPyA8TGFiZWw+e2R9PC9MYWJlbD4gOiBudWxsKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBncm91cGJ5OiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAvPlxuICApO1xufVxuQ29sdW1uQ29sbGVjdGlvblRhYmxlLnByb3BUeXBlcyA9IHtcbiAgY29sdW1uczogUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25Db2x1bW5zQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBvbkRhdGFzb3VyY2VDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGVkaXRhYmxlQ29sdW1uTmFtZTogUHJvcFR5cGVzLmJvb2wsXG4gIHNob3dFeHByZXNzaW9uOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dBZGRJdGVtOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dFZGl0RGF0YVR5cGU6IFByb3BUeXBlcy5ib29sLFxuICBpdGVtR2VuZXJhdG9yOiBQcm9wVHlwZXMuZnVuYyxcbn07XG5Db2x1bW5Db2xsZWN0aW9uVGFibGUuZGVmYXVsdFByb3BzID0ge1xuICBlZGl0YWJsZUNvbHVtbk5hbWU6IGZhbHNlLFxuICBzaG93RXhwcmVzc2lvbjogZmFsc2UsXG4gIGFsbG93QWRkSXRlbTogZmFsc2UsXG4gIGFsbG93RWRpdERhdGFUeXBlOiBmYWxzZSxcbiAgaXRlbUdlbmVyYXRvcjogKCkgPT4gKHtcbiAgICBjb2x1bW5fbmFtZTogdCgnPG5ldyBjb2x1bW4+JyksXG4gICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICBncm91cGJ5OiB0cnVlLFxuICB9KSxcbn07XG5cbmZ1bmN0aW9uIFN0YWNrZWRGaWVsZCh7IGxhYmVsLCBmb3JtRWxlbWVudCB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxzdHJvbmc+e2xhYmVsfTwvc3Ryb25nPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2Pntmb3JtRWxlbWVudH08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuU3RhY2tlZEZpZWxkLnByb3BUeXBlcyA9IHtcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZvcm1FbGVtZW50OiBQcm9wVHlwZXMubm9kZSxcbn07XG5cbmZ1bmN0aW9uIEZvcm1Db250YWluZXIoeyBjaGlsZHJlbiB9KSB7XG4gIHJldHVybiA8Q2FyZCBwYWRkZWQ+e2NoaWxkcmVufTwvQ2FyZD47XG59XG5cbkZvcm1Db250YWluZXIucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG59O1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICBhZGRTdWNjZXNzVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGFkZERhbmdlclRvYXN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzZXRJc0VkaXRpbmc6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBvbkNoYW5nZTogKCkgPT4ge30sXG4gIHNldElzRWRpdGluZzogKCkgPT4ge30sXG59O1xuXG5mdW5jdGlvbiBPd25lcnNTZWxlY3Rvcih7IGRhdGFzb3VyY2UsIG9uQ2hhbmdlIH0pIHtcbiAgY29uc3QgbG9hZE9wdGlvbnMgPSB1c2VDYWxsYmFjaygoc2VhcmNoID0gJycsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSByaXNvbi5lbmNvZGUoeyBmaWx0ZXI6IHNlYXJjaCwgcGFnZSwgcGFnZV9zaXplOiBwYWdlU2l6ZSB9KTtcbiAgICByZXR1cm4gU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9kYXRhc2V0L3JlbGF0ZWQvb3duZXJzP3E9JHtxdWVyeX1gLFxuICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gKHtcbiAgICAgIGRhdGE6IHJlc3BvbnNlLmpzb24ucmVzdWx0XG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLmV4dHJhLmFjdGl2ZSlcbiAgICAgICAgLm1hcChpdGVtID0+ICh7XG4gICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgbGFiZWw6IGl0ZW0udGV4dCxcbiAgICAgICAgfSkpLFxuICAgICAgdG90YWxDb3VudDogcmVzcG9uc2UuanNvbi5jb3VudCxcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxBc3luY1NlbGVjdFxuICAgICAgYXJpYUxhYmVsPXt0KCdTZWxlY3Qgb3duZXJzJyl9XG4gICAgICBtb2RlPVwibXVsdGlwbGVcIlxuICAgICAgbmFtZT1cIm93bmVyc1wiXG4gICAgICB2YWx1ZT17ZGF0YXNvdXJjZS5vd25lcnN9XG4gICAgICBvcHRpb25zPXtsb2FkT3B0aW9uc31cbiAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgIGhlYWRlcj17PEZvcm1MYWJlbD57dCgnT3duZXJzJyl9PC9Gb3JtTGFiZWw+fVxuICAgICAgYWxsb3dDbGVhclxuICAgIC8+XG4gICk7XG59XG5cbmNsYXNzIERhdGFzb3VyY2VFZGl0b3IgZXh0ZW5kcyBQdXJlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRhdGFzb3VyY2U6IHtcbiAgICAgICAgLi4ucHJvcHMuZGF0YXNvdXJjZSxcbiAgICAgICAgb3duZXJzOiBwcm9wcy5kYXRhc291cmNlLm93bmVycy5tYXAob3duZXIgPT4gKHtcbiAgICAgICAgICB2YWx1ZTogb3duZXIudmFsdWUgfHwgb3duZXIuaWQsXG4gICAgICAgICAgbGFiZWw6IG93bmVyLmxhYmVsIHx8IGAke293bmVyLmZpcnN0X25hbWV9ICR7b3duZXIubGFzdF9uYW1lfWAsXG4gICAgICAgIH0pKSxcbiAgICAgICAgbWV0cmljczogcHJvcHMuZGF0YXNvdXJjZS5tZXRyaWNzPy5tYXAobWV0cmljID0+IHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5TWV0cmljLFxuICAgICAgICAgICAgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBjZXJ0aWZpY2F0aW9uRGV0YWlscyxcbiAgICAgICAgICB9ID0gbWV0cmljO1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb246IHsgZGV0YWlscywgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeSB9ID0ge30sXG4gICAgICAgICAgICB3YXJuaW5nX21hcmtkb3duOiB3YXJuaW5nTWFya2Rvd24sXG4gICAgICAgICAgfSA9IEpTT04ucGFyc2UobWV0cmljLmV4dHJhIHx8ICd7fScpIHx8IHt9O1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5tZXRyaWMsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzIHx8IGRldGFpbHMsXG4gICAgICAgICAgICB3YXJuaW5nX21hcmtkb3duOiB3YXJuaW5nTWFya2Rvd24gfHwgJycsXG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IHx8IGNlcnRpZmllZEJ5TWV0cmljLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIGVycm9yczogW10sXG4gICAgICBpc1NxbGE6XG4gICAgICAgIHByb3BzLmRhdGFzb3VyY2UuZGF0YXNvdXJjZV90eXBlID09PSAndGFibGUnIHx8XG4gICAgICAgIHByb3BzLmRhdGFzb3VyY2UudHlwZSA9PT0gJ3RhYmxlJyxcbiAgICAgIGlzRWRpdE1vZGU6IGZhbHNlLFxuICAgICAgZGF0YWJhc2VDb2x1bW5zOiBwcm9wcy5kYXRhc291cmNlLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiAhY29sLmV4cHJlc3Npb24pLFxuICAgICAgY2FsY3VsYXRlZENvbHVtbnM6IHByb3BzLmRhdGFzb3VyY2UuY29sdW1ucy5maWx0ZXIoXG4gICAgICAgIGNvbCA9PiAhIWNvbC5leHByZXNzaW9uLFxuICAgICAgKSxcbiAgICAgIG1ldGFkYXRhTG9hZGluZzogZmFsc2UsXG4gICAgICBhY3RpdmVUYWJLZXk6IDAsXG4gICAgICBkYXRhc291cmNlVHlwZTogcHJvcHMuZGF0YXNvdXJjZS5zcWxcbiAgICAgICAgPyBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5XG4gICAgICAgIDogREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXksXG4gICAgfTtcblxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkNoYW5nZUVkaXRNb2RlID0gdGhpcy5vbkNoYW5nZUVkaXRNb2RlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlID0gdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UgPSB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEgPVxuICAgICAgdGhpcy50YWJsZUNoYW5nZUFuZFN5bmNNZXRhZGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3luY01ldGFkYXRhID0gdGhpcy5zeW5jTWV0YWRhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldENvbHVtbnMgPSB0aGlzLnNldENvbHVtbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlID0gdGhpcy52YWxpZGF0ZUFuZENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVGFiU2VsZWN0ID0gdGhpcy5oYW5kbGVUYWJTZWxlY3QuYmluZCh0aGlzKTtcbiAgICB0aGlzLmN1cnJlbmNpZXMgPSBlbnN1cmVJc0FycmF5KHByb3BzLmN1cnJlbmNpZXMpLm1hcChjdXJyZW5jeUNvZGUgPT4gKHtcbiAgICAgIHZhbHVlOiBjdXJyZW5jeUNvZGUsXG4gICAgICBsYWJlbDogYCR7Z2V0Q3VycmVuY3lTeW1ib2woe1xuICAgICAgICBzeW1ib2w6IGN1cnJlbmN5Q29kZSxcbiAgICAgIH0pfSAoJHtjdXJyZW5jeUNvZGV9KWAsXG4gICAgfSkpO1xuICB9XG5cbiAgb25DaGFuZ2UoKSB7XG4gICAgLy8gRW1wdHlpbmcgU1FMIGlmIFwiUGh5c2ljYWxcIiByYWRpbyBidXR0b24gaXMgc2VsZWN0ZWRcbiAgICAvLyBDdXJyZW50bHkgdGhlIGxvZ2ljIHRvIGtub3cgd2hldGhlciB0aGUgc291cmNlIGlzXG4gICAgLy8gcGh5c2ljYWwgb3IgdmlydHVhbCBpcyBiYXNlZCBvbiB3aGV0aGVyIFNRTCBpcyBlbXB0eSBvciBub3QuXG4gICAgY29uc3QgeyBkYXRhc291cmNlVHlwZSwgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBzcWwgPVxuICAgICAgZGF0YXNvdXJjZVR5cGUgPT09IERBVEFTT1VSQ0VfVFlQRVMucGh5c2ljYWwua2V5ID8gJycgOiBkYXRhc291cmNlLnNxbDtcbiAgICBjb25zdCBuZXdEYXRhc291cmNlID0ge1xuICAgICAgLi4udGhpcy5zdGF0ZS5kYXRhc291cmNlLFxuICAgICAgc3FsLFxuICAgICAgY29sdW1uczogWy4uLnRoaXMuc3RhdGUuZGF0YWJhc2VDb2x1bW5zLCAuLi50aGlzLnN0YXRlLmNhbGN1bGF0ZWRDb2x1bW5zXSxcbiAgICB9O1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UobmV3RGF0YXNvdXJjZSwgdGhpcy5zdGF0ZS5lcnJvcnMpO1xuICB9XG5cbiAgb25DaGFuZ2VFZGl0TW9kZSgpIHtcbiAgICB0aGlzLnByb3BzLnNldElzRWRpdGluZyghdGhpcy5zdGF0ZS5pc0VkaXRNb2RlKTtcbiAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoeyBpc0VkaXRNb2RlOiAhcHJldlN0YXRlLmlzRWRpdE1vZGUgfSkpO1xuICB9XG5cbiAgb25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIGNhbGxiYWNrID0gdGhpcy52YWxpZGF0ZUFuZENoYW5nZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBkYXRhc291cmNlIH0sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoYXR0ciwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuOyAvLyBpZiB2YWx1ZSBpcyB1bmRlZmluZWQgZG8gbm90IHVwZGF0ZSBzdGF0ZVxuICAgIGNvbnN0IGRhdGFzb3VyY2UgPSB7IC4uLnRoaXMuc3RhdGUuZGF0YXNvdXJjZSwgW2F0dHJdOiB2YWx1ZSB9O1xuICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICBwcmV2U3RhdGUgPT4gKHtcbiAgICAgICAgZGF0YXNvdXJjZTogeyAuLi5wcmV2U3RhdGUuZGF0YXNvdXJjZSwgW2F0dHJdOiB2YWx1ZSB9LFxuICAgICAgfSksXG4gICAgICBhdHRyID09PSAndGFibGVfbmFtZSdcbiAgICAgICAgPyB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZShkYXRhc291cmNlLCB0aGlzLnRhYmxlQ2hhbmdlQW5kU3luY01ldGFkYXRhKVxuICAgICAgICA6IHRoaXMub25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIHRoaXMudmFsaWRhdGVBbmRDaGFuZ2UpLFxuICAgICk7XG4gIH1cblxuICBvbkRhdGFzb3VyY2VUeXBlQ2hhbmdlKGRhdGFzb3VyY2VUeXBlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFzb3VyY2VUeXBlIH0pO1xuICB9XG5cbiAgc2V0Q29sdW1ucyhvYmopIHtcbiAgICAvLyB1cGRhdGUgY2FsY3VsYXRlZENvbHVtbnMgb3IgZGF0YWJhc2VDb2x1bW5zXG4gICAgdGhpcy5zZXRTdGF0ZShvYmosIHRoaXMudmFsaWRhdGVBbmRDaGFuZ2UpO1xuICB9XG5cbiAgdmFsaWRhdGVBbmRDaGFuZ2UoKSB7XG4gICAgdGhpcy52YWxpZGF0ZSh0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIHRhYmxlQ2hhbmdlQW5kU3luY01ldGFkYXRhKCkge1xuICAgIHRoaXMudmFsaWRhdGUoKCkgPT4ge1xuICAgICAgdGhpcy5zeW5jTWV0YWRhdGEoKTtcbiAgICAgIHRoaXMub25DaGFuZ2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHN5bmNNZXRhZGF0YSgpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IG1ldGFkYXRhTG9hZGluZzogdHJ1ZSB9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbmV3Q29scyA9IGF3YWl0IGZldGNoU3luY2VkQ29sdW1ucyhkYXRhc291cmNlKTtcbiAgICAgIGNvbnN0IGNvbHVtbkNoYW5nZXMgPSB1cGRhdGVDb2x1bW5zKFxuICAgICAgICBkYXRhc291cmNlLmNvbHVtbnMsXG4gICAgICAgIG5ld0NvbHMsXG4gICAgICAgIHRoaXMucHJvcHMuYWRkU3VjY2Vzc1RvYXN0LFxuICAgICAgKTtcbiAgICAgIHRoaXMuc2V0Q29sdW1ucyh7XG4gICAgICAgIGRhdGFiYXNlQ29sdW1uczogY29sdW1uQ2hhbmdlcy5maW5hbENvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgIGNvbCA9PiAhY29sLmV4cHJlc3Npb24sIC8vIHJlbW92ZSBjYWxjdWxhdGVkIGNvbHVtbnNcbiAgICAgICAgKSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wcm9wcy5hZGRTdWNjZXNzVG9hc3QodCgnTWV0YWRhdGEgaGFzIGJlZW4gc3luY2VkJykpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1ldGFkYXRhTG9hZGluZzogZmFsc2UgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IHsgZXJyb3I6IGNsaWVudEVycm9yLCBzdGF0dXNUZXh0IH0gPVxuICAgICAgICBhd2FpdCBnZXRDbGllbnRFcnJvck9iamVjdChlcnJvcik7XG4gICAgICB0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0KFxuICAgICAgICBjbGllbnRFcnJvciB8fCBzdGF0dXNUZXh0IHx8IHQoJ0FuIGVycm9yIGhhcyBvY2N1cnJlZCcpLFxuICAgICAgKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRhZGF0YUxvYWRpbmc6IGZhbHNlIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZpbmREdXBsaWNhdGVzKGFyciwgYWNjZXNzb3IpIHtcbiAgICBjb25zdCBzZWVuID0ge307XG4gICAgY29uc3QgZHVwcyA9IFtdO1xuICAgIGFyci5mb3JFYWNoKG9iaiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gYWNjZXNzb3Iob2JqKTtcbiAgICAgIGlmIChpdGVtIGluIHNlZW4pIHtcbiAgICAgICAgZHVwcy5wdXNoKGl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VlbltpdGVtXSA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGR1cHM7XG4gIH1cblxuICB2YWxpZGF0ZShjYWxsYmFjaykge1xuICAgIGxldCBlcnJvcnMgPSBbXTtcbiAgICBsZXQgZHVwcztcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAvLyBMb29raW5nIGZvciBkdXBsaWNhdGUgY29sdW1uX25hbWVcbiAgICBkdXBzID0gdGhpcy5maW5kRHVwbGljYXRlcyhkYXRhc291cmNlLmNvbHVtbnMsIG9iaiA9PiBvYmouY29sdW1uX25hbWUpO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBkdXBzLm1hcChuYW1lID0+IHQoJ0NvbHVtbiBuYW1lIFslc10gaXMgZHVwbGljYXRlZCcsIG5hbWUpKSxcbiAgICApO1xuXG4gICAgLy8gTG9va2luZyBmb3IgZHVwbGljYXRlIG1ldHJpY19uYW1lXG4gICAgZHVwcyA9IHRoaXMuZmluZER1cGxpY2F0ZXMoZGF0YXNvdXJjZS5tZXRyaWNzLCBvYmogPT4gb2JqLm1ldHJpY19uYW1lKTtcbiAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KFxuICAgICAgZHVwcy5tYXAobmFtZSA9PiB0KCdNZXRyaWMgbmFtZSBbJXNdIGlzIGR1cGxpY2F0ZWQnLCBuYW1lKSksXG4gICAgKTtcblxuICAgIC8vIE1ha2luZyBzdXJlIGNhbGN1bGF0ZWRDb2x1bW5zIGhhdmUgYW4gZXhwcmVzc2lvbiBkZWZpbmVkXG4gICAgY29uc3Qgbm9GaWx0ZXJDYWxjQ29scyA9IHRoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnMuZmlsdGVyKFxuICAgICAgY29sID0+ICFjb2wuZXhwcmVzc2lvbiAmJiAhY29sLmpzb24sXG4gICAgKTtcbiAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KFxuICAgICAgbm9GaWx0ZXJDYWxjQ29scy5tYXAoY29sID0+XG4gICAgICAgIHQoJ0NhbGN1bGF0ZWQgY29sdW1uIFslc10gcmVxdWlyZXMgYW4gZXhwcmVzc2lvbicsIGNvbC5jb2x1bW5fbmFtZSksXG4gICAgICApLFxuICAgICk7XG5cbiAgICAvLyB2YWxpZGF0ZSBjdXJyZW5jeSBjb2RlXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuc3RhdGUuZGF0YXNvdXJjZS5tZXRyaWNzPy5mb3JFYWNoKFxuICAgICAgICBtZXRyaWMgPT5cbiAgICAgICAgICBtZXRyaWMuY3VycmVuY3k/LnN5bWJvbCAmJlxuICAgICAgICAgIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tVVMnLCB7XG4gICAgICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JyxcbiAgICAgICAgICAgIGN1cnJlbmN5OiBtZXRyaWMuY3VycmVuY3kuc3ltYm9sLFxuICAgICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoW3QoJ0ludmFsaWQgY3VycmVuY3kgY29kZSBpbiBzYXZlZCBtZXRyaWNzJyldKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHsgZXJyb3JzIH0sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGhhbmRsZVRhYlNlbGVjdChhY3RpdmVUYWJLZXkpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgYWN0aXZlVGFiS2V5IH0pO1xuICB9XG5cbiAgc29ydE1ldHJpY3MobWV0cmljcykge1xuICAgIHJldHVybiBtZXRyaWNzLnNvcnQoKHsgaWQ6IGEgfSwgeyBpZDogYiB9KSA9PiBiIC0gYSk7XG4gIH1cblxuICByZW5kZXJTZXR0aW5nc0ZpZWxkc2V0KCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPEZpZWxkc2V0XG4gICAgICAgIHRpdGxlPXt0KCdCYXNpYycpfVxuICAgICAgICBpdGVtPXtkYXRhc291cmNlfVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICA+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgIGxhYmVsPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICBsYW5ndWFnZT1cIm1hcmtkb3duXCJcbiAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBmaWVsZEtleT1cImRlZmF1bHRfZW5kcG9pbnRcIlxuICAgICAgICAgIGxhYmVsPXt0KCdEZWZhdWx0IFVSTCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgYERlZmF1bHQgVVJMIHRvIHJlZGlyZWN0IHRvIHdoZW4gYWNjZXNzaW5nIGZyb20gdGhlIGRhdGFzZXQgbGlzdCBwYWdlLlxuICAgICAgICAgICAgQWNjZXB0cyByZWxhdGl2ZSBVUkxzIHN1Y2ggYXMgPHNwYW4gc3R5bGU94oCed2hpdGUtc3BhY2U6IG5vd3JhcDvigJ0+L3N1cGVyc2V0L2Rhc2hib2FyZC97aWR9Lzwvc3Bhbj5gLFxuICAgICAgICAgICl9XG4gICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cImRlZmF1bHRfZW5kcG9pbnRcIiAvPn1cbiAgICAgICAgLz5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgaW5saW5lXG4gICAgICAgICAgZmllbGRLZXk9XCJmaWx0ZXJfc2VsZWN0X2VuYWJsZWRcIlxuICAgICAgICAgIGxhYmVsPXt0KCdBdXRvY29tcGxldGUgZmlsdGVycycpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdXaGV0aGVyIHRvIHBvcHVsYXRlIGF1dG9jb21wbGV0ZSBmaWx0ZXJzIG9wdGlvbnMnKX1cbiAgICAgICAgICBjb250cm9sPXs8Q2hlY2tib3hDb250cm9sIC8+fVxuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgZmllbGRLZXk9XCJmZXRjaF92YWx1ZXNfcHJlZGljYXRlXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdBdXRvY29tcGxldGUgcXVlcnkgcHJlZGljYXRlJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ1doZW4gdXNpbmcgXCJBdXRvY29tcGxldGUgZmlsdGVyc1wiLCB0aGlzIGNhbiBiZSB1c2VkIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UgJyArXG4gICAgICAgICAgICAgICAgJ29mIHRoZSBxdWVyeSBmZXRjaGluZyB0aGUgdmFsdWVzLiBVc2UgdGhpcyBvcHRpb24gdG8gYXBwbHkgYSAnICtcbiAgICAgICAgICAgICAgICAncHJlZGljYXRlIChXSEVSRSBjbGF1c2UpIHRvIHRoZSBxdWVyeSBzZWxlY3RpbmcgdGhlIGRpc3RpbmN0ICcgK1xuICAgICAgICAgICAgICAgICd2YWx1ZXMgZnJvbSB0aGUgdGFibGUuIFR5cGljYWxseSB0aGUgaW50ZW50IHdvdWxkIGJlIHRvIGxpbWl0IHRoZSBzY2FuICcgK1xuICAgICAgICAgICAgICAgICdieSBhcHBseWluZyBhIHJlbGF0aXZlIHRpbWUgZmlsdGVyIG9uIGEgcGFydGl0aW9uZWQgb3IgaW5kZXhlZCB0aW1lLXJlbGF0ZWQgZmllbGQuJyxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJmZXRjaF92YWx1ZXNfcHJlZGljYXRlXCJcbiAgICAgICAgICAgICAgICBtaW5MaW5lcz17NX1cbiAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge3RoaXMuc3RhdGUuaXNTcWxhICYmIChcbiAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgIGZpZWxkS2V5PVwiZXh0cmFcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ0V4dHJhJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ0V4dHJhIGRhdGEgdG8gc3BlY2lmeSB0YWJsZSBtZXRhZGF0YS4gQ3VycmVudGx5IHN1cHBvcnRzICcgK1xuICAgICAgICAgICAgICAgICdtZXRhZGF0YSBvZiB0aGUgZm9ybWF0OiBgeyBcImNlcnRpZmljYXRpb25cIjogeyBcImNlcnRpZmllZF9ieVwiOiAnICtcbiAgICAgICAgICAgICAgICAnXCJEYXRhIFBsYXRmb3JtIFRlYW1cIiwgXCJkZXRhaWxzXCI6IFwiVGhpcyB0YWJsZSBpcyB0aGUgc291cmNlIG9mIHRydXRoLlwiICcgK1xuICAgICAgICAgICAgICAgICd9LCBcIndhcm5pbmdfbWFya2Rvd25cIjogXCJUaGlzIGlzIGEgd2FybmluZy5cIiB9YC4nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgY29udHJvbElkPVwiZXh0cmFcIlxuICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwianNvblwiXG4gICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxPd25lcnNTZWxlY3RvclxuICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgb25DaGFuZ2U9e25ld093bmVycyA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZSh7IC4uLmRhdGFzb3VyY2UsIG93bmVyczogbmV3T3duZXJzIH0pO1xuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L0ZpZWxkc2V0PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJBZHZhbmNlZEZpZWxkc2V0KCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPEZpZWxkc2V0XG4gICAgICAgIHRpdGxlPXt0KCdBZHZhbmNlZCcpfVxuICAgICAgICBpdGVtPXtkYXRhc291cmNlfVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICA+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiY2FjaGVfdGltZW91dFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0NhY2hlIHRpbWVvdXQnKX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICdUaGUgZHVyYXRpb24gb2YgdGltZSBpbiBzZWNvbmRzIGJlZm9yZSB0aGUgY2FjaGUgaXMgaW52YWxpZGF0ZWQuIFNldCB0byAtMSB0byBieXBhc3MgdGhlIGNhY2hlLicsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwiY2FjaGVfdGltZW91dFwiIC8+fVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBmaWVsZEtleT1cIm9mZnNldFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0hvdXJzIG9mZnNldCcpfVxuICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJvZmZzZXRcIiAvPn1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICdUaGUgbnVtYmVyIG9mIGhvdXJzLCBuZWdhdGl2ZSBvciBwb3NpdGl2ZSwgdG8gc2hpZnQgdGhlIHRpbWUgY29sdW1uLiBUaGlzIGNhbiBiZSB1c2VkIHRvIG1vdmUgVVRDIHRpbWUgdG8gbG9jYWwgdGltZS4nLFxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICBmaWVsZEtleT1cInRlbXBsYXRlX3BhcmFtc1wiXG4gICAgICAgICAgICBsYWJlbD17dCgnVGVtcGxhdGUgcGFyYW1ldGVycycpfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICdBIHNldCBvZiBwYXJhbWV0ZXJzIHRoYXQgYmVjb21lIGF2YWlsYWJsZSBpbiB0aGUgcXVlcnkgdXNpbmcgSmluamEgdGVtcGxhdGluZyBzeW50YXgnLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJ0ZW1wbGF0ZV9wYXJhbXNcIiAvPn1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBpbmxpbmVcbiAgICAgICAgICBmaWVsZEtleT1cIm5vcm1hbGl6ZV9jb2x1bW5zXCJcbiAgICAgICAgICBsYWJlbD17dCgnTm9ybWFsaXplIGNvbHVtbiBuYW1lcycpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgJ0FsbG93IGNvbHVtbiBuYW1lcyB0byBiZSBjaGFuZ2VkIHRvIGNhc2UgaW5zZW5zaXRpdmUgZm9ybWF0LCBpZiBzdXBwb3J0ZWQgKGUuZy4gT3JhY2xlLCBTbm93Zmxha2UpLicsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8Q2hlY2tib3hDb250cm9sIGNvbnRyb2xJZD1cIm5vcm1hbGl6ZV9jb2x1bW5zXCIgLz59XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGlubGluZVxuICAgICAgICAgIGZpZWxkS2V5PVwiYWx3YXlzX2ZpbHRlcl9tYWluX2R0dG1cIlxuICAgICAgICAgIGxhYmVsPXt0KCdBbHdheXMgZmlsdGVyIG1haW4gZGF0ZXRpbWUgY29sdW1uJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICBgV2hlbiB0aGUgc2Vjb25kYXJ5IHRlbXBvcmFsIGNvbHVtbnMgYXJlIGZpbHRlcmVkLCBhcHBseSB0aGUgc2FtZSBmaWx0ZXIgdG8gdGhlIG1haW4gZGF0ZXRpbWUgY29sdW1uLmAsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8Q2hlY2tib3hDb250cm9sIGNvbnRyb2xJZD1cImFsd2F5c19maWx0ZXJfbWFpbl9kdHRtXCIgLz59XG4gICAgICAgIC8+XG4gICAgICA8L0ZpZWxkc2V0PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJTcGF0aWFsVGFiKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IHNwYXRpYWxzLCBhbGxfY29sczogYWxsQ29scyB9ID0gZGF0YXNvdXJjZTtcbiAgICByZXR1cm4gKFxuICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICB0YWI9ezxDb2xsZWN0aW9uVGFiVGl0bGUgY29sbGVjdGlvbj17c3BhdGlhbHN9IHRpdGxlPXt0KCdTcGF0aWFsJyl9IC8+fVxuICAgICAgICBrZXk9ezR9XG4gICAgICA+XG4gICAgICAgIDxDb2xsZWN0aW9uVGFibGVcbiAgICAgICAgICB0YWJsZUNvbHVtbnM9e1snbmFtZScsICdjb25maWcnXX1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlLmJpbmQodGhpcywgJ3NwYXRpYWxzJyl9XG4gICAgICAgICAgaXRlbUdlbmVyYXRvcj17KCkgPT4gKHtcbiAgICAgICAgICAgIG5hbWU6IHQoJzxuZXcgc3BhdGlhbD4nKSxcbiAgICAgICAgICAgIHR5cGU6IHQoJzxubyB0eXBlPicpLFxuICAgICAgICAgICAgY29uZmlnOiBudWxsLFxuICAgICAgICAgIH0pfVxuICAgICAgICAgIGNvbGxlY3Rpb249e3NwYXRpYWxzfVxuICAgICAgICAgIGFsbG93RGVsZXRlc1xuICAgICAgICAgIGl0ZW1SZW5kZXJlcnM9e3tcbiAgICAgICAgICAgIG5hbWU6IChkLCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgICA8RWRpdGFibGVUaXRsZSBjYW5FZGl0IHRpdGxlPXtkfSBvblNhdmVUaXRsZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29uZmlnOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgICAgPFNwYXRpYWxDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IGNob2ljZXM9e2FsbENvbHN9IC8+XG4gICAgICAgICAgICApLFxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyU291cmNlRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8RWRpdExvY2tDb250YWluZXI+XG4gICAgICAgICAgPHNwYW4gcm9sZT1cImJ1dHRvblwiIHRhYkluZGV4PXswfSBvbkNsaWNrPXt0aGlzLm9uQ2hhbmdlRWRpdE1vZGV9PlxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSA/IChcbiAgICAgICAgICAgICAgPEljb25zLlVubG9ja091dGxpbmVkXG4gICAgICAgICAgICAgICAgaWNvblNpemU9XCJ4bFwiXG4gICAgICAgICAgICAgICAgY3NzPXt0aGVtZSA9PiBjc3NgXG4gICAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG8gJHt0aGVtZS5ncmlkVW5pdH1weCBhdXRvIDA7XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxJY29ucy5Mb2NrT3V0bGluZWRcbiAgICAgICAgICAgICAgICBpY29uU2l6ZT1cInhsXCJcbiAgICAgICAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7XG4gICAgICAgICAgICAgICAgICBtYXJnaW46IGBhdXRvICR7dGhlbWUuZ3JpZFVuaXR9cHggYXV0byAwYCxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIHshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmIChcbiAgICAgICAgICAgIDxkaXY+e3QoJ0NsaWNrIHRoZSBsb2NrIHRvIG1ha2UgY2hhbmdlcy4nKX08L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHt0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiYgKFxuICAgICAgICAgICAgPGRpdj57dCgnQ2xpY2sgdGhlIGxvY2sgdG8gcHJldmVudCBmdXJ0aGVyIGNoYW5nZXMuJyl9PC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9FZGl0TG9ja0NvbnRhaW5lcj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtLWwtMTAgbS10LTIwIG0tYi0xMFwiPlxuICAgICAgICAgIHtEQVRBU09VUkNFX1RZUEVTX0FSUi5tYXAodHlwZSA9PiAoXG4gICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAga2V5PXt0eXBlLmtleX1cbiAgICAgICAgICAgICAgdmFsdWU9e3R5cGUua2V5fVxuICAgICAgICAgICAgICBpbmxpbmVcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlVHlwZUNoYW5nZS5iaW5kKHRoaXMsIHR5cGUua2V5KX1cbiAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gdHlwZS5rZXl9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dHlwZS5sYWJlbH1cbiAgICAgICAgICAgIDwvUmFkaW8+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aHIgLz5cbiAgICAgICAgPEZpZWxkc2V0IGl0ZW09e2RhdGFzb3VyY2V9IG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX0gY29tcGFjdD5cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy52aXJ0dWFsLmtleSAmJiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgZmllbGRLZXk9XCJkYXRhYmFzZVNlbGVjdG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17dCgnVmlydHVhbCcpfVxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgbWFyZ2luVG9wOiA4IH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0YWJhc2VTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiPXtkYXRhc291cmNlPy5kYXRhYmFzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRhbG9nPXtkYXRhc291cmNlLmNhdGFsb2d9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hPXtkYXRhc291cmNlLnNjaGVtYX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNhdGFsb2dDaGFuZ2U9e2NhdGFsb2cgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdjYXRhbG9nJywgY2F0YWxvZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TY2hlbWFDaGFuZ2U9e3NjaGVtYSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3NjaGVtYScsIHNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EYkNoYW5nZT17ZGF0YWJhc2UgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdkYXRhYmFzZScsIGRhdGFiYXNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtTW9kZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXJyb3I9e3RoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXt7IHdpZHRoOiAnY2FsYygxMDAlIC0gMzRweCknLCBtYXJnaW5Ub3A6IC0xNiB9fT5cbiAgICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17dCgnTmFtZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInRhYmxlX25hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0YWJsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3RhYmxlX25hbWUnLCB0YWJsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnRGF0YXNldCBuYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInNxbFwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdTUUwnKX1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICAgICAgJ1doZW4gc3BlY2lmeWluZyBTUUwsIHRoZSBkYXRhc291cmNlIGFjdHMgYXMgYSB2aWV3LiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdTdXBlcnNldCB3aWxsIHVzZSB0aGlzIHN0YXRlbWVudCBhcyBhIHN1YnF1ZXJ5IHdoaWxlIGdyb3VwaW5nIGFuZCBmaWx0ZXJpbmcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnb24gdGhlIGdlbmVyYXRlZCBwYXJlbnQgcXVlcmllcy4nLFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT1cInNxbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkxpbmVzPXsyMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heExpbmVzPXtJbmZpbml0eX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwiYm90aFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwT3B0aW9ucz17c3FsVG9vbHRpcE9wdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3RoaXMuc3RhdGUuZGF0YXNvdXJjZVR5cGUgPT09IERBVEFTT1VSQ0VfVFlQRVMucGh5c2ljYWwua2V5ICYmIChcbiAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0YWJsZVNlbGVjdG9yXCJcbiAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdQaHlzaWNhbCcpfVxuICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXt7IG1hcmdpblRvcDogOCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICA8VGFibGVTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFzb3VyY2UuZGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlX25hbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZS5kYXRhYmFzZT8uZGF0YWJhc2VfbmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzb3VyY2UuZGF0YWJhc2U/Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGJJZD17ZGF0YXNvdXJjZS5kYXRhYmFzZT8uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcj17dGhpcy5wcm9wcy5hZGREYW5nZXJUb2FzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGFsb2c9e2RhdGFzb3VyY2UuY2F0YWxvZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYT17ZGF0YXNvdXJjZS5zY2hlbWF9XG4gICAgICAgICAgICAgICAgICAgICAgICBzcWxMYWJNb2RlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlVmFsdWU9e2RhdGFzb3VyY2UudGFibGVfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2F0YWxvZ0NoYW5nZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY2F0YWxvZyA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ2NhdGFsb2cnLCBjYXRhbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblNjaGVtYUNoYW5nZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2NoZW1hID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgnc2NoZW1hJywgc2NoZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRiQ2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBkYXRhYmFzZSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGFiYXNlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblRhYmxlU2VsZWN0Q2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0YWJsZSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3RhYmxlX25hbWUnLCB0YWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICAgJ1RoZSBwb2ludGVyIHRvIGEgcGh5c2ljYWwgdGFibGUgKG9yIHZpZXcpLiBLZWVwIGluIG1pbmQgdGhhdCB0aGUgY2hhcnQgaXMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ2Fzc29jaWF0ZWQgdG8gdGhpcyBTdXBlcnNldCBsb2dpY2FsIHRhYmxlLCBhbmQgdGhpcyBsb2dpY2FsIHRhYmxlIHBvaW50cyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAndGhlIHBoeXNpY2FsIHRhYmxlIHJlZmVyZW5jZWQgaGVyZS4nLFxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9Db2w+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9GaWVsZHNldD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJFcnJvcnMoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxBbGVydFxuICAgICAgICAgIGNzcz17dGhlbWUgPT4gKHsgbWFyZ2luQm90dG9tOiB0aGVtZS5ncmlkVW5pdCAqIDQgfSl9XG4gICAgICAgICAgdHlwZT1cImVycm9yXCJcbiAgICAgICAgICBtZXNzYWdlPXtcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVycm9ycy5tYXAoZXJyID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17ZXJyfT57ZXJyfTwvZGl2PlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmVuZGVyTWV0cmljQ29sbGVjdGlvbigpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBtZXRyaWNzIH0gPSBkYXRhc291cmNlO1xuICAgIGNvbnN0IHNvcnRlZE1ldHJpY3MgPSBtZXRyaWNzPy5sZW5ndGggPyB0aGlzLnNvcnRNZXRyaWNzKG1ldHJpY3MpIDogW107XG4gICAgcmV0dXJuIChcbiAgICAgIDxDb2xsZWN0aW9uVGFibGVcbiAgICAgICAgdGFibGVDb2x1bW5zPXtbJ21ldHJpY19uYW1lJywgJ3ZlcmJvc2VfbmFtZScsICdleHByZXNzaW9uJ119XG4gICAgICAgIHNvcnRDb2x1bW5zPXtbJ21ldHJpY19uYW1lJywgJ3ZlcmJvc2VfbmFtZScsICdleHByZXNzaW9uJ119XG4gICAgICAgIGNvbHVtbkxhYmVscz17e1xuICAgICAgICAgIG1ldHJpY19uYW1lOiB0KCdNZXRyaWMgS2V5JyksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiB0KCdMYWJlbCcpLFxuICAgICAgICAgIGV4cHJlc3Npb246IHQoJ1NRTCBleHByZXNzaW9uJyksXG4gICAgICAgIH19XG4gICAgICAgIGNvbHVtbkxhYmVsVG9vbHRpcHM9e3tcbiAgICAgICAgICBtZXRyaWNfbmFtZTogdChcbiAgICAgICAgICAgICdUaGlzIGZpZWxkIGlzIHVzZWQgYXMgYSB1bmlxdWUgaWRlbnRpZmllciB0byBhdHRhY2ggJyArXG4gICAgICAgICAgICAgICd0aGUgbWV0cmljIHRvIGNoYXJ0cy4gSXQgaXMgYWxzbyB1c2VkIGFzIHRoZSBhbGlhcyBpbiB0aGUgJyArXG4gICAgICAgICAgICAgICdTUUwgcXVlcnkuJyxcbiAgICAgICAgICApLFxuICAgICAgICB9fVxuICAgICAgICBleHBhbmRGaWVsZHNldD17XG4gICAgICAgICAgPEZvcm1Db250YWluZXI+XG4gICAgICAgICAgICA8RmllbGRzZXQgY29tcGFjdD5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImQzZm9ybWF0XCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRDMgZm9ybWF0Jyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2wgY29udHJvbElkPVwiZDNmb3JtYXRcIiBwbGFjZWhvbGRlcj1cIiV5LyVtLyVkXCIgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiY3VycmVuY3lcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdNZXRyaWMgY3VycmVuY3knKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxDdXJyZW5jeUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lTZWxlY3RPdmVycmlkZVByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHQoJ1NlbGVjdCBvciB0eXBlIGN1cnJlbmN5IHN5bWJvbCcpLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBzeW1ib2xTZWxlY3RBZGRpdGlvbmFsU3R5bGVzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICdQZXJzb24gb3IgZ3JvdXAgdGhhdCBoYXMgY2VydGlmaWVkIHRoaXMgbWV0cmljJyxcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdDZXJ0aWZpZWQgYnknKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdEZXRhaWxzIG9mIHRoZSBjZXJ0aWZpY2F0aW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWNhdGlvbl9kZXRhaWxzXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdXYXJuaW5nJyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ3YXJuaW5nX21hcmtkb3duXCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnT3B0aW9uYWwgd2FybmluZyBhYm91dCB1c2Ugb2YgdGhpcyBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwid2FybmluZ19tYXJrZG93blwiXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgICAgIDwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgfVxuICAgICAgICBjb2xsZWN0aW9uPXtzb3J0ZWRNZXRyaWNzfVxuICAgICAgICBhbGxvd0FkZEl0ZW1cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlUHJvcENoYW5nZS5iaW5kKHRoaXMsICdtZXRyaWNzJyl9XG4gICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgbWV0cmljX25hbWU6IHQoJzxuZXcgbWV0cmljPicpLFxuICAgICAgICAgIHZlcmJvc2VfbmFtZTogJycsXG4gICAgICAgICAgZXhwcmVzc2lvbjogJycsXG4gICAgICAgIH0pfVxuICAgICAgICBpdGVtQ2VsbFByb3BzPXt7XG4gICAgICAgICAgZXhwcmVzc2lvbjogKCkgPT4gKHtcbiAgICAgICAgICAgIHdpZHRoOiAnMjQwcHgnLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9fVxuICAgICAgICBpdGVtUmVuZGVyZXJzPXt7XG4gICAgICAgICAgbWV0cmljX25hbWU6ICh2LCBvbkNoYW5nZSwgXywgcmVjb3JkKSA9PiAoXG4gICAgICAgICAgICA8RmxleFJvd0NvbnRhaW5lcj5cbiAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtyZWNvcmQud2FybmluZ19tYXJrZG93biAmJiAoXG4gICAgICAgICAgICAgICAgPFdhcm5pbmdJY29uV2l0aFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHdhcm5pbmdNYXJrZG93bj17cmVjb3JkLndhcm5pbmdfbWFya2Rvd259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGUgY2FuRWRpdCB0aXRsZT17dn0gb25TYXZlVGl0bGU9e29uQ2hhbmdlfSAvPlxuICAgICAgICAgICAgPC9GbGV4Um93Q29udGFpbmVyPlxuICAgICAgICAgICksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjYW5FZGl0IHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBleHByZXNzaW9uOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgY2FuRWRpdFxuICAgICAgICAgICAgICBpbml0aWFsVmFsdWU9e3Z9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzPXtbJ2RhdGFzb3VyY2Utc3FsLWV4cHJlc3Npb24nXX1cbiAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJzcWxcIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgbWluTGluZXM9ezV9XG4gICAgICAgICAgICAgIHRleHRBcmVhU3R5bGVzPXt7IG1pbldpZHRoOiAnMjAwcHgnLCBtYXhXaWR0aDogJzQ1MHB4JyB9fVxuICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogKHYsIG9uQ2hhbmdlLCBsYWJlbCkgPT4gKFxuICAgICAgICAgICAgPFN0YWNrZWRGaWVsZFxuICAgICAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50PXs8VGV4dENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz59XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICksXG4gICAgICAgICAgZDNmb3JtYXQ6ICh2LCBvbkNoYW5nZSwgbGFiZWwpID0+IChcbiAgICAgICAgICAgIDxTdGFja2VkRmllbGRcbiAgICAgICAgICAgICAgbGFiZWw9e2xhYmVsfVxuICAgICAgICAgICAgICBmb3JtRWxlbWVudD17PFRleHRDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApLFxuICAgICAgICB9fVxuICAgICAgICBhbGxvd0RlbGV0ZXNcbiAgICAgICAgc3RpY2t5SGVhZGVyXG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlLCBhY3RpdmVUYWJLZXkgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBtZXRyaWNzIH0gPSBkYXRhc291cmNlO1xuICAgIGNvbnN0IHNvcnRlZE1ldHJpY3MgPSBtZXRyaWNzPy5sZW5ndGggPyB0aGlzLnNvcnRNZXRyaWNzKG1ldHJpY3MpIDogW107XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8RGF0YXNvdXJjZUNvbnRhaW5lciBkYXRhLXRlc3Q9XCJkYXRhc291cmNlLWVkaXRvclwiPlxuICAgICAgICB7dGhpcy5yZW5kZXJFcnJvcnMoKX1cbiAgICAgICAgPEFsZXJ0XG4gICAgICAgICAgY3NzPXt0aGVtZSA9PiAoeyBtYXJnaW5Cb3R0b206IHRoZW1lLmdyaWRVbml0ICogNCB9KX1cbiAgICAgICAgICB0eXBlPVwid2FybmluZ1wiXG4gICAgICAgICAgbWVzc2FnZT17XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7JyAnfVxuICAgICAgICAgICAgICA8c3Ryb25nPnt0KCdCZSBjYXJlZnVsLicpfSA8L3N0cm9uZz5cbiAgICAgICAgICAgICAge3QoXG4gICAgICAgICAgICAgICAgJ0NoYW5naW5nIHRoZXNlIHNldHRpbmdzIHdpbGwgYWZmZWN0IGFsbCBjaGFydHMgdXNpbmcgdGhpcyBkYXRhc2V0LCBpbmNsdWRpbmcgY2hhcnRzIG93bmVkIGJ5IG90aGVyIHBlb3BsZS4nLFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgICA8U3R5bGVkVGFibGVUYWJzXG4gICAgICAgICAgZnVsbFdpZHRoPXtmYWxzZX1cbiAgICAgICAgICBpZD1cInRhYmxlLXRhYnNcIlxuICAgICAgICAgIGRhdGEtdGVzdD1cImVkaXQtZGF0YXNldC10YWJzXCJcbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVUYWJTZWxlY3R9XG4gICAgICAgICAgZGVmYXVsdEFjdGl2ZUtleT17YWN0aXZlVGFiS2V5fVxuICAgICAgICA+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSBrZXk9ezB9IHRhYj17dCgnU291cmNlJyl9PlxuICAgICAgICAgICAge3RoaXMucmVuZGVyU291cmNlRmllbGRzZXQodGhlbWUpfVxuICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICAgICAgIDxUYWJzLlRhYlBhbmVcbiAgICAgICAgICAgIHRhYj17XG4gICAgICAgICAgICAgIDxDb2xsZWN0aW9uVGFiVGl0bGVcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uPXtzb3J0ZWRNZXRyaWNzfVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdNZXRyaWNzJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezF9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3RoaXMucmVuZGVyTWV0cmljQ29sbGVjdGlvbigpfVxuICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICAgICAgIDxUYWJzLlRhYlBhbmVcbiAgICAgICAgICAgIHRhYj17XG4gICAgICAgICAgICAgIDxDb2xsZWN0aW9uVGFiVGl0bGVcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uPXt0aGlzLnN0YXRlLmRhdGFiYXNlQ29sdW1uc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnQ29sdW1ucycpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5PXsyfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxTdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICAgICAgPENvbHVtbkJ1dHRvbldyYXBwZXI+XG4gICAgICAgICAgICAgICAgPFN0eWxlZEJ1dHRvbldyYXBwZXI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvblNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0eWxlPVwidGVydGlhcnlcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnN5bmNNZXRhZGF0YX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3luYy1mcm9tLXNvdXJjZVwiXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxJY29ucy5EYXRhYmFzZU91dGxpbmVkIGljb25TaXplPVwibVwiIC8+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdTeW5jIGNvbHVtbnMgZnJvbSBzb3VyY2UnKX1cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvU3R5bGVkQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgPC9Db2x1bW5CdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQ29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29sdW1ucy10YWJsZVwiXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnN9XG4gICAgICAgICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICAgICAgICBvbkNvbHVtbnNDaGFuZ2U9e2RhdGFiYXNlQ29sdW1ucyA9PlxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5zKHsgZGF0YWJhc2VDb2x1bW5zIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLm1ldGFkYXRhTG9hZGluZyAmJiA8TG9hZGluZyAvPn1cbiAgICAgICAgICAgIDwvU3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3RoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnN9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ0NhbGN1bGF0ZWQgY29sdW1ucycpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5PXszfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxTdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICAgICAgPENvbHVtbkNvbGxlY3Rpb25UYWJsZVxuICAgICAgICAgICAgICAgIGNvbHVtbnM9e3RoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnN9XG4gICAgICAgICAgICAgICAgb25Db2x1bW5zQ2hhbmdlPXtjYWxjdWxhdGVkQ29sdW1ucyA9PlxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5zKHsgY2FsY3VsYXRlZENvbHVtbnMgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29sdW1uTGFiZWxUb29sdGlwcz17e1xuICAgICAgICAgICAgICAgICAgY29sdW1uX25hbWU6IHQoXG4gICAgICAgICAgICAgICAgICAgICdUaGlzIGZpZWxkIGlzIHVzZWQgYXMgYSB1bmlxdWUgaWRlbnRpZmllciB0byBhdHRhY2ggJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ3RoZSBjYWxjdWxhdGVkIGRpbWVuc2lvbiB0byBjaGFydHMuIEl0IGlzIGFsc28gdXNlZCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAnYXMgdGhlIGFsaWFzIGluIHRoZSBTUUwgcXVlcnkuJyxcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lXG4gICAgICAgICAgICAgICAgc2hvd0V4cHJlc3Npb25cbiAgICAgICAgICAgICAgICBhbGxvd0FkZEl0ZW1cbiAgICAgICAgICAgICAgICBhbGxvd0VkaXREYXRhVHlwZVxuICAgICAgICAgICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnPG5ldyBjb2x1bW4+JyksXG4gICAgICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZ3JvdXBieTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IHQoJzxlbnRlciBTUUwgZXhwcmVzc2lvbiBoZXJlPicpLFxuICAgICAgICAgICAgICAgICAgX19leHBhbmRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvU3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSBrZXk9ezR9IHRhYj17dCgnU2V0dGluZ3MnKX0+XG4gICAgICAgICAgICA8Um93IGd1dHRlcj17MTZ9PlxuICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj57dGhpcy5yZW5kZXJTZXR0aW5nc0ZpZWxkc2V0KCl9PC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgICAgPEZvcm1Db250YWluZXI+e3RoaXMucmVuZGVyQWR2YW5jZWRGaWVsZHNldCgpfTwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPC9Db2w+XG4gICAgICAgICAgICA8L1Jvdz5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgPC9TdHlsZWRUYWJsZVRhYnM+XG4gICAgICA8L0RhdGFzb3VyY2VDb250YWluZXI+XG4gICAgKTtcbiAgfVxufVxuXG5EYXRhc291cmNlRWRpdG9yLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbkRhdGFzb3VyY2VFZGl0b3IucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuXG5jb25zdCBEYXRhU291cmNlQ29tcG9uZW50ID0gd2l0aFRoZW1lKERhdGFzb3VyY2VFZGl0b3IpO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoVG9hc3RzKERhdGFTb3VyY2VDb21wb25lbnQpO1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\nfunction CollectionTabTitle({ title, collection }) {\n  return (\n    _jsxs(\"div\", {\n      css: _ref,\n      \"data-test\": `collection-tab-${title}`, children: [\n\n      title, ' ',\n      _jsx(StyledBadge, { count: collection ? collection.length : 0, showZero: true })] }\n    ));\n\n}\n\nCollectionTabTitle.propTypes = {\n  title: PropTypes.string,\n  collection: PropTypes.array\n};\n\nfunction ColumnCollectionTable({\n  columns,\n  datasource,\n  onColumnsChange,\n  onDatasourceChange,\n  editableColumnName,\n  showExpression,\n  allowAddItem,\n  allowEditDataType,\n  itemGenerator,\n  columnLabelTooltips\n}) {\n  return (\n    _jsx(CollectionTable, {\n      tableColumns:\n      isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes) ?\n      [\n      'column_name',\n      'advanced_data_type',\n      'type',\n      'is_dttm',\n      'main_dttm_col',\n      'filterable',\n      'groupby'] :\n\n      [\n      'column_name',\n      'type',\n      'is_dttm',\n      'main_dttm_col',\n      'filterable',\n      'groupby'],\n\n\n      sortColumns:\n      isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes) ?\n      [\n      'column_name',\n      'advanced_data_type',\n      'type',\n      'is_dttm',\n      'main_dttm_col',\n      'filterable',\n      'groupby'] :\n\n      [\n      'column_name',\n      'type',\n      'is_dttm',\n      'main_dttm_col',\n      'filterable',\n      'groupby'],\n\n\n      allowDeletes: true,\n      allowAddItem: allowAddItem,\n      itemGenerator: itemGenerator,\n      collection: columns,\n      columnLabelTooltips: columnLabelTooltips,\n      stickyHeader: true,\n      expandFieldset:\n      _jsx(FormContainer, { children:\n        _jsxs(Fieldset, { compact: true, children: [\n          showExpression &&\n          _jsx(Field, {\n            fieldKey: \"expression\",\n            label: t('SQL expression'),\n            control:\n            _jsx(TextAreaControl, {\n              language: \"markdown\",\n              offerEditInModal: false,\n              resize: \"vertical\" }\n            ) }\n\n          ),\n\n          _jsx(Field, {\n            fieldKey: \"verbose_name\",\n            label: t('Label'),\n            control:\n            _jsx(TextControl, {\n              controlId: \"verbose_name\",\n              placeholder: t('Label') }\n            ) }\n\n          ),\n          _jsx(Field, {\n            fieldKey: \"description\",\n            label: t('Description'),\n            control:\n            _jsx(TextControl, {\n              controlId: \"description\",\n              placeholder: t('Description') }\n            ) }\n\n          ),\n          allowEditDataType &&\n          _jsx(Field, {\n            fieldKey: \"type\",\n            label: t('Data type'),\n            control:\n            _jsx(Select, {\n              ariaLabel: t('Data type'),\n              options: DATA_TYPES,\n              name: \"type\",\n              allowNewOptions: true,\n              allowClear: true }\n            ) }\n\n          ),\n\n          isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes) ?\n          _jsx(Field, {\n            fieldKey: \"advanced_data_type\",\n            label: t('Advanced data type'),\n            control:\n            _jsx(TextControl, {\n              controlId: \"advanced_data_type\",\n              placeholder: t('Advanced Data type') }\n            ) }\n\n          ) :\n\n          _jsx(_Fragment, {}),\n\n          _jsx(Field, {\n            fieldKey: \"python_date_format\",\n            label: t('Datetime format'),\n            description:\n            /* Note the fragmented translations may not work. */\n            _jsxs(\"div\", { children: [\n              t('The pattern of timestamp format. For strings use '),\n              _jsx(\"a\", { href: \"https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior\", children:\n                t('Python datetime string pattern') }\n              ),\n              t(' expression which needs to adhere to the '),\n              _jsx(\"a\", { href: \"https://en.wikipedia.org/wiki/ISO_8601\", children:\n                t('ISO 8601') }\n              ),\n              t(` standard to ensure that the lexicographical ordering\n                      coincides with the chronological ordering. If the\n                      timestamp format does not adhere to the ISO 8601 standard\n                      you will need to define an expression and type for\n                      transforming the string into a date or timestamp. Note\n                      currently time zones are not supported. If time is stored\n                      in epoch format, put \\`epoch_s\\` or \\`epoch_ms\\`. If no pattern\n                      is specified we fall back to using the optional defaults on a per\n                      database/column name level via the extra parameter.`)] }\n            ),\n\n            control:\n            _jsx(TextControl, {\n              controlId: \"python_date_format\",\n              placeholder: \"%Y-%m-%d\" }\n            ) }\n\n          ),\n          _jsx(Field, {\n            fieldKey: \"certified_by\",\n            label: t('Certified By'),\n            description: t('Person or group that has certified this metric'),\n            control:\n            _jsx(TextControl, {\n              controlId: \"certified\",\n              placeholder: t('Certified by') }\n            ) }\n\n          ),\n          _jsx(Field, {\n            fieldKey: \"certification_details\",\n            label: t('Certification details'),\n            description: t('Details of the certification'),\n            control:\n            _jsx(TextControl, {\n              controlId: \"certificationDetails\",\n              placeholder: t('Certification details') }\n            ) }\n\n          )] }\n        ) }\n      ),\n\n      columnLabels:\n      isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes) ?\n      {\n        column_name: t('Column'),\n        advanced_data_type: t('Advanced data type'),\n        type: t('Data type'),\n        groupby: t('Is dimension'),\n        is_dttm: t('Is temporal'),\n        main_dttm_col: t('Default datetime'),\n        filterable: t('Is filterable')\n      } :\n      {\n        column_name: t('Column'),\n        type: t('Data type'),\n        groupby: t('Is dimension'),\n        is_dttm: t('Is temporal'),\n        main_dttm_col: t('Default datetime'),\n        filterable: t('Is filterable')\n      },\n\n      onChange: onColumnsChange,\n      itemRenderers:\n      isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes) ?\n      {\n        column_name: (v, onItemChange, _, record) =>\n        editableColumnName ?\n        _jsxs(StyledLabelWrapper, { children: [\n          record.is_certified &&\n          _jsx(CertifiedBadge, {\n            certifiedBy: record.certified_by,\n            details: record.certification_details }\n          ),\n\n          _jsx(EditableTitle, {\n            canEdit: true,\n            title: v,\n            onSaveTitle: onItemChange }\n          )] }\n        ) :\n\n        _jsxs(StyledLabelWrapper, { children: [\n          record.is_certified &&\n          _jsx(CertifiedBadge, {\n            certifiedBy: record.certified_by,\n            details: record.certification_details }\n          ),\n\n          v] }\n        ),\n\n        main_dttm_col: (value, _onItemChange, _label, record) => {\n          const checked = datasource.main_dttm_col === record.column_name;\n          const disabled = !columns.find(\n            (column) => column.column_name === record.column_name\n          ).is_dttm;\n          return (\n            _jsx(Radio, {\n              \"data-test\": `radio-default-dttm-${record.column_name}`,\n              checked: checked,\n              disabled: disabled,\n              onChange: () =>\n              onDatasourceChange({\n                ...datasource,\n                main_dttm_col: record.column_name\n              }) }\n\n            ));\n\n        },\n        type: (d) => d ? _jsx(Label, { children: d }) : null,\n        advanced_data_type: (d) =>\n        _jsx(Label, { onChange: onColumnsChange, children: d }),\n\n        is_dttm: checkboxGenerator,\n        filterable: checkboxGenerator,\n        groupby: checkboxGenerator\n      } :\n      {\n        column_name: (v, onItemChange, _, record) =>\n        editableColumnName ?\n        _jsxs(StyledLabelWrapper, { children: [\n          record.is_certified &&\n          _jsx(CertifiedBadge, {\n            certifiedBy: record.certified_by,\n            details: record.certification_details }\n          ),\n\n          _jsx(TextControl, { value: v, onChange: onItemChange })] }\n        ) :\n\n        _jsxs(StyledLabelWrapper, { children: [\n          record.is_certified &&\n          _jsx(CertifiedBadge, {\n            certifiedBy: record.certified_by,\n            details: record.certification_details }\n          ),\n\n          v] }\n        ),\n\n        main_dttm_col: (value, _onItemChange, _label, record) => {\n          const checked = datasource.main_dttm_col === record.column_name;\n          const disabled = !columns.find(\n            (column) => column.column_name === record.column_name\n          ).is_dttm;\n          return (\n            _jsx(Radio, {\n              \"data-test\": `radio-default-dttm-${record.column_name}`,\n              checked: checked,\n              disabled: disabled,\n              onChange: () =>\n              onDatasourceChange({\n                ...datasource,\n                main_dttm_col: record.column_name\n              }) }\n\n            ));\n\n        },\n        type: (d) => d ? _jsx(Label, { children: d }) : null,\n        is_dttm: checkboxGenerator,\n        filterable: checkboxGenerator,\n        groupby: checkboxGenerator\n      } }\n\n    ));\n\n}\nColumnCollectionTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  datasource: PropTypes.object.isRequired,\n  onColumnsChange: PropTypes.func.isRequired,\n  onDatasourceChange: PropTypes.func.isRequired,\n  editableColumnName: PropTypes.bool,\n  showExpression: PropTypes.bool,\n  allowAddItem: PropTypes.bool,\n  allowEditDataType: PropTypes.bool,\n  itemGenerator: PropTypes.func\n};\nColumnCollectionTable.defaultProps = {\n  editableColumnName: false,\n  showExpression: false,\n  allowAddItem: false,\n  allowEditDataType: false,\n  itemGenerator: () => ({\n    column_name: t('<new column>'),\n    filterable: true,\n    groupby: true\n  })\n};\n\nfunction StackedField({ label, formElement }) {\n  return (\n    _jsxs(\"div\", { children: [\n      _jsx(\"div\", { children:\n        _jsx(\"strong\", { children: label }) }\n      ),\n      _jsx(\"div\", { children: formElement })] }\n    ));\n\n}\n\nStackedField.propTypes = {\n  label: PropTypes.string,\n  formElement: PropTypes.node\n};\n\nfunction FormContainer({ children }) {\n  return _jsx(Card, { padded: true, children: children });\n}\n\nFormContainer.propTypes = {\n  children: PropTypes.node\n};\n\nconst propTypes = {\n  datasource: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  setIsEditing: PropTypes.func\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  setIsEditing: () => {}\n};\n\nfunction OwnersSelector({ datasource, onChange }) {\n  const loadOptions = useCallback((search = '', page, pageSize) => {\n    const query = rison.encode({ filter: search, page, page_size: pageSize });\n    return SupersetClient.get({\n      endpoint: `/api/v1/dataset/related/owners?q=${query}`\n    }).then((response) => ({\n      data: response.json.result.\n      filter((item) => item.extra.active).\n      map((item) => ({\n        value: item.value,\n        label: item.text\n      })),\n      totalCount: response.json.count\n    }));\n  }, []);\n\n  return (\n    _jsx(AsyncSelect, {\n      ariaLabel: t('Select owners'),\n      mode: \"multiple\",\n      name: \"owners\",\n      value: datasource.owners,\n      options: loadOptions,\n      onChange: onChange,\n      header: _jsx(FormLabel, { children: t('Owners') }),\n      allowClear: true }\n    ));\n\n}__signature__(OwnersSelector, \"useCallback{loadOptions}\");var _ref2 = process.env.NODE_ENV === \"production\" ? { name: \"hkh81z\", styles: \"margin-top:8px\" } : { name: \"17jm38f-DatasourceEditor\", styles: \"margin-top:8px;label:DatasourceEditor;/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9EYXRhc291cmNlL0RhdGFzb3VyY2VFZGl0b3IuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW1nQzZCIiwiZmlsZSI6Ii9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9EYXRhc291cmNlL0RhdGFzb3VyY2VFZGl0b3IuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uJztcbmltcG9ydCB7IFB1cmVDb21wb25lbnQsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IFJhZGlvIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvUmFkaW8nO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgQWxlcnQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQWxlcnQnO1xuaW1wb3J0IEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0JhZGdlJztcbmltcG9ydCB7XG4gIGNzcyxcbiAgaXNGZWF0dXJlRW5hYmxlZCxcbiAgZ2V0Q3VycmVuY3lTeW1ib2wsXG4gIGVuc3VyZUlzQXJyYXksXG4gIEZlYXR1cmVGbGFnLFxuICBzdHlsZWQsXG4gIFN1cGVyc2V0Q2xpZW50LFxuICB0LFxuICB3aXRoVGhlbWUsXG4gIGdldENsaWVudEVycm9yT2JqZWN0LFxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBTZWxlY3QsIEFzeW5jU2VsZWN0LCBSb3csIENvbCB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcbmltcG9ydCB7IEZvcm1MYWJlbCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0Zvcm0nO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IFRhYnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFicyc7XG5pbXBvcnQgQ2VydGlmaWVkQmFkZ2UgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2VydGlmaWVkQmFkZ2UnO1xuaW1wb3J0IFdhcm5pbmdJY29uV2l0aFRvb2x0aXAgZnJvbSAnc3JjL2NvbXBvbmVudHMvV2FybmluZ0ljb25XaXRoVG9vbHRpcCc7XG5pbXBvcnQgRGF0YWJhc2VTZWxlY3RvciBmcm9tICdzcmMvY29tcG9uZW50cy9EYXRhYmFzZVNlbGVjdG9yJztcbmltcG9ydCBMYWJlbCBmcm9tICdzcmMvY29tcG9uZW50cy9MYWJlbCc7XG5pbXBvcnQgTG9hZGluZyBmcm9tICdzcmMvY29tcG9uZW50cy9Mb2FkaW5nJztcbmltcG9ydCBUYWJsZVNlbGVjdG9yIGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYmxlU2VsZWN0b3InO1xuaW1wb3J0IEVkaXRhYmxlVGl0bGUgZnJvbSAnc3JjL2NvbXBvbmVudHMvRWRpdGFibGVUaXRsZSc7XG5pbXBvcnQgQ2hlY2tib3hDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvQ2hlY2tib3hDb250cm9sJztcbmltcG9ydCBUZXh0Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1RleHRDb250cm9sJztcbmltcG9ydCBUZXh0QXJlYUNvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0QXJlYUNvbnRyb2wnO1xuaW1wb3J0IFNwYXRpYWxDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvU3BhdGlhbENvbnRyb2wnO1xuaW1wb3J0IHdpdGhUb2FzdHMgZnJvbSAnc3JjL2NvbXBvbmVudHMvTWVzc2FnZVRvYXN0cy93aXRoVG9hc3RzJztcbmltcG9ydCB7IEljb25zIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IEN1cnJlbmN5Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0N1cnJlbmN5Q29udHJvbCc7XG5pbXBvcnQgQ29sbGVjdGlvblRhYmxlIGZyb20gJy4vQ29sbGVjdGlvblRhYmxlJztcbmltcG9ydCBGaWVsZHNldCBmcm9tICcuL0ZpZWxkc2V0JztcbmltcG9ydCBGaWVsZCBmcm9tICcuL0ZpZWxkJztcbmltcG9ydCB7IGZldGNoU3luY2VkQ29sdW1ucywgdXBkYXRlQ29sdW1ucyB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBEYXRhc291cmNlQ29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgLmNoYW5nZS13YXJuaW5nIHtcbiAgICBtYXJnaW46IDE2cHggMTBweCAwO1xuICAgIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy53YXJuaW5nLmJhc2V9O1xuICB9XG5cbiAgLmNoYW5nZS13YXJuaW5nIC5ib2xkIHtcbiAgICBmb250LXdlaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMuYm9sZH07XG4gIH1cblxuICAuZm9ybS1ncm91cC5oYXMtZmVlZGJhY2sgPiAuaGVscC1ibG9jayB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICB9XG5cbiAgLmZvcm0tZ3JvdXAuZm9ybS1ncm91cC1tZCB7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICB9XG5gO1xuXG5jb25zdCBGbGV4Um93Q29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcblxuICBzdmcge1xuICAgIG1hcmdpbi1yaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkVGFibGVUYWJzID0gc3R5bGVkKFRhYnMpYFxuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgLmFudC10YWJzLWNvbnRlbnQtaG9sZGVyIHtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkQmFkZ2UgPSBzdHlsZWQoQmFkZ2UpYFxuICAuYW50ZDUtYmFkZ2UtY291bnQge1xuICAgIGxpbmUtaGVpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBoZWlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA0fXB4O1xuICAgIG1hcmdpbi1sZWZ0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBFZGl0TG9ja0NvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGZvbnQtc2l6ZTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGEge1xuICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgfVxuYDtcblxuY29uc3QgQ29sdW1uQnV0dG9uV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICAkeyh7IHRoZW1lIH0pID0+IGBtYXJnaW4tYm90dG9tOiAke3RoZW1lLmdyaWRVbml0ICogMn1weGB9XG5gO1xuXG5jb25zdCBTdHlsZWRMYWJlbFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBzcGFuIHtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgLnRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICB9XG5cbiAgLmFudC10YWcge1xuICAgIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZEJ1dHRvbldyYXBwZXIgPSBzdHlsZWQuc3BhbmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgbWFyZ2luLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHg7XG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiAzfXB4O1xuICAgIGJ1dHRvbj5zcGFuPjpmaXJzdC1vZi10eXBlIHtcbiAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICB9XG4gIGB9XG5gO1xuXG5jb25zdCBzcWxUb29sdGlwT3B0aW9ucyA9IHtcbiAgcGxhY2VtZW50OiAndG9wUmlnaHQnLFxuICB0aXRsZTogdChcbiAgICAnSWYgY2hhbmdlcyBhcmUgbWFkZSB0byB5b3VyIFNRTCBxdWVyeSwgJyArXG4gICAgICAnY29sdW1ucyBpbiB5b3VyIGRhdGFzZXQgd2lsbCBiZSBzeW5jZWQgd2hlbiBzYXZpbmcgdGhlIGRhdGFzZXQuJyxcbiAgKSxcbn07XG5cbmNvbnN0IGNoZWNrYm94R2VuZXJhdG9yID0gKGQsIG9uQ2hhbmdlKSA9PiAoXG4gIDxDaGVja2JveENvbnRyb2wgdmFsdWU9e2R9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz5cbik7XG5jb25zdCBEQVRBX1RZUEVTID0gW1xuICB7IHZhbHVlOiAnU1RSSU5HJywgbGFiZWw6IHQoJ1NUUklORycpIH0sXG4gIHsgdmFsdWU6ICdOVU1FUklDJywgbGFiZWw6IHQoJ05VTUVSSUMnKSB9LFxuICB7IHZhbHVlOiAnREFURVRJTUUnLCBsYWJlbDogdCgnREFURVRJTUUnKSB9LFxuICB7IHZhbHVlOiAnQk9PTEVBTicsIGxhYmVsOiB0KCdCT09MRUFOJykgfSxcbl07XG5cbmNvbnN0IERBVEFTT1VSQ0VfVFlQRVNfQVJSID0gW1xuICB7IGtleTogJ3BoeXNpY2FsJywgbGFiZWw6IHQoJ1BoeXNpY2FsICh0YWJsZSBvciB2aWV3KScpIH0sXG4gIHsga2V5OiAndmlydHVhbCcsIGxhYmVsOiB0KCdWaXJ0dWFsIChTUUwpJykgfSxcbl07XG5jb25zdCBEQVRBU09VUkNFX1RZUEVTID0ge307XG5EQVRBU09VUkNFX1RZUEVTX0FSUi5mb3JFYWNoKG8gPT4ge1xuICBEQVRBU09VUkNFX1RZUEVTW28ua2V5XSA9IG87XG59KTtcblxuZnVuY3Rpb24gQ29sbGVjdGlvblRhYlRpdGxlKHsgdGl0bGUsIGNvbGxlY3Rpb24gfSkge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNzcz17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19XG4gICAgICBkYXRhLXRlc3Q9e2Bjb2xsZWN0aW9uLXRhYi0ke3RpdGxlfWB9XG4gICAgPlxuICAgICAge3RpdGxlfXsnICd9XG4gICAgICA8U3R5bGVkQmFkZ2UgY291bnQ9e2NvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDB9IHNob3daZXJvIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbkNvbGxlY3Rpb25UYWJUaXRsZS5wcm9wVHlwZXMgPSB7XG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb2xsZWN0aW9uOiBQcm9wVHlwZXMuYXJyYXksXG59O1xuXG5mdW5jdGlvbiBDb2x1bW5Db2xsZWN0aW9uVGFibGUoe1xuICBjb2x1bW5zLFxuICBkYXRhc291cmNlLFxuICBvbkNvbHVtbnNDaGFuZ2UsXG4gIG9uRGF0YXNvdXJjZUNoYW5nZSxcbiAgZWRpdGFibGVDb2x1bW5OYW1lLFxuICBzaG93RXhwcmVzc2lvbixcbiAgYWxsb3dBZGRJdGVtLFxuICBhbGxvd0VkaXREYXRhVHlwZSxcbiAgaXRlbUdlbmVyYXRvcixcbiAgY29sdW1uTGFiZWxUb29sdGlwcyxcbn0pIHtcbiAgcmV0dXJuIChcbiAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICB0YWJsZUNvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgc29ydENvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgYWxsb3dEZWxldGVzXG4gICAgICBhbGxvd0FkZEl0ZW09e2FsbG93QWRkSXRlbX1cbiAgICAgIGl0ZW1HZW5lcmF0b3I9e2l0ZW1HZW5lcmF0b3J9XG4gICAgICBjb2xsZWN0aW9uPXtjb2x1bW5zfVxuICAgICAgY29sdW1uTGFiZWxUb29sdGlwcz17Y29sdW1uTGFiZWxUb29sdGlwc31cbiAgICAgIHN0aWNreUhlYWRlclxuICAgICAgZXhwYW5kRmllbGRzZXQ9e1xuICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICA8RmllbGRzZXQgY29tcGFjdD5cbiAgICAgICAgICAgIHtzaG93RXhwcmVzc2lvbiAmJiAoXG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZXhwcmVzc2lvblwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCBleHByZXNzaW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwidmVyYm9zZV9uYW1lXCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0xhYmVsJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidmVyYm9zZV9uYW1lXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdMYWJlbCcpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7YWxsb3dFZGl0RGF0YVR5cGUgJiYgKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cInR5cGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17REFUQV9UWVBFU31cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cInR5cGVcIlxuICAgICAgICAgICAgICAgICAgICBhbGxvd05ld09wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2lzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRW5hYmxlQWR2YW5jZWREYXRhVHlwZXMpID8gKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImFkdmFuY2VkX2RhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0FkdmFuY2VkIGRhdGEgdHlwZScpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImFkdmFuY2VkX2RhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdBZHZhbmNlZCBEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPD48Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJweXRob25fZGF0ZV9mb3JtYXRcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0ZXRpbWUgZm9ybWF0Jyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtcbiAgICAgICAgICAgICAgICAvKiBOb3RlIHRoZSBmcmFnbWVudGVkIHRyYW5zbGF0aW9ucyBtYXkgbm90IHdvcmsuICovXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIHt0KCdUaGUgcGF0dGVybiBvZiB0aW1lc3RhbXAgZm9ybWF0LiBGb3Igc3RyaW5ncyB1c2UgJyl9XG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMi9saWJyYXJ5L2RhdGV0aW1lLmh0bWwjc3RyZnRpbWUtc3RycHRpbWUtYmVoYXZpb3JcIj5cbiAgICAgICAgICAgICAgICAgICAge3QoJ1B5dGhvbiBkYXRldGltZSBzdHJpbmcgcGF0dGVybicpfVxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAge3QoJyBleHByZXNzaW9uIHdoaWNoIG5lZWRzIHRvIGFkaGVyZSB0byB0aGUgJyl9XG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDFcIj5cbiAgICAgICAgICAgICAgICAgICAge3QoJ0lTTyA4NjAxJyl9XG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICB7dChgIHN0YW5kYXJkIHRvIGVuc3VyZSB0aGF0IHRoZSBsZXhpY29ncmFwaGljYWwgb3JkZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgICBjb2luY2lkZXMgd2l0aCB0aGUgY2hyb25vbG9naWNhbCBvcmRlcmluZy4gSWYgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wIGZvcm1hdCBkb2VzIG5vdCBhZGhlcmUgdG8gdGhlIElTTyA4NjAxIHN0YW5kYXJkXG4gICAgICAgICAgICAgICAgICAgICAgeW91IHdpbGwgbmVlZCB0byBkZWZpbmUgYW4gZXhwcmVzc2lvbiBhbmQgdHlwZSBmb3JcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1pbmcgdGhlIHN0cmluZyBpbnRvIGEgZGF0ZSBvciB0aW1lc3RhbXAuIE5vdGVcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHkgdGltZSB6b25lcyBhcmUgbm90IHN1cHBvcnRlZC4gSWYgdGltZSBpcyBzdG9yZWRcbiAgICAgICAgICAgICAgICAgICAgICBpbiBlcG9jaCBmb3JtYXQsIHB1dCBcXGBlcG9jaF9zXFxgIG9yIFxcYGVwb2NoX21zXFxgLiBJZiBubyBwYXR0ZXJuXG4gICAgICAgICAgICAgICAgICAgICAgaXMgc3BlY2lmaWVkIHdlIGZhbGwgYmFjayB0byB1c2luZyB0aGUgb3B0aW9uYWwgZGVmYXVsdHMgb24gYSBwZXJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZS9jb2x1bW4gbmFtZSBsZXZlbCB2aWEgdGhlIGV4dHJhIHBhcmFtZXRlci5gKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInB5dGhvbl9kYXRlX2Zvcm1hdFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIiVZLSVtLSVkXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmllZCBCeScpfVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnUGVyc29uIG9yIGdyb3VwIHRoYXQgaGFzIGNlcnRpZmllZCB0aGlzIG1ldHJpYycpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmllZFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWVkIGJ5Jyl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0RldGFpbHMgb2YgdGhlIGNlcnRpZmljYXRpb24nKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpY2F0aW9uRGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgICA8L0Zvcm1Db250YWluZXI+XG4gICAgICB9XG4gICAgICBjb2x1bW5MYWJlbHM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnQ29sdW1uJyksXG4gICAgICAgICAgICAgIGFkdmFuY2VkX2RhdGFfdHlwZTogdCgnQWR2YW5jZWQgZGF0YSB0eXBlJyksXG4gICAgICAgICAgICAgIHR5cGU6IHQoJ0RhdGEgdHlwZScpLFxuICAgICAgICAgICAgICBncm91cGJ5OiB0KCdJcyBkaW1lbnNpb24nKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogdCgnSXMgdGVtcG9yYWwnKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogdCgnRGVmYXVsdCBkYXRldGltZScpLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0KCdJcyBmaWx0ZXJhYmxlJyksXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiB0KCdDb2x1bW4nKSxcbiAgICAgICAgICAgICAgdHlwZTogdCgnRGF0YSB0eXBlJyksXG4gICAgICAgICAgICAgIGdyb3VwYnk6IHQoJ0lzIGRpbWVuc2lvbicpLFxuICAgICAgICAgICAgICBpc19kdHRtOiB0KCdJcyB0ZW1wb3JhbCcpLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiB0KCdEZWZhdWx0IGRhdGV0aW1lJyksXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IHQoJ0lzIGZpbHRlcmFibGUnKSxcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9uQ2hhbmdlPXtvbkNvbHVtbnNDaGFuZ2V9XG4gICAgICBpdGVtUmVuZGVyZXJzPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FbmFibGVBZHZhbmNlZERhdGFUeXBlcylcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6ICh2LCBvbkl0ZW1DaGFuZ2UsIF8sIHJlY29yZCkgPT5cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWUgPyAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICBjYW5FZGl0XG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Z9XG4gICAgICAgICAgICAgICAgICAgICAgb25TYXZlVGl0bGU9e29uSXRlbUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3Z9XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiAodmFsdWUsIF9vbkl0ZW1DaGFuZ2UsIF9sYWJlbCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGRhdGFzb3VyY2UubWFpbl9kdHRtX2NvbCA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gIWNvbHVtbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIGNvbHVtbiA9PiBjb2x1bW4uY29sdW1uX25hbWUgPT09IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICApLmlzX2R0dG07XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9e2ByYWRpby1kZWZhdWx0LWR0dG0tJHtyZWNvcmQuY29sdW1uX25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHR5cGU6IGQgPT4gKGQgPyA8TGFiZWw+e2R9PC9MYWJlbD4gOiBudWxsKSxcbiAgICAgICAgICAgICAgYWR2YW5jZWRfZGF0YV90eXBlOiBkID0+IChcbiAgICAgICAgICAgICAgICA8TGFiZWwgb25DaGFuZ2U9e29uQ29sdW1uc0NoYW5nZX0+e2R9PC9MYWJlbD5cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBncm91cGJ5OiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6ICh2LCBvbkl0ZW1DaGFuZ2UsIF8sIHJlY29yZCkgPT5cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWUgPyAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25JdGVtQ2hhbmdlfSAvPlxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxTdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgICAgIHtyZWNvcmQuaXNfY2VydGlmaWVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8Q2VydGlmaWVkQmFkZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlcnRpZmllZEJ5PXtyZWNvcmQuY2VydGlmaWVkX2J5fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscz17cmVjb3JkLmNlcnRpZmljYXRpb25fZGV0YWlsc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB7dn1cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6ICh2YWx1ZSwgX29uSXRlbUNoYW5nZSwgX2xhYmVsLCByZWNvcmQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZGF0YXNvdXJjZS5tYWluX2R0dG1fY29sID09PSByZWNvcmQuY29sdW1uX25hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQgPSAhY29sdW1ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgY29sdW1uID0+IGNvbHVtbi5jb2x1bW5fbmFtZSA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lLFxuICAgICAgICAgICAgICAgICkuaXNfZHR0bTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPFJhZGlvXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdD17YHJhZGlvLWRlZmF1bHQtZHR0bS0ke3JlY29yZC5jb2x1bW5fbmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogcmVjb3JkLmNvbHVtbl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHlwZTogZCA9PiAoZCA/IDxMYWJlbD57ZH08L0xhYmVsPiA6IG51bGwpLFxuICAgICAgICAgICAgICBpc19kdHRtOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGdyb3VwYnk6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgfVxuICAgICAgfVxuICAgIC8+XG4gICk7XG59XG5Db2x1bW5Db2xsZWN0aW9uVGFibGUucHJvcFR5cGVzID0ge1xuICBjb2x1bW5zOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbiAgZGF0YXNvdXJjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBvbkNvbHVtbnNDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9uRGF0YXNvdXJjZUNoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZWRpdGFibGVDb2x1bW5OYW1lOiBQcm9wVHlwZXMuYm9vbCxcbiAgc2hvd0V4cHJlc3Npb246IFByb3BUeXBlcy5ib29sLFxuICBhbGxvd0FkZEl0ZW06IFByb3BUeXBlcy5ib29sLFxuICBhbGxvd0VkaXREYXRhVHlwZTogUHJvcFR5cGVzLmJvb2wsXG4gIGl0ZW1HZW5lcmF0b3I6IFByb3BUeXBlcy5mdW5jLFxufTtcbkNvbHVtbkNvbGxlY3Rpb25UYWJsZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGVkaXRhYmxlQ29sdW1uTmFtZTogZmFsc2UsXG4gIHNob3dFeHByZXNzaW9uOiBmYWxzZSxcbiAgYWxsb3dBZGRJdGVtOiBmYWxzZSxcbiAgYWxsb3dFZGl0RGF0YVR5cGU6IGZhbHNlLFxuICBpdGVtR2VuZXJhdG9yOiAoKSA9PiAoe1xuICAgIGNvbHVtbl9uYW1lOiB0KCc8bmV3IGNvbHVtbj4nKSxcbiAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgIGdyb3VwYnk6IHRydWUsXG4gIH0pLFxufTtcblxuZnVuY3Rpb24gU3RhY2tlZEZpZWxkKHsgbGFiZWwsIGZvcm1FbGVtZW50IH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPGRpdj5cbiAgICAgICAgPHN0cm9uZz57bGFiZWx9PC9zdHJvbmc+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXY+e2Zvcm1FbGVtZW50fTwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5TdGFja2VkRmllbGQucHJvcFR5cGVzID0ge1xuICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgZm9ybUVsZW1lbnQ6IFByb3BUeXBlcy5ub2RlLFxufTtcblxuZnVuY3Rpb24gRm9ybUNvbnRhaW5lcih7IGNoaWxkcmVuIH0pIHtcbiAgcmV0dXJuIDxDYXJkIHBhZGRlZD57Y2hpbGRyZW59PC9DYXJkPjtcbn1cblxuRm9ybUNvbnRhaW5lci5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbn07XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgZGF0YXNvdXJjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIGFkZFN1Y2Nlc3NUb2FzdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgYWRkRGFuZ2VyVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHNldElzRWRpdGluZzogUHJvcFR5cGVzLmZ1bmMsXG59O1xuXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIG9uQ2hhbmdlOiAoKSA9PiB7fSxcbiAgc2V0SXNFZGl0aW5nOiAoKSA9PiB7fSxcbn07XG5cbmZ1bmN0aW9uIE93bmVyc1NlbGVjdG9yKHsgZGF0YXNvdXJjZSwgb25DaGFuZ2UgfSkge1xuICBjb25zdCBsb2FkT3B0aW9ucyA9IHVzZUNhbGxiYWNrKChzZWFyY2ggPSAnJywgcGFnZSwgcGFnZVNpemUpID0+IHtcbiAgICBjb25zdCBxdWVyeSA9IHJpc29uLmVuY29kZSh7IGZpbHRlcjogc2VhcmNoLCBwYWdlLCBwYWdlX3NpemU6IHBhZ2VTaXplIH0pO1xuICAgIHJldHVybiBTdXBlcnNldENsaWVudC5nZXQoe1xuICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2RhdGFzZXQvcmVsYXRlZC9vd25lcnM/cT0ke3F1ZXJ5fWAsXG4gICAgfSkudGhlbihyZXNwb25zZSA9PiAoe1xuICAgICAgZGF0YTogcmVzcG9uc2UuanNvbi5yZXN1bHRcbiAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0uZXh0cmEuYWN0aXZlKVxuICAgICAgICAubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICBsYWJlbDogaXRlbS50ZXh0LFxuICAgICAgICB9KSksXG4gICAgICB0b3RhbENvdW50OiByZXNwb25zZS5qc29uLmNvdW50LFxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiAoXG4gICAgPEFzeW5jU2VsZWN0XG4gICAgICBhcmlhTGFiZWw9e3QoJ1NlbGVjdCBvd25lcnMnKX1cbiAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICBuYW1lPVwib3duZXJzXCJcbiAgICAgIHZhbHVlPXtkYXRhc291cmNlLm93bmVyc31cbiAgICAgIG9wdGlvbnM9e2xvYWRPcHRpb25zfVxuICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgaGVhZGVyPXs8Rm9ybUxhYmVsPnt0KCdPd25lcnMnKX08L0Zvcm1MYWJlbD59XG4gICAgICBhbGxvd0NsZWFyXG4gICAgLz5cbiAgKTtcbn1cblxuY2xhc3MgRGF0YXNvdXJjZUVkaXRvciBleHRlbmRzIFB1cmVDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZGF0YXNvdXJjZToge1xuICAgICAgICAuLi5wcm9wcy5kYXRhc291cmNlLFxuICAgICAgICBvd25lcnM6IHByb3BzLmRhdGFzb3VyY2Uub3duZXJzLm1hcChvd25lciA9PiAoe1xuICAgICAgICAgIHZhbHVlOiBvd25lci52YWx1ZSB8fCBvd25lci5pZCxcbiAgICAgICAgICBsYWJlbDogb3duZXIubGFiZWwgfHwgYCR7b3duZXIuZmlyc3RfbmFtZX0gJHtvd25lci5sYXN0X25hbWV9YCxcbiAgICAgICAgfSkpLFxuICAgICAgICBtZXRyaWNzOiBwcm9wcy5kYXRhc291cmNlLm1ldHJpY3M/Lm1hcChtZXRyaWMgPT4ge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnlNZXRyaWMsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzLFxuICAgICAgICAgIH0gPSBtZXRyaWM7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2VydGlmaWNhdGlvbjogeyBkZXRhaWxzLCBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IH0gPSB7fSxcbiAgICAgICAgICAgIHdhcm5pbmdfbWFya2Rvd246IHdhcm5pbmdNYXJrZG93bixcbiAgICAgICAgICB9ID0gSlNPTi5wYXJzZShtZXRyaWMuZXh0cmEgfHwgJ3t9JykgfHwge307XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLm1ldHJpYyxcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogY2VydGlmaWNhdGlvbkRldGFpbHMgfHwgZGV0YWlscyxcbiAgICAgICAgICAgIHdhcm5pbmdfbWFya2Rvd246IHdhcm5pbmdNYXJrZG93biB8fCAnJyxcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnkgfHwgY2VydGlmaWVkQnlNZXRyaWMsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICB9LFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIGlzU3FsYTpcbiAgICAgICAgcHJvcHMuZGF0YXNvdXJjZS5kYXRhc291cmNlX3R5cGUgPT09ICd0YWJsZScgfHxcbiAgICAgICAgcHJvcHMuZGF0YXNvdXJjZS50eXBlID09PSAndGFibGUnLFxuICAgICAgaXNFZGl0TW9kZTogZmFsc2UsXG4gICAgICBkYXRhYmFzZUNvbHVtbnM6IHByb3BzLmRhdGFzb3VyY2UuY29sdW1ucy5maWx0ZXIoY29sID0+ICFjb2wuZXhwcmVzc2lvbiksXG4gICAgICBjYWxjdWxhdGVkQ29sdW1uczogcHJvcHMuZGF0YXNvdXJjZS5jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgY29sID0+ICEhY29sLmV4cHJlc3Npb24sXG4gICAgICApLFxuICAgICAgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGFjdGl2ZVRhYktleTogMCxcbiAgICAgIGRhdGFzb3VyY2VUeXBlOiBwcm9wcy5kYXRhc291cmNlLnNxbFxuICAgICAgICA/IERBVEFTT1VSQ0VfVFlQRVMudmlydHVhbC5rZXlcbiAgICAgICAgOiBEQVRBU09VUkNFX1RZUEVTLnBoeXNpY2FsLmtleSxcbiAgICB9O1xuXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2hhbmdlRWRpdE1vZGUgPSB0aGlzLm9uQ2hhbmdlRWRpdE1vZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UgPSB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZSA9IHRoaXMub25EYXRhc291cmNlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy50YWJsZUNoYW5nZUFuZFN5bmNNZXRhZGF0YSA9XG4gICAgICB0aGlzLnRhYmxlQ2hhbmdlQW5kU3luY01ldGFkYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zeW5jTWV0YWRhdGEgPSB0aGlzLnN5bmNNZXRhZGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0Q29sdW1ucyA9IHRoaXMuc2V0Q29sdW1ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMudmFsaWRhdGVBbmRDaGFuZ2UgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVUYWJTZWxlY3QgPSB0aGlzLmhhbmRsZVRhYlNlbGVjdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3VycmVuY2llcyA9IGVuc3VyZUlzQXJyYXkocHJvcHMuY3VycmVuY2llcykubWFwKGN1cnJlbmN5Q29kZSA9PiAoe1xuICAgICAgdmFsdWU6IGN1cnJlbmN5Q29kZSxcbiAgICAgIGxhYmVsOiBgJHtnZXRDdXJyZW5jeVN5bWJvbCh7XG4gICAgICAgIHN5bWJvbDogY3VycmVuY3lDb2RlLFxuICAgICAgfSl9ICgke2N1cnJlbmN5Q29kZX0pYCxcbiAgICB9KSk7XG4gIH1cblxuICBvbkNoYW5nZSgpIHtcbiAgICAvLyBFbXB0eWluZyBTUUwgaWYgXCJQaHlzaWNhbFwiIHJhZGlvIGJ1dHRvbiBpcyBzZWxlY3RlZFxuICAgIC8vIEN1cnJlbnRseSB0aGUgbG9naWMgdG8ga25vdyB3aGV0aGVyIHRoZSBzb3VyY2UgaXNcbiAgICAvLyBwaHlzaWNhbCBvciB2aXJ0dWFsIGlzIGJhc2VkIG9uIHdoZXRoZXIgU1FMIGlzIGVtcHR5IG9yIG5vdC5cbiAgICBjb25zdCB7IGRhdGFzb3VyY2VUeXBlLCBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHNxbCA9XG4gICAgICBkYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgPyAnJyA6IGRhdGFzb3VyY2Uuc3FsO1xuICAgIGNvbnN0IG5ld0RhdGFzb3VyY2UgPSB7XG4gICAgICAuLi50aGlzLnN0YXRlLmRhdGFzb3VyY2UsXG4gICAgICBzcWwsXG4gICAgICBjb2x1bW5zOiBbLi4udGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnMsIC4uLnRoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnNdLFxuICAgIH07XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShuZXdEYXRhc291cmNlLCB0aGlzLnN0YXRlLmVycm9ycyk7XG4gIH1cblxuICBvbkNoYW5nZUVkaXRNb2RlKCkge1xuICAgIHRoaXMucHJvcHMuc2V0SXNFZGl0aW5nKCF0aGlzLnN0YXRlLmlzRWRpdE1vZGUpO1xuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7IGlzRWRpdE1vZGU6ICFwcmV2U3RhdGUuaXNFZGl0TW9kZSB9KSk7XG4gIH1cblxuICBvbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgY2FsbGJhY2sgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFzb3VyY2UgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgb25EYXRhc291cmNlUHJvcENoYW5nZShhdHRyLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIGlmIHZhbHVlIGlzIHVuZGVmaW5lZCBkbyBub3QgdXBkYXRlIHN0YXRlXG4gICAgY29uc3QgZGF0YXNvdXJjZSA9IHsgLi4udGhpcy5zdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH07XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICBkYXRhc291cmNlOiB7IC4uLnByZXZTdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH0sXG4gICAgICB9KSxcbiAgICAgIGF0dHIgPT09ICd0YWJsZV9uYW1lJ1xuICAgICAgICA/IHRoaXMub25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEpXG4gICAgICAgIDogdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSksXG4gICAgKTtcbiAgfVxuXG4gIG9uRGF0YXNvdXJjZVR5cGVDaGFuZ2UoZGF0YXNvdXJjZVR5cGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGF0YXNvdXJjZVR5cGUgfSk7XG4gIH1cblxuICBzZXRDb2x1bW5zKG9iaikge1xuICAgIC8vIHVwZGF0ZSBjYWxjdWxhdGVkQ29sdW1ucyBvciBkYXRhYmFzZUNvbHVtbnNcbiAgICB0aGlzLnNldFN0YXRlKG9iaiwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSk7XG4gIH1cblxuICB2YWxpZGF0ZUFuZENoYW5nZSgpIHtcbiAgICB0aGlzLnZhbGlkYXRlKHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgdGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEoKSB7XG4gICAgdGhpcy52YWxpZGF0ZSgoKSA9PiB7XG4gICAgICB0aGlzLnN5bmNNZXRhZGF0YSgpO1xuICAgICAgdGhpcy5vbkNoYW5nZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc3luY01ldGFkYXRhKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiB0cnVlIH0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdDb2xzID0gYXdhaXQgZmV0Y2hTeW5jZWRDb2x1bW5zKGRhdGFzb3VyY2UpO1xuICAgICAgY29uc3QgY29sdW1uQ2hhbmdlcyA9IHVwZGF0ZUNvbHVtbnMoXG4gICAgICAgIGRhdGFzb3VyY2UuY29sdW1ucyxcbiAgICAgICAgbmV3Q29scyxcbiAgICAgICAgdGhpcy5wcm9wcy5hZGRTdWNjZXNzVG9hc3QsXG4gICAgICApO1xuICAgICAgdGhpcy5zZXRDb2x1bW5zKHtcbiAgICAgICAgZGF0YWJhc2VDb2x1bW5zOiBjb2x1bW5DaGFuZ2VzLmZpbmFsQ29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgY29sID0+ICFjb2wuZXhwcmVzc2lvbiwgLy8gcmVtb3ZlIGNhbGN1bGF0ZWQgY29sdW1uc1xuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdCh0KCdNZXRhZGF0YSBoYXMgYmVlbiBzeW5jZWQnKSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgeyBlcnJvcjogY2xpZW50RXJyb3IsIHN0YXR1c1RleHQgfSA9XG4gICAgICAgIGF3YWl0IGdldENsaWVudEVycm9yT2JqZWN0KGVycm9yKTtcbiAgICAgIHRoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3QoXG4gICAgICAgIGNsaWVudEVycm9yIHx8IHN0YXR1c1RleHQgfHwgdCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkJyksXG4gICAgICApO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1ldGFkYXRhTG9hZGluZzogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgZmluZER1cGxpY2F0ZXMoYXJyLCBhY2Nlc3Nvcikge1xuICAgIGNvbnN0IHNlZW4gPSB7fTtcbiAgICBjb25zdCBkdXBzID0gW107XG4gICAgYXJyLmZvckVhY2gob2JqID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhY2Nlc3NvcihvYmopO1xuICAgICAgaWYgKGl0ZW0gaW4gc2Vlbikge1xuICAgICAgICBkdXBzLnB1c2goaXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuW2l0ZW1dID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZHVwcztcbiAgfVxuXG4gIHZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgbGV0IGVycm9ycyA9IFtdO1xuICAgIGxldCBkdXBzO1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIC8vIExvb2tpbmcgZm9yIGR1cGxpY2F0ZSBjb2x1bW5fbmFtZVxuICAgIGR1cHMgPSB0aGlzLmZpbmREdXBsaWNhdGVzKGRhdGFzb3VyY2UuY29sdW1ucywgb2JqID0+IG9iai5jb2x1bW5fbmFtZSk7XG4gICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChcbiAgICAgIGR1cHMubWFwKG5hbWUgPT4gdCgnQ29sdW1uIG5hbWUgWyVzXSBpcyBkdXBsaWNhdGVkJywgbmFtZSkpLFxuICAgICk7XG5cbiAgICAvLyBMb29raW5nIGZvciBkdXBsaWNhdGUgbWV0cmljX25hbWVcbiAgICBkdXBzID0gdGhpcy5maW5kRHVwbGljYXRlcyhkYXRhc291cmNlLm1ldHJpY3MsIG9iaiA9PiBvYmoubWV0cmljX25hbWUpO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBkdXBzLm1hcChuYW1lID0+IHQoJ01ldHJpYyBuYW1lIFslc10gaXMgZHVwbGljYXRlZCcsIG5hbWUpKSxcbiAgICApO1xuXG4gICAgLy8gTWFraW5nIHN1cmUgY2FsY3VsYXRlZENvbHVtbnMgaGF2ZSBhbiBleHByZXNzaW9uIGRlZmluZWRcbiAgICBjb25zdCBub0ZpbHRlckNhbGNDb2xzID0gdGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1ucy5maWx0ZXIoXG4gICAgICBjb2wgPT4gIWNvbC5leHByZXNzaW9uICYmICFjb2wuanNvbixcbiAgICApO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBub0ZpbHRlckNhbGNDb2xzLm1hcChjb2wgPT5cbiAgICAgICAgdCgnQ2FsY3VsYXRlZCBjb2x1bW4gWyVzXSByZXF1aXJlcyBhbiBleHByZXNzaW9uJywgY29sLmNvbHVtbl9uYW1lKSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIC8vIHZhbGlkYXRlIGN1cnJlbmN5IGNvZGVcbiAgICB0cnkge1xuICAgICAgdGhpcy5zdGF0ZS5kYXRhc291cmNlLm1ldHJpY3M/LmZvckVhY2goXG4gICAgICAgIG1ldHJpYyA9PlxuICAgICAgICAgIG1ldHJpYy5jdXJyZW5jeT8uc3ltYm9sICYmXG4gICAgICAgICAgbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHtcbiAgICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgICAgICAgICAgY3VycmVuY3k6IG1ldHJpYy5jdXJyZW5jeS5zeW1ib2wsXG4gICAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gY2F0Y2gge1xuICAgICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChbdCgnSW52YWxpZCBjdXJyZW5jeSBjb2RlIGluIHNhdmVkIG1ldHJpY3MnKV0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvcnMgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaGFuZGxlVGFiU2VsZWN0KGFjdGl2ZVRhYktleSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWJLZXkgfSk7XG4gIH1cblxuICBzb3J0TWV0cmljcyhtZXRyaWNzKSB7XG4gICAgcmV0dXJuIG1ldHJpY3Muc29ydCgoeyBpZDogYSB9LCB7IGlkOiBiIH0pID0+IGIgLSBhKTtcbiAgfVxuXG4gIHJlbmRlclNldHRpbmdzRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0Jhc2ljJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiZGVmYXVsdF9lbmRwb2ludFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0RlZmF1bHQgVVJMJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICBgRGVmYXVsdCBVUkwgdG8gcmVkaXJlY3QgdG8gd2hlbiBhY2Nlc3NpbmcgZnJvbSB0aGUgZGF0YXNldCBsaXN0IHBhZ2UuXG4gICAgICAgICAgICBBY2NlcHRzIHJlbGF0aXZlIFVSTHMgc3VjaCBhcyA8c3BhbiBzdHlsZT3igJ53aGl0ZS1zcGFjZTogbm93cmFwO+KAnT4vc3VwZXJzZXQvZGFzaGJvYXJkL3tpZH0vPC9zcGFuPmAsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwiZGVmYXVsdF9lbmRwb2ludFwiIC8+fVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBpbmxpbmVcbiAgICAgICAgICBmaWVsZEtleT1cImZpbHRlcl9zZWxlY3RfZW5hYmxlZFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0F1dG9jb21wbGV0ZSBmaWx0ZXJzJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1doZXRoZXIgdG8gcG9wdWxhdGUgYXV0b2NvbXBsZXRlIGZpbHRlcnMgb3B0aW9ucycpfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgLz59XG4gICAgICAgIC8+XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICBmaWVsZEtleT1cImZldGNoX3ZhbHVlc19wcmVkaWNhdGVcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ0F1dG9jb21wbGV0ZSBxdWVyeSBwcmVkaWNhdGUnKX1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAnV2hlbiB1c2luZyBcIkF1dG9jb21wbGV0ZSBmaWx0ZXJzXCIsIHRoaXMgY2FuIGJlIHVzZWQgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZSAnICtcbiAgICAgICAgICAgICAgICAnb2YgdGhlIHF1ZXJ5IGZldGNoaW5nIHRoZSB2YWx1ZXMuIFVzZSB0aGlzIG9wdGlvbiB0byBhcHBseSBhICcgK1xuICAgICAgICAgICAgICAgICdwcmVkaWNhdGUgKFdIRVJFIGNsYXVzZSkgdG8gdGhlIHF1ZXJ5IHNlbGVjdGluZyB0aGUgZGlzdGluY3QgJyArXG4gICAgICAgICAgICAgICAgJ3ZhbHVlcyBmcm9tIHRoZSB0YWJsZS4gVHlwaWNhbGx5IHRoZSBpbnRlbnQgd291bGQgYmUgdG8gbGltaXQgdGhlIHNjYW4gJyArXG4gICAgICAgICAgICAgICAgJ2J5IGFwcGx5aW5nIGEgcmVsYXRpdmUgdGltZSBmaWx0ZXIgb24gYSBwYXJ0aXRpb25lZCBvciBpbmRleGVkIHRpbWUtcmVsYXRlZCBmaWVsZC4nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJzcWxcIlxuICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImZldGNoX3ZhbHVlc19wcmVkaWNhdGVcIlxuICAgICAgICAgICAgICAgIG1pbkxpbmVzPXs1fVxuICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgZmllbGRLZXk9XCJleHRyYVwiXG4gICAgICAgICAgICBsYWJlbD17dCgnRXh0cmEnKX1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAnRXh0cmEgZGF0YSB0byBzcGVjaWZ5IHRhYmxlIG1ldGFkYXRhLiBDdXJyZW50bHkgc3VwcG9ydHMgJyArXG4gICAgICAgICAgICAgICAgJ21ldGFkYXRhIG9mIHRoZSBmb3JtYXQ6IGB7IFwiY2VydGlmaWNhdGlvblwiOiB7IFwiY2VydGlmaWVkX2J5XCI6ICcgK1xuICAgICAgICAgICAgICAgICdcIkRhdGEgUGxhdGZvcm0gVGVhbVwiLCBcImRldGFpbHNcIjogXCJUaGlzIHRhYmxlIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGguXCIgJyArXG4gICAgICAgICAgICAgICAgJ30sIFwid2FybmluZ19tYXJrZG93blwiOiBcIlRoaXMgaXMgYSB3YXJuaW5nLlwiIH1gLicsXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJleHRyYVwiXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJqc29uXCJcbiAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPE93bmVyc1NlbGVjdG9yXG4gICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICBvbkNoYW5nZT17bmV3T3duZXJzID0+IHtcbiAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlQ2hhbmdlKHsgLi4uZGF0YXNvdXJjZSwgb3duZXJzOiBuZXdPd25lcnMgfSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvRmllbGRzZXQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckFkdmFuY2VkRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0FkdmFuY2VkJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJjYWNoZV90aW1lb3V0XCJcbiAgICAgICAgICBsYWJlbD17dCgnQ2FjaGUgdGltZW91dCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgJ1RoZSBkdXJhdGlvbiBvZiB0aW1lIGluIHNlY29uZHMgYmVmb3JlIHRoZSBjYWNoZSBpcyBpbnZhbGlkYXRlZC4gU2V0IHRvIC0xIHRvIGJ5cGFzcyB0aGUgY2FjaGUuJyxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJjYWNoZV90aW1lb3V0XCIgLz59XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwib2Zmc2V0XCJcbiAgICAgICAgICBsYWJlbD17dCgnSG91cnMgb2Zmc2V0Jyl9XG4gICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cIm9mZnNldFwiIC8+fVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgJ1RoZSBudW1iZXIgb2YgaG91cnMsIG5lZ2F0aXZlIG9yIHBvc2l0aXZlLCB0byBzaGlmdCB0aGUgdGltZSBjb2x1bW4uIFRoaXMgY2FuIGJlIHVzZWQgdG8gbW92ZSBVVEMgdGltZSB0byBsb2NhbCB0aW1lLicsXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgICAge3RoaXMuc3RhdGUuaXNTcWxhICYmIChcbiAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgIGZpZWxkS2V5PVwidGVtcGxhdGVfcGFyYW1zXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdUZW1wbGF0ZSBwYXJhbWV0ZXJzJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ0Egc2V0IG9mIHBhcmFtZXRlcnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGluIHRoZSBxdWVyeSB1c2luZyBKaW5qYSB0ZW1wbGF0aW5nIHN5bnRheCcsXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cInRlbXBsYXRlX3BhcmFtc1wiIC8+fVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGlubGluZVxuICAgICAgICAgIGZpZWxkS2V5PVwibm9ybWFsaXplX2NvbHVtbnNcIlxuICAgICAgICAgIGxhYmVsPXt0KCdOb3JtYWxpemUgY29sdW1uIG5hbWVzJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAnQWxsb3cgY29sdW1uIG5hbWVzIHRvIGJlIGNoYW5nZWQgdG8gY2FzZSBpbnNlbnNpdGl2ZSBmb3JtYXQsIGlmIHN1cHBvcnRlZCAoZS5nLiBPcmFjbGUsIFNub3dmbGFrZSkuJyxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgY29udHJvbElkPVwibm9ybWFsaXplX2NvbHVtbnNcIiAvPn1cbiAgICAgICAgLz5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgaW5saW5lXG4gICAgICAgICAgZmllbGRLZXk9XCJhbHdheXNfZmlsdGVyX21haW5fZHR0bVwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Fsd2F5cyBmaWx0ZXIgbWFpbiBkYXRldGltZSBjb2x1bW4nKX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgIGBXaGVuIHRoZSBzZWNvbmRhcnkgdGVtcG9yYWwgY29sdW1ucyBhcmUgZmlsdGVyZWQsIGFwcGx5IHRoZSBzYW1lIGZpbHRlciB0byB0aGUgbWFpbiBkYXRldGltZSBjb2x1bW4uYCxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgY29udHJvbElkPVwiYWx3YXlzX2ZpbHRlcl9tYWluX2R0dG1cIiAvPn1cbiAgICAgICAgLz5cbiAgICAgIDwvRmllbGRzZXQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclNwYXRpYWxUYWIoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgc3BhdGlhbHMsIGFsbF9jb2xzOiBhbGxDb2xzIH0gPSBkYXRhc291cmNlO1xuICAgIHJldHVybiAoXG4gICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgIHRhYj17PENvbGxlY3Rpb25UYWJUaXRsZSBjb2xsZWN0aW9uPXtzcGF0aWFsc30gdGl0bGU9e3QoJ1NwYXRpYWwnKX0gLz59XG4gICAgICAgIGtleT17NH1cbiAgICAgID5cbiAgICAgICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgICAgIHRhYmxlQ29sdW1ucz17WyduYW1lJywgJ2NvbmZpZyddfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UuYmluZCh0aGlzLCAnc3BhdGlhbHMnKX1cbiAgICAgICAgICBpdGVtR2VuZXJhdG9yPXsoKSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogdCgnPG5ldyBzcGF0aWFsPicpLFxuICAgICAgICAgICAgdHlwZTogdCgnPG5vIHR5cGU+JyksXG4gICAgICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgICAgfSl9XG4gICAgICAgICAgY29sbGVjdGlvbj17c3BhdGlhbHN9XG4gICAgICAgICAgYWxsb3dEZWxldGVzXG4gICAgICAgICAgaXRlbVJlbmRlcmVycz17e1xuICAgICAgICAgICAgbmFtZTogKGQsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlIGNhbkVkaXQgdGl0bGU9e2R9IG9uU2F2ZVRpdGxlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjb25maWc6ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgICA8U3BhdGlhbENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gY2hvaWNlcz17YWxsQ29sc30gLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJTb3VyY2VGaWVsZHNldCgpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxFZGl0TG9ja0NvbnRhaW5lcj5cbiAgICAgICAgICA8c3BhbiByb2xlPVwiYnV0dG9uXCIgdGFiSW5kZXg9ezB9IG9uQ2xpY2s9e3RoaXMub25DaGFuZ2VFZGl0TW9kZX0+XG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc0VkaXRNb2RlID8gKFxuICAgICAgICAgICAgICA8SWNvbnMuVW5sb2NrT3V0bGluZWRcbiAgICAgICAgICAgICAgICBpY29uU2l6ZT1cInhsXCJcbiAgICAgICAgICAgICAgICBjc3M9e3RoZW1lID0+IGNzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogYXV0byAke3RoZW1lLmdyaWRVbml0fXB4IGF1dG8gMDtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPEljb25zLkxvY2tPdXRsaW5lZFxuICAgICAgICAgICAgICAgIGljb25TaXplPVwieGxcIlxuICAgICAgICAgICAgICAgIGNzcz17dGhlbWUgPT4gKHtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogYGF1dG8gJHt0aGVtZS5ncmlkVW5pdH1weCBhdXRvIDBgLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgeyF0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiYgKFxuICAgICAgICAgICAgPGRpdj57dCgnQ2xpY2sgdGhlIGxvY2sgdG8gbWFrZSBjaGFuZ2VzLicpfTwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJiAoXG4gICAgICAgICAgICA8ZGl2Pnt0KCdDbGljayB0aGUgbG9jayB0byBwcmV2ZW50IGZ1cnRoZXIgY2hhbmdlcy4nKX08L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L0VkaXRMb2NrQ29udGFpbmVyPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm0tbC0xMCBtLXQtMjAgbS1iLTEwXCI+XG4gICAgICAgICAge0RBVEFTT1VSQ0VfVFlQRVNfQVJSLm1hcCh0eXBlID0+IChcbiAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICBrZXk9e3R5cGUua2V5fVxuICAgICAgICAgICAgICB2YWx1ZT17dHlwZS5rZXl9XG4gICAgICAgICAgICAgIGlubGluZVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VUeXBlQ2hhbmdlLmJpbmQodGhpcywgdHlwZS5rZXkpfVxuICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSB0eXBlLmtleX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0eXBlLmxhYmVsfVxuICAgICAgICAgICAgPC9SYWRpbz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8RmllbGRzZXQgaXRlbT17ZGF0YXNvdXJjZX0gb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfSBjb21wYWN0PlxuICAgICAgICAgIHt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5ICYmIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRhdGFiYXNlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdWaXJ0dWFsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRhYmFzZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGI9e2RhdGFzb3VyY2U/LmRhdGFiYXNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGFsb2c9e2RhdGFzb3VyY2UuY2F0YWxvZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWE9e2RhdGFzb3VyY2Uuc2NoZW1hfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2F0YWxvZ0NoYW5nZT17Y2F0YWxvZyA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ2NhdGFsb2cnLCBjYXRhbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNjaGVtYUNoYW5nZT17c2NoZW1hID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgnc2NoZW1hJywgc2NoZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRiQ2hhbmdlPXtkYXRhYmFzZSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ2RhdGFiYXNlJywgZGF0YWJhc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Nb2RlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcj17dGhpcy5wcm9wcy5hZGREYW5nZXJUb2FzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seT17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgd2lkdGg6ICdjYWxjKDEwMCUgLSAzNHB4KScsIG1hcmdpblRvcDogLTE2IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0YWJsZV9uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdOYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RhYmxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEYXRhc2V0IG5hbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCcpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICAgICAnV2hlbiBzcGVjaWZ5aW5nIFNRTCwgdGhlIGRhdGFzb3VyY2UgYWN0cyBhcyBhIHZpZXcuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1N1cGVyc2V0IHdpbGwgdXNlIHRoaXMgc3RhdGVtZW50IGFzIGEgc3VicXVlcnkgd2hpbGUgZ3JvdXBpbmcgYW5kIGZpbHRlcmluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvbiB0aGUgZ2VuZXJhdGVkIHBhcmVudCBxdWVyaWVzLicsXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWluTGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGluZXM9e0luZmluaXR5fVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBPcHRpb25zPXtzcWxUb29sdGlwT3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgJiYgKFxuICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInRhYmxlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1BoeXNpY2FsJyl9XG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgbWFyZ2luVG9wOiA4IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2U9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZS5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VfbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlLmRhdGFiYXNlPy5kYXRhYmFzZV9uYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZS5kYXRhYmFzZT8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBkYklkPXtkYXRhc291cmNlLmRhdGFiYXNlPy5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yPXt0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0YWxvZz17ZGF0YXNvdXJjZS5jYXRhbG9nfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hPXtkYXRhc291cmNlLnNjaGVtYX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNxbExhYk1vZGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVWYWx1ZT17ZGF0YXNvdXJjZS50YWJsZV9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DYXRhbG9nQ2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjYXRhbG9nID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgnY2F0YWxvZycsIGNhdGFsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2NoZW1hQ2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzY2hlbWEgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdzY2hlbWEnLCBzY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRGJDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRhdGFiYXNlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YWJhc2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFibGVTZWxlY3RDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRhYmxlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seT17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgICAnVGhlIHBvaW50ZXIgdG8gYSBwaHlzaWNhbCB0YWJsZSAob3IgdmlldykuIEtlZXAgaW4gbWluZCB0aGF0IHRoZSBjaGFydCBpcyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAnYXNzb2NpYXRlZCB0byB0aGlzIFN1cGVyc2V0IGxvZ2ljYWwgdGFibGUsIGFuZCB0aGlzIGxvZ2ljYWwgdGFibGUgcG9pbnRzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICd0aGUgcGh5c2ljYWwgdGFibGUgcmVmZXJlbmNlZCBoZXJlLicsXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICApfVxuICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckVycm9ycygpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5lcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEFsZXJ0XG4gICAgICAgICAgY3NzPXt0aGVtZSA9PiAoeyBtYXJnaW5Cb3R0b206IHRoZW1lLmdyaWRVbml0ICogNCB9KX1cbiAgICAgICAgICB0eXBlPVwiZXJyb3JcIlxuICAgICAgICAgIG1lc3NhZ2U9e1xuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3JzLm1hcChlcnIgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtlcnJ9PntlcnJ9PC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZW5kZXJNZXRyaWNDb2xsZWN0aW9uKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG1ldHJpY3MgfSA9IGRhdGFzb3VyY2U7XG4gICAgY29uc3Qgc29ydGVkTWV0cmljcyA9IG1ldHJpY3M/Lmxlbmd0aCA/IHRoaXMuc29ydE1ldHJpY3MobWV0cmljcykgOiBbXTtcbiAgICByZXR1cm4gKFxuICAgICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgICB0YWJsZUNvbHVtbnM9e1snbWV0cmljX25hbWUnLCAndmVyYm9zZV9uYW1lJywgJ2V4cHJlc3Npb24nXX1cbiAgICAgICAgc29ydENvbHVtbnM9e1snbWV0cmljX25hbWUnLCAndmVyYm9zZV9uYW1lJywgJ2V4cHJlc3Npb24nXX1cbiAgICAgICAgY29sdW1uTGFiZWxzPXt7XG4gICAgICAgICAgbWV0cmljX25hbWU6IHQoJ01ldHJpYyBLZXknKSxcbiAgICAgICAgICB2ZXJib3NlX25hbWU6IHQoJ0xhYmVsJyksXG4gICAgICAgICAgZXhwcmVzc2lvbjogdCgnU1FMIGV4cHJlc3Npb24nKSxcbiAgICAgICAgfX1cbiAgICAgICAgY29sdW1uTGFiZWxUb29sdGlwcz17e1xuICAgICAgICAgIG1ldHJpY19uYW1lOiB0KFxuICAgICAgICAgICAgJ1RoaXMgZmllbGQgaXMgdXNlZCBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIHRvIGF0dGFjaCAnICtcbiAgICAgICAgICAgICAgJ3RoZSBtZXRyaWMgdG8gY2hhcnRzLiBJdCBpcyBhbHNvIHVzZWQgYXMgdGhlIGFsaWFzIGluIHRoZSAnICtcbiAgICAgICAgICAgICAgJ1NRTCBxdWVyeS4nLFxuICAgICAgICAgICksXG4gICAgICAgIH19XG4gICAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxGaWVsZHNldCBjb21wYWN0PlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZDNmb3JtYXRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEMyBmb3JtYXQnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJkM2Zvcm1hdFwiIHBsYWNlaG9sZGVyPVwiJXkvJW0vJWRcIiAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjdXJyZW5jeVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ01ldHJpYyBjdXJyZW5jeScpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPEN1cnJlbmN5Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeVNlbGVjdE92ZXJyaWRlUHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdCgnU2VsZWN0IG9yIHR5cGUgY3VycmVuY3kgc3ltYm9sJyksXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbFNlbGVjdEFkZGl0aW9uYWxTdHlsZXM9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDMwJTtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWVkIGJ5Jyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpZWRfYnlcIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBtZXRyaWMnLFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX1cbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0RldGFpbHMgb2YgdGhlIGNlcnRpZmljYXRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1dhcm5pbmcnKX1cbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cIndhcm5pbmdfbWFya2Rvd25cIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdPcHRpb25hbCB3YXJuaW5nIGFib3V0IHVzZSBvZiB0aGlzIG1ldHJpYycpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJ3YXJuaW5nX21hcmtkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJtYXJrZG93blwiXG4gICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvRmllbGRzZXQ+XG4gICAgICAgICAgPC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICB9XG4gICAgICAgIGNvbGxlY3Rpb249e3NvcnRlZE1ldHJpY3N9XG4gICAgICAgIGFsbG93QWRkSXRlbVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlLmJpbmQodGhpcywgJ21ldHJpY3MnKX1cbiAgICAgICAgaXRlbUdlbmVyYXRvcj17KCkgPT4gKHtcbiAgICAgICAgICBtZXRyaWNfbmFtZTogdCgnPG5ldyBtZXRyaWM+JyksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiAnJyxcbiAgICAgICAgICBleHByZXNzaW9uOiAnJyxcbiAgICAgICAgfSl9XG4gICAgICAgIGl0ZW1DZWxsUHJvcHM9e3tcbiAgICAgICAgICBleHByZXNzaW9uOiAoKSA9PiAoe1xuICAgICAgICAgICAgd2lkdGg6ICcyNDBweCcsXG4gICAgICAgICAgfSksXG4gICAgICAgIH19XG4gICAgICAgIGl0ZW1SZW5kZXJlcnM9e3tcbiAgICAgICAgICBtZXRyaWNfbmFtZTogKHYsIG9uQ2hhbmdlLCBfLCByZWNvcmQpID0+IChcbiAgICAgICAgICAgIDxGbGV4Um93Q29udGFpbmVyPlxuICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge3JlY29yZC53YXJuaW5nX21hcmtkb3duICYmIChcbiAgICAgICAgICAgICAgICA8V2FybmluZ0ljb25XaXRoVG9vbHRpcFxuICAgICAgICAgICAgICAgICAgd2FybmluZ01hcmtkb3duPXtyZWNvcmQud2FybmluZ19tYXJrZG93bn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RWRpdGFibGVUaXRsZSBjYW5FZGl0IHRpdGxlPXt2fSBvblNhdmVUaXRsZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICAgICA8L0ZsZXhSb3dDb250YWluZXI+XG4gICAgICAgICAgKSxcbiAgICAgICAgICB2ZXJib3NlX25hbWU6ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgPFRleHRDb250cm9sIGNhbkVkaXQgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgICApLFxuICAgICAgICAgIGV4cHJlc3Npb246ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICBjYW5FZGl0XG4gICAgICAgICAgICAgIGluaXRpYWxWYWx1ZT17dn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICBleHRyYUNsYXNzZXM9e1snZGF0YXNvdXJjZS1zcWwtZXhwcmVzc2lvbiddfVxuICAgICAgICAgICAgICBsYW5ndWFnZT1cInNxbFwiXG4gICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICBtaW5MaW5lcz17NX1cbiAgICAgICAgICAgICAgdGV4dEFyZWFTdHlsZXM9e3sgbWluV2lkdGg6ICcyMDBweCcsIG1heFdpZHRoOiAnNDUwcHgnIH19XG4gICAgICAgICAgICAgIHJlc2l6ZT1cImJvdGhcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAodiwgb25DaGFuZ2UsIGxhYmVsKSA9PiAoXG4gICAgICAgICAgICA8U3RhY2tlZEZpZWxkXG4gICAgICAgICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQ9ezxUZXh0Q29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBkM2Zvcm1hdDogKHYsIG9uQ2hhbmdlLCBsYWJlbCkgPT4gKFxuICAgICAgICAgICAgPFN0YWNrZWRGaWVsZFxuICAgICAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50PXs8VGV4dENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz59XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICksXG4gICAgICAgIH19XG4gICAgICAgIGFsbG93RGVsZXRlc1xuICAgICAgICBzdGlja3lIZWFkZXJcbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UsIGFjdGl2ZVRhYktleSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG1ldHJpY3MgfSA9IGRhdGFzb3VyY2U7XG4gICAgY29uc3Qgc29ydGVkTWV0cmljcyA9IG1ldHJpY3M/Lmxlbmd0aCA/IHRoaXMuc29ydE1ldHJpY3MobWV0cmljcykgOiBbXTtcbiAgICBjb25zdCB7IHRoZW1lIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxEYXRhc291cmNlQ29udGFpbmVyIGRhdGEtdGVzdD1cImRhdGFzb3VyY2UtZWRpdG9yXCI+XG4gICAgICAgIHt0aGlzLnJlbmRlckVycm9ycygpfVxuICAgICAgICA8QWxlcnRcbiAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7IG1hcmdpbkJvdHRvbTogdGhlbWUuZ3JpZFVuaXQgKiA0IH0pfVxuICAgICAgICAgIHR5cGU9XCJ3YXJuaW5nXCJcbiAgICAgICAgICBtZXNzYWdlPXtcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICAgIDxzdHJvbmc+e3QoJ0JlIGNhcmVmdWwuJyl9IDwvc3Ryb25nPlxuICAgICAgICAgICAgICB7dChcbiAgICAgICAgICAgICAgICAnQ2hhbmdpbmcgdGhlc2Ugc2V0dGluZ3Mgd2lsbCBhZmZlY3QgYWxsIGNoYXJ0cyB1c2luZyB0aGlzIGRhdGFzZXQsIGluY2x1ZGluZyBjaGFydHMgb3duZWQgYnkgb3RoZXIgcGVvcGxlLicsXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxTdHlsZWRUYWJsZVRhYnNcbiAgICAgICAgICBmdWxsV2lkdGg9e2ZhbHNlfVxuICAgICAgICAgIGlkPVwidGFibGUtdGFic1wiXG4gICAgICAgICAgZGF0YS10ZXN0PVwiZWRpdC1kYXRhc2V0LXRhYnNcIlxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVRhYlNlbGVjdH1cbiAgICAgICAgICBkZWZhdWx0QWN0aXZlS2V5PXthY3RpdmVUYWJLZXl9XG4gICAgICAgID5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lIGtleT17MH0gdGFiPXt0KCdTb3VyY2UnKX0+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJTb3VyY2VGaWVsZHNldCh0aGVtZSl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3NvcnRlZE1ldHJpY3N9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ01ldHJpY3MnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleT17MX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJNZXRyaWNDb2xsZWN0aW9uKCl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3RoaXMuc3RhdGUuZGF0YWJhc2VDb2x1bW5zfVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdDb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezJ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgICA8U3R5bGVkQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJ0ZXJ0aWFyeVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc3luY01ldGFkYXRhfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzeW5jLWZyb20tc291cmNlXCJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEljb25zLkRhdGFiYXNlT3V0bGluZWQgaWNvblNpemU9XCJtXCIgLz5cbiAgICAgICAgICAgICAgICAgICAge3QoJ1N5bmMgY29sdW1ucyBmcm9tIHNvdXJjZScpfVxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICA8L0NvbHVtbkJ1dHRvbldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5Db2xsZWN0aW9uVGFibGVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW5zLXRhYmxlXCJcbiAgICAgICAgICAgICAgICBjb2x1bW5zPXt0aGlzLnN0YXRlLmRhdGFiYXNlQ29sdW1uc31cbiAgICAgICAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIG9uQ29sdW1uc0NoYW5nZT17ZGF0YWJhc2VDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBkYXRhYmFzZUNvbHVtbnMgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWV0YWRhdGFMb2FkaW5nICYmIDxMb2FkaW5nIC8+fVxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnQ2FsY3VsYXRlZCBjb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQ29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICBvbkNvbHVtbnNDaGFuZ2U9e2NhbGN1bGF0ZWRDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBjYWxjdWxhdGVkQ29sdW1ucyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2x1bW5MYWJlbFRvb2x0aXBzPXt7XG4gICAgICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdChcbiAgICAgICAgICAgICAgICAgICAgJ1RoaXMgZmllbGQgaXMgdXNlZCBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIHRvIGF0dGFjaCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAndGhlIGNhbGN1bGF0ZWQgZGltZW5zaW9uIHRvIGNoYXJ0cy4gSXQgaXMgYWxzbyB1c2VkICcgK1xuICAgICAgICAgICAgICAgICAgICAgICdhcyB0aGUgYWxpYXMgaW4gdGhlIFNRTCBxdWVyeS4nLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICAgICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWVcbiAgICAgICAgICAgICAgICBzaG93RXhwcmVzc2lvblxuICAgICAgICAgICAgICAgIGFsbG93QWRkSXRlbVxuICAgICAgICAgICAgICAgIGFsbG93RWRpdERhdGFUeXBlXG4gICAgICAgICAgICAgICAgaXRlbUdlbmVyYXRvcj17KCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiB0KCc8bmV3IGNvbHVtbj4nKSxcbiAgICAgICAgICAgICAgICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBncm91cGJ5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogdCgnPGVudGVyIFNRTCBleHByZXNzaW9uIGhlcmU+JyksXG4gICAgICAgICAgICAgICAgICBfX2V4cGFuZGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lIGtleT17NH0gdGFiPXt0KCdTZXR0aW5ncycpfT5cbiAgICAgICAgICAgIDxSb3cgZ3V0dGVyPXsxNn0+XG4gICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgIDxGb3JtQ29udGFpbmVyPnt0aGlzLnJlbmRlclNldHRpbmdzRmllbGRzZXQoKX08L0Zvcm1Db250YWluZXI+XG4gICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj57dGhpcy5yZW5kZXJBZHZhbmNlZEZpZWxkc2V0KCl9PC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgIDwvUm93PlxuICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICAgICA8L1N0eWxlZFRhYmxlVGFicz5cbiAgICAgIDwvRGF0YXNvdXJjZUNvbnRhaW5lcj5cbiAgICApO1xuICB9XG59XG5cbkRhdGFzb3VyY2VFZGl0b3IuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuRGF0YXNvdXJjZUVkaXRvci5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5cbmNvbnN0IERhdGFTb3VyY2VDb21wb25lbnQgPSB3aXRoVGhlbWUoRGF0YXNvdXJjZUVkaXRvcik7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUb2FzdHMoRGF0YVNvdXJjZUNvbXBvbmVudCk7XG4iXX0= */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };var _ref3 = process.env.NODE_ENV === \"production\" ? { name: \"hkh81z\", styles: \"margin-top:8px\" } : { name: \"17jm38f-DatasourceEditor\", styles: \"margin-top:8px;label:DatasourceEditor;/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9EYXRhc291cmNlL0RhdGFzb3VyY2VFZGl0b3IuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJrQ3lCIiwiZmlsZSI6Ii9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9EYXRhc291cmNlL0RhdGFzb3VyY2VFZGl0b3IuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uJztcbmltcG9ydCB7IFB1cmVDb21wb25lbnQsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IFJhZGlvIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvUmFkaW8nO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgQWxlcnQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQWxlcnQnO1xuaW1wb3J0IEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0JhZGdlJztcbmltcG9ydCB7XG4gIGNzcyxcbiAgaXNGZWF0dXJlRW5hYmxlZCxcbiAgZ2V0Q3VycmVuY3lTeW1ib2wsXG4gIGVuc3VyZUlzQXJyYXksXG4gIEZlYXR1cmVGbGFnLFxuICBzdHlsZWQsXG4gIFN1cGVyc2V0Q2xpZW50LFxuICB0LFxuICB3aXRoVGhlbWUsXG4gIGdldENsaWVudEVycm9yT2JqZWN0LFxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBTZWxlY3QsIEFzeW5jU2VsZWN0LCBSb3csIENvbCB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcbmltcG9ydCB7IEZvcm1MYWJlbCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0Zvcm0nO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IFRhYnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFicyc7XG5pbXBvcnQgQ2VydGlmaWVkQmFkZ2UgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2VydGlmaWVkQmFkZ2UnO1xuaW1wb3J0IFdhcm5pbmdJY29uV2l0aFRvb2x0aXAgZnJvbSAnc3JjL2NvbXBvbmVudHMvV2FybmluZ0ljb25XaXRoVG9vbHRpcCc7XG5pbXBvcnQgRGF0YWJhc2VTZWxlY3RvciBmcm9tICdzcmMvY29tcG9uZW50cy9EYXRhYmFzZVNlbGVjdG9yJztcbmltcG9ydCBMYWJlbCBmcm9tICdzcmMvY29tcG9uZW50cy9MYWJlbCc7XG5pbXBvcnQgTG9hZGluZyBmcm9tICdzcmMvY29tcG9uZW50cy9Mb2FkaW5nJztcbmltcG9ydCBUYWJsZVNlbGVjdG9yIGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYmxlU2VsZWN0b3InO1xuaW1wb3J0IEVkaXRhYmxlVGl0bGUgZnJvbSAnc3JjL2NvbXBvbmVudHMvRWRpdGFibGVUaXRsZSc7XG5pbXBvcnQgQ2hlY2tib3hDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvQ2hlY2tib3hDb250cm9sJztcbmltcG9ydCBUZXh0Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1RleHRDb250cm9sJztcbmltcG9ydCBUZXh0QXJlYUNvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0QXJlYUNvbnRyb2wnO1xuaW1wb3J0IFNwYXRpYWxDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvU3BhdGlhbENvbnRyb2wnO1xuaW1wb3J0IHdpdGhUb2FzdHMgZnJvbSAnc3JjL2NvbXBvbmVudHMvTWVzc2FnZVRvYXN0cy93aXRoVG9hc3RzJztcbmltcG9ydCB7IEljb25zIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IEN1cnJlbmN5Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0N1cnJlbmN5Q29udHJvbCc7XG5pbXBvcnQgQ29sbGVjdGlvblRhYmxlIGZyb20gJy4vQ29sbGVjdGlvblRhYmxlJztcbmltcG9ydCBGaWVsZHNldCBmcm9tICcuL0ZpZWxkc2V0JztcbmltcG9ydCBGaWVsZCBmcm9tICcuL0ZpZWxkJztcbmltcG9ydCB7IGZldGNoU3luY2VkQ29sdW1ucywgdXBkYXRlQ29sdW1ucyB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBEYXRhc291cmNlQ29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgLmNoYW5nZS13YXJuaW5nIHtcbiAgICBtYXJnaW46IDE2cHggMTBweCAwO1xuICAgIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy53YXJuaW5nLmJhc2V9O1xuICB9XG5cbiAgLmNoYW5nZS13YXJuaW5nIC5ib2xkIHtcbiAgICBmb250LXdlaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMuYm9sZH07XG4gIH1cblxuICAuZm9ybS1ncm91cC5oYXMtZmVlZGJhY2sgPiAuaGVscC1ibG9jayB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICB9XG5cbiAgLmZvcm0tZ3JvdXAuZm9ybS1ncm91cC1tZCB7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICB9XG5gO1xuXG5jb25zdCBGbGV4Um93Q29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcblxuICBzdmcge1xuICAgIG1hcmdpbi1yaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkVGFibGVUYWJzID0gc3R5bGVkKFRhYnMpYFxuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgLmFudC10YWJzLWNvbnRlbnQtaG9sZGVyIHtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkQmFkZ2UgPSBzdHlsZWQoQmFkZ2UpYFxuICAuYW50ZDUtYmFkZ2UtY291bnQge1xuICAgIGxpbmUtaGVpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBoZWlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA0fXB4O1xuICAgIG1hcmdpbi1sZWZ0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBFZGl0TG9ja0NvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGZvbnQtc2l6ZTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGEge1xuICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgfVxuYDtcblxuY29uc3QgQ29sdW1uQnV0dG9uV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICAkeyh7IHRoZW1lIH0pID0+IGBtYXJnaW4tYm90dG9tOiAke3RoZW1lLmdyaWRVbml0ICogMn1weGB9XG5gO1xuXG5jb25zdCBTdHlsZWRMYWJlbFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBzcGFuIHtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgLnRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICB9XG5cbiAgLmFudC10YWcge1xuICAgIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZEJ1dHRvbldyYXBwZXIgPSBzdHlsZWQuc3BhbmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgbWFyZ2luLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHg7XG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiAzfXB4O1xuICAgIGJ1dHRvbj5zcGFuPjpmaXJzdC1vZi10eXBlIHtcbiAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICB9XG4gIGB9XG5gO1xuXG5jb25zdCBzcWxUb29sdGlwT3B0aW9ucyA9IHtcbiAgcGxhY2VtZW50OiAndG9wUmlnaHQnLFxuICB0aXRsZTogdChcbiAgICAnSWYgY2hhbmdlcyBhcmUgbWFkZSB0byB5b3VyIFNRTCBxdWVyeSwgJyArXG4gICAgICAnY29sdW1ucyBpbiB5b3VyIGRhdGFzZXQgd2lsbCBiZSBzeW5jZWQgd2hlbiBzYXZpbmcgdGhlIGRhdGFzZXQuJyxcbiAgKSxcbn07XG5cbmNvbnN0IGNoZWNrYm94R2VuZXJhdG9yID0gKGQsIG9uQ2hhbmdlKSA9PiAoXG4gIDxDaGVja2JveENvbnRyb2wgdmFsdWU9e2R9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz5cbik7XG5jb25zdCBEQVRBX1RZUEVTID0gW1xuICB7IHZhbHVlOiAnU1RSSU5HJywgbGFiZWw6IHQoJ1NUUklORycpIH0sXG4gIHsgdmFsdWU6ICdOVU1FUklDJywgbGFiZWw6IHQoJ05VTUVSSUMnKSB9LFxuICB7IHZhbHVlOiAnREFURVRJTUUnLCBsYWJlbDogdCgnREFURVRJTUUnKSB9LFxuICB7IHZhbHVlOiAnQk9PTEVBTicsIGxhYmVsOiB0KCdCT09MRUFOJykgfSxcbl07XG5cbmNvbnN0IERBVEFTT1VSQ0VfVFlQRVNfQVJSID0gW1xuICB7IGtleTogJ3BoeXNpY2FsJywgbGFiZWw6IHQoJ1BoeXNpY2FsICh0YWJsZSBvciB2aWV3KScpIH0sXG4gIHsga2V5OiAndmlydHVhbCcsIGxhYmVsOiB0KCdWaXJ0dWFsIChTUUwpJykgfSxcbl07XG5jb25zdCBEQVRBU09VUkNFX1RZUEVTID0ge307XG5EQVRBU09VUkNFX1RZUEVTX0FSUi5mb3JFYWNoKG8gPT4ge1xuICBEQVRBU09VUkNFX1RZUEVTW28ua2V5XSA9IG87XG59KTtcblxuZnVuY3Rpb24gQ29sbGVjdGlvblRhYlRpdGxlKHsgdGl0bGUsIGNvbGxlY3Rpb24gfSkge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNzcz17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19XG4gICAgICBkYXRhLXRlc3Q9e2Bjb2xsZWN0aW9uLXRhYi0ke3RpdGxlfWB9XG4gICAgPlxuICAgICAge3RpdGxlfXsnICd9XG4gICAgICA8U3R5bGVkQmFkZ2UgY291bnQ9e2NvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDB9IHNob3daZXJvIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbkNvbGxlY3Rpb25UYWJUaXRsZS5wcm9wVHlwZXMgPSB7XG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb2xsZWN0aW9uOiBQcm9wVHlwZXMuYXJyYXksXG59O1xuXG5mdW5jdGlvbiBDb2x1bW5Db2xsZWN0aW9uVGFibGUoe1xuICBjb2x1bW5zLFxuICBkYXRhc291cmNlLFxuICBvbkNvbHVtbnNDaGFuZ2UsXG4gIG9uRGF0YXNvdXJjZUNoYW5nZSxcbiAgZWRpdGFibGVDb2x1bW5OYW1lLFxuICBzaG93RXhwcmVzc2lvbixcbiAgYWxsb3dBZGRJdGVtLFxuICBhbGxvd0VkaXREYXRhVHlwZSxcbiAgaXRlbUdlbmVyYXRvcixcbiAgY29sdW1uTGFiZWxUb29sdGlwcyxcbn0pIHtcbiAgcmV0dXJuIChcbiAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICB0YWJsZUNvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgc29ydENvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgYWxsb3dEZWxldGVzXG4gICAgICBhbGxvd0FkZEl0ZW09e2FsbG93QWRkSXRlbX1cbiAgICAgIGl0ZW1HZW5lcmF0b3I9e2l0ZW1HZW5lcmF0b3J9XG4gICAgICBjb2xsZWN0aW9uPXtjb2x1bW5zfVxuICAgICAgY29sdW1uTGFiZWxUb29sdGlwcz17Y29sdW1uTGFiZWxUb29sdGlwc31cbiAgICAgIHN0aWNreUhlYWRlclxuICAgICAgZXhwYW5kRmllbGRzZXQ9e1xuICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICA8RmllbGRzZXQgY29tcGFjdD5cbiAgICAgICAgICAgIHtzaG93RXhwcmVzc2lvbiAmJiAoXG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZXhwcmVzc2lvblwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCBleHByZXNzaW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwidmVyYm9zZV9uYW1lXCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0xhYmVsJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidmVyYm9zZV9uYW1lXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdMYWJlbCcpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7YWxsb3dFZGl0RGF0YVR5cGUgJiYgKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cInR5cGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17REFUQV9UWVBFU31cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cInR5cGVcIlxuICAgICAgICAgICAgICAgICAgICBhbGxvd05ld09wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2lzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRW5hYmxlQWR2YW5jZWREYXRhVHlwZXMpID8gKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImFkdmFuY2VkX2RhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0FkdmFuY2VkIGRhdGEgdHlwZScpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImFkdmFuY2VkX2RhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdBZHZhbmNlZCBEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPD48Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJweXRob25fZGF0ZV9mb3JtYXRcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0ZXRpbWUgZm9ybWF0Jyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtcbiAgICAgICAgICAgICAgICAvKiBOb3RlIHRoZSBmcmFnbWVudGVkIHRyYW5zbGF0aW9ucyBtYXkgbm90IHdvcmsuICovXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIHt0KCdUaGUgcGF0dGVybiBvZiB0aW1lc3RhbXAgZm9ybWF0LiBGb3Igc3RyaW5ncyB1c2UgJyl9XG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMi9saWJyYXJ5L2RhdGV0aW1lLmh0bWwjc3RyZnRpbWUtc3RycHRpbWUtYmVoYXZpb3JcIj5cbiAgICAgICAgICAgICAgICAgICAge3QoJ1B5dGhvbiBkYXRldGltZSBzdHJpbmcgcGF0dGVybicpfVxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAge3QoJyBleHByZXNzaW9uIHdoaWNoIG5lZWRzIHRvIGFkaGVyZSB0byB0aGUgJyl9XG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDFcIj5cbiAgICAgICAgICAgICAgICAgICAge3QoJ0lTTyA4NjAxJyl9XG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICB7dChgIHN0YW5kYXJkIHRvIGVuc3VyZSB0aGF0IHRoZSBsZXhpY29ncmFwaGljYWwgb3JkZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgICBjb2luY2lkZXMgd2l0aCB0aGUgY2hyb25vbG9naWNhbCBvcmRlcmluZy4gSWYgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wIGZvcm1hdCBkb2VzIG5vdCBhZGhlcmUgdG8gdGhlIElTTyA4NjAxIHN0YW5kYXJkXG4gICAgICAgICAgICAgICAgICAgICAgeW91IHdpbGwgbmVlZCB0byBkZWZpbmUgYW4gZXhwcmVzc2lvbiBhbmQgdHlwZSBmb3JcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1pbmcgdGhlIHN0cmluZyBpbnRvIGEgZGF0ZSBvciB0aW1lc3RhbXAuIE5vdGVcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHkgdGltZSB6b25lcyBhcmUgbm90IHN1cHBvcnRlZC4gSWYgdGltZSBpcyBzdG9yZWRcbiAgICAgICAgICAgICAgICAgICAgICBpbiBlcG9jaCBmb3JtYXQsIHB1dCBcXGBlcG9jaF9zXFxgIG9yIFxcYGVwb2NoX21zXFxgLiBJZiBubyBwYXR0ZXJuXG4gICAgICAgICAgICAgICAgICAgICAgaXMgc3BlY2lmaWVkIHdlIGZhbGwgYmFjayB0byB1c2luZyB0aGUgb3B0aW9uYWwgZGVmYXVsdHMgb24gYSBwZXJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZS9jb2x1bW4gbmFtZSBsZXZlbCB2aWEgdGhlIGV4dHJhIHBhcmFtZXRlci5gKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInB5dGhvbl9kYXRlX2Zvcm1hdFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIiVZLSVtLSVkXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmllZCBCeScpfVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnUGVyc29uIG9yIGdyb3VwIHRoYXQgaGFzIGNlcnRpZmllZCB0aGlzIG1ldHJpYycpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmllZFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWVkIGJ5Jyl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0RldGFpbHMgb2YgdGhlIGNlcnRpZmljYXRpb24nKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpY2F0aW9uRGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgICA8L0Zvcm1Db250YWluZXI+XG4gICAgICB9XG4gICAgICBjb2x1bW5MYWJlbHM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnQ29sdW1uJyksXG4gICAgICAgICAgICAgIGFkdmFuY2VkX2RhdGFfdHlwZTogdCgnQWR2YW5jZWQgZGF0YSB0eXBlJyksXG4gICAgICAgICAgICAgIHR5cGU6IHQoJ0RhdGEgdHlwZScpLFxuICAgICAgICAgICAgICBncm91cGJ5OiB0KCdJcyBkaW1lbnNpb24nKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogdCgnSXMgdGVtcG9yYWwnKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogdCgnRGVmYXVsdCBkYXRldGltZScpLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0KCdJcyBmaWx0ZXJhYmxlJyksXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiB0KCdDb2x1bW4nKSxcbiAgICAgICAgICAgICAgdHlwZTogdCgnRGF0YSB0eXBlJyksXG4gICAgICAgICAgICAgIGdyb3VwYnk6IHQoJ0lzIGRpbWVuc2lvbicpLFxuICAgICAgICAgICAgICBpc19kdHRtOiB0KCdJcyB0ZW1wb3JhbCcpLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiB0KCdEZWZhdWx0IGRhdGV0aW1lJyksXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IHQoJ0lzIGZpbHRlcmFibGUnKSxcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9uQ2hhbmdlPXtvbkNvbHVtbnNDaGFuZ2V9XG4gICAgICBpdGVtUmVuZGVyZXJzPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FbmFibGVBZHZhbmNlZERhdGFUeXBlcylcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6ICh2LCBvbkl0ZW1DaGFuZ2UsIF8sIHJlY29yZCkgPT5cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWUgPyAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICBjYW5FZGl0XG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Z9XG4gICAgICAgICAgICAgICAgICAgICAgb25TYXZlVGl0bGU9e29uSXRlbUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3Z9XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiAodmFsdWUsIF9vbkl0ZW1DaGFuZ2UsIF9sYWJlbCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGRhdGFzb3VyY2UubWFpbl9kdHRtX2NvbCA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gIWNvbHVtbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIGNvbHVtbiA9PiBjb2x1bW4uY29sdW1uX25hbWUgPT09IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICApLmlzX2R0dG07XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9e2ByYWRpby1kZWZhdWx0LWR0dG0tJHtyZWNvcmQuY29sdW1uX25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHR5cGU6IGQgPT4gKGQgPyA8TGFiZWw+e2R9PC9MYWJlbD4gOiBudWxsKSxcbiAgICAgICAgICAgICAgYWR2YW5jZWRfZGF0YV90eXBlOiBkID0+IChcbiAgICAgICAgICAgICAgICA8TGFiZWwgb25DaGFuZ2U9e29uQ29sdW1uc0NoYW5nZX0+e2R9PC9MYWJlbD5cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBncm91cGJ5OiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6ICh2LCBvbkl0ZW1DaGFuZ2UsIF8sIHJlY29yZCkgPT5cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWUgPyAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25JdGVtQ2hhbmdlfSAvPlxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxTdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgICAgIHtyZWNvcmQuaXNfY2VydGlmaWVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8Q2VydGlmaWVkQmFkZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlcnRpZmllZEJ5PXtyZWNvcmQuY2VydGlmaWVkX2J5fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscz17cmVjb3JkLmNlcnRpZmljYXRpb25fZGV0YWlsc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB7dn1cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6ICh2YWx1ZSwgX29uSXRlbUNoYW5nZSwgX2xhYmVsLCByZWNvcmQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZGF0YXNvdXJjZS5tYWluX2R0dG1fY29sID09PSByZWNvcmQuY29sdW1uX25hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQgPSAhY29sdW1ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgY29sdW1uID0+IGNvbHVtbi5jb2x1bW5fbmFtZSA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lLFxuICAgICAgICAgICAgICAgICkuaXNfZHR0bTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPFJhZGlvXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdD17YHJhZGlvLWRlZmF1bHQtZHR0bS0ke3JlY29yZC5jb2x1bW5fbmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogcmVjb3JkLmNvbHVtbl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHlwZTogZCA9PiAoZCA/IDxMYWJlbD57ZH08L0xhYmVsPiA6IG51bGwpLFxuICAgICAgICAgICAgICBpc19kdHRtOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGdyb3VwYnk6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgfVxuICAgICAgfVxuICAgIC8+XG4gICk7XG59XG5Db2x1bW5Db2xsZWN0aW9uVGFibGUucHJvcFR5cGVzID0ge1xuICBjb2x1bW5zOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbiAgZGF0YXNvdXJjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBvbkNvbHVtbnNDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9uRGF0YXNvdXJjZUNoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZWRpdGFibGVDb2x1bW5OYW1lOiBQcm9wVHlwZXMuYm9vbCxcbiAgc2hvd0V4cHJlc3Npb246IFByb3BUeXBlcy5ib29sLFxuICBhbGxvd0FkZEl0ZW06IFByb3BUeXBlcy5ib29sLFxuICBhbGxvd0VkaXREYXRhVHlwZTogUHJvcFR5cGVzLmJvb2wsXG4gIGl0ZW1HZW5lcmF0b3I6IFByb3BUeXBlcy5mdW5jLFxufTtcbkNvbHVtbkNvbGxlY3Rpb25UYWJsZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGVkaXRhYmxlQ29sdW1uTmFtZTogZmFsc2UsXG4gIHNob3dFeHByZXNzaW9uOiBmYWxzZSxcbiAgYWxsb3dBZGRJdGVtOiBmYWxzZSxcbiAgYWxsb3dFZGl0RGF0YVR5cGU6IGZhbHNlLFxuICBpdGVtR2VuZXJhdG9yOiAoKSA9PiAoe1xuICAgIGNvbHVtbl9uYW1lOiB0KCc8bmV3IGNvbHVtbj4nKSxcbiAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgIGdyb3VwYnk6IHRydWUsXG4gIH0pLFxufTtcblxuZnVuY3Rpb24gU3RhY2tlZEZpZWxkKHsgbGFiZWwsIGZvcm1FbGVtZW50IH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPGRpdj5cbiAgICAgICAgPHN0cm9uZz57bGFiZWx9PC9zdHJvbmc+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXY+e2Zvcm1FbGVtZW50fTwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5TdGFja2VkRmllbGQucHJvcFR5cGVzID0ge1xuICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgZm9ybUVsZW1lbnQ6IFByb3BUeXBlcy5ub2RlLFxufTtcblxuZnVuY3Rpb24gRm9ybUNvbnRhaW5lcih7IGNoaWxkcmVuIH0pIHtcbiAgcmV0dXJuIDxDYXJkIHBhZGRlZD57Y2hpbGRyZW59PC9DYXJkPjtcbn1cblxuRm9ybUNvbnRhaW5lci5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbn07XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgZGF0YXNvdXJjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIGFkZFN1Y2Nlc3NUb2FzdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgYWRkRGFuZ2VyVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHNldElzRWRpdGluZzogUHJvcFR5cGVzLmZ1bmMsXG59O1xuXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIG9uQ2hhbmdlOiAoKSA9PiB7fSxcbiAgc2V0SXNFZGl0aW5nOiAoKSA9PiB7fSxcbn07XG5cbmZ1bmN0aW9uIE93bmVyc1NlbGVjdG9yKHsgZGF0YXNvdXJjZSwgb25DaGFuZ2UgfSkge1xuICBjb25zdCBsb2FkT3B0aW9ucyA9IHVzZUNhbGxiYWNrKChzZWFyY2ggPSAnJywgcGFnZSwgcGFnZVNpemUpID0+IHtcbiAgICBjb25zdCBxdWVyeSA9IHJpc29uLmVuY29kZSh7IGZpbHRlcjogc2VhcmNoLCBwYWdlLCBwYWdlX3NpemU6IHBhZ2VTaXplIH0pO1xuICAgIHJldHVybiBTdXBlcnNldENsaWVudC5nZXQoe1xuICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2RhdGFzZXQvcmVsYXRlZC9vd25lcnM/cT0ke3F1ZXJ5fWAsXG4gICAgfSkudGhlbihyZXNwb25zZSA9PiAoe1xuICAgICAgZGF0YTogcmVzcG9uc2UuanNvbi5yZXN1bHRcbiAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0uZXh0cmEuYWN0aXZlKVxuICAgICAgICAubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICBsYWJlbDogaXRlbS50ZXh0LFxuICAgICAgICB9KSksXG4gICAgICB0b3RhbENvdW50OiByZXNwb25zZS5qc29uLmNvdW50LFxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiAoXG4gICAgPEFzeW5jU2VsZWN0XG4gICAgICBhcmlhTGFiZWw9e3QoJ1NlbGVjdCBvd25lcnMnKX1cbiAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICBuYW1lPVwib3duZXJzXCJcbiAgICAgIHZhbHVlPXtkYXRhc291cmNlLm93bmVyc31cbiAgICAgIG9wdGlvbnM9e2xvYWRPcHRpb25zfVxuICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgaGVhZGVyPXs8Rm9ybUxhYmVsPnt0KCdPd25lcnMnKX08L0Zvcm1MYWJlbD59XG4gICAgICBhbGxvd0NsZWFyXG4gICAgLz5cbiAgKTtcbn1cblxuY2xhc3MgRGF0YXNvdXJjZUVkaXRvciBleHRlbmRzIFB1cmVDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZGF0YXNvdXJjZToge1xuICAgICAgICAuLi5wcm9wcy5kYXRhc291cmNlLFxuICAgICAgICBvd25lcnM6IHByb3BzLmRhdGFzb3VyY2Uub3duZXJzLm1hcChvd25lciA9PiAoe1xuICAgICAgICAgIHZhbHVlOiBvd25lci52YWx1ZSB8fCBvd25lci5pZCxcbiAgICAgICAgICBsYWJlbDogb3duZXIubGFiZWwgfHwgYCR7b3duZXIuZmlyc3RfbmFtZX0gJHtvd25lci5sYXN0X25hbWV9YCxcbiAgICAgICAgfSkpLFxuICAgICAgICBtZXRyaWNzOiBwcm9wcy5kYXRhc291cmNlLm1ldHJpY3M/Lm1hcChtZXRyaWMgPT4ge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnlNZXRyaWMsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzLFxuICAgICAgICAgIH0gPSBtZXRyaWM7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2VydGlmaWNhdGlvbjogeyBkZXRhaWxzLCBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IH0gPSB7fSxcbiAgICAgICAgICAgIHdhcm5pbmdfbWFya2Rvd246IHdhcm5pbmdNYXJrZG93bixcbiAgICAgICAgICB9ID0gSlNPTi5wYXJzZShtZXRyaWMuZXh0cmEgfHwgJ3t9JykgfHwge307XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLm1ldHJpYyxcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogY2VydGlmaWNhdGlvbkRldGFpbHMgfHwgZGV0YWlscyxcbiAgICAgICAgICAgIHdhcm5pbmdfbWFya2Rvd246IHdhcm5pbmdNYXJrZG93biB8fCAnJyxcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnkgfHwgY2VydGlmaWVkQnlNZXRyaWMsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICB9LFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIGlzU3FsYTpcbiAgICAgICAgcHJvcHMuZGF0YXNvdXJjZS5kYXRhc291cmNlX3R5cGUgPT09ICd0YWJsZScgfHxcbiAgICAgICAgcHJvcHMuZGF0YXNvdXJjZS50eXBlID09PSAndGFibGUnLFxuICAgICAgaXNFZGl0TW9kZTogZmFsc2UsXG4gICAgICBkYXRhYmFzZUNvbHVtbnM6IHByb3BzLmRhdGFzb3VyY2UuY29sdW1ucy5maWx0ZXIoY29sID0+ICFjb2wuZXhwcmVzc2lvbiksXG4gICAgICBjYWxjdWxhdGVkQ29sdW1uczogcHJvcHMuZGF0YXNvdXJjZS5jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgY29sID0+ICEhY29sLmV4cHJlc3Npb24sXG4gICAgICApLFxuICAgICAgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGFjdGl2ZVRhYktleTogMCxcbiAgICAgIGRhdGFzb3VyY2VUeXBlOiBwcm9wcy5kYXRhc291cmNlLnNxbFxuICAgICAgICA/IERBVEFTT1VSQ0VfVFlQRVMudmlydHVhbC5rZXlcbiAgICAgICAgOiBEQVRBU09VUkNFX1RZUEVTLnBoeXNpY2FsLmtleSxcbiAgICB9O1xuXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2hhbmdlRWRpdE1vZGUgPSB0aGlzLm9uQ2hhbmdlRWRpdE1vZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UgPSB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZSA9IHRoaXMub25EYXRhc291cmNlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy50YWJsZUNoYW5nZUFuZFN5bmNNZXRhZGF0YSA9XG4gICAgICB0aGlzLnRhYmxlQ2hhbmdlQW5kU3luY01ldGFkYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zeW5jTWV0YWRhdGEgPSB0aGlzLnN5bmNNZXRhZGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0Q29sdW1ucyA9IHRoaXMuc2V0Q29sdW1ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMudmFsaWRhdGVBbmRDaGFuZ2UgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVUYWJTZWxlY3QgPSB0aGlzLmhhbmRsZVRhYlNlbGVjdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3VycmVuY2llcyA9IGVuc3VyZUlzQXJyYXkocHJvcHMuY3VycmVuY2llcykubWFwKGN1cnJlbmN5Q29kZSA9PiAoe1xuICAgICAgdmFsdWU6IGN1cnJlbmN5Q29kZSxcbiAgICAgIGxhYmVsOiBgJHtnZXRDdXJyZW5jeVN5bWJvbCh7XG4gICAgICAgIHN5bWJvbDogY3VycmVuY3lDb2RlLFxuICAgICAgfSl9ICgke2N1cnJlbmN5Q29kZX0pYCxcbiAgICB9KSk7XG4gIH1cblxuICBvbkNoYW5nZSgpIHtcbiAgICAvLyBFbXB0eWluZyBTUUwgaWYgXCJQaHlzaWNhbFwiIHJhZGlvIGJ1dHRvbiBpcyBzZWxlY3RlZFxuICAgIC8vIEN1cnJlbnRseSB0aGUgbG9naWMgdG8ga25vdyB3aGV0aGVyIHRoZSBzb3VyY2UgaXNcbiAgICAvLyBwaHlzaWNhbCBvciB2aXJ0dWFsIGlzIGJhc2VkIG9uIHdoZXRoZXIgU1FMIGlzIGVtcHR5IG9yIG5vdC5cbiAgICBjb25zdCB7IGRhdGFzb3VyY2VUeXBlLCBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHNxbCA9XG4gICAgICBkYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgPyAnJyA6IGRhdGFzb3VyY2Uuc3FsO1xuICAgIGNvbnN0IG5ld0RhdGFzb3VyY2UgPSB7XG4gICAgICAuLi50aGlzLnN0YXRlLmRhdGFzb3VyY2UsXG4gICAgICBzcWwsXG4gICAgICBjb2x1bW5zOiBbLi4udGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnMsIC4uLnRoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnNdLFxuICAgIH07XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShuZXdEYXRhc291cmNlLCB0aGlzLnN0YXRlLmVycm9ycyk7XG4gIH1cblxuICBvbkNoYW5nZUVkaXRNb2RlKCkge1xuICAgIHRoaXMucHJvcHMuc2V0SXNFZGl0aW5nKCF0aGlzLnN0YXRlLmlzRWRpdE1vZGUpO1xuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7IGlzRWRpdE1vZGU6ICFwcmV2U3RhdGUuaXNFZGl0TW9kZSB9KSk7XG4gIH1cblxuICBvbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgY2FsbGJhY2sgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFzb3VyY2UgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgb25EYXRhc291cmNlUHJvcENoYW5nZShhdHRyLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIGlmIHZhbHVlIGlzIHVuZGVmaW5lZCBkbyBub3QgdXBkYXRlIHN0YXRlXG4gICAgY29uc3QgZGF0YXNvdXJjZSA9IHsgLi4udGhpcy5zdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH07XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICBkYXRhc291cmNlOiB7IC4uLnByZXZTdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH0sXG4gICAgICB9KSxcbiAgICAgIGF0dHIgPT09ICd0YWJsZV9uYW1lJ1xuICAgICAgICA/IHRoaXMub25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEpXG4gICAgICAgIDogdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSksXG4gICAgKTtcbiAgfVxuXG4gIG9uRGF0YXNvdXJjZVR5cGVDaGFuZ2UoZGF0YXNvdXJjZVR5cGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGF0YXNvdXJjZVR5cGUgfSk7XG4gIH1cblxuICBzZXRDb2x1bW5zKG9iaikge1xuICAgIC8vIHVwZGF0ZSBjYWxjdWxhdGVkQ29sdW1ucyBvciBkYXRhYmFzZUNvbHVtbnNcbiAgICB0aGlzLnNldFN0YXRlKG9iaiwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSk7XG4gIH1cblxuICB2YWxpZGF0ZUFuZENoYW5nZSgpIHtcbiAgICB0aGlzLnZhbGlkYXRlKHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgdGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEoKSB7XG4gICAgdGhpcy52YWxpZGF0ZSgoKSA9PiB7XG4gICAgICB0aGlzLnN5bmNNZXRhZGF0YSgpO1xuICAgICAgdGhpcy5vbkNoYW5nZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc3luY01ldGFkYXRhKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiB0cnVlIH0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdDb2xzID0gYXdhaXQgZmV0Y2hTeW5jZWRDb2x1bW5zKGRhdGFzb3VyY2UpO1xuICAgICAgY29uc3QgY29sdW1uQ2hhbmdlcyA9IHVwZGF0ZUNvbHVtbnMoXG4gICAgICAgIGRhdGFzb3VyY2UuY29sdW1ucyxcbiAgICAgICAgbmV3Q29scyxcbiAgICAgICAgdGhpcy5wcm9wcy5hZGRTdWNjZXNzVG9hc3QsXG4gICAgICApO1xuICAgICAgdGhpcy5zZXRDb2x1bW5zKHtcbiAgICAgICAgZGF0YWJhc2VDb2x1bW5zOiBjb2x1bW5DaGFuZ2VzLmZpbmFsQ29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgY29sID0+ICFjb2wuZXhwcmVzc2lvbiwgLy8gcmVtb3ZlIGNhbGN1bGF0ZWQgY29sdW1uc1xuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdCh0KCdNZXRhZGF0YSBoYXMgYmVlbiBzeW5jZWQnKSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgeyBlcnJvcjogY2xpZW50RXJyb3IsIHN0YXR1c1RleHQgfSA9XG4gICAgICAgIGF3YWl0IGdldENsaWVudEVycm9yT2JqZWN0KGVycm9yKTtcbiAgICAgIHRoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3QoXG4gICAgICAgIGNsaWVudEVycm9yIHx8IHN0YXR1c1RleHQgfHwgdCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkJyksXG4gICAgICApO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1ldGFkYXRhTG9hZGluZzogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgZmluZER1cGxpY2F0ZXMoYXJyLCBhY2Nlc3Nvcikge1xuICAgIGNvbnN0IHNlZW4gPSB7fTtcbiAgICBjb25zdCBkdXBzID0gW107XG4gICAgYXJyLmZvckVhY2gob2JqID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhY2Nlc3NvcihvYmopO1xuICAgICAgaWYgKGl0ZW0gaW4gc2Vlbikge1xuICAgICAgICBkdXBzLnB1c2goaXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuW2l0ZW1dID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZHVwcztcbiAgfVxuXG4gIHZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgbGV0IGVycm9ycyA9IFtdO1xuICAgIGxldCBkdXBzO1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIC8vIExvb2tpbmcgZm9yIGR1cGxpY2F0ZSBjb2x1bW5fbmFtZVxuICAgIGR1cHMgPSB0aGlzLmZpbmREdXBsaWNhdGVzKGRhdGFzb3VyY2UuY29sdW1ucywgb2JqID0+IG9iai5jb2x1bW5fbmFtZSk7XG4gICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChcbiAgICAgIGR1cHMubWFwKG5hbWUgPT4gdCgnQ29sdW1uIG5hbWUgWyVzXSBpcyBkdXBsaWNhdGVkJywgbmFtZSkpLFxuICAgICk7XG5cbiAgICAvLyBMb29raW5nIGZvciBkdXBsaWNhdGUgbWV0cmljX25hbWVcbiAgICBkdXBzID0gdGhpcy5maW5kRHVwbGljYXRlcyhkYXRhc291cmNlLm1ldHJpY3MsIG9iaiA9PiBvYmoubWV0cmljX25hbWUpO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBkdXBzLm1hcChuYW1lID0+IHQoJ01ldHJpYyBuYW1lIFslc10gaXMgZHVwbGljYXRlZCcsIG5hbWUpKSxcbiAgICApO1xuXG4gICAgLy8gTWFraW5nIHN1cmUgY2FsY3VsYXRlZENvbHVtbnMgaGF2ZSBhbiBleHByZXNzaW9uIGRlZmluZWRcbiAgICBjb25zdCBub0ZpbHRlckNhbGNDb2xzID0gdGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1ucy5maWx0ZXIoXG4gICAgICBjb2wgPT4gIWNvbC5leHByZXNzaW9uICYmICFjb2wuanNvbixcbiAgICApO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBub0ZpbHRlckNhbGNDb2xzLm1hcChjb2wgPT5cbiAgICAgICAgdCgnQ2FsY3VsYXRlZCBjb2x1bW4gWyVzXSByZXF1aXJlcyBhbiBleHByZXNzaW9uJywgY29sLmNvbHVtbl9uYW1lKSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIC8vIHZhbGlkYXRlIGN1cnJlbmN5IGNvZGVcbiAgICB0cnkge1xuICAgICAgdGhpcy5zdGF0ZS5kYXRhc291cmNlLm1ldHJpY3M/LmZvckVhY2goXG4gICAgICAgIG1ldHJpYyA9PlxuICAgICAgICAgIG1ldHJpYy5jdXJyZW5jeT8uc3ltYm9sICYmXG4gICAgICAgICAgbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHtcbiAgICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgICAgICAgICAgY3VycmVuY3k6IG1ldHJpYy5jdXJyZW5jeS5zeW1ib2wsXG4gICAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gY2F0Y2gge1xuICAgICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChbdCgnSW52YWxpZCBjdXJyZW5jeSBjb2RlIGluIHNhdmVkIG1ldHJpY3MnKV0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvcnMgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaGFuZGxlVGFiU2VsZWN0KGFjdGl2ZVRhYktleSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWJLZXkgfSk7XG4gIH1cblxuICBzb3J0TWV0cmljcyhtZXRyaWNzKSB7XG4gICAgcmV0dXJuIG1ldHJpY3Muc29ydCgoeyBpZDogYSB9LCB7IGlkOiBiIH0pID0+IGIgLSBhKTtcbiAgfVxuXG4gIHJlbmRlclNldHRpbmdzRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0Jhc2ljJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiZGVmYXVsdF9lbmRwb2ludFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0RlZmF1bHQgVVJMJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICBgRGVmYXVsdCBVUkwgdG8gcmVkaXJlY3QgdG8gd2hlbiBhY2Nlc3NpbmcgZnJvbSB0aGUgZGF0YXNldCBsaXN0IHBhZ2UuXG4gICAgICAgICAgICBBY2NlcHRzIHJlbGF0aXZlIFVSTHMgc3VjaCBhcyA8c3BhbiBzdHlsZT3igJ53aGl0ZS1zcGFjZTogbm93cmFwO+KAnT4vc3VwZXJzZXQvZGFzaGJvYXJkL3tpZH0vPC9zcGFuPmAsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwiZGVmYXVsdF9lbmRwb2ludFwiIC8+fVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBpbmxpbmVcbiAgICAgICAgICBmaWVsZEtleT1cImZpbHRlcl9zZWxlY3RfZW5hYmxlZFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0F1dG9jb21wbGV0ZSBmaWx0ZXJzJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1doZXRoZXIgdG8gcG9wdWxhdGUgYXV0b2NvbXBsZXRlIGZpbHRlcnMgb3B0aW9ucycpfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgLz59XG4gICAgICAgIC8+XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICBmaWVsZEtleT1cImZldGNoX3ZhbHVlc19wcmVkaWNhdGVcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ0F1dG9jb21wbGV0ZSBxdWVyeSBwcmVkaWNhdGUnKX1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAnV2hlbiB1c2luZyBcIkF1dG9jb21wbGV0ZSBmaWx0ZXJzXCIsIHRoaXMgY2FuIGJlIHVzZWQgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZSAnICtcbiAgICAgICAgICAgICAgICAnb2YgdGhlIHF1ZXJ5IGZldGNoaW5nIHRoZSB2YWx1ZXMuIFVzZSB0aGlzIG9wdGlvbiB0byBhcHBseSBhICcgK1xuICAgICAgICAgICAgICAgICdwcmVkaWNhdGUgKFdIRVJFIGNsYXVzZSkgdG8gdGhlIHF1ZXJ5IHNlbGVjdGluZyB0aGUgZGlzdGluY3QgJyArXG4gICAgICAgICAgICAgICAgJ3ZhbHVlcyBmcm9tIHRoZSB0YWJsZS4gVHlwaWNhbGx5IHRoZSBpbnRlbnQgd291bGQgYmUgdG8gbGltaXQgdGhlIHNjYW4gJyArXG4gICAgICAgICAgICAgICAgJ2J5IGFwcGx5aW5nIGEgcmVsYXRpdmUgdGltZSBmaWx0ZXIgb24gYSBwYXJ0aXRpb25lZCBvciBpbmRleGVkIHRpbWUtcmVsYXRlZCBmaWVsZC4nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJzcWxcIlxuICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImZldGNoX3ZhbHVlc19wcmVkaWNhdGVcIlxuICAgICAgICAgICAgICAgIG1pbkxpbmVzPXs1fVxuICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgZmllbGRLZXk9XCJleHRyYVwiXG4gICAgICAgICAgICBsYWJlbD17dCgnRXh0cmEnKX1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAnRXh0cmEgZGF0YSB0byBzcGVjaWZ5IHRhYmxlIG1ldGFkYXRhLiBDdXJyZW50bHkgc3VwcG9ydHMgJyArXG4gICAgICAgICAgICAgICAgJ21ldGFkYXRhIG9mIHRoZSBmb3JtYXQ6IGB7IFwiY2VydGlmaWNhdGlvblwiOiB7IFwiY2VydGlmaWVkX2J5XCI6ICcgK1xuICAgICAgICAgICAgICAgICdcIkRhdGEgUGxhdGZvcm0gVGVhbVwiLCBcImRldGFpbHNcIjogXCJUaGlzIHRhYmxlIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGguXCIgJyArXG4gICAgICAgICAgICAgICAgJ30sIFwid2FybmluZ19tYXJrZG93blwiOiBcIlRoaXMgaXMgYSB3YXJuaW5nLlwiIH1gLicsXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJleHRyYVwiXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJqc29uXCJcbiAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPE93bmVyc1NlbGVjdG9yXG4gICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICBvbkNoYW5nZT17bmV3T3duZXJzID0+IHtcbiAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlQ2hhbmdlKHsgLi4uZGF0YXNvdXJjZSwgb3duZXJzOiBuZXdPd25lcnMgfSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvRmllbGRzZXQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckFkdmFuY2VkRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0FkdmFuY2VkJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJjYWNoZV90aW1lb3V0XCJcbiAgICAgICAgICBsYWJlbD17dCgnQ2FjaGUgdGltZW91dCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgJ1RoZSBkdXJhdGlvbiBvZiB0aW1lIGluIHNlY29uZHMgYmVmb3JlIHRoZSBjYWNoZSBpcyBpbnZhbGlkYXRlZC4gU2V0IHRvIC0xIHRvIGJ5cGFzcyB0aGUgY2FjaGUuJyxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJjYWNoZV90aW1lb3V0XCIgLz59XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwib2Zmc2V0XCJcbiAgICAgICAgICBsYWJlbD17dCgnSG91cnMgb2Zmc2V0Jyl9XG4gICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cIm9mZnNldFwiIC8+fVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgJ1RoZSBudW1iZXIgb2YgaG91cnMsIG5lZ2F0aXZlIG9yIHBvc2l0aXZlLCB0byBzaGlmdCB0aGUgdGltZSBjb2x1bW4uIFRoaXMgY2FuIGJlIHVzZWQgdG8gbW92ZSBVVEMgdGltZSB0byBsb2NhbCB0aW1lLicsXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgICAge3RoaXMuc3RhdGUuaXNTcWxhICYmIChcbiAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgIGZpZWxkS2V5PVwidGVtcGxhdGVfcGFyYW1zXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdUZW1wbGF0ZSBwYXJhbWV0ZXJzJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ0Egc2V0IG9mIHBhcmFtZXRlcnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGluIHRoZSBxdWVyeSB1c2luZyBKaW5qYSB0ZW1wbGF0aW5nIHN5bnRheCcsXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cInRlbXBsYXRlX3BhcmFtc1wiIC8+fVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGlubGluZVxuICAgICAgICAgIGZpZWxkS2V5PVwibm9ybWFsaXplX2NvbHVtbnNcIlxuICAgICAgICAgIGxhYmVsPXt0KCdOb3JtYWxpemUgY29sdW1uIG5hbWVzJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAnQWxsb3cgY29sdW1uIG5hbWVzIHRvIGJlIGNoYW5nZWQgdG8gY2FzZSBpbnNlbnNpdGl2ZSBmb3JtYXQsIGlmIHN1cHBvcnRlZCAoZS5nLiBPcmFjbGUsIFNub3dmbGFrZSkuJyxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgY29udHJvbElkPVwibm9ybWFsaXplX2NvbHVtbnNcIiAvPn1cbiAgICAgICAgLz5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgaW5saW5lXG4gICAgICAgICAgZmllbGRLZXk9XCJhbHdheXNfZmlsdGVyX21haW5fZHR0bVwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Fsd2F5cyBmaWx0ZXIgbWFpbiBkYXRldGltZSBjb2x1bW4nKX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgIGBXaGVuIHRoZSBzZWNvbmRhcnkgdGVtcG9yYWwgY29sdW1ucyBhcmUgZmlsdGVyZWQsIGFwcGx5IHRoZSBzYW1lIGZpbHRlciB0byB0aGUgbWFpbiBkYXRldGltZSBjb2x1bW4uYCxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgY29udHJvbElkPVwiYWx3YXlzX2ZpbHRlcl9tYWluX2R0dG1cIiAvPn1cbiAgICAgICAgLz5cbiAgICAgIDwvRmllbGRzZXQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclNwYXRpYWxUYWIoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgc3BhdGlhbHMsIGFsbF9jb2xzOiBhbGxDb2xzIH0gPSBkYXRhc291cmNlO1xuICAgIHJldHVybiAoXG4gICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgIHRhYj17PENvbGxlY3Rpb25UYWJUaXRsZSBjb2xsZWN0aW9uPXtzcGF0aWFsc30gdGl0bGU9e3QoJ1NwYXRpYWwnKX0gLz59XG4gICAgICAgIGtleT17NH1cbiAgICAgID5cbiAgICAgICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgICAgIHRhYmxlQ29sdW1ucz17WyduYW1lJywgJ2NvbmZpZyddfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UuYmluZCh0aGlzLCAnc3BhdGlhbHMnKX1cbiAgICAgICAgICBpdGVtR2VuZXJhdG9yPXsoKSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogdCgnPG5ldyBzcGF0aWFsPicpLFxuICAgICAgICAgICAgdHlwZTogdCgnPG5vIHR5cGU+JyksXG4gICAgICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgICAgfSl9XG4gICAgICAgICAgY29sbGVjdGlvbj17c3BhdGlhbHN9XG4gICAgICAgICAgYWxsb3dEZWxldGVzXG4gICAgICAgICAgaXRlbVJlbmRlcmVycz17e1xuICAgICAgICAgICAgbmFtZTogKGQsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlIGNhbkVkaXQgdGl0bGU9e2R9IG9uU2F2ZVRpdGxlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjb25maWc6ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgICA8U3BhdGlhbENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gY2hvaWNlcz17YWxsQ29sc30gLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJTb3VyY2VGaWVsZHNldCgpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxFZGl0TG9ja0NvbnRhaW5lcj5cbiAgICAgICAgICA8c3BhbiByb2xlPVwiYnV0dG9uXCIgdGFiSW5kZXg9ezB9IG9uQ2xpY2s9e3RoaXMub25DaGFuZ2VFZGl0TW9kZX0+XG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc0VkaXRNb2RlID8gKFxuICAgICAgICAgICAgICA8SWNvbnMuVW5sb2NrT3V0bGluZWRcbiAgICAgICAgICAgICAgICBpY29uU2l6ZT1cInhsXCJcbiAgICAgICAgICAgICAgICBjc3M9e3RoZW1lID0+IGNzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogYXV0byAke3RoZW1lLmdyaWRVbml0fXB4IGF1dG8gMDtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPEljb25zLkxvY2tPdXRsaW5lZFxuICAgICAgICAgICAgICAgIGljb25TaXplPVwieGxcIlxuICAgICAgICAgICAgICAgIGNzcz17dGhlbWUgPT4gKHtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogYGF1dG8gJHt0aGVtZS5ncmlkVW5pdH1weCBhdXRvIDBgLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgeyF0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiYgKFxuICAgICAgICAgICAgPGRpdj57dCgnQ2xpY2sgdGhlIGxvY2sgdG8gbWFrZSBjaGFuZ2VzLicpfTwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJiAoXG4gICAgICAgICAgICA8ZGl2Pnt0KCdDbGljayB0aGUgbG9jayB0byBwcmV2ZW50IGZ1cnRoZXIgY2hhbmdlcy4nKX08L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L0VkaXRMb2NrQ29udGFpbmVyPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm0tbC0xMCBtLXQtMjAgbS1iLTEwXCI+XG4gICAgICAgICAge0RBVEFTT1VSQ0VfVFlQRVNfQVJSLm1hcCh0eXBlID0+IChcbiAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICBrZXk9e3R5cGUua2V5fVxuICAgICAgICAgICAgICB2YWx1ZT17dHlwZS5rZXl9XG4gICAgICAgICAgICAgIGlubGluZVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VUeXBlQ2hhbmdlLmJpbmQodGhpcywgdHlwZS5rZXkpfVxuICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSB0eXBlLmtleX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0eXBlLmxhYmVsfVxuICAgICAgICAgICAgPC9SYWRpbz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8RmllbGRzZXQgaXRlbT17ZGF0YXNvdXJjZX0gb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfSBjb21wYWN0PlxuICAgICAgICAgIHt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5ICYmIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRhdGFiYXNlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdWaXJ0dWFsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRhYmFzZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGI9e2RhdGFzb3VyY2U/LmRhdGFiYXNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGFsb2c9e2RhdGFzb3VyY2UuY2F0YWxvZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWE9e2RhdGFzb3VyY2Uuc2NoZW1hfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2F0YWxvZ0NoYW5nZT17Y2F0YWxvZyA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ2NhdGFsb2cnLCBjYXRhbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNjaGVtYUNoYW5nZT17c2NoZW1hID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgnc2NoZW1hJywgc2NoZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRiQ2hhbmdlPXtkYXRhYmFzZSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ2RhdGFiYXNlJywgZGF0YWJhc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Nb2RlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcj17dGhpcy5wcm9wcy5hZGREYW5nZXJUb2FzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seT17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgd2lkdGg6ICdjYWxjKDEwMCUgLSAzNHB4KScsIG1hcmdpblRvcDogLTE2IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0YWJsZV9uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdOYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RhYmxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEYXRhc2V0IG5hbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCcpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICAgICAnV2hlbiBzcGVjaWZ5aW5nIFNRTCwgdGhlIGRhdGFzb3VyY2UgYWN0cyBhcyBhIHZpZXcuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1N1cGVyc2V0IHdpbGwgdXNlIHRoaXMgc3RhdGVtZW50IGFzIGEgc3VicXVlcnkgd2hpbGUgZ3JvdXBpbmcgYW5kIGZpbHRlcmluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvbiB0aGUgZ2VuZXJhdGVkIHBhcmVudCBxdWVyaWVzLicsXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWluTGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGluZXM9e0luZmluaXR5fVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBPcHRpb25zPXtzcWxUb29sdGlwT3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgJiYgKFxuICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInRhYmxlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1BoeXNpY2FsJyl9XG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgbWFyZ2luVG9wOiA4IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2U9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZS5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VfbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlLmRhdGFiYXNlPy5kYXRhYmFzZV9uYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZS5kYXRhYmFzZT8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBkYklkPXtkYXRhc291cmNlLmRhdGFiYXNlPy5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yPXt0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0YWxvZz17ZGF0YXNvdXJjZS5jYXRhbG9nfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hPXtkYXRhc291cmNlLnNjaGVtYX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNxbExhYk1vZGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVWYWx1ZT17ZGF0YXNvdXJjZS50YWJsZV9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DYXRhbG9nQ2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjYXRhbG9nID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgnY2F0YWxvZycsIGNhdGFsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2NoZW1hQ2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzY2hlbWEgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdzY2hlbWEnLCBzY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRGJDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRhdGFiYXNlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YWJhc2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFibGVTZWxlY3RDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRhYmxlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seT17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgICAnVGhlIHBvaW50ZXIgdG8gYSBwaHlzaWNhbCB0YWJsZSAob3IgdmlldykuIEtlZXAgaW4gbWluZCB0aGF0IHRoZSBjaGFydCBpcyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAnYXNzb2NpYXRlZCB0byB0aGlzIFN1cGVyc2V0IGxvZ2ljYWwgdGFibGUsIGFuZCB0aGlzIGxvZ2ljYWwgdGFibGUgcG9pbnRzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICd0aGUgcGh5c2ljYWwgdGFibGUgcmVmZXJlbmNlZCBoZXJlLicsXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICApfVxuICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckVycm9ycygpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5lcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEFsZXJ0XG4gICAgICAgICAgY3NzPXt0aGVtZSA9PiAoeyBtYXJnaW5Cb3R0b206IHRoZW1lLmdyaWRVbml0ICogNCB9KX1cbiAgICAgICAgICB0eXBlPVwiZXJyb3JcIlxuICAgICAgICAgIG1lc3NhZ2U9e1xuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3JzLm1hcChlcnIgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtlcnJ9PntlcnJ9PC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZW5kZXJNZXRyaWNDb2xsZWN0aW9uKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG1ldHJpY3MgfSA9IGRhdGFzb3VyY2U7XG4gICAgY29uc3Qgc29ydGVkTWV0cmljcyA9IG1ldHJpY3M/Lmxlbmd0aCA/IHRoaXMuc29ydE1ldHJpY3MobWV0cmljcykgOiBbXTtcbiAgICByZXR1cm4gKFxuICAgICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgICB0YWJsZUNvbHVtbnM9e1snbWV0cmljX25hbWUnLCAndmVyYm9zZV9uYW1lJywgJ2V4cHJlc3Npb24nXX1cbiAgICAgICAgc29ydENvbHVtbnM9e1snbWV0cmljX25hbWUnLCAndmVyYm9zZV9uYW1lJywgJ2V4cHJlc3Npb24nXX1cbiAgICAgICAgY29sdW1uTGFiZWxzPXt7XG4gICAgICAgICAgbWV0cmljX25hbWU6IHQoJ01ldHJpYyBLZXknKSxcbiAgICAgICAgICB2ZXJib3NlX25hbWU6IHQoJ0xhYmVsJyksXG4gICAgICAgICAgZXhwcmVzc2lvbjogdCgnU1FMIGV4cHJlc3Npb24nKSxcbiAgICAgICAgfX1cbiAgICAgICAgY29sdW1uTGFiZWxUb29sdGlwcz17e1xuICAgICAgICAgIG1ldHJpY19uYW1lOiB0KFxuICAgICAgICAgICAgJ1RoaXMgZmllbGQgaXMgdXNlZCBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIHRvIGF0dGFjaCAnICtcbiAgICAgICAgICAgICAgJ3RoZSBtZXRyaWMgdG8gY2hhcnRzLiBJdCBpcyBhbHNvIHVzZWQgYXMgdGhlIGFsaWFzIGluIHRoZSAnICtcbiAgICAgICAgICAgICAgJ1NRTCBxdWVyeS4nLFxuICAgICAgICAgICksXG4gICAgICAgIH19XG4gICAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxGaWVsZHNldCBjb21wYWN0PlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZDNmb3JtYXRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEMyBmb3JtYXQnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJkM2Zvcm1hdFwiIHBsYWNlaG9sZGVyPVwiJXkvJW0vJWRcIiAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjdXJyZW5jeVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ01ldHJpYyBjdXJyZW5jeScpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPEN1cnJlbmN5Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeVNlbGVjdE92ZXJyaWRlUHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdCgnU2VsZWN0IG9yIHR5cGUgY3VycmVuY3kgc3ltYm9sJyksXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbFNlbGVjdEFkZGl0aW9uYWxTdHlsZXM9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDMwJTtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWVkIGJ5Jyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpZWRfYnlcIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBtZXRyaWMnLFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX1cbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0RldGFpbHMgb2YgdGhlIGNlcnRpZmljYXRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1dhcm5pbmcnKX1cbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cIndhcm5pbmdfbWFya2Rvd25cIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdPcHRpb25hbCB3YXJuaW5nIGFib3V0IHVzZSBvZiB0aGlzIG1ldHJpYycpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJ3YXJuaW5nX21hcmtkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJtYXJrZG93blwiXG4gICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvRmllbGRzZXQ+XG4gICAgICAgICAgPC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICB9XG4gICAgICAgIGNvbGxlY3Rpb249e3NvcnRlZE1ldHJpY3N9XG4gICAgICAgIGFsbG93QWRkSXRlbVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlLmJpbmQodGhpcywgJ21ldHJpY3MnKX1cbiAgICAgICAgaXRlbUdlbmVyYXRvcj17KCkgPT4gKHtcbiAgICAgICAgICBtZXRyaWNfbmFtZTogdCgnPG5ldyBtZXRyaWM+JyksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiAnJyxcbiAgICAgICAgICBleHByZXNzaW9uOiAnJyxcbiAgICAgICAgfSl9XG4gICAgICAgIGl0ZW1DZWxsUHJvcHM9e3tcbiAgICAgICAgICBleHByZXNzaW9uOiAoKSA9PiAoe1xuICAgICAgICAgICAgd2lkdGg6ICcyNDBweCcsXG4gICAgICAgICAgfSksXG4gICAgICAgIH19XG4gICAgICAgIGl0ZW1SZW5kZXJlcnM9e3tcbiAgICAgICAgICBtZXRyaWNfbmFtZTogKHYsIG9uQ2hhbmdlLCBfLCByZWNvcmQpID0+IChcbiAgICAgICAgICAgIDxGbGV4Um93Q29udGFpbmVyPlxuICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge3JlY29yZC53YXJuaW5nX21hcmtkb3duICYmIChcbiAgICAgICAgICAgICAgICA8V2FybmluZ0ljb25XaXRoVG9vbHRpcFxuICAgICAgICAgICAgICAgICAgd2FybmluZ01hcmtkb3duPXtyZWNvcmQud2FybmluZ19tYXJrZG93bn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RWRpdGFibGVUaXRsZSBjYW5FZGl0IHRpdGxlPXt2fSBvblNhdmVUaXRsZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICAgICA8L0ZsZXhSb3dDb250YWluZXI+XG4gICAgICAgICAgKSxcbiAgICAgICAgICB2ZXJib3NlX25hbWU6ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgPFRleHRDb250cm9sIGNhbkVkaXQgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgICApLFxuICAgICAgICAgIGV4cHJlc3Npb246ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICBjYW5FZGl0XG4gICAgICAgICAgICAgIGluaXRpYWxWYWx1ZT17dn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICBleHRyYUNsYXNzZXM9e1snZGF0YXNvdXJjZS1zcWwtZXhwcmVzc2lvbiddfVxuICAgICAgICAgICAgICBsYW5ndWFnZT1cInNxbFwiXG4gICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICBtaW5MaW5lcz17NX1cbiAgICAgICAgICAgICAgdGV4dEFyZWFTdHlsZXM9e3sgbWluV2lkdGg6ICcyMDBweCcsIG1heFdpZHRoOiAnNDUwcHgnIH19XG4gICAgICAgICAgICAgIHJlc2l6ZT1cImJvdGhcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAodiwgb25DaGFuZ2UsIGxhYmVsKSA9PiAoXG4gICAgICAgICAgICA8U3RhY2tlZEZpZWxkXG4gICAgICAgICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQ9ezxUZXh0Q29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBkM2Zvcm1hdDogKHYsIG9uQ2hhbmdlLCBsYWJlbCkgPT4gKFxuICAgICAgICAgICAgPFN0YWNrZWRGaWVsZFxuICAgICAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50PXs8VGV4dENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz59XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICksXG4gICAgICAgIH19XG4gICAgICAgIGFsbG93RGVsZXRlc1xuICAgICAgICBzdGlja3lIZWFkZXJcbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UsIGFjdGl2ZVRhYktleSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG1ldHJpY3MgfSA9IGRhdGFzb3VyY2U7XG4gICAgY29uc3Qgc29ydGVkTWV0cmljcyA9IG1ldHJpY3M/Lmxlbmd0aCA/IHRoaXMuc29ydE1ldHJpY3MobWV0cmljcykgOiBbXTtcbiAgICBjb25zdCB7IHRoZW1lIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxEYXRhc291cmNlQ29udGFpbmVyIGRhdGEtdGVzdD1cImRhdGFzb3VyY2UtZWRpdG9yXCI+XG4gICAgICAgIHt0aGlzLnJlbmRlckVycm9ycygpfVxuICAgICAgICA8QWxlcnRcbiAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7IG1hcmdpbkJvdHRvbTogdGhlbWUuZ3JpZFVuaXQgKiA0IH0pfVxuICAgICAgICAgIHR5cGU9XCJ3YXJuaW5nXCJcbiAgICAgICAgICBtZXNzYWdlPXtcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICAgIDxzdHJvbmc+e3QoJ0JlIGNhcmVmdWwuJyl9IDwvc3Ryb25nPlxuICAgICAgICAgICAgICB7dChcbiAgICAgICAgICAgICAgICAnQ2hhbmdpbmcgdGhlc2Ugc2V0dGluZ3Mgd2lsbCBhZmZlY3QgYWxsIGNoYXJ0cyB1c2luZyB0aGlzIGRhdGFzZXQsIGluY2x1ZGluZyBjaGFydHMgb3duZWQgYnkgb3RoZXIgcGVvcGxlLicsXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxTdHlsZWRUYWJsZVRhYnNcbiAgICAgICAgICBmdWxsV2lkdGg9e2ZhbHNlfVxuICAgICAgICAgIGlkPVwidGFibGUtdGFic1wiXG4gICAgICAgICAgZGF0YS10ZXN0PVwiZWRpdC1kYXRhc2V0LXRhYnNcIlxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVRhYlNlbGVjdH1cbiAgICAgICAgICBkZWZhdWx0QWN0aXZlS2V5PXthY3RpdmVUYWJLZXl9XG4gICAgICAgID5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lIGtleT17MH0gdGFiPXt0KCdTb3VyY2UnKX0+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJTb3VyY2VGaWVsZHNldCh0aGVtZSl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3NvcnRlZE1ldHJpY3N9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ01ldHJpY3MnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleT17MX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJNZXRyaWNDb2xsZWN0aW9uKCl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3RoaXMuc3RhdGUuZGF0YWJhc2VDb2x1bW5zfVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdDb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezJ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgICA8U3R5bGVkQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJ0ZXJ0aWFyeVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc3luY01ldGFkYXRhfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzeW5jLWZyb20tc291cmNlXCJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEljb25zLkRhdGFiYXNlT3V0bGluZWQgaWNvblNpemU9XCJtXCIgLz5cbiAgICAgICAgICAgICAgICAgICAge3QoJ1N5bmMgY29sdW1ucyBmcm9tIHNvdXJjZScpfVxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICA8L0NvbHVtbkJ1dHRvbldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5Db2xsZWN0aW9uVGFibGVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW5zLXRhYmxlXCJcbiAgICAgICAgICAgICAgICBjb2x1bW5zPXt0aGlzLnN0YXRlLmRhdGFiYXNlQ29sdW1uc31cbiAgICAgICAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIG9uQ29sdW1uc0NoYW5nZT17ZGF0YWJhc2VDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBkYXRhYmFzZUNvbHVtbnMgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWV0YWRhdGFMb2FkaW5nICYmIDxMb2FkaW5nIC8+fVxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnQ2FsY3VsYXRlZCBjb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQ29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICBvbkNvbHVtbnNDaGFuZ2U9e2NhbGN1bGF0ZWRDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBjYWxjdWxhdGVkQ29sdW1ucyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2x1bW5MYWJlbFRvb2x0aXBzPXt7XG4gICAgICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdChcbiAgICAgICAgICAgICAgICAgICAgJ1RoaXMgZmllbGQgaXMgdXNlZCBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIHRvIGF0dGFjaCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAndGhlIGNhbGN1bGF0ZWQgZGltZW5zaW9uIHRvIGNoYXJ0cy4gSXQgaXMgYWxzbyB1c2VkICcgK1xuICAgICAgICAgICAgICAgICAgICAgICdhcyB0aGUgYWxpYXMgaW4gdGhlIFNRTCBxdWVyeS4nLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICAgICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWVcbiAgICAgICAgICAgICAgICBzaG93RXhwcmVzc2lvblxuICAgICAgICAgICAgICAgIGFsbG93QWRkSXRlbVxuICAgICAgICAgICAgICAgIGFsbG93RWRpdERhdGFUeXBlXG4gICAgICAgICAgICAgICAgaXRlbUdlbmVyYXRvcj17KCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiB0KCc8bmV3IGNvbHVtbj4nKSxcbiAgICAgICAgICAgICAgICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBncm91cGJ5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogdCgnPGVudGVyIFNRTCBleHByZXNzaW9uIGhlcmU+JyksXG4gICAgICAgICAgICAgICAgICBfX2V4cGFuZGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lIGtleT17NH0gdGFiPXt0KCdTZXR0aW5ncycpfT5cbiAgICAgICAgICAgIDxSb3cgZ3V0dGVyPXsxNn0+XG4gICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgIDxGb3JtQ29udGFpbmVyPnt0aGlzLnJlbmRlclNldHRpbmdzRmllbGRzZXQoKX08L0Zvcm1Db250YWluZXI+XG4gICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj57dGhpcy5yZW5kZXJBZHZhbmNlZEZpZWxkc2V0KCl9PC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgIDwvUm93PlxuICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICAgICA8L1N0eWxlZFRhYmxlVGFicz5cbiAgICAgIDwvRGF0YXNvdXJjZUNvbnRhaW5lcj5cbiAgICApO1xuICB9XG59XG5cbkRhdGFzb3VyY2VFZGl0b3IuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuRGF0YXNvdXJjZUVkaXRvci5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5cbmNvbnN0IERhdGFTb3VyY2VDb21wb25lbnQgPSB3aXRoVGhlbWUoRGF0YXNvdXJjZUVkaXRvcik7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUb2FzdHMoRGF0YVNvdXJjZUNvbXBvbmVudCk7XG4iXX0= */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\nclass DatasourceEditor extends PureComponent {\n  constructor(props) {var _props$datasource$met;\n    super(props);\n    this.state = {\n      datasource: {\n        ...props.datasource,\n        owners: props.datasource.owners.map((owner) => ({\n          value: owner.value || owner.id,\n          label: owner.label || `${owner.first_name} ${owner.last_name}`\n        })),\n        metrics: (_props$datasource$met = props.datasource.metrics) == null ? void 0 : _props$datasource$met.map((metric) => {\n          const {\n            certified_by: certifiedByMetric,\n            certification_details: certificationDetails\n          } = metric;\n          const {\n            certification: { details, certified_by: certifiedBy } = {},\n            warning_markdown: warningMarkdown\n          } = JSON.parse(metric.extra || '{}') || {};\n          return {\n            ...metric,\n            certification_details: certificationDetails || details,\n            warning_markdown: warningMarkdown || '',\n            certified_by: certifiedBy || certifiedByMetric\n          };\n        })\n      },\n      errors: [],\n      isSqla:\n      props.datasource.datasource_type === 'table' ||\n      props.datasource.type === 'table',\n      isEditMode: false,\n      databaseColumns: props.datasource.columns.filter((col) => !col.expression),\n      calculatedColumns: props.datasource.columns.filter(\n        (col) => !!col.expression\n      ),\n      metadataLoading: false,\n      activeTabKey: 0,\n      datasourceType: props.datasource.sql ?\n      DATASOURCE_TYPES.virtual.key :\n      DATASOURCE_TYPES.physical.key\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onChangeEditMode = this.onChangeEditMode.bind(this);\n    this.onDatasourcePropChange = this.onDatasourcePropChange.bind(this);\n    this.onDatasourceChange = this.onDatasourceChange.bind(this);\n    this.tableChangeAndSyncMetadata =\n    this.tableChangeAndSyncMetadata.bind(this);\n    this.syncMetadata = this.syncMetadata.bind(this);\n    this.setColumns = this.setColumns.bind(this);\n    this.validateAndChange = this.validateAndChange.bind(this);\n    this.handleTabSelect = this.handleTabSelect.bind(this);\n    this.currencies = ensureIsArray(props.currencies).map((currencyCode) => ({\n      value: currencyCode,\n      label: `${getCurrencySymbol({\n        symbol: currencyCode\n      })} (${currencyCode})`\n    }));\n  }\n\n  onChange() {\n    // Emptying SQL if \"Physical\" radio button is selected\n    // Currently the logic to know whether the source is\n    // physical or virtual is based on whether SQL is empty or not.\n    const { datasourceType, datasource } = this.state;\n    const sql =\n    datasourceType === DATASOURCE_TYPES.physical.key ? '' : datasource.sql;\n    const newDatasource = {\n      ...this.state.datasource,\n      sql,\n      columns: [...this.state.databaseColumns, ...this.state.calculatedColumns]\n    };\n    this.props.onChange(newDatasource, this.state.errors);\n  }\n\n  onChangeEditMode() {\n    this.props.setIsEditing(!this.state.isEditMode);\n    this.setState((prevState) => ({ isEditMode: !prevState.isEditMode }));\n  }\n\n  onDatasourceChange(datasource, callback = this.validateAndChange) {\n    this.setState({ datasource }, callback);\n  }\n\n  onDatasourcePropChange(attr, value) {\n    if (value === undefined) return; // if value is undefined do not update state\n    const datasource = { ...this.state.datasource, [attr]: value };\n    this.setState(\n      (prevState) => ({\n        datasource: { ...prevState.datasource, [attr]: value }\n      }),\n      attr === 'table_name' ?\n      this.onDatasourceChange(datasource, this.tableChangeAndSyncMetadata) :\n      this.onDatasourceChange(datasource, this.validateAndChange)\n    );\n  }\n\n  onDatasourceTypeChange(datasourceType) {\n    this.setState({ datasourceType });\n  }\n\n  setColumns(obj) {\n    // update calculatedColumns or databaseColumns\n    this.setState(obj, this.validateAndChange);\n  }\n\n  validateAndChange() {\n    this.validate(this.onChange);\n  }\n\n  tableChangeAndSyncMetadata() {\n    this.validate(() => {\n      this.syncMetadata();\n      this.onChange();\n    });\n  }\n\n  async syncMetadata() {\n    const { datasource } = this.state;\n    this.setState({ metadataLoading: true });\n    try {\n      const newCols = await fetchSyncedColumns(datasource);\n      const columnChanges = updateColumns(\n        datasource.columns,\n        newCols,\n        this.props.addSuccessToast\n      );\n      this.setColumns({\n        databaseColumns: columnChanges.finalColumns.filter(\n          (col) => !col.expression // remove calculated columns\n        )\n      });\n      this.props.addSuccessToast(t('Metadata has been synced'));\n      this.setState({ metadataLoading: false });\n    } catch (error) {\n      const { error: clientError, statusText } =\n      await getClientErrorObject(error);\n      this.props.addDangerToast(\n        clientError || statusText || t('An error has occurred')\n      );\n      this.setState({ metadataLoading: false });\n    }\n  }\n\n  findDuplicates(arr, accessor) {\n    const seen = {};\n    const dups = [];\n    arr.forEach((obj) => {\n      const item = accessor(obj);\n      if (item in seen) {\n        dups.push(item);\n      } else {\n        seen[item] = null;\n      }\n    });\n    return dups;\n  }\n\n  validate(callback) {\n    let errors = [];\n    let dups;\n    const { datasource } = this.state;\n\n    // Looking for duplicate column_name\n    dups = this.findDuplicates(datasource.columns, (obj) => obj.column_name);\n    errors = errors.concat(\n      dups.map((name) => t('Column name [%s] is duplicated', name))\n    );\n\n    // Looking for duplicate metric_name\n    dups = this.findDuplicates(datasource.metrics, (obj) => obj.metric_name);\n    errors = errors.concat(\n      dups.map((name) => t('Metric name [%s] is duplicated', name))\n    );\n\n    // Making sure calculatedColumns have an expression defined\n    const noFilterCalcCols = this.state.calculatedColumns.filter(\n      (col) => !col.expression && !col.json\n    );\n    errors = errors.concat(\n      noFilterCalcCols.map((col) =>\n      t('Calculated column [%s] requires an expression', col.column_name)\n      )\n    );\n\n    // validate currency code\n    try {var _this$state$datasourc;\n      (_this$state$datasourc = this.state.datasource.metrics) == null ? void 0 : _this$state$datasourc.forEach(\n        (metric) => {var _metric$currency;return (\n            ((_metric$currency = metric.currency) == null ? void 0 : _metric$currency.symbol) &&\n            new Intl.NumberFormat('en-US', {\n              style: 'currency',\n              currency: metric.currency.symbol\n            }));}\n      );\n    } catch {\n      errors = errors.concat([t('Invalid currency code in saved metrics')]);\n    }\n\n    this.setState({ errors }, callback);\n  }\n\n  handleTabSelect(activeTabKey) {\n    this.setState({ activeTabKey });\n  }\n\n  sortMetrics(metrics) {\n    return metrics.sort(({ id: a }, { id: b }) => b - a);\n  }\n\n  renderSettingsFieldset() {\n    const { datasource } = this.state;\n    return (\n      _jsxs(Fieldset, {\n        title: t('Basic'),\n        item: datasource,\n        onChange: this.onDatasourceChange, children: [\n\n        _jsx(Field, {\n          fieldKey: \"description\",\n          label: t('Description'),\n          control:\n          _jsx(TextAreaControl, {\n            language: \"markdown\",\n            offerEditInModal: false,\n            resize: \"vertical\" }\n          ) }\n\n        ),\n        _jsx(Field, {\n          fieldKey: \"default_endpoint\",\n          label: t('Default URL'),\n          description: t(\n            `Default URL to redirect to when accessing from the dataset list page.\n            Accepts relative URLs such as <span style=white-space: nowrap;>/superset/dashboard/{id}/</span>`\n          ),\n          control: _jsx(TextControl, { controlId: \"default_endpoint\" }) }\n        ),\n        _jsx(Field, {\n          inline: true,\n          fieldKey: \"filter_select_enabled\",\n          label: t('Autocomplete filters'),\n          description: t('Whether to populate autocomplete filters options'),\n          control: _jsx(CheckboxControl, {}) }\n        ),\n        this.state.isSqla &&\n        _jsx(Field, {\n          fieldKey: \"fetch_values_predicate\",\n          label: t('Autocomplete query predicate'),\n          description: t(\n            'When using \"Autocomplete filters\", this can be used to improve performance ' +\n            'of the query fetching the values. Use this option to apply a ' +\n            'predicate (WHERE clause) to the query selecting the distinct ' +\n            'values from the table. Typically the intent would be to limit the scan ' +\n            'by applying a relative time filter on a partitioned or indexed time-related field.'\n          ),\n          control:\n          _jsx(TextAreaControl, {\n            language: \"sql\",\n            controlId: \"fetch_values_predicate\",\n            minLines: 5,\n            resize: \"vertical\" }\n          ) }\n\n        ),\n\n        this.state.isSqla &&\n        _jsx(Field, {\n          fieldKey: \"extra\",\n          label: t('Extra'),\n          description: t(\n            'Extra data to specify table metadata. Currently supports ' +\n            'metadata of the format: `{ \"certification\": { \"certified_by\": ' +\n            '\"Data Platform Team\", \"details\": \"This table is the source of truth.\" ' +\n            '}, \"warning_markdown\": \"This is a warning.\" }`.'\n          ),\n          control:\n          _jsx(TextAreaControl, {\n            controlId: \"extra\",\n            language: \"json\",\n            offerEditInModal: false,\n            resize: \"vertical\" }\n          ) }\n\n        ),\n\n        _jsx(OwnersSelector, {\n          datasource: datasource,\n          onChange: (newOwners) => {\n            this.onDatasourceChange({ ...datasource, owners: newOwners });\n          } }\n        )] }\n      ));\n\n  }\n\n  renderAdvancedFieldset() {\n    const { datasource } = this.state;\n    return (\n      _jsxs(Fieldset, {\n        title: t('Advanced'),\n        item: datasource,\n        onChange: this.onDatasourceChange, children: [\n\n        _jsx(Field, {\n          fieldKey: \"cache_timeout\",\n          label: t('Cache timeout'),\n          description: t(\n            'The duration of time in seconds before the cache is invalidated. Set to -1 to bypass the cache.'\n          ),\n          control: _jsx(TextControl, { controlId: \"cache_timeout\" }) }\n        ),\n        _jsx(Field, {\n          fieldKey: \"offset\",\n          label: t('Hours offset'),\n          control: _jsx(TextControl, { controlId: \"offset\" }),\n          description: t(\n            'The number of hours, negative or positive, to shift the time column. This can be used to move UTC time to local time.'\n          ) }\n        ),\n        this.state.isSqla &&\n        _jsx(Field, {\n          fieldKey: \"template_params\",\n          label: t('Template parameters'),\n          description: t(\n            'A set of parameters that become available in the query using Jinja templating syntax'\n          ),\n          control: _jsx(TextControl, { controlId: \"template_params\" }) }\n        ),\n\n        _jsx(Field, {\n          inline: true,\n          fieldKey: \"normalize_columns\",\n          label: t('Normalize column names'),\n          description: t(\n            'Allow column names to be changed to case insensitive format, if supported (e.g. Oracle, Snowflake).'\n          ),\n          control: _jsx(CheckboxControl, { controlId: \"normalize_columns\" }) }\n        ),\n        _jsx(Field, {\n          inline: true,\n          fieldKey: \"always_filter_main_dttm\",\n          label: t('Always filter main datetime column'),\n          description: t(\n            `When the secondary temporal columns are filtered, apply the same filter to the main datetime column.`\n          ),\n          control: _jsx(CheckboxControl, { controlId: \"always_filter_main_dttm\" }) }\n        )] }\n      ));\n\n  }\n\n  renderSpatialTab() {\n    const { datasource } = this.state;\n    const { spatials, all_cols: allCols } = datasource;\n    return (\n      _jsx(Tabs.TabPane, {\n        tab: _jsx(CollectionTabTitle, { collection: spatials, title: t('Spatial') }), children:\n\n\n        _jsx(CollectionTable, {\n          tableColumns: ['name', 'config'],\n          onChange: this.onDatasourcePropChange.bind(this, 'spatials'),\n          itemGenerator: () => ({\n            name: t('<new spatial>'),\n            type: t('<no type>'),\n            config: null\n          }),\n          collection: spatials,\n          allowDeletes: true,\n          itemRenderers: {\n            name: (d, onChange) =>\n            _jsx(EditableTitle, { canEdit: true, title: d, onSaveTitle: onChange }),\n\n            config: (v, onChange) =>\n            _jsx(SpatialControl, { value: v, onChange: onChange, choices: allCols })\n\n          } }\n        ) }, 4\n      ));\n\n  }\n\n  renderSourceFieldset() {var _datasource$database, _datasource$database2, _datasource$database3;\n    const { datasource } = this.state;\n    return (\n      _jsxs(\"div\", { children: [\n        _jsxs(EditLockContainer, { children: [\n          _jsx(\"span\", { role: \"button\", tabIndex: 0, onClick: this.onChangeEditMode, children:\n            this.state.isEditMode ?\n            _jsx(Icons.UnlockOutlined, {\n              iconSize: \"xl\",\n              css: (theme) => css`\n                  margin: auto ${theme.gridUnit}px auto 0;\n                ` }\n            ) :\n\n            _jsx(Icons.LockOutlined, {\n              iconSize: \"xl\",\n              css: (theme) => ({\n                margin: `auto ${theme.gridUnit}px auto 0`\n              }) }\n            ) }\n\n          ),\n          !this.state.isEditMode &&\n          _jsx(\"div\", { children: t('Click the lock to make changes.') }),\n\n          this.state.isEditMode &&\n          _jsx(\"div\", { children: t('Click the lock to prevent further changes.') })] }\n\n        ),\n        _jsx(\"div\", { className: \"m-l-10 m-t-20 m-b-10\", children:\n          DATASOURCE_TYPES_ARR.map((type) =>\n          _jsx(Radio, {\n\n            value: type.key,\n            inline: true,\n            onChange: this.onDatasourceTypeChange.bind(this, type.key),\n            checked: this.state.datasourceType === type.key,\n            disabled: !this.state.isEditMode, children:\n\n            type.label }, type.key\n          )\n          ) }\n        ),\n        _jsx(\"hr\", {}),\n        _jsxs(Fieldset, { item: datasource, onChange: this.onDatasourceChange, compact: true, children: [\n          this.state.datasourceType === DATASOURCE_TYPES.virtual.key &&\n          _jsx(\"div\", { children:\n            this.state.isSqla &&\n            _jsxs(_Fragment, { children: [\n              _jsxs(Col, { xs: 24, md: 12, children: [\n                _jsx(Field, {\n                  fieldKey: \"databaseSelector\",\n                  label: t('Virtual'),\n                  control:\n                  _jsx(\"div\", { css: _ref2, children:\n                    _jsx(DatabaseSelector, {\n                      db: datasource == null ? void 0 : datasource.database,\n                      catalog: datasource.catalog,\n                      schema: datasource.schema,\n                      onCatalogChange: (catalog) =>\n                      this.state.isEditMode &&\n                      this.onDatasourcePropChange('catalog', catalog),\n\n                      onSchemaChange: (schema) =>\n                      this.state.isEditMode &&\n                      this.onDatasourcePropChange('schema', schema),\n\n                      onDbChange: (database) =>\n                      this.state.isEditMode &&\n                      this.onDatasourcePropChange('database', database),\n\n                      formMode: false,\n                      handleError: this.props.addDangerToast,\n                      readOnly: !this.state.isEditMode }\n                    ) }\n                  ) }\n\n                ),\n                _jsx(\"div\", { css: /*#__PURE__*/_css({ width: 'calc(100% - 34px)', marginTop: -16 }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:DatasourceEditor;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9EYXRhc291cmNlL0RhdGFzb3VyY2VFZGl0b3IuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJoQ3lCIiwiZmlsZSI6Ii9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9EYXRhc291cmNlL0RhdGFzb3VyY2VFZGl0b3IuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uJztcbmltcG9ydCB7IFB1cmVDb21wb25lbnQsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IFJhZGlvIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvUmFkaW8nO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgQWxlcnQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQWxlcnQnO1xuaW1wb3J0IEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0JhZGdlJztcbmltcG9ydCB7XG4gIGNzcyxcbiAgaXNGZWF0dXJlRW5hYmxlZCxcbiAgZ2V0Q3VycmVuY3lTeW1ib2wsXG4gIGVuc3VyZUlzQXJyYXksXG4gIEZlYXR1cmVGbGFnLFxuICBzdHlsZWQsXG4gIFN1cGVyc2V0Q2xpZW50LFxuICB0LFxuICB3aXRoVGhlbWUsXG4gIGdldENsaWVudEVycm9yT2JqZWN0LFxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBTZWxlY3QsIEFzeW5jU2VsZWN0LCBSb3csIENvbCB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcbmltcG9ydCB7IEZvcm1MYWJlbCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0Zvcm0nO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IFRhYnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFicyc7XG5pbXBvcnQgQ2VydGlmaWVkQmFkZ2UgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2VydGlmaWVkQmFkZ2UnO1xuaW1wb3J0IFdhcm5pbmdJY29uV2l0aFRvb2x0aXAgZnJvbSAnc3JjL2NvbXBvbmVudHMvV2FybmluZ0ljb25XaXRoVG9vbHRpcCc7XG5pbXBvcnQgRGF0YWJhc2VTZWxlY3RvciBmcm9tICdzcmMvY29tcG9uZW50cy9EYXRhYmFzZVNlbGVjdG9yJztcbmltcG9ydCBMYWJlbCBmcm9tICdzcmMvY29tcG9uZW50cy9MYWJlbCc7XG5pbXBvcnQgTG9hZGluZyBmcm9tICdzcmMvY29tcG9uZW50cy9Mb2FkaW5nJztcbmltcG9ydCBUYWJsZVNlbGVjdG9yIGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYmxlU2VsZWN0b3InO1xuaW1wb3J0IEVkaXRhYmxlVGl0bGUgZnJvbSAnc3JjL2NvbXBvbmVudHMvRWRpdGFibGVUaXRsZSc7XG5pbXBvcnQgQ2hlY2tib3hDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvQ2hlY2tib3hDb250cm9sJztcbmltcG9ydCBUZXh0Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1RleHRDb250cm9sJztcbmltcG9ydCBUZXh0QXJlYUNvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0QXJlYUNvbnRyb2wnO1xuaW1wb3J0IFNwYXRpYWxDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvU3BhdGlhbENvbnRyb2wnO1xuaW1wb3J0IHdpdGhUb2FzdHMgZnJvbSAnc3JjL2NvbXBvbmVudHMvTWVzc2FnZVRvYXN0cy93aXRoVG9hc3RzJztcbmltcG9ydCB7IEljb25zIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IEN1cnJlbmN5Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0N1cnJlbmN5Q29udHJvbCc7XG5pbXBvcnQgQ29sbGVjdGlvblRhYmxlIGZyb20gJy4vQ29sbGVjdGlvblRhYmxlJztcbmltcG9ydCBGaWVsZHNldCBmcm9tICcuL0ZpZWxkc2V0JztcbmltcG9ydCBGaWVsZCBmcm9tICcuL0ZpZWxkJztcbmltcG9ydCB7IGZldGNoU3luY2VkQ29sdW1ucywgdXBkYXRlQ29sdW1ucyB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBEYXRhc291cmNlQ29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgLmNoYW5nZS13YXJuaW5nIHtcbiAgICBtYXJnaW46IDE2cHggMTBweCAwO1xuICAgIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy53YXJuaW5nLmJhc2V9O1xuICB9XG5cbiAgLmNoYW5nZS13YXJuaW5nIC5ib2xkIHtcbiAgICBmb250LXdlaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMuYm9sZH07XG4gIH1cblxuICAuZm9ybS1ncm91cC5oYXMtZmVlZGJhY2sgPiAuaGVscC1ibG9jayB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICB9XG5cbiAgLmZvcm0tZ3JvdXAuZm9ybS1ncm91cC1tZCB7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICB9XG5gO1xuXG5jb25zdCBGbGV4Um93Q29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcblxuICBzdmcge1xuICAgIG1hcmdpbi1yaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkVGFibGVUYWJzID0gc3R5bGVkKFRhYnMpYFxuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgLmFudC10YWJzLWNvbnRlbnQtaG9sZGVyIHtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkQmFkZ2UgPSBzdHlsZWQoQmFkZ2UpYFxuICAuYW50ZDUtYmFkZ2UtY291bnQge1xuICAgIGxpbmUtaGVpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBoZWlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA0fXB4O1xuICAgIG1hcmdpbi1sZWZ0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBFZGl0TG9ja0NvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGZvbnQtc2l6ZTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGEge1xuICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgfVxuYDtcblxuY29uc3QgQ29sdW1uQnV0dG9uV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICAkeyh7IHRoZW1lIH0pID0+IGBtYXJnaW4tYm90dG9tOiAke3RoZW1lLmdyaWRVbml0ICogMn1weGB9XG5gO1xuXG5jb25zdCBTdHlsZWRMYWJlbFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBzcGFuIHtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgLnRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICB9XG5cbiAgLmFudC10YWcge1xuICAgIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZEJ1dHRvbldyYXBwZXIgPSBzdHlsZWQuc3BhbmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgbWFyZ2luLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHg7XG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiAzfXB4O1xuICAgIGJ1dHRvbj5zcGFuPjpmaXJzdC1vZi10eXBlIHtcbiAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICB9XG4gIGB9XG5gO1xuXG5jb25zdCBzcWxUb29sdGlwT3B0aW9ucyA9IHtcbiAgcGxhY2VtZW50OiAndG9wUmlnaHQnLFxuICB0aXRsZTogdChcbiAgICAnSWYgY2hhbmdlcyBhcmUgbWFkZSB0byB5b3VyIFNRTCBxdWVyeSwgJyArXG4gICAgICAnY29sdW1ucyBpbiB5b3VyIGRhdGFzZXQgd2lsbCBiZSBzeW5jZWQgd2hlbiBzYXZpbmcgdGhlIGRhdGFzZXQuJyxcbiAgKSxcbn07XG5cbmNvbnN0IGNoZWNrYm94R2VuZXJhdG9yID0gKGQsIG9uQ2hhbmdlKSA9PiAoXG4gIDxDaGVja2JveENvbnRyb2wgdmFsdWU9e2R9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz5cbik7XG5jb25zdCBEQVRBX1RZUEVTID0gW1xuICB7IHZhbHVlOiAnU1RSSU5HJywgbGFiZWw6IHQoJ1NUUklORycpIH0sXG4gIHsgdmFsdWU6ICdOVU1FUklDJywgbGFiZWw6IHQoJ05VTUVSSUMnKSB9LFxuICB7IHZhbHVlOiAnREFURVRJTUUnLCBsYWJlbDogdCgnREFURVRJTUUnKSB9LFxuICB7IHZhbHVlOiAnQk9PTEVBTicsIGxhYmVsOiB0KCdCT09MRUFOJykgfSxcbl07XG5cbmNvbnN0IERBVEFTT1VSQ0VfVFlQRVNfQVJSID0gW1xuICB7IGtleTogJ3BoeXNpY2FsJywgbGFiZWw6IHQoJ1BoeXNpY2FsICh0YWJsZSBvciB2aWV3KScpIH0sXG4gIHsga2V5OiAndmlydHVhbCcsIGxhYmVsOiB0KCdWaXJ0dWFsIChTUUwpJykgfSxcbl07XG5jb25zdCBEQVRBU09VUkNFX1RZUEVTID0ge307XG5EQVRBU09VUkNFX1RZUEVTX0FSUi5mb3JFYWNoKG8gPT4ge1xuICBEQVRBU09VUkNFX1RZUEVTW28ua2V5XSA9IG87XG59KTtcblxuZnVuY3Rpb24gQ29sbGVjdGlvblRhYlRpdGxlKHsgdGl0bGUsIGNvbGxlY3Rpb24gfSkge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNzcz17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19XG4gICAgICBkYXRhLXRlc3Q9e2Bjb2xsZWN0aW9uLXRhYi0ke3RpdGxlfWB9XG4gICAgPlxuICAgICAge3RpdGxlfXsnICd9XG4gICAgICA8U3R5bGVkQmFkZ2UgY291bnQ9e2NvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDB9IHNob3daZXJvIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbkNvbGxlY3Rpb25UYWJUaXRsZS5wcm9wVHlwZXMgPSB7XG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb2xsZWN0aW9uOiBQcm9wVHlwZXMuYXJyYXksXG59O1xuXG5mdW5jdGlvbiBDb2x1bW5Db2xsZWN0aW9uVGFibGUoe1xuICBjb2x1bW5zLFxuICBkYXRhc291cmNlLFxuICBvbkNvbHVtbnNDaGFuZ2UsXG4gIG9uRGF0YXNvdXJjZUNoYW5nZSxcbiAgZWRpdGFibGVDb2x1bW5OYW1lLFxuICBzaG93RXhwcmVzc2lvbixcbiAgYWxsb3dBZGRJdGVtLFxuICBhbGxvd0VkaXREYXRhVHlwZSxcbiAgaXRlbUdlbmVyYXRvcixcbiAgY29sdW1uTGFiZWxUb29sdGlwcyxcbn0pIHtcbiAgcmV0dXJuIChcbiAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICB0YWJsZUNvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgc29ydENvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgYWxsb3dEZWxldGVzXG4gICAgICBhbGxvd0FkZEl0ZW09e2FsbG93QWRkSXRlbX1cbiAgICAgIGl0ZW1HZW5lcmF0b3I9e2l0ZW1HZW5lcmF0b3J9XG4gICAgICBjb2xsZWN0aW9uPXtjb2x1bW5zfVxuICAgICAgY29sdW1uTGFiZWxUb29sdGlwcz17Y29sdW1uTGFiZWxUb29sdGlwc31cbiAgICAgIHN0aWNreUhlYWRlclxuICAgICAgZXhwYW5kRmllbGRzZXQ9e1xuICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICA8RmllbGRzZXQgY29tcGFjdD5cbiAgICAgICAgICAgIHtzaG93RXhwcmVzc2lvbiAmJiAoXG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZXhwcmVzc2lvblwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCBleHByZXNzaW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwidmVyYm9zZV9uYW1lXCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0xhYmVsJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidmVyYm9zZV9uYW1lXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdMYWJlbCcpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7YWxsb3dFZGl0RGF0YVR5cGUgJiYgKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cInR5cGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17REFUQV9UWVBFU31cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cInR5cGVcIlxuICAgICAgICAgICAgICAgICAgICBhbGxvd05ld09wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2lzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRW5hYmxlQWR2YW5jZWREYXRhVHlwZXMpID8gKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImFkdmFuY2VkX2RhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0FkdmFuY2VkIGRhdGEgdHlwZScpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImFkdmFuY2VkX2RhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdBZHZhbmNlZCBEYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPD48Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJweXRob25fZGF0ZV9mb3JtYXRcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0ZXRpbWUgZm9ybWF0Jyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtcbiAgICAgICAgICAgICAgICAvKiBOb3RlIHRoZSBmcmFnbWVudGVkIHRyYW5zbGF0aW9ucyBtYXkgbm90IHdvcmsuICovXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIHt0KCdUaGUgcGF0dGVybiBvZiB0aW1lc3RhbXAgZm9ybWF0LiBGb3Igc3RyaW5ncyB1c2UgJyl9XG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMi9saWJyYXJ5L2RhdGV0aW1lLmh0bWwjc3RyZnRpbWUtc3RycHRpbWUtYmVoYXZpb3JcIj5cbiAgICAgICAgICAgICAgICAgICAge3QoJ1B5dGhvbiBkYXRldGltZSBzdHJpbmcgcGF0dGVybicpfVxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAge3QoJyBleHByZXNzaW9uIHdoaWNoIG5lZWRzIHRvIGFkaGVyZSB0byB0aGUgJyl9XG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDFcIj5cbiAgICAgICAgICAgICAgICAgICAge3QoJ0lTTyA4NjAxJyl9XG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICB7dChgIHN0YW5kYXJkIHRvIGVuc3VyZSB0aGF0IHRoZSBsZXhpY29ncmFwaGljYWwgb3JkZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgICBjb2luY2lkZXMgd2l0aCB0aGUgY2hyb25vbG9naWNhbCBvcmRlcmluZy4gSWYgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wIGZvcm1hdCBkb2VzIG5vdCBhZGhlcmUgdG8gdGhlIElTTyA4NjAxIHN0YW5kYXJkXG4gICAgICAgICAgICAgICAgICAgICAgeW91IHdpbGwgbmVlZCB0byBkZWZpbmUgYW4gZXhwcmVzc2lvbiBhbmQgdHlwZSBmb3JcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1pbmcgdGhlIHN0cmluZyBpbnRvIGEgZGF0ZSBvciB0aW1lc3RhbXAuIE5vdGVcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHkgdGltZSB6b25lcyBhcmUgbm90IHN1cHBvcnRlZC4gSWYgdGltZSBpcyBzdG9yZWRcbiAgICAgICAgICAgICAgICAgICAgICBpbiBlcG9jaCBmb3JtYXQsIHB1dCBcXGBlcG9jaF9zXFxgIG9yIFxcYGVwb2NoX21zXFxgLiBJZiBubyBwYXR0ZXJuXG4gICAgICAgICAgICAgICAgICAgICAgaXMgc3BlY2lmaWVkIHdlIGZhbGwgYmFjayB0byB1c2luZyB0aGUgb3B0aW9uYWwgZGVmYXVsdHMgb24gYSBwZXJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZS9jb2x1bW4gbmFtZSBsZXZlbCB2aWEgdGhlIGV4dHJhIHBhcmFtZXRlci5gKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInB5dGhvbl9kYXRlX2Zvcm1hdFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIiVZLSVtLSVkXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmllZCBCeScpfVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnUGVyc29uIG9yIGdyb3VwIHRoYXQgaGFzIGNlcnRpZmllZCB0aGlzIG1ldHJpYycpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmllZFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWVkIGJ5Jyl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0RldGFpbHMgb2YgdGhlIGNlcnRpZmljYXRpb24nKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpY2F0aW9uRGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgICA8L0Zvcm1Db250YWluZXI+XG4gICAgICB9XG4gICAgICBjb2x1bW5MYWJlbHM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVuYWJsZUFkdmFuY2VkRGF0YVR5cGVzKVxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnQ29sdW1uJyksXG4gICAgICAgICAgICAgIGFkdmFuY2VkX2RhdGFfdHlwZTogdCgnQWR2YW5jZWQgZGF0YSB0eXBlJyksXG4gICAgICAgICAgICAgIHR5cGU6IHQoJ0RhdGEgdHlwZScpLFxuICAgICAgICAgICAgICBncm91cGJ5OiB0KCdJcyBkaW1lbnNpb24nKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogdCgnSXMgdGVtcG9yYWwnKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogdCgnRGVmYXVsdCBkYXRldGltZScpLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0KCdJcyBmaWx0ZXJhYmxlJyksXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiB0KCdDb2x1bW4nKSxcbiAgICAgICAgICAgICAgdHlwZTogdCgnRGF0YSB0eXBlJyksXG4gICAgICAgICAgICAgIGdyb3VwYnk6IHQoJ0lzIGRpbWVuc2lvbicpLFxuICAgICAgICAgICAgICBpc19kdHRtOiB0KCdJcyB0ZW1wb3JhbCcpLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiB0KCdEZWZhdWx0IGRhdGV0aW1lJyksXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IHQoJ0lzIGZpbHRlcmFibGUnKSxcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9uQ2hhbmdlPXtvbkNvbHVtbnNDaGFuZ2V9XG4gICAgICBpdGVtUmVuZGVyZXJzPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FbmFibGVBZHZhbmNlZERhdGFUeXBlcylcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6ICh2LCBvbkl0ZW1DaGFuZ2UsIF8sIHJlY29yZCkgPT5cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWUgPyAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICBjYW5FZGl0XG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Z9XG4gICAgICAgICAgICAgICAgICAgICAgb25TYXZlVGl0bGU9e29uSXRlbUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3Z9XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiAodmFsdWUsIF9vbkl0ZW1DaGFuZ2UsIF9sYWJlbCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGRhdGFzb3VyY2UubWFpbl9kdHRtX2NvbCA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gIWNvbHVtbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIGNvbHVtbiA9PiBjb2x1bW4uY29sdW1uX25hbWUgPT09IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICApLmlzX2R0dG07XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9e2ByYWRpby1kZWZhdWx0LWR0dG0tJHtyZWNvcmQuY29sdW1uX25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHR5cGU6IGQgPT4gKGQgPyA8TGFiZWw+e2R9PC9MYWJlbD4gOiBudWxsKSxcbiAgICAgICAgICAgICAgYWR2YW5jZWRfZGF0YV90eXBlOiBkID0+IChcbiAgICAgICAgICAgICAgICA8TGFiZWwgb25DaGFuZ2U9e29uQ29sdW1uc0NoYW5nZX0+e2R9PC9MYWJlbD5cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBncm91cGJ5OiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6ICh2LCBvbkl0ZW1DaGFuZ2UsIF8sIHJlY29yZCkgPT5cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWUgPyAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25JdGVtQ2hhbmdlfSAvPlxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxTdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgICAgIHtyZWNvcmQuaXNfY2VydGlmaWVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8Q2VydGlmaWVkQmFkZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlcnRpZmllZEJ5PXtyZWNvcmQuY2VydGlmaWVkX2J5fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscz17cmVjb3JkLmNlcnRpZmljYXRpb25fZGV0YWlsc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB7dn1cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6ICh2YWx1ZSwgX29uSXRlbUNoYW5nZSwgX2xhYmVsLCByZWNvcmQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZGF0YXNvdXJjZS5tYWluX2R0dG1fY29sID09PSByZWNvcmQuY29sdW1uX25hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQgPSAhY29sdW1ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgY29sdW1uID0+IGNvbHVtbi5jb2x1bW5fbmFtZSA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lLFxuICAgICAgICAgICAgICAgICkuaXNfZHR0bTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPFJhZGlvXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdD17YHJhZGlvLWRlZmF1bHQtZHR0bS0ke3JlY29yZC5jb2x1bW5fbmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogcmVjb3JkLmNvbHVtbl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHlwZTogZCA9PiAoZCA/IDxMYWJlbD57ZH08L0xhYmVsPiA6IG51bGwpLFxuICAgICAgICAgICAgICBpc19kdHRtOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGdyb3VwYnk6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgfVxuICAgICAgfVxuICAgIC8+XG4gICk7XG59XG5Db2x1bW5Db2xsZWN0aW9uVGFibGUucHJvcFR5cGVzID0ge1xuICBjb2x1bW5zOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbiAgZGF0YXNvdXJjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBvbkNvbHVtbnNDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9uRGF0YXNvdXJjZUNoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZWRpdGFibGVDb2x1bW5OYW1lOiBQcm9wVHlwZXMuYm9vbCxcbiAgc2hvd0V4cHJlc3Npb246IFByb3BUeXBlcy5ib29sLFxuICBhbGxvd0FkZEl0ZW06IFByb3BUeXBlcy5ib29sLFxuICBhbGxvd0VkaXREYXRhVHlwZTogUHJvcFR5cGVzLmJvb2wsXG4gIGl0ZW1HZW5lcmF0b3I6IFByb3BUeXBlcy5mdW5jLFxufTtcbkNvbHVtbkNvbGxlY3Rpb25UYWJsZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGVkaXRhYmxlQ29sdW1uTmFtZTogZmFsc2UsXG4gIHNob3dFeHByZXNzaW9uOiBmYWxzZSxcbiAgYWxsb3dBZGRJdGVtOiBmYWxzZSxcbiAgYWxsb3dFZGl0RGF0YVR5cGU6IGZhbHNlLFxuICBpdGVtR2VuZXJhdG9yOiAoKSA9PiAoe1xuICAgIGNvbHVtbl9uYW1lOiB0KCc8bmV3IGNvbHVtbj4nKSxcbiAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgIGdyb3VwYnk6IHRydWUsXG4gIH0pLFxufTtcblxuZnVuY3Rpb24gU3RhY2tlZEZpZWxkKHsgbGFiZWwsIGZvcm1FbGVtZW50IH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPGRpdj5cbiAgICAgICAgPHN0cm9uZz57bGFiZWx9PC9zdHJvbmc+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXY+e2Zvcm1FbGVtZW50fTwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5TdGFja2VkRmllbGQucHJvcFR5cGVzID0ge1xuICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgZm9ybUVsZW1lbnQ6IFByb3BUeXBlcy5ub2RlLFxufTtcblxuZnVuY3Rpb24gRm9ybUNvbnRhaW5lcih7IGNoaWxkcmVuIH0pIHtcbiAgcmV0dXJuIDxDYXJkIHBhZGRlZD57Y2hpbGRyZW59PC9DYXJkPjtcbn1cblxuRm9ybUNvbnRhaW5lci5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbn07XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgZGF0YXNvdXJjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIGFkZFN1Y2Nlc3NUb2FzdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgYWRkRGFuZ2VyVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHNldElzRWRpdGluZzogUHJvcFR5cGVzLmZ1bmMsXG59O1xuXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIG9uQ2hhbmdlOiAoKSA9PiB7fSxcbiAgc2V0SXNFZGl0aW5nOiAoKSA9PiB7fSxcbn07XG5cbmZ1bmN0aW9uIE93bmVyc1NlbGVjdG9yKHsgZGF0YXNvdXJjZSwgb25DaGFuZ2UgfSkge1xuICBjb25zdCBsb2FkT3B0aW9ucyA9IHVzZUNhbGxiYWNrKChzZWFyY2ggPSAnJywgcGFnZSwgcGFnZVNpemUpID0+IHtcbiAgICBjb25zdCBxdWVyeSA9IHJpc29uLmVuY29kZSh7IGZpbHRlcjogc2VhcmNoLCBwYWdlLCBwYWdlX3NpemU6IHBhZ2VTaXplIH0pO1xuICAgIHJldHVybiBTdXBlcnNldENsaWVudC5nZXQoe1xuICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2RhdGFzZXQvcmVsYXRlZC9vd25lcnM/cT0ke3F1ZXJ5fWAsXG4gICAgfSkudGhlbihyZXNwb25zZSA9PiAoe1xuICAgICAgZGF0YTogcmVzcG9uc2UuanNvbi5yZXN1bHRcbiAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0uZXh0cmEuYWN0aXZlKVxuICAgICAgICAubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICBsYWJlbDogaXRlbS50ZXh0LFxuICAgICAgICB9KSksXG4gICAgICB0b3RhbENvdW50OiByZXNwb25zZS5qc29uLmNvdW50LFxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiAoXG4gICAgPEFzeW5jU2VsZWN0XG4gICAgICBhcmlhTGFiZWw9e3QoJ1NlbGVjdCBvd25lcnMnKX1cbiAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICBuYW1lPVwib3duZXJzXCJcbiAgICAgIHZhbHVlPXtkYXRhc291cmNlLm93bmVyc31cbiAgICAgIG9wdGlvbnM9e2xvYWRPcHRpb25zfVxuICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgaGVhZGVyPXs8Rm9ybUxhYmVsPnt0KCdPd25lcnMnKX08L0Zvcm1MYWJlbD59XG4gICAgICBhbGxvd0NsZWFyXG4gICAgLz5cbiAgKTtcbn1cblxuY2xhc3MgRGF0YXNvdXJjZUVkaXRvciBleHRlbmRzIFB1cmVDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZGF0YXNvdXJjZToge1xuICAgICAgICAuLi5wcm9wcy5kYXRhc291cmNlLFxuICAgICAgICBvd25lcnM6IHByb3BzLmRhdGFzb3VyY2Uub3duZXJzLm1hcChvd25lciA9PiAoe1xuICAgICAgICAgIHZhbHVlOiBvd25lci52YWx1ZSB8fCBvd25lci5pZCxcbiAgICAgICAgICBsYWJlbDogb3duZXIubGFiZWwgfHwgYCR7b3duZXIuZmlyc3RfbmFtZX0gJHtvd25lci5sYXN0X25hbWV9YCxcbiAgICAgICAgfSkpLFxuICAgICAgICBtZXRyaWNzOiBwcm9wcy5kYXRhc291cmNlLm1ldHJpY3M/Lm1hcChtZXRyaWMgPT4ge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnlNZXRyaWMsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzLFxuICAgICAgICAgIH0gPSBtZXRyaWM7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2VydGlmaWNhdGlvbjogeyBkZXRhaWxzLCBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IH0gPSB7fSxcbiAgICAgICAgICAgIHdhcm5pbmdfbWFya2Rvd246IHdhcm5pbmdNYXJrZG93bixcbiAgICAgICAgICB9ID0gSlNPTi5wYXJzZShtZXRyaWMuZXh0cmEgfHwgJ3t9JykgfHwge307XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLm1ldHJpYyxcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogY2VydGlmaWNhdGlvbkRldGFpbHMgfHwgZGV0YWlscyxcbiAgICAgICAgICAgIHdhcm5pbmdfbWFya2Rvd246IHdhcm5pbmdNYXJrZG93biB8fCAnJyxcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnkgfHwgY2VydGlmaWVkQnlNZXRyaWMsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICB9LFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIGlzU3FsYTpcbiAgICAgICAgcHJvcHMuZGF0YXNvdXJjZS5kYXRhc291cmNlX3R5cGUgPT09ICd0YWJsZScgfHxcbiAgICAgICAgcHJvcHMuZGF0YXNvdXJjZS50eXBlID09PSAndGFibGUnLFxuICAgICAgaXNFZGl0TW9kZTogZmFsc2UsXG4gICAgICBkYXRhYmFzZUNvbHVtbnM6IHByb3BzLmRhdGFzb3VyY2UuY29sdW1ucy5maWx0ZXIoY29sID0+ICFjb2wuZXhwcmVzc2lvbiksXG4gICAgICBjYWxjdWxhdGVkQ29sdW1uczogcHJvcHMuZGF0YXNvdXJjZS5jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgY29sID0+ICEhY29sLmV4cHJlc3Npb24sXG4gICAgICApLFxuICAgICAgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGFjdGl2ZVRhYktleTogMCxcbiAgICAgIGRhdGFzb3VyY2VUeXBlOiBwcm9wcy5kYXRhc291cmNlLnNxbFxuICAgICAgICA/IERBVEFTT1VSQ0VfVFlQRVMudmlydHVhbC5rZXlcbiAgICAgICAgOiBEQVRBU09VUkNFX1RZUEVTLnBoeXNpY2FsLmtleSxcbiAgICB9O1xuXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2hhbmdlRWRpdE1vZGUgPSB0aGlzLm9uQ2hhbmdlRWRpdE1vZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UgPSB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZSA9IHRoaXMub25EYXRhc291cmNlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy50YWJsZUNoYW5nZUFuZFN5bmNNZXRhZGF0YSA9XG4gICAgICB0aGlzLnRhYmxlQ2hhbmdlQW5kU3luY01ldGFkYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zeW5jTWV0YWRhdGEgPSB0aGlzLnN5bmNNZXRhZGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0Q29sdW1ucyA9IHRoaXMuc2V0Q29sdW1ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMudmFsaWRhdGVBbmRDaGFuZ2UgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVUYWJTZWxlY3QgPSB0aGlzLmhhbmRsZVRhYlNlbGVjdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3VycmVuY2llcyA9IGVuc3VyZUlzQXJyYXkocHJvcHMuY3VycmVuY2llcykubWFwKGN1cnJlbmN5Q29kZSA9PiAoe1xuICAgICAgdmFsdWU6IGN1cnJlbmN5Q29kZSxcbiAgICAgIGxhYmVsOiBgJHtnZXRDdXJyZW5jeVN5bWJvbCh7XG4gICAgICAgIHN5bWJvbDogY3VycmVuY3lDb2RlLFxuICAgICAgfSl9ICgke2N1cnJlbmN5Q29kZX0pYCxcbiAgICB9KSk7XG4gIH1cblxuICBvbkNoYW5nZSgpIHtcbiAgICAvLyBFbXB0eWluZyBTUUwgaWYgXCJQaHlzaWNhbFwiIHJhZGlvIGJ1dHRvbiBpcyBzZWxlY3RlZFxuICAgIC8vIEN1cnJlbnRseSB0aGUgbG9naWMgdG8ga25vdyB3aGV0aGVyIHRoZSBzb3VyY2UgaXNcbiAgICAvLyBwaHlzaWNhbCBvciB2aXJ0dWFsIGlzIGJhc2VkIG9uIHdoZXRoZXIgU1FMIGlzIGVtcHR5IG9yIG5vdC5cbiAgICBjb25zdCB7IGRhdGFzb3VyY2VUeXBlLCBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHNxbCA9XG4gICAgICBkYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgPyAnJyA6IGRhdGFzb3VyY2Uuc3FsO1xuICAgIGNvbnN0IG5ld0RhdGFzb3VyY2UgPSB7XG4gICAgICAuLi50aGlzLnN0YXRlLmRhdGFzb3VyY2UsXG4gICAgICBzcWwsXG4gICAgICBjb2x1bW5zOiBbLi4udGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnMsIC4uLnRoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnNdLFxuICAgIH07XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShuZXdEYXRhc291cmNlLCB0aGlzLnN0YXRlLmVycm9ycyk7XG4gIH1cblxuICBvbkNoYW5nZUVkaXRNb2RlKCkge1xuICAgIHRoaXMucHJvcHMuc2V0SXNFZGl0aW5nKCF0aGlzLnN0YXRlLmlzRWRpdE1vZGUpO1xuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7IGlzRWRpdE1vZGU6ICFwcmV2U3RhdGUuaXNFZGl0TW9kZSB9KSk7XG4gIH1cblxuICBvbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgY2FsbGJhY2sgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFzb3VyY2UgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgb25EYXRhc291cmNlUHJvcENoYW5nZShhdHRyLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIGlmIHZhbHVlIGlzIHVuZGVmaW5lZCBkbyBub3QgdXBkYXRlIHN0YXRlXG4gICAgY29uc3QgZGF0YXNvdXJjZSA9IHsgLi4udGhpcy5zdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH07XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICBkYXRhc291cmNlOiB7IC4uLnByZXZTdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH0sXG4gICAgICB9KSxcbiAgICAgIGF0dHIgPT09ICd0YWJsZV9uYW1lJ1xuICAgICAgICA/IHRoaXMub25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEpXG4gICAgICAgIDogdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSksXG4gICAgKTtcbiAgfVxuXG4gIG9uRGF0YXNvdXJjZVR5cGVDaGFuZ2UoZGF0YXNvdXJjZVR5cGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGF0YXNvdXJjZVR5cGUgfSk7XG4gIH1cblxuICBzZXRDb2x1bW5zKG9iaikge1xuICAgIC8vIHVwZGF0ZSBjYWxjdWxhdGVkQ29sdW1ucyBvciBkYXRhYmFzZUNvbHVtbnNcbiAgICB0aGlzLnNldFN0YXRlKG9iaiwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSk7XG4gIH1cblxuICB2YWxpZGF0ZUFuZENoYW5nZSgpIHtcbiAgICB0aGlzLnZhbGlkYXRlKHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgdGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEoKSB7XG4gICAgdGhpcy52YWxpZGF0ZSgoKSA9PiB7XG4gICAgICB0aGlzLnN5bmNNZXRhZGF0YSgpO1xuICAgICAgdGhpcy5vbkNoYW5nZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc3luY01ldGFkYXRhKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiB0cnVlIH0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdDb2xzID0gYXdhaXQgZmV0Y2hTeW5jZWRDb2x1bW5zKGRhdGFzb3VyY2UpO1xuICAgICAgY29uc3QgY29sdW1uQ2hhbmdlcyA9IHVwZGF0ZUNvbHVtbnMoXG4gICAgICAgIGRhdGFzb3VyY2UuY29sdW1ucyxcbiAgICAgICAgbmV3Q29scyxcbiAgICAgICAgdGhpcy5wcm9wcy5hZGRTdWNjZXNzVG9hc3QsXG4gICAgICApO1xuICAgICAgdGhpcy5zZXRDb2x1bW5zKHtcbiAgICAgICAgZGF0YWJhc2VDb2x1bW5zOiBjb2x1bW5DaGFuZ2VzLmZpbmFsQ29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgY29sID0+ICFjb2wuZXhwcmVzc2lvbiwgLy8gcmVtb3ZlIGNhbGN1bGF0ZWQgY29sdW1uc1xuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdCh0KCdNZXRhZGF0YSBoYXMgYmVlbiBzeW5jZWQnKSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgeyBlcnJvcjogY2xpZW50RXJyb3IsIHN0YXR1c1RleHQgfSA9XG4gICAgICAgIGF3YWl0IGdldENsaWVudEVycm9yT2JqZWN0KGVycm9yKTtcbiAgICAgIHRoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3QoXG4gICAgICAgIGNsaWVudEVycm9yIHx8IHN0YXR1c1RleHQgfHwgdCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkJyksXG4gICAgICApO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1ldGFkYXRhTG9hZGluZzogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgZmluZER1cGxpY2F0ZXMoYXJyLCBhY2Nlc3Nvcikge1xuICAgIGNvbnN0IHNlZW4gPSB7fTtcbiAgICBjb25zdCBkdXBzID0gW107XG4gICAgYXJyLmZvckVhY2gob2JqID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhY2Nlc3NvcihvYmopO1xuICAgICAgaWYgKGl0ZW0gaW4gc2Vlbikge1xuICAgICAgICBkdXBzLnB1c2goaXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuW2l0ZW1dID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZHVwcztcbiAgfVxuXG4gIHZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgbGV0IGVycm9ycyA9IFtdO1xuICAgIGxldCBkdXBzO1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIC8vIExvb2tpbmcgZm9yIGR1cGxpY2F0ZSBjb2x1bW5fbmFtZVxuICAgIGR1cHMgPSB0aGlzLmZpbmREdXBsaWNhdGVzKGRhdGFzb3VyY2UuY29sdW1ucywgb2JqID0+IG9iai5jb2x1bW5fbmFtZSk7XG4gICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChcbiAgICAgIGR1cHMubWFwKG5hbWUgPT4gdCgnQ29sdW1uIG5hbWUgWyVzXSBpcyBkdXBsaWNhdGVkJywgbmFtZSkpLFxuICAgICk7XG5cbiAgICAvLyBMb29raW5nIGZvciBkdXBsaWNhdGUgbWV0cmljX25hbWVcbiAgICBkdXBzID0gdGhpcy5maW5kRHVwbGljYXRlcyhkYXRhc291cmNlLm1ldHJpY3MsIG9iaiA9PiBvYmoubWV0cmljX25hbWUpO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBkdXBzLm1hcChuYW1lID0+IHQoJ01ldHJpYyBuYW1lIFslc10gaXMgZHVwbGljYXRlZCcsIG5hbWUpKSxcbiAgICApO1xuXG4gICAgLy8gTWFraW5nIHN1cmUgY2FsY3VsYXRlZENvbHVtbnMgaGF2ZSBhbiBleHByZXNzaW9uIGRlZmluZWRcbiAgICBjb25zdCBub0ZpbHRlckNhbGNDb2xzID0gdGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1ucy5maWx0ZXIoXG4gICAgICBjb2wgPT4gIWNvbC5leHByZXNzaW9uICYmICFjb2wuanNvbixcbiAgICApO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBub0ZpbHRlckNhbGNDb2xzLm1hcChjb2wgPT5cbiAgICAgICAgdCgnQ2FsY3VsYXRlZCBjb2x1bW4gWyVzXSByZXF1aXJlcyBhbiBleHByZXNzaW9uJywgY29sLmNvbHVtbl9uYW1lKSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIC8vIHZhbGlkYXRlIGN1cnJlbmN5IGNvZGVcbiAgICB0cnkge1xuICAgICAgdGhpcy5zdGF0ZS5kYXRhc291cmNlLm1ldHJpY3M/LmZvckVhY2goXG4gICAgICAgIG1ldHJpYyA9PlxuICAgICAgICAgIG1ldHJpYy5jdXJyZW5jeT8uc3ltYm9sICYmXG4gICAgICAgICAgbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHtcbiAgICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgICAgICAgICAgY3VycmVuY3k6IG1ldHJpYy5jdXJyZW5jeS5zeW1ib2wsXG4gICAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gY2F0Y2gge1xuICAgICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChbdCgnSW52YWxpZCBjdXJyZW5jeSBjb2RlIGluIHNhdmVkIG1ldHJpY3MnKV0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvcnMgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaGFuZGxlVGFiU2VsZWN0KGFjdGl2ZVRhYktleSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWJLZXkgfSk7XG4gIH1cblxuICBzb3J0TWV0cmljcyhtZXRyaWNzKSB7XG4gICAgcmV0dXJuIG1ldHJpY3Muc29ydCgoeyBpZDogYSB9LCB7IGlkOiBiIH0pID0+IGIgLSBhKTtcbiAgfVxuXG4gIHJlbmRlclNldHRpbmdzRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0Jhc2ljJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiZGVmYXVsdF9lbmRwb2ludFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0RlZmF1bHQgVVJMJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICBgRGVmYXVsdCBVUkwgdG8gcmVkaXJlY3QgdG8gd2hlbiBhY2Nlc3NpbmcgZnJvbSB0aGUgZGF0YXNldCBsaXN0IHBhZ2UuXG4gICAgICAgICAgICBBY2NlcHRzIHJlbGF0aXZlIFVSTHMgc3VjaCBhcyA8c3BhbiBzdHlsZT3igJ53aGl0ZS1zcGFjZTogbm93cmFwO+KAnT4vc3VwZXJzZXQvZGFzaGJvYXJkL3tpZH0vPC9zcGFuPmAsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwiZGVmYXVsdF9lbmRwb2ludFwiIC8+fVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBpbmxpbmVcbiAgICAgICAgICBmaWVsZEtleT1cImZpbHRlcl9zZWxlY3RfZW5hYmxlZFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0F1dG9jb21wbGV0ZSBmaWx0ZXJzJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1doZXRoZXIgdG8gcG9wdWxhdGUgYXV0b2NvbXBsZXRlIGZpbHRlcnMgb3B0aW9ucycpfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgLz59XG4gICAgICAgIC8+XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICBmaWVsZEtleT1cImZldGNoX3ZhbHVlc19wcmVkaWNhdGVcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ0F1dG9jb21wbGV0ZSBxdWVyeSBwcmVkaWNhdGUnKX1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAnV2hlbiB1c2luZyBcIkF1dG9jb21wbGV0ZSBmaWx0ZXJzXCIsIHRoaXMgY2FuIGJlIHVzZWQgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZSAnICtcbiAgICAgICAgICAgICAgICAnb2YgdGhlIHF1ZXJ5IGZldGNoaW5nIHRoZSB2YWx1ZXMuIFVzZSB0aGlzIG9wdGlvbiB0byBhcHBseSBhICcgK1xuICAgICAgICAgICAgICAgICdwcmVkaWNhdGUgKFdIRVJFIGNsYXVzZSkgdG8gdGhlIHF1ZXJ5IHNlbGVjdGluZyB0aGUgZGlzdGluY3QgJyArXG4gICAgICAgICAgICAgICAgJ3ZhbHVlcyBmcm9tIHRoZSB0YWJsZS4gVHlwaWNhbGx5IHRoZSBpbnRlbnQgd291bGQgYmUgdG8gbGltaXQgdGhlIHNjYW4gJyArXG4gICAgICAgICAgICAgICAgJ2J5IGFwcGx5aW5nIGEgcmVsYXRpdmUgdGltZSBmaWx0ZXIgb24gYSBwYXJ0aXRpb25lZCBvciBpbmRleGVkIHRpbWUtcmVsYXRlZCBmaWVsZC4nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJzcWxcIlxuICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImZldGNoX3ZhbHVlc19wcmVkaWNhdGVcIlxuICAgICAgICAgICAgICAgIG1pbkxpbmVzPXs1fVxuICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgZmllbGRLZXk9XCJleHRyYVwiXG4gICAgICAgICAgICBsYWJlbD17dCgnRXh0cmEnKX1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAnRXh0cmEgZGF0YSB0byBzcGVjaWZ5IHRhYmxlIG1ldGFkYXRhLiBDdXJyZW50bHkgc3VwcG9ydHMgJyArXG4gICAgICAgICAgICAgICAgJ21ldGFkYXRhIG9mIHRoZSBmb3JtYXQ6IGB7IFwiY2VydGlmaWNhdGlvblwiOiB7IFwiY2VydGlmaWVkX2J5XCI6ICcgK1xuICAgICAgICAgICAgICAgICdcIkRhdGEgUGxhdGZvcm0gVGVhbVwiLCBcImRldGFpbHNcIjogXCJUaGlzIHRhYmxlIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGguXCIgJyArXG4gICAgICAgICAgICAgICAgJ30sIFwid2FybmluZ19tYXJrZG93blwiOiBcIlRoaXMgaXMgYSB3YXJuaW5nLlwiIH1gLicsXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJleHRyYVwiXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJqc29uXCJcbiAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPE93bmVyc1NlbGVjdG9yXG4gICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICBvbkNoYW5nZT17bmV3T3duZXJzID0+IHtcbiAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlQ2hhbmdlKHsgLi4uZGF0YXNvdXJjZSwgb3duZXJzOiBuZXdPd25lcnMgfSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvRmllbGRzZXQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckFkdmFuY2VkRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0FkdmFuY2VkJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJjYWNoZV90aW1lb3V0XCJcbiAgICAgICAgICBsYWJlbD17dCgnQ2FjaGUgdGltZW91dCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgJ1RoZSBkdXJhdGlvbiBvZiB0aW1lIGluIHNlY29uZHMgYmVmb3JlIHRoZSBjYWNoZSBpcyBpbnZhbGlkYXRlZC4gU2V0IHRvIC0xIHRvIGJ5cGFzcyB0aGUgY2FjaGUuJyxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJjYWNoZV90aW1lb3V0XCIgLz59XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwib2Zmc2V0XCJcbiAgICAgICAgICBsYWJlbD17dCgnSG91cnMgb2Zmc2V0Jyl9XG4gICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cIm9mZnNldFwiIC8+fVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgJ1RoZSBudW1iZXIgb2YgaG91cnMsIG5lZ2F0aXZlIG9yIHBvc2l0aXZlLCB0byBzaGlmdCB0aGUgdGltZSBjb2x1bW4uIFRoaXMgY2FuIGJlIHVzZWQgdG8gbW92ZSBVVEMgdGltZSB0byBsb2NhbCB0aW1lLicsXG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cbiAgICAgICAge3RoaXMuc3RhdGUuaXNTcWxhICYmIChcbiAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgIGZpZWxkS2V5PVwidGVtcGxhdGVfcGFyYW1zXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdUZW1wbGF0ZSBwYXJhbWV0ZXJzJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ0Egc2V0IG9mIHBhcmFtZXRlcnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGluIHRoZSBxdWVyeSB1c2luZyBKaW5qYSB0ZW1wbGF0aW5nIHN5bnRheCcsXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cInRlbXBsYXRlX3BhcmFtc1wiIC8+fVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGlubGluZVxuICAgICAgICAgIGZpZWxkS2V5PVwibm9ybWFsaXplX2NvbHVtbnNcIlxuICAgICAgICAgIGxhYmVsPXt0KCdOb3JtYWxpemUgY29sdW1uIG5hbWVzJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAnQWxsb3cgY29sdW1uIG5hbWVzIHRvIGJlIGNoYW5nZWQgdG8gY2FzZSBpbnNlbnNpdGl2ZSBmb3JtYXQsIGlmIHN1cHBvcnRlZCAoZS5nLiBPcmFjbGUsIFNub3dmbGFrZSkuJyxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgY29udHJvbElkPVwibm9ybWFsaXplX2NvbHVtbnNcIiAvPn1cbiAgICAgICAgLz5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgaW5saW5lXG4gICAgICAgICAgZmllbGRLZXk9XCJhbHdheXNfZmlsdGVyX21haW5fZHR0bVwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Fsd2F5cyBmaWx0ZXIgbWFpbiBkYXRldGltZSBjb2x1bW4nKX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgIGBXaGVuIHRoZSBzZWNvbmRhcnkgdGVtcG9yYWwgY29sdW1ucyBhcmUgZmlsdGVyZWQsIGFwcGx5IHRoZSBzYW1lIGZpbHRlciB0byB0aGUgbWFpbiBkYXRldGltZSBjb2x1bW4uYCxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxDaGVja2JveENvbnRyb2wgY29udHJvbElkPVwiYWx3YXlzX2ZpbHRlcl9tYWluX2R0dG1cIiAvPn1cbiAgICAgICAgLz5cbiAgICAgIDwvRmllbGRzZXQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclNwYXRpYWxUYWIoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgc3BhdGlhbHMsIGFsbF9jb2xzOiBhbGxDb2xzIH0gPSBkYXRhc291cmNlO1xuICAgIHJldHVybiAoXG4gICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgIHRhYj17PENvbGxlY3Rpb25UYWJUaXRsZSBjb2xsZWN0aW9uPXtzcGF0aWFsc30gdGl0bGU9e3QoJ1NwYXRpYWwnKX0gLz59XG4gICAgICAgIGtleT17NH1cbiAgICAgID5cbiAgICAgICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgICAgIHRhYmxlQ29sdW1ucz17WyduYW1lJywgJ2NvbmZpZyddfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UuYmluZCh0aGlzLCAnc3BhdGlhbHMnKX1cbiAgICAgICAgICBpdGVtR2VuZXJhdG9yPXsoKSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogdCgnPG5ldyBzcGF0aWFsPicpLFxuICAgICAgICAgICAgdHlwZTogdCgnPG5vIHR5cGU+JyksXG4gICAgICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgICAgfSl9XG4gICAgICAgICAgY29sbGVjdGlvbj17c3BhdGlhbHN9XG4gICAgICAgICAgYWxsb3dEZWxldGVzXG4gICAgICAgICAgaXRlbVJlbmRlcmVycz17e1xuICAgICAgICAgICAgbmFtZTogKGQsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlIGNhbkVkaXQgdGl0bGU9e2R9IG9uU2F2ZVRpdGxlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjb25maWc6ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgICA8U3BhdGlhbENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gY2hvaWNlcz17YWxsQ29sc30gLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJTb3VyY2VGaWVsZHNldCgpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxFZGl0TG9ja0NvbnRhaW5lcj5cbiAgICAgICAgICA8c3BhbiByb2xlPVwiYnV0dG9uXCIgdGFiSW5kZXg9ezB9IG9uQ2xpY2s9e3RoaXMub25DaGFuZ2VFZGl0TW9kZX0+XG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc0VkaXRNb2RlID8gKFxuICAgICAgICAgICAgICA8SWNvbnMuVW5sb2NrT3V0bGluZWRcbiAgICAgICAgICAgICAgICBpY29uU2l6ZT1cInhsXCJcbiAgICAgICAgICAgICAgICBjc3M9e3RoZW1lID0+IGNzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogYXV0byAke3RoZW1lLmdyaWRVbml0fXB4IGF1dG8gMDtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPEljb25zLkxvY2tPdXRsaW5lZFxuICAgICAgICAgICAgICAgIGljb25TaXplPVwieGxcIlxuICAgICAgICAgICAgICAgIGNzcz17dGhlbWUgPT4gKHtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogYGF1dG8gJHt0aGVtZS5ncmlkVW5pdH1weCBhdXRvIDBgLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgeyF0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiYgKFxuICAgICAgICAgICAgPGRpdj57dCgnQ2xpY2sgdGhlIGxvY2sgdG8gbWFrZSBjaGFuZ2VzLicpfTwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJiAoXG4gICAgICAgICAgICA8ZGl2Pnt0KCdDbGljayB0aGUgbG9jayB0byBwcmV2ZW50IGZ1cnRoZXIgY2hhbmdlcy4nKX08L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L0VkaXRMb2NrQ29udGFpbmVyPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm0tbC0xMCBtLXQtMjAgbS1iLTEwXCI+XG4gICAgICAgICAge0RBVEFTT1VSQ0VfVFlQRVNfQVJSLm1hcCh0eXBlID0+IChcbiAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICBrZXk9e3R5cGUua2V5fVxuICAgICAgICAgICAgICB2YWx1ZT17dHlwZS5rZXl9XG4gICAgICAgICAgICAgIGlubGluZVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VUeXBlQ2hhbmdlLmJpbmQodGhpcywgdHlwZS5rZXkpfVxuICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSB0eXBlLmtleX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0eXBlLmxhYmVsfVxuICAgICAgICAgICAgPC9SYWRpbz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8RmllbGRzZXQgaXRlbT17ZGF0YXNvdXJjZX0gb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfSBjb21wYWN0PlxuICAgICAgICAgIHt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5ICYmIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRhdGFiYXNlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdWaXJ0dWFsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRhYmFzZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGI9e2RhdGFzb3VyY2U/LmRhdGFiYXNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGFsb2c9e2RhdGFzb3VyY2UuY2F0YWxvZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWE9e2RhdGFzb3VyY2Uuc2NoZW1hfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2F0YWxvZ0NoYW5nZT17Y2F0YWxvZyA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ2NhdGFsb2cnLCBjYXRhbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNjaGVtYUNoYW5nZT17c2NoZW1hID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgnc2NoZW1hJywgc2NoZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRiQ2hhbmdlPXtkYXRhYmFzZSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ2RhdGFiYXNlJywgZGF0YWJhc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Nb2RlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcj17dGhpcy5wcm9wcy5hZGREYW5nZXJUb2FzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seT17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgd2lkdGg6ICdjYWxjKDEwMCUgLSAzNHB4KScsIG1hcmdpblRvcDogLTE2IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0YWJsZV9uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdOYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RhYmxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEYXRhc2V0IG5hbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCcpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICAgICAnV2hlbiBzcGVjaWZ5aW5nIFNRTCwgdGhlIGRhdGFzb3VyY2UgYWN0cyBhcyBhIHZpZXcuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1N1cGVyc2V0IHdpbGwgdXNlIHRoaXMgc3RhdGVtZW50IGFzIGEgc3VicXVlcnkgd2hpbGUgZ3JvdXBpbmcgYW5kIGZpbHRlcmluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvbiB0aGUgZ2VuZXJhdGVkIHBhcmVudCBxdWVyaWVzLicsXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWluTGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGluZXM9e0luZmluaXR5fVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBPcHRpb25zPXtzcWxUb29sdGlwT3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgJiYgKFxuICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInRhYmxlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1BoeXNpY2FsJyl9XG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgbWFyZ2luVG9wOiA4IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2U9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZS5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VfbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlLmRhdGFiYXNlPy5kYXRhYmFzZV9uYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZS5kYXRhYmFzZT8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBkYklkPXtkYXRhc291cmNlLmRhdGFiYXNlPy5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yPXt0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0YWxvZz17ZGF0YXNvdXJjZS5jYXRhbG9nfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hPXtkYXRhc291cmNlLnNjaGVtYX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNxbExhYk1vZGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVWYWx1ZT17ZGF0YXNvdXJjZS50YWJsZV9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DYXRhbG9nQ2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjYXRhbG9nID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgnY2F0YWxvZycsIGNhdGFsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2NoZW1hQ2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzY2hlbWEgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdzY2hlbWEnLCBzY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRGJDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRhdGFiYXNlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YWJhc2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFibGVTZWxlY3RDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRhYmxlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seT17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgICAnVGhlIHBvaW50ZXIgdG8gYSBwaHlzaWNhbCB0YWJsZSAob3IgdmlldykuIEtlZXAgaW4gbWluZCB0aGF0IHRoZSBjaGFydCBpcyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAnYXNzb2NpYXRlZCB0byB0aGlzIFN1cGVyc2V0IGxvZ2ljYWwgdGFibGUsIGFuZCB0aGlzIGxvZ2ljYWwgdGFibGUgcG9pbnRzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICd0aGUgcGh5c2ljYWwgdGFibGUgcmVmZXJlbmNlZCBoZXJlLicsXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICApfVxuICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckVycm9ycygpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5lcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEFsZXJ0XG4gICAgICAgICAgY3NzPXt0aGVtZSA9PiAoeyBtYXJnaW5Cb3R0b206IHRoZW1lLmdyaWRVbml0ICogNCB9KX1cbiAgICAgICAgICB0eXBlPVwiZXJyb3JcIlxuICAgICAgICAgIG1lc3NhZ2U9e1xuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3JzLm1hcChlcnIgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtlcnJ9PntlcnJ9PC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZW5kZXJNZXRyaWNDb2xsZWN0aW9uKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG1ldHJpY3MgfSA9IGRhdGFzb3VyY2U7XG4gICAgY29uc3Qgc29ydGVkTWV0cmljcyA9IG1ldHJpY3M/Lmxlbmd0aCA/IHRoaXMuc29ydE1ldHJpY3MobWV0cmljcykgOiBbXTtcbiAgICByZXR1cm4gKFxuICAgICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgICB0YWJsZUNvbHVtbnM9e1snbWV0cmljX25hbWUnLCAndmVyYm9zZV9uYW1lJywgJ2V4cHJlc3Npb24nXX1cbiAgICAgICAgc29ydENvbHVtbnM9e1snbWV0cmljX25hbWUnLCAndmVyYm9zZV9uYW1lJywgJ2V4cHJlc3Npb24nXX1cbiAgICAgICAgY29sdW1uTGFiZWxzPXt7XG4gICAgICAgICAgbWV0cmljX25hbWU6IHQoJ01ldHJpYyBLZXknKSxcbiAgICAgICAgICB2ZXJib3NlX25hbWU6IHQoJ0xhYmVsJyksXG4gICAgICAgICAgZXhwcmVzc2lvbjogdCgnU1FMIGV4cHJlc3Npb24nKSxcbiAgICAgICAgfX1cbiAgICAgICAgY29sdW1uTGFiZWxUb29sdGlwcz17e1xuICAgICAgICAgIG1ldHJpY19uYW1lOiB0KFxuICAgICAgICAgICAgJ1RoaXMgZmllbGQgaXMgdXNlZCBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIHRvIGF0dGFjaCAnICtcbiAgICAgICAgICAgICAgJ3RoZSBtZXRyaWMgdG8gY2hhcnRzLiBJdCBpcyBhbHNvIHVzZWQgYXMgdGhlIGFsaWFzIGluIHRoZSAnICtcbiAgICAgICAgICAgICAgJ1NRTCBxdWVyeS4nLFxuICAgICAgICAgICksXG4gICAgICAgIH19XG4gICAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxGaWVsZHNldCBjb21wYWN0PlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZDNmb3JtYXRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEMyBmb3JtYXQnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJkM2Zvcm1hdFwiIHBsYWNlaG9sZGVyPVwiJXkvJW0vJWRcIiAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjdXJyZW5jeVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ01ldHJpYyBjdXJyZW5jeScpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPEN1cnJlbmN5Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeVNlbGVjdE92ZXJyaWRlUHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdCgnU2VsZWN0IG9yIHR5cGUgY3VycmVuY3kgc3ltYm9sJyksXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbFNlbGVjdEFkZGl0aW9uYWxTdHlsZXM9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDMwJTtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWVkIGJ5Jyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpZWRfYnlcIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBtZXRyaWMnLFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX1cbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0RldGFpbHMgb2YgdGhlIGNlcnRpZmljYXRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1dhcm5pbmcnKX1cbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cIndhcm5pbmdfbWFya2Rvd25cIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdPcHRpb25hbCB3YXJuaW5nIGFib3V0IHVzZSBvZiB0aGlzIG1ldHJpYycpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJ3YXJuaW5nX21hcmtkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJtYXJrZG93blwiXG4gICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvRmllbGRzZXQ+XG4gICAgICAgICAgPC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICB9XG4gICAgICAgIGNvbGxlY3Rpb249e3NvcnRlZE1ldHJpY3N9XG4gICAgICAgIGFsbG93QWRkSXRlbVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlLmJpbmQodGhpcywgJ21ldHJpY3MnKX1cbiAgICAgICAgaXRlbUdlbmVyYXRvcj17KCkgPT4gKHtcbiAgICAgICAgICBtZXRyaWNfbmFtZTogdCgnPG5ldyBtZXRyaWM+JyksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiAnJyxcbiAgICAgICAgICBleHByZXNzaW9uOiAnJyxcbiAgICAgICAgfSl9XG4gICAgICAgIGl0ZW1DZWxsUHJvcHM9e3tcbiAgICAgICAgICBleHByZXNzaW9uOiAoKSA9PiAoe1xuICAgICAgICAgICAgd2lkdGg6ICcyNDBweCcsXG4gICAgICAgICAgfSksXG4gICAgICAgIH19XG4gICAgICAgIGl0ZW1SZW5kZXJlcnM9e3tcbiAgICAgICAgICBtZXRyaWNfbmFtZTogKHYsIG9uQ2hhbmdlLCBfLCByZWNvcmQpID0+IChcbiAgICAgICAgICAgIDxGbGV4Um93Q29udGFpbmVyPlxuICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge3JlY29yZC53YXJuaW5nX21hcmtkb3duICYmIChcbiAgICAgICAgICAgICAgICA8V2FybmluZ0ljb25XaXRoVG9vbHRpcFxuICAgICAgICAgICAgICAgICAgd2FybmluZ01hcmtkb3duPXtyZWNvcmQud2FybmluZ19tYXJrZG93bn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RWRpdGFibGVUaXRsZSBjYW5FZGl0IHRpdGxlPXt2fSBvblNhdmVUaXRsZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICAgICA8L0ZsZXhSb3dDb250YWluZXI+XG4gICAgICAgICAgKSxcbiAgICAgICAgICB2ZXJib3NlX25hbWU6ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgPFRleHRDb250cm9sIGNhbkVkaXQgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgICApLFxuICAgICAgICAgIGV4cHJlc3Npb246ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICBjYW5FZGl0XG4gICAgICAgICAgICAgIGluaXRpYWxWYWx1ZT17dn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICBleHRyYUNsYXNzZXM9e1snZGF0YXNvdXJjZS1zcWwtZXhwcmVzc2lvbiddfVxuICAgICAgICAgICAgICBsYW5ndWFnZT1cInNxbFwiXG4gICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICBtaW5MaW5lcz17NX1cbiAgICAgICAgICAgICAgdGV4dEFyZWFTdHlsZXM9e3sgbWluV2lkdGg6ICcyMDBweCcsIG1heFdpZHRoOiAnNDUwcHgnIH19XG4gICAgICAgICAgICAgIHJlc2l6ZT1cImJvdGhcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAodiwgb25DaGFuZ2UsIGxhYmVsKSA9PiAoXG4gICAgICAgICAgICA8U3RhY2tlZEZpZWxkXG4gICAgICAgICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQ9ezxUZXh0Q29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBkM2Zvcm1hdDogKHYsIG9uQ2hhbmdlLCBsYWJlbCkgPT4gKFxuICAgICAgICAgICAgPFN0YWNrZWRGaWVsZFxuICAgICAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50PXs8VGV4dENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz59XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICksXG4gICAgICAgIH19XG4gICAgICAgIGFsbG93RGVsZXRlc1xuICAgICAgICBzdGlja3lIZWFkZXJcbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UsIGFjdGl2ZVRhYktleSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG1ldHJpY3MgfSA9IGRhdGFzb3VyY2U7XG4gICAgY29uc3Qgc29ydGVkTWV0cmljcyA9IG1ldHJpY3M/Lmxlbmd0aCA/IHRoaXMuc29ydE1ldHJpY3MobWV0cmljcykgOiBbXTtcbiAgICBjb25zdCB7IHRoZW1lIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxEYXRhc291cmNlQ29udGFpbmVyIGRhdGEtdGVzdD1cImRhdGFzb3VyY2UtZWRpdG9yXCI+XG4gICAgICAgIHt0aGlzLnJlbmRlckVycm9ycygpfVxuICAgICAgICA8QWxlcnRcbiAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7IG1hcmdpbkJvdHRvbTogdGhlbWUuZ3JpZFVuaXQgKiA0IH0pfVxuICAgICAgICAgIHR5cGU9XCJ3YXJuaW5nXCJcbiAgICAgICAgICBtZXNzYWdlPXtcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICAgIDxzdHJvbmc+e3QoJ0JlIGNhcmVmdWwuJyl9IDwvc3Ryb25nPlxuICAgICAgICAgICAgICB7dChcbiAgICAgICAgICAgICAgICAnQ2hhbmdpbmcgdGhlc2Ugc2V0dGluZ3Mgd2lsbCBhZmZlY3QgYWxsIGNoYXJ0cyB1c2luZyB0aGlzIGRhdGFzZXQsIGluY2x1ZGluZyBjaGFydHMgb3duZWQgYnkgb3RoZXIgcGVvcGxlLicsXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxTdHlsZWRUYWJsZVRhYnNcbiAgICAgICAgICBmdWxsV2lkdGg9e2ZhbHNlfVxuICAgICAgICAgIGlkPVwidGFibGUtdGFic1wiXG4gICAgICAgICAgZGF0YS10ZXN0PVwiZWRpdC1kYXRhc2V0LXRhYnNcIlxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVRhYlNlbGVjdH1cbiAgICAgICAgICBkZWZhdWx0QWN0aXZlS2V5PXthY3RpdmVUYWJLZXl9XG4gICAgICAgID5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lIGtleT17MH0gdGFiPXt0KCdTb3VyY2UnKX0+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJTb3VyY2VGaWVsZHNldCh0aGVtZSl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3NvcnRlZE1ldHJpY3N9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ01ldHJpY3MnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleT17MX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJNZXRyaWNDb2xsZWN0aW9uKCl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3RoaXMuc3RhdGUuZGF0YWJhc2VDb2x1bW5zfVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdDb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezJ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgICA8U3R5bGVkQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJ0ZXJ0aWFyeVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc3luY01ldGFkYXRhfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzeW5jLWZyb20tc291cmNlXCJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEljb25zLkRhdGFiYXNlT3V0bGluZWQgaWNvblNpemU9XCJtXCIgLz5cbiAgICAgICAgICAgICAgICAgICAge3QoJ1N5bmMgY29sdW1ucyBmcm9tIHNvdXJjZScpfVxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICA8L0NvbHVtbkJ1dHRvbldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5Db2xsZWN0aW9uVGFibGVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW5zLXRhYmxlXCJcbiAgICAgICAgICAgICAgICBjb2x1bW5zPXt0aGlzLnN0YXRlLmRhdGFiYXNlQ29sdW1uc31cbiAgICAgICAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIG9uQ29sdW1uc0NoYW5nZT17ZGF0YWJhc2VDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBkYXRhYmFzZUNvbHVtbnMgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWV0YWRhdGFMb2FkaW5nICYmIDxMb2FkaW5nIC8+fVxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnQ2FsY3VsYXRlZCBjb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQ29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICBvbkNvbHVtbnNDaGFuZ2U9e2NhbGN1bGF0ZWRDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBjYWxjdWxhdGVkQ29sdW1ucyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2x1bW5MYWJlbFRvb2x0aXBzPXt7XG4gICAgICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdChcbiAgICAgICAgICAgICAgICAgICAgJ1RoaXMgZmllbGQgaXMgdXNlZCBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIHRvIGF0dGFjaCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAndGhlIGNhbGN1bGF0ZWQgZGltZW5zaW9uIHRvIGNoYXJ0cy4gSXQgaXMgYWxzbyB1c2VkICcgK1xuICAgICAgICAgICAgICAgICAgICAgICdhcyB0aGUgYWxpYXMgaW4gdGhlIFNRTCBxdWVyeS4nLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICAgICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbHVtbk5hbWVcbiAgICAgICAgICAgICAgICBzaG93RXhwcmVzc2lvblxuICAgICAgICAgICAgICAgIGFsbG93QWRkSXRlbVxuICAgICAgICAgICAgICAgIGFsbG93RWRpdERhdGFUeXBlXG4gICAgICAgICAgICAgICAgaXRlbUdlbmVyYXRvcj17KCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiB0KCc8bmV3IGNvbHVtbj4nKSxcbiAgICAgICAgICAgICAgICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBncm91cGJ5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogdCgnPGVudGVyIFNRTCBleHByZXNzaW9uIGhlcmU+JyksXG4gICAgICAgICAgICAgICAgICBfX2V4cGFuZGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lIGtleT17NH0gdGFiPXt0KCdTZXR0aW5ncycpfT5cbiAgICAgICAgICAgIDxSb3cgZ3V0dGVyPXsxNn0+XG4gICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgIDxGb3JtQ29udGFpbmVyPnt0aGlzLnJlbmRlclNldHRpbmdzRmllbGRzZXQoKX08L0Zvcm1Db250YWluZXI+XG4gICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj57dGhpcy5yZW5kZXJBZHZhbmNlZEZpZWxkc2V0KCl9PC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgIDwvUm93PlxuICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICAgICA8L1N0eWxlZFRhYmxlVGFicz5cbiAgICAgIDwvRGF0YXNvdXJjZUNvbnRhaW5lcj5cbiAgICApO1xuICB9XG59XG5cbkRhdGFzb3VyY2VFZGl0b3IuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuRGF0YXNvdXJjZUVkaXRvci5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5cbmNvbnN0IERhdGFTb3VyY2VDb21wb25lbnQgPSB3aXRoVGhlbWUoRGF0YXNvdXJjZUVkaXRvcik7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUb2FzdHMoRGF0YVNvdXJjZUNvbXBvbmVudCk7XG4iXX0= */\"), children:\n                  _jsx(Field, {\n                    fieldKey: \"table_name\",\n                    label: t('Name'),\n                    control:\n                    _jsx(TextControl, {\n                      controlId: \"table_name\",\n                      onChange: (table) => {\n                        this.onDatasourcePropChange('table_name', table);\n                      },\n                      placeholder: t('Dataset name'),\n                      disabled: !this.state.isEditMode }\n                    ) }\n\n                  ) }\n                )] }\n              ),\n              _jsx(Field, {\n                fieldKey: \"sql\",\n                label: t('SQL'),\n                description: t(\n                  'When specifying SQL, the datasource acts as a view. ' +\n                  'Superset will use this statement as a subquery while grouping and filtering ' +\n                  'on the generated parent queries.'\n                ),\n                control:\n                _jsx(TextAreaControl, {\n                  language: \"sql\",\n                  offerEditInModal: false,\n                  minLines: 20,\n                  maxLines: Infinity,\n                  readOnly: !this.state.isEditMode,\n                  resize: \"both\",\n                  tooltipOptions: sqlTooltipOptions }\n                ) }\n\n              )] }\n            ) }\n\n          ),\n\n          this.state.datasourceType === DATASOURCE_TYPES.physical.key &&\n          _jsx(Col, { xs: 24, md: 12, children:\n            this.state.isSqla &&\n            _jsx(Field, {\n              fieldKey: \"tableSelector\",\n              label: t('Physical'),\n              control:\n              _jsx(\"div\", { css: _ref3, children:\n                _jsx(TableSelector, {\n                  clearable: false,\n                  database: {\n                    ...datasource.database,\n                    database_name:\n                    ((_datasource$database = datasource.database) == null ? void 0 : _datasource$database.database_name) || ((_datasource$database2 =\n                    datasource.database) == null ? void 0 : _datasource$database2.name)\n                  },\n                  dbId: (_datasource$database3 = datasource.database) == null ? void 0 : _datasource$database3.id,\n                  handleError: this.props.addDangerToast,\n                  catalog: datasource.catalog,\n                  schema: datasource.schema,\n                  sqlLabMode: false,\n                  tableValue: datasource.table_name,\n                  onCatalogChange:\n                  this.state.isEditMode ?\n                  (catalog) =>\n                  this.onDatasourcePropChange('catalog', catalog) :\n                  undefined,\n\n                  onSchemaChange:\n                  this.state.isEditMode ?\n                  (schema) =>\n                  this.onDatasourcePropChange('schema', schema) :\n                  undefined,\n\n                  onDbChange:\n                  this.state.isEditMode ?\n                  (database) =>\n                  this.onDatasourcePropChange(\n                    'database',\n                    database\n                  ) :\n                  undefined,\n\n                  onTableSelectChange:\n                  this.state.isEditMode ?\n                  (table) =>\n                  this.onDatasourcePropChange('table_name', table) :\n                  undefined,\n\n                  readOnly: !this.state.isEditMode }\n                ) }\n              ),\n\n              description: t(\n                'The pointer to a physical table (or view). Keep in mind that the chart is ' +\n                'associated to this Superset logical table, and this logical table points ' +\n                'the physical table referenced here.'\n              ) }\n            ) }\n\n          )] }\n\n        )] }\n      ));\n\n  }\n\n  renderErrors() {\n    if (this.state.errors.length > 0) {\n      return (\n        _jsx(Alert, {\n          css: (theme) => ({ marginBottom: theme.gridUnit * 4 }),\n          type: \"error\",\n          message:\n          _jsx(_Fragment, { children:\n            this.state.errors.map((err) =>\n            _jsx(\"div\", { children: err }, err)\n            ) }\n          ) }\n\n        ));\n\n    }\n    return null;\n  }\n\n  renderMetricCollection() {\n    const { datasource } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics != null && metrics.length ? this.sortMetrics(metrics) : [];\n    return (\n      _jsx(CollectionTable, {\n        tableColumns: ['metric_name', 'verbose_name', 'expression'],\n        sortColumns: ['metric_name', 'verbose_name', 'expression'],\n        columnLabels: {\n          metric_name: t('Metric Key'),\n          verbose_name: t('Label'),\n          expression: t('SQL expression')\n        },\n        columnLabelTooltips: {\n          metric_name: t(\n            'This field is used as a unique identifier to attach ' +\n            'the metric to charts. It is also used as the alias in the ' +\n            'SQL query.'\n          )\n        },\n        expandFieldset:\n        _jsx(FormContainer, { children:\n          _jsxs(Fieldset, { compact: true, children: [\n            _jsx(Field, {\n              fieldKey: \"description\",\n              label: t('Description'),\n              control:\n              _jsx(TextControl, {\n                controlId: \"description\",\n                placeholder: t('Description') }\n              ) }\n\n            ),\n            _jsx(Field, {\n              fieldKey: \"d3format\",\n              label: t('D3 format'),\n              control:\n              _jsx(TextControl, { controlId: \"d3format\", placeholder: \"%y/%m/%d\" }) }\n\n            ),\n            _jsx(Field, {\n              fieldKey: \"currency\",\n              label: t('Metric currency'),\n              control:\n              _jsx(CurrencyControl, {\n                currencySelectOverrideProps: {\n                  placeholder: t('Select or type currency symbol')\n                },\n                symbolSelectAdditionalStyles: css`\n                      max-width: 30%;\n                    ` }\n              ) }\n\n            ),\n            _jsx(Field, {\n              label: t('Certified by'),\n              fieldKey: \"certified_by\",\n              description: t(\n                'Person or group that has certified this metric'\n              ),\n              control:\n              _jsx(TextControl, {\n                controlId: \"certified_by\",\n                placeholder: t('Certified by') }\n              ) }\n\n            ),\n            _jsx(Field, {\n              label: t('Certification details'),\n              fieldKey: \"certification_details\",\n              description: t('Details of the certification'),\n              control:\n              _jsx(TextControl, {\n                controlId: \"certification_details\",\n                placeholder: t('Certification details') }\n              ) }\n\n            ),\n            _jsx(Field, {\n              label: t('Warning'),\n              fieldKey: \"warning_markdown\",\n              description: t('Optional warning about use of this metric'),\n              control:\n              _jsx(TextAreaControl, {\n                controlId: \"warning_markdown\",\n                language: \"markdown\",\n                offerEditInModal: false,\n                resize: \"vertical\" }\n              ) }\n\n            )] }\n          ) }\n        ),\n\n        collection: sortedMetrics,\n        allowAddItem: true,\n        onChange: this.onDatasourcePropChange.bind(this, 'metrics'),\n        itemGenerator: () => ({\n          metric_name: t('<new metric>'),\n          verbose_name: '',\n          expression: ''\n        }),\n        itemCellProps: {\n          expression: () => ({\n            width: '240px'\n          })\n        },\n        itemRenderers: {\n          metric_name: (v, onChange, _, record) =>\n          _jsxs(FlexRowContainer, { children: [\n            record.is_certified &&\n            _jsx(CertifiedBadge, {\n              certifiedBy: record.certified_by,\n              details: record.certification_details }\n            ),\n\n            record.warning_markdown &&\n            _jsx(WarningIconWithTooltip, {\n              warningMarkdown: record.warning_markdown }\n            ),\n\n            _jsx(EditableTitle, { canEdit: true, title: v, onSaveTitle: onChange })] }\n          ),\n\n          verbose_name: (v, onChange) =>\n          _jsx(TextControl, { canEdit: true, value: v, onChange: onChange }),\n\n          expression: (v, onChange) =>\n          _jsx(TextAreaControl, {\n            canEdit: true,\n            initialValue: v,\n            onChange: onChange,\n            extraClasses: ['datasource-sql-expression'],\n            language: \"sql\",\n            offerEditInModal: false,\n            minLines: 5,\n            textAreaStyles: { minWidth: '200px', maxWidth: '450px' },\n            resize: \"both\" }\n          ),\n\n          description: (v, onChange, label) =>\n          _jsx(StackedField, {\n            label: label,\n            formElement: _jsx(TextControl, { value: v, onChange: onChange }) }\n          ),\n\n          d3format: (v, onChange, label) =>\n          _jsx(StackedField, {\n            label: label,\n            formElement: _jsx(TextControl, { value: v, onChange: onChange }) }\n          )\n\n        },\n        allowDeletes: true,\n        stickyHeader: true }\n      ));\n\n  }\n\n  render() {\n    const { datasource, activeTabKey } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics != null && metrics.length ? this.sortMetrics(metrics) : [];\n    const { theme } = this.props;\n\n    return (\n      _jsxs(DatasourceContainer, { \"data-test\": \"datasource-editor\", children: [\n        this.renderErrors(),\n        _jsx(Alert, {\n          css: (theme) => ({ marginBottom: theme.gridUnit * 4 }),\n          type: \"warning\",\n          message:\n          _jsxs(_Fragment, { children: [\n            ' ',\n            _jsxs(\"strong\", { children: [t('Be careful.'), \" \"] }),\n            t(\n              'Changing these settings will affect all charts using this dataset, including charts owned by other people.'\n            )] }\n          ) }\n\n        ),\n        _jsxs(StyledTableTabs, {\n          fullWidth: false,\n          id: \"table-tabs\",\n          \"data-test\": \"edit-dataset-tabs\",\n          onChange: this.handleTabSelect,\n          defaultActiveKey: activeTabKey, children: [\n\n          _jsx(Tabs.TabPane, { tab: t('Source'), children:\n            this.renderSourceFieldset(theme) }, 0\n          ),\n          _jsx(Tabs.TabPane, {\n            tab:\n            _jsx(CollectionTabTitle, {\n              collection: sortedMetrics,\n              title: t('Metrics') }\n            ), children:\n\n\n\n            this.renderMetricCollection() }, 1\n          ),\n          _jsx(Tabs.TabPane, {\n            tab:\n            _jsx(CollectionTabTitle, {\n              collection: this.state.databaseColumns,\n              title: t('Columns') }\n            ), children:\n\n\n\n            _jsxs(StyledColumnsTabWrapper, { children: [\n              _jsx(ColumnButtonWrapper, { children:\n                _jsx(StyledButtonWrapper, { children:\n                  _jsxs(Button, {\n                    buttonSize: \"small\",\n                    buttonStyle: \"tertiary\",\n                    onClick: this.syncMetadata,\n                    className: \"sync-from-source\",\n                    disabled: this.state.isEditMode, children: [\n\n                    _jsx(Icons.DatabaseOutlined, { iconSize: \"m\" }),\n                    t('Sync columns from source')] }\n                  ) }\n                ) }\n              ),\n              _jsx(ColumnCollectionTable, {\n                className: \"columns-table\",\n                columns: this.state.databaseColumns,\n                datasource: datasource,\n                onColumnsChange: (databaseColumns) =>\n                this.setColumns({ databaseColumns }),\n\n                onDatasourceChange: this.onDatasourceChange }\n              ),\n              this.state.metadataLoading && _jsx(Loading, {})] }\n            ) }, 2\n          ),\n          _jsx(Tabs.TabPane, {\n            tab:\n            _jsx(CollectionTabTitle, {\n              collection: this.state.calculatedColumns,\n              title: t('Calculated columns') }\n            ), children:\n\n\n\n            _jsx(StyledColumnsTabWrapper, { children:\n              _jsx(ColumnCollectionTable, {\n                columns: this.state.calculatedColumns,\n                onColumnsChange: (calculatedColumns) =>\n                this.setColumns({ calculatedColumns }),\n\n                columnLabelTooltips: {\n                  column_name: t(\n                    'This field is used as a unique identifier to attach ' +\n                    'the calculated dimension to charts. It is also used ' +\n                    'as the alias in the SQL query.'\n                  )\n                },\n                onDatasourceChange: this.onDatasourceChange,\n                datasource: datasource,\n                editableColumnName: true,\n                showExpression: true,\n                allowAddItem: true,\n                allowEditDataType: true,\n                itemGenerator: () => ({\n                  column_name: t('<new column>'),\n                  filterable: true,\n                  groupby: true,\n                  expression: t('<enter SQL expression here>'),\n                  __expanded: true\n                }) }\n              ) }\n            ) }, 3\n          ),\n          _jsx(Tabs.TabPane, { tab: t('Settings'), children:\n            _jsxs(Row, { gutter: 16, children: [\n              _jsx(Col, { xs: 24, md: 12, children:\n                _jsx(FormContainer, { children: this.renderSettingsFieldset() }) }\n              ),\n              _jsx(Col, { xs: 24, md: 12, children:\n                _jsx(FormContainer, { children: this.renderAdvancedFieldset() }) }\n              )] }\n            ) }, 4\n          )] }\n        )] }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nDatasourceEditor.defaultProps = defaultProps;\nDatasourceEditor.propTypes = propTypes;\n\nconst DataSourceComponent = withTheme(DatasourceEditor);const _default =\n\nwithToasts(DataSourceComponent);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DatasourceContainer, \"DatasourceContainer\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(FlexRowContainer, \"FlexRowContainer\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledTableTabs, \"StyledTableTabs\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledBadge, \"StyledBadge\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(EditLockContainer, \"EditLockContainer\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(ColumnButtonWrapper, \"ColumnButtonWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledLabelWrapper, \"StyledLabelWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledColumnsTabWrapper, \"StyledColumnsTabWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledButtonWrapper, \"StyledButtonWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(sqlTooltipOptions, \"sqlTooltipOptions\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(checkboxGenerator, \"checkboxGenerator\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DATA_TYPES, \"DATA_TYPES\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DATASOURCE_TYPES_ARR, \"DATASOURCE_TYPES_ARR\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DATASOURCE_TYPES, \"DATASOURCE_TYPES\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(CollectionTabTitle, \"CollectionTabTitle\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(ColumnCollectionTable, \"ColumnCollectionTable\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StackedField, \"StackedField\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(FormContainer, \"FormContainer\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(OwnersSelector, \"OwnersSelector\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DatasourceEditor, \"DatasourceEditor\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DataSourceComponent, \"DataSourceComponent\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["rison","PureComponent","useCallback","PropTypes","Radio","Card","Alert","Badge","css","isFeatureEnabled","getCurrencySymbol","ensureIsArray","FeatureFlag","styled","SupersetClient","t","withTheme","getClientErrorObject","Select","AsyncSelect","Row","Col","FormLabel","Button","Tabs","CertifiedBadge","WarningIconWithTooltip","DatabaseSelector","Label","Loading","TableSelector","EditableTitle","CheckboxControl","TextControl","TextAreaControl","SpatialControl","withToasts","Icons","CurrencyControl","CollectionTable","Fieldset","Field","fetchSyncedColumns","updateColumns","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DatasourceContainer","div","theme","colors","warning","base","typography","weights","bold","FlexRowContainer","gridUnit","StyledTableTabs","StyledBadge","EditLockContainer","sizes","s","ColumnButtonWrapper","StyledLabelWrapper","StyledColumnsTabWrapper","StyledButtonWrapper","span","sqlTooltipOptions","placement","title","checkboxGenerator","d","onChange","value","DATA_TYPES","label","DATASOURCE_TYPES_ARR","key","DATASOURCE_TYPES","forEach","o","_ref","process","env","NODE_ENV","name","styles","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","CollectionTabTitle","collection","children","count","length","showZero","propTypes","string","array","ColumnCollectionTable","columns","datasource","onColumnsChange","onDatasourceChange","editableColumnName","showExpression","allowAddItem","allowEditDataType","itemGenerator","columnLabelTooltips","tableColumns","EnableAdvancedDataTypes","sortColumns","allowDeletes","stickyHeader","expandFieldset","FormContainer","compact","fieldKey","control","language","offerEditInModal","resize","controlId","placeholder","ariaLabel","options","allowNewOptions","allowClear","description","href","columnLabels","column_name","advanced_data_type","type","groupby","is_dttm","main_dttm_col","filterable","itemRenderers","v","onItemChange","_","record","is_certified","certifiedBy","certified_by","details","certification_details","canEdit","onSaveTitle","_onItemChange","_label","checked","disabled","find","column","isRequired","object","func","bool","defaultProps","StackedField","formElement","node","padded","addSuccessToast","addDangerToast","setIsEditing","OwnersSelector","loadOptions","search","page","pageSize","query","encode","filter","page_size","get","endpoint","then","response","data","json","result","item","extra","active","map","text","totalCount","mode","owners","header","__signature__","_ref2","_ref3","DatasourceEditor","constructor","props","_props$datasource$met","state","owner","id","first_name","last_name","metrics","metric","certifiedByMetric","certificationDetails","certification","warning_markdown","warningMarkdown","JSON","parse","errors","isSqla","datasource_type","isEditMode","databaseColumns","col","expression","calculatedColumns","metadataLoading","activeTabKey","datasourceType","sql","virtual","physical","bind","onChangeEditMode","onDatasourcePropChange","tableChangeAndSyncMetadata","syncMetadata","setColumns","validateAndChange","handleTabSelect","currencies","currencyCode","symbol","newDatasource","setState","prevState","callback","attr","undefined","onDatasourceTypeChange","obj","validate","newCols","columnChanges","finalColumns","error","clientError","statusText","findDuplicates","arr","accessor","seen","dups","push","concat","metric_name","noFilterCalcCols","_this$state$datasourc","_metric$currency","currency","Intl","NumberFormat","style","sortMetrics","sort","a","b","renderSettingsFieldset","inline","minLines","newOwners","renderAdvancedFieldset","renderSpatialTab","spatials","all_cols","allCols","TabPane","tab","config","choices","renderSourceFieldset","_datasource$database","_datasource$database2","_datasource$database3","role","tabIndex","onClick","UnlockOutlined","iconSize","LockOutlined","margin","className","xs","md","db","database","catalog","schema","onCatalogChange","onSchemaChange","onDbChange","formMode","handleError","readOnly","_css","width","marginTop","table","maxLines","Infinity","tooltipOptions","clearable","database_name","dbId","sqlLabMode","tableValue","table_name","onTableSelectChange","renderErrors","marginBottom","message","err","renderMetricCollection","sortedMetrics","verbose_name","currencySelectOverrideProps","symbolSelectAdditionalStyles","itemCellProps","initialValue","extraClasses","textAreaStyles","minWidth","maxWidth","d3format","render","fullWidth","defaultActiveKey","buttonSize","buttonStyle","DatabaseOutlined","__expanded","gutter","__reactstandin__regenerateByEval","code","eval","DataSourceComponent","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport rison from 'rison';\nimport { PureComponent, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Radio } from 'src/components/Radio';\nimport Card from 'src/components/Card';\nimport Alert from 'src/components/Alert';\nimport Badge from 'src/components/Badge';\nimport {\n  css,\n  isFeatureEnabled,\n  getCurrencySymbol,\n  ensureIsArray,\n  FeatureFlag,\n  styled,\n  SupersetClient,\n  t,\n  withTheme,\n  getClientErrorObject,\n} from '@superset-ui/core';\nimport { Select, AsyncSelect, Row, Col } from 'src/components';\nimport { FormLabel } from 'src/components/Form';\nimport Button from 'src/components/Button';\nimport Tabs from 'src/components/Tabs';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport DatabaseSelector from 'src/components/DatabaseSelector';\nimport Label from 'src/components/Label';\nimport Loading from 'src/components/Loading';\nimport TableSelector from 'src/components/TableSelector';\nimport EditableTitle from 'src/components/EditableTitle';\nimport CheckboxControl from 'src/explore/components/controls/CheckboxControl';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport TextAreaControl from 'src/explore/components/controls/TextAreaControl';\nimport SpatialControl from 'src/explore/components/controls/SpatialControl';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { Icons } from 'src/components/Icons';\nimport CurrencyControl from 'src/explore/components/controls/CurrencyControl';\nimport CollectionTable from './CollectionTable';\nimport Fieldset from './Fieldset';\nimport Field from './Field';\nimport { fetchSyncedColumns, updateColumns } from './utils';\n\nconst DatasourceContainer = styled.div`\n  .change-warning {\n    margin: 16px 10px 0;\n    color: ${({ theme }) => theme.colors.warning.base};\n  }\n\n  .change-warning .bold {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n\n  .form-group.has-feedback > .help-block {\n    margin-top: 8px;\n  }\n\n  .form-group.form-group-md {\n    margin-bottom: 8px;\n  }\n`;\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledTableTabs = styled(Tabs)`\n  overflow: visible;\n  .ant-tabs-content-holder {\n    overflow: visible;\n  }\n`;\n\nconst StyledBadge = styled(Badge)`\n  .antd5-badge-count {\n    line-height: ${({ theme }) => theme.gridUnit * 4}px;\n    height: ${({ theme }) => theme.gridUnit * 4}px;\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst EditLockContainer = styled.div`\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  display: flex;\n  align-items: center;\n  a {\n    padding: 0 10px;\n  }\n`;\n\nconst ColumnButtonWrapper = styled.div`\n  text-align: right;\n  ${({ theme }) => `margin-bottom: ${theme.gridUnit * 2}px`}\n`;\n\nconst StyledLabelWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  span {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledColumnsTabWrapper = styled.div`\n  .table > tbody > tr > td {\n    vertical-align: middle;\n  }\n\n  .ant-tag {\n    margin-top: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledButtonWrapper = styled.span`\n  ${({ theme }) => `\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-left: ${theme.gridUnit * 3}px;\n    button>span>:first-of-type {\n      margin-right: 0;\n    }\n  `}\n`;\n\nconst sqlTooltipOptions = {\n  placement: 'topRight',\n  title: t(\n    'If changes are made to your SQL query, ' +\n      'columns in your dataset will be synced when saving the dataset.',\n  ),\n};\n\nconst checkboxGenerator = (d, onChange) => (\n  <CheckboxControl value={d} onChange={onChange} />\n);\nconst DATA_TYPES = [\n  { value: 'STRING', label: t('STRING') },\n  { value: 'NUMERIC', label: t('NUMERIC') },\n  { value: 'DATETIME', label: t('DATETIME') },\n  { value: 'BOOLEAN', label: t('BOOLEAN') },\n];\n\nconst DATASOURCE_TYPES_ARR = [\n  { key: 'physical', label: t('Physical (table or view)') },\n  { key: 'virtual', label: t('Virtual (SQL)') },\n];\nconst DATASOURCE_TYPES = {};\nDATASOURCE_TYPES_ARR.forEach(o => {\n  DATASOURCE_TYPES[o.key] = o;\n});\n\nfunction CollectionTabTitle({ title, collection }) {\n  return (\n    <div\n      css={{ display: 'flex', alignItems: 'center' }}\n      data-test={`collection-tab-${title}`}\n    >\n      {title}{' '}\n      <StyledBadge count={collection ? collection.length : 0} showZero />\n    </div>\n  );\n}\n\nCollectionTabTitle.propTypes = {\n  title: PropTypes.string,\n  collection: PropTypes.array,\n};\n\nfunction ColumnCollectionTable({\n  columns,\n  datasource,\n  onColumnsChange,\n  onDatasourceChange,\n  editableColumnName,\n  showExpression,\n  allowAddItem,\n  allowEditDataType,\n  itemGenerator,\n  columnLabelTooltips,\n}) {\n  return (\n    <CollectionTable\n      tableColumns={\n        isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes)\n          ? [\n              'column_name',\n              'advanced_data_type',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n          : [\n              'column_name',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n      }\n      sortColumns={\n        isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes)\n          ? [\n              'column_name',\n              'advanced_data_type',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n          : [\n              'column_name',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n      }\n      allowDeletes\n      allowAddItem={allowAddItem}\n      itemGenerator={itemGenerator}\n      collection={columns}\n      columnLabelTooltips={columnLabelTooltips}\n      stickyHeader\n      expandFieldset={\n        <FormContainer>\n          <Fieldset compact>\n            {showExpression && (\n              <Field\n                fieldKey=\"expression\"\n                label={t('SQL expression')}\n                control={\n                  <TextAreaControl\n                    language=\"markdown\"\n                    offerEditInModal={false}\n                    resize=\"vertical\"\n                  />\n                }\n              />\n            )}\n            <Field\n              fieldKey=\"verbose_name\"\n              label={t('Label')}\n              control={\n                <TextControl\n                  controlId=\"verbose_name\"\n                  placeholder={t('Label')}\n                />\n              }\n            />\n            <Field\n              fieldKey=\"description\"\n              label={t('Description')}\n              control={\n                <TextControl\n                  controlId=\"description\"\n                  placeholder={t('Description')}\n                />\n              }\n            />\n            {allowEditDataType && (\n              <Field\n                fieldKey=\"type\"\n                label={t('Data type')}\n                control={\n                  <Select\n                    ariaLabel={t('Data type')}\n                    options={DATA_TYPES}\n                    name=\"type\"\n                    allowNewOptions\n                    allowClear\n                  />\n                }\n              />\n            )}\n            {isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes) ? (\n              <Field\n                fieldKey=\"advanced_data_type\"\n                label={t('Advanced data type')}\n                control={\n                  <TextControl\n                    controlId=\"advanced_data_type\"\n                    placeholder={t('Advanced Data type')}\n                  />\n                }\n              />\n            ) : (\n              <></>\n            )}\n            <Field\n              fieldKey=\"python_date_format\"\n              label={t('Datetime format')}\n              description={\n                /* Note the fragmented translations may not work. */\n                <div>\n                  {t('The pattern of timestamp format. For strings use ')}\n                  <a href=\"https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior\">\n                    {t('Python datetime string pattern')}\n                  </a>\n                  {t(' expression which needs to adhere to the ')}\n                  <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">\n                    {t('ISO 8601')}\n                  </a>\n                  {t(` standard to ensure that the lexicographical ordering\n                      coincides with the chronological ordering. If the\n                      timestamp format does not adhere to the ISO 8601 standard\n                      you will need to define an expression and type for\n                      transforming the string into a date or timestamp. Note\n                      currently time zones are not supported. If time is stored\n                      in epoch format, put \\`epoch_s\\` or \\`epoch_ms\\`. If no pattern\n                      is specified we fall back to using the optional defaults on a per\n                      database/column name level via the extra parameter.`)}\n                </div>\n              }\n              control={\n                <TextControl\n                  controlId=\"python_date_format\"\n                  placeholder=\"%Y-%m-%d\"\n                />\n              }\n            />\n            <Field\n              fieldKey=\"certified_by\"\n              label={t('Certified By')}\n              description={t('Person or group that has certified this metric')}\n              control={\n                <TextControl\n                  controlId=\"certified\"\n                  placeholder={t('Certified by')}\n                />\n              }\n            />\n            <Field\n              fieldKey=\"certification_details\"\n              label={t('Certification details')}\n              description={t('Details of the certification')}\n              control={\n                <TextControl\n                  controlId=\"certificationDetails\"\n                  placeholder={t('Certification details')}\n                />\n              }\n            />\n          </Fieldset>\n        </FormContainer>\n      }\n      columnLabels={\n        isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes)\n          ? {\n              column_name: t('Column'),\n              advanced_data_type: t('Advanced data type'),\n              type: t('Data type'),\n              groupby: t('Is dimension'),\n              is_dttm: t('Is temporal'),\n              main_dttm_col: t('Default datetime'),\n              filterable: t('Is filterable'),\n            }\n          : {\n              column_name: t('Column'),\n              type: t('Data type'),\n              groupby: t('Is dimension'),\n              is_dttm: t('Is temporal'),\n              main_dttm_col: t('Default datetime'),\n              filterable: t('Is filterable'),\n            }\n      }\n      onChange={onColumnsChange}\n      itemRenderers={\n        isFeatureEnabled(FeatureFlag.EnableAdvancedDataTypes)\n          ? {\n              column_name: (v, onItemChange, _, record) =>\n                editableColumnName ? (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    <EditableTitle\n                      canEdit\n                      title={v}\n                      onSaveTitle={onItemChange}\n                    />\n                  </StyledLabelWrapper>\n                ) : (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    {v}\n                  </StyledLabelWrapper>\n                ),\n              main_dttm_col: (value, _onItemChange, _label, record) => {\n                const checked = datasource.main_dttm_col === record.column_name;\n                const disabled = !columns.find(\n                  column => column.column_name === record.column_name,\n                ).is_dttm;\n                return (\n                  <Radio\n                    data-test={`radio-default-dttm-${record.column_name}`}\n                    checked={checked}\n                    disabled={disabled}\n                    onChange={() =>\n                      onDatasourceChange({\n                        ...datasource,\n                        main_dttm_col: record.column_name,\n                      })\n                    }\n                  />\n                );\n              },\n              type: d => (d ? <Label>{d}</Label> : null),\n              advanced_data_type: d => (\n                <Label onChange={onColumnsChange}>{d}</Label>\n              ),\n              is_dttm: checkboxGenerator,\n              filterable: checkboxGenerator,\n              groupby: checkboxGenerator,\n            }\n          : {\n              column_name: (v, onItemChange, _, record) =>\n                editableColumnName ? (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    <TextControl value={v} onChange={onItemChange} />\n                  </StyledLabelWrapper>\n                ) : (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    {v}\n                  </StyledLabelWrapper>\n                ),\n              main_dttm_col: (value, _onItemChange, _label, record) => {\n                const checked = datasource.main_dttm_col === record.column_name;\n                const disabled = !columns.find(\n                  column => column.column_name === record.column_name,\n                ).is_dttm;\n                return (\n                  <Radio\n                    data-test={`radio-default-dttm-${record.column_name}`}\n                    checked={checked}\n                    disabled={disabled}\n                    onChange={() =>\n                      onDatasourceChange({\n                        ...datasource,\n                        main_dttm_col: record.column_name,\n                      })\n                    }\n                  />\n                );\n              },\n              type: d => (d ? <Label>{d}</Label> : null),\n              is_dttm: checkboxGenerator,\n              filterable: checkboxGenerator,\n              groupby: checkboxGenerator,\n            }\n      }\n    />\n  );\n}\nColumnCollectionTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  datasource: PropTypes.object.isRequired,\n  onColumnsChange: PropTypes.func.isRequired,\n  onDatasourceChange: PropTypes.func.isRequired,\n  editableColumnName: PropTypes.bool,\n  showExpression: PropTypes.bool,\n  allowAddItem: PropTypes.bool,\n  allowEditDataType: PropTypes.bool,\n  itemGenerator: PropTypes.func,\n};\nColumnCollectionTable.defaultProps = {\n  editableColumnName: false,\n  showExpression: false,\n  allowAddItem: false,\n  allowEditDataType: false,\n  itemGenerator: () => ({\n    column_name: t('<new column>'),\n    filterable: true,\n    groupby: true,\n  }),\n};\n\nfunction StackedField({ label, formElement }) {\n  return (\n    <div>\n      <div>\n        <strong>{label}</strong>\n      </div>\n      <div>{formElement}</div>\n    </div>\n  );\n}\n\nStackedField.propTypes = {\n  label: PropTypes.string,\n  formElement: PropTypes.node,\n};\n\nfunction FormContainer({ children }) {\n  return <Card padded>{children}</Card>;\n}\n\nFormContainer.propTypes = {\n  children: PropTypes.node,\n};\n\nconst propTypes = {\n  datasource: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  setIsEditing: PropTypes.func,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  setIsEditing: () => {},\n};\n\nfunction OwnersSelector({ datasource, onChange }) {\n  const loadOptions = useCallback((search = '', page, pageSize) => {\n    const query = rison.encode({ filter: search, page, page_size: pageSize });\n    return SupersetClient.get({\n      endpoint: `/api/v1/dataset/related/owners?q=${query}`,\n    }).then(response => ({\n      data: response.json.result\n        .filter(item => item.extra.active)\n        .map(item => ({\n          value: item.value,\n          label: item.text,\n        })),\n      totalCount: response.json.count,\n    }));\n  }, []);\n\n  return (\n    <AsyncSelect\n      ariaLabel={t('Select owners')}\n      mode=\"multiple\"\n      name=\"owners\"\n      value={datasource.owners}\n      options={loadOptions}\n      onChange={onChange}\n      header={<FormLabel>{t('Owners')}</FormLabel>}\n      allowClear\n    />\n  );\n}\n\nclass DatasourceEditor extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      datasource: {\n        ...props.datasource,\n        owners: props.datasource.owners.map(owner => ({\n          value: owner.value || owner.id,\n          label: owner.label || `${owner.first_name} ${owner.last_name}`,\n        })),\n        metrics: props.datasource.metrics?.map(metric => {\n          const {\n            certified_by: certifiedByMetric,\n            certification_details: certificationDetails,\n          } = metric;\n          const {\n            certification: { details, certified_by: certifiedBy } = {},\n            warning_markdown: warningMarkdown,\n          } = JSON.parse(metric.extra || '{}') || {};\n          return {\n            ...metric,\n            certification_details: certificationDetails || details,\n            warning_markdown: warningMarkdown || '',\n            certified_by: certifiedBy || certifiedByMetric,\n          };\n        }),\n      },\n      errors: [],\n      isSqla:\n        props.datasource.datasource_type === 'table' ||\n        props.datasource.type === 'table',\n      isEditMode: false,\n      databaseColumns: props.datasource.columns.filter(col => !col.expression),\n      calculatedColumns: props.datasource.columns.filter(\n        col => !!col.expression,\n      ),\n      metadataLoading: false,\n      activeTabKey: 0,\n      datasourceType: props.datasource.sql\n        ? DATASOURCE_TYPES.virtual.key\n        : DATASOURCE_TYPES.physical.key,\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onChangeEditMode = this.onChangeEditMode.bind(this);\n    this.onDatasourcePropChange = this.onDatasourcePropChange.bind(this);\n    this.onDatasourceChange = this.onDatasourceChange.bind(this);\n    this.tableChangeAndSyncMetadata =\n      this.tableChangeAndSyncMetadata.bind(this);\n    this.syncMetadata = this.syncMetadata.bind(this);\n    this.setColumns = this.setColumns.bind(this);\n    this.validateAndChange = this.validateAndChange.bind(this);\n    this.handleTabSelect = this.handleTabSelect.bind(this);\n    this.currencies = ensureIsArray(props.currencies).map(currencyCode => ({\n      value: currencyCode,\n      label: `${getCurrencySymbol({\n        symbol: currencyCode,\n      })} (${currencyCode})`,\n    }));\n  }\n\n  onChange() {\n    // Emptying SQL if \"Physical\" radio button is selected\n    // Currently the logic to know whether the source is\n    // physical or virtual is based on whether SQL is empty or not.\n    const { datasourceType, datasource } = this.state;\n    const sql =\n      datasourceType === DATASOURCE_TYPES.physical.key ? '' : datasource.sql;\n    const newDatasource = {\n      ...this.state.datasource,\n      sql,\n      columns: [...this.state.databaseColumns, ...this.state.calculatedColumns],\n    };\n    this.props.onChange(newDatasource, this.state.errors);\n  }\n\n  onChangeEditMode() {\n    this.props.setIsEditing(!this.state.isEditMode);\n    this.setState(prevState => ({ isEditMode: !prevState.isEditMode }));\n  }\n\n  onDatasourceChange(datasource, callback = this.validateAndChange) {\n    this.setState({ datasource }, callback);\n  }\n\n  onDatasourcePropChange(attr, value) {\n    if (value === undefined) return; // if value is undefined do not update state\n    const datasource = { ...this.state.datasource, [attr]: value };\n    this.setState(\n      prevState => ({\n        datasource: { ...prevState.datasource, [attr]: value },\n      }),\n      attr === 'table_name'\n        ? this.onDatasourceChange(datasource, this.tableChangeAndSyncMetadata)\n        : this.onDatasourceChange(datasource, this.validateAndChange),\n    );\n  }\n\n  onDatasourceTypeChange(datasourceType) {\n    this.setState({ datasourceType });\n  }\n\n  setColumns(obj) {\n    // update calculatedColumns or databaseColumns\n    this.setState(obj, this.validateAndChange);\n  }\n\n  validateAndChange() {\n    this.validate(this.onChange);\n  }\n\n  tableChangeAndSyncMetadata() {\n    this.validate(() => {\n      this.syncMetadata();\n      this.onChange();\n    });\n  }\n\n  async syncMetadata() {\n    const { datasource } = this.state;\n    this.setState({ metadataLoading: true });\n    try {\n      const newCols = await fetchSyncedColumns(datasource);\n      const columnChanges = updateColumns(\n        datasource.columns,\n        newCols,\n        this.props.addSuccessToast,\n      );\n      this.setColumns({\n        databaseColumns: columnChanges.finalColumns.filter(\n          col => !col.expression, // remove calculated columns\n        ),\n      });\n      this.props.addSuccessToast(t('Metadata has been synced'));\n      this.setState({ metadataLoading: false });\n    } catch (error) {\n      const { error: clientError, statusText } =\n        await getClientErrorObject(error);\n      this.props.addDangerToast(\n        clientError || statusText || t('An error has occurred'),\n      );\n      this.setState({ metadataLoading: false });\n    }\n  }\n\n  findDuplicates(arr, accessor) {\n    const seen = {};\n    const dups = [];\n    arr.forEach(obj => {\n      const item = accessor(obj);\n      if (item in seen) {\n        dups.push(item);\n      } else {\n        seen[item] = null;\n      }\n    });\n    return dups;\n  }\n\n  validate(callback) {\n    let errors = [];\n    let dups;\n    const { datasource } = this.state;\n\n    // Looking for duplicate column_name\n    dups = this.findDuplicates(datasource.columns, obj => obj.column_name);\n    errors = errors.concat(\n      dups.map(name => t('Column name [%s] is duplicated', name)),\n    );\n\n    // Looking for duplicate metric_name\n    dups = this.findDuplicates(datasource.metrics, obj => obj.metric_name);\n    errors = errors.concat(\n      dups.map(name => t('Metric name [%s] is duplicated', name)),\n    );\n\n    // Making sure calculatedColumns have an expression defined\n    const noFilterCalcCols = this.state.calculatedColumns.filter(\n      col => !col.expression && !col.json,\n    );\n    errors = errors.concat(\n      noFilterCalcCols.map(col =>\n        t('Calculated column [%s] requires an expression', col.column_name),\n      ),\n    );\n\n    // validate currency code\n    try {\n      this.state.datasource.metrics?.forEach(\n        metric =>\n          metric.currency?.symbol &&\n          new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: metric.currency.symbol,\n          }),\n      );\n    } catch {\n      errors = errors.concat([t('Invalid currency code in saved metrics')]);\n    }\n\n    this.setState({ errors }, callback);\n  }\n\n  handleTabSelect(activeTabKey) {\n    this.setState({ activeTabKey });\n  }\n\n  sortMetrics(metrics) {\n    return metrics.sort(({ id: a }, { id: b }) => b - a);\n  }\n\n  renderSettingsFieldset() {\n    const { datasource } = this.state;\n    return (\n      <Fieldset\n        title={t('Basic')}\n        item={datasource}\n        onChange={this.onDatasourceChange}\n      >\n        <Field\n          fieldKey=\"description\"\n          label={t('Description')}\n          control={\n            <TextAreaControl\n              language=\"markdown\"\n              offerEditInModal={false}\n              resize=\"vertical\"\n            />\n          }\n        />\n        <Field\n          fieldKey=\"default_endpoint\"\n          label={t('Default URL')}\n          description={t(\n            `Default URL to redirect to when accessing from the dataset list page.\n            Accepts relative URLs such as <span style=white-space: nowrap;>/superset/dashboard/{id}/</span>`,\n          )}\n          control={<TextControl controlId=\"default_endpoint\" />}\n        />\n        <Field\n          inline\n          fieldKey=\"filter_select_enabled\"\n          label={t('Autocomplete filters')}\n          description={t('Whether to populate autocomplete filters options')}\n          control={<CheckboxControl />}\n        />\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"fetch_values_predicate\"\n            label={t('Autocomplete query predicate')}\n            description={t(\n              'When using \"Autocomplete filters\", this can be used to improve performance ' +\n                'of the query fetching the values. Use this option to apply a ' +\n                'predicate (WHERE clause) to the query selecting the distinct ' +\n                'values from the table. Typically the intent would be to limit the scan ' +\n                'by applying a relative time filter on a partitioned or indexed time-related field.',\n            )}\n            control={\n              <TextAreaControl\n                language=\"sql\"\n                controlId=\"fetch_values_predicate\"\n                minLines={5}\n                resize=\"vertical\"\n              />\n            }\n          />\n        )}\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"extra\"\n            label={t('Extra')}\n            description={t(\n              'Extra data to specify table metadata. Currently supports ' +\n                'metadata of the format: `{ \"certification\": { \"certified_by\": ' +\n                '\"Data Platform Team\", \"details\": \"This table is the source of truth.\" ' +\n                '}, \"warning_markdown\": \"This is a warning.\" }`.',\n            )}\n            control={\n              <TextAreaControl\n                controlId=\"extra\"\n                language=\"json\"\n                offerEditInModal={false}\n                resize=\"vertical\"\n              />\n            }\n          />\n        )}\n        <OwnersSelector\n          datasource={datasource}\n          onChange={newOwners => {\n            this.onDatasourceChange({ ...datasource, owners: newOwners });\n          }}\n        />\n      </Fieldset>\n    );\n  }\n\n  renderAdvancedFieldset() {\n    const { datasource } = this.state;\n    return (\n      <Fieldset\n        title={t('Advanced')}\n        item={datasource}\n        onChange={this.onDatasourceChange}\n      >\n        <Field\n          fieldKey=\"cache_timeout\"\n          label={t('Cache timeout')}\n          description={t(\n            'The duration of time in seconds before the cache is invalidated. Set to -1 to bypass the cache.',\n          )}\n          control={<TextControl controlId=\"cache_timeout\" />}\n        />\n        <Field\n          fieldKey=\"offset\"\n          label={t('Hours offset')}\n          control={<TextControl controlId=\"offset\" />}\n          description={t(\n            'The number of hours, negative or positive, to shift the time column. This can be used to move UTC time to local time.',\n          )}\n        />\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"template_params\"\n            label={t('Template parameters')}\n            description={t(\n              'A set of parameters that become available in the query using Jinja templating syntax',\n            )}\n            control={<TextControl controlId=\"template_params\" />}\n          />\n        )}\n        <Field\n          inline\n          fieldKey=\"normalize_columns\"\n          label={t('Normalize column names')}\n          description={t(\n            'Allow column names to be changed to case insensitive format, if supported (e.g. Oracle, Snowflake).',\n          )}\n          control={<CheckboxControl controlId=\"normalize_columns\" />}\n        />\n        <Field\n          inline\n          fieldKey=\"always_filter_main_dttm\"\n          label={t('Always filter main datetime column')}\n          description={t(\n            `When the secondary temporal columns are filtered, apply the same filter to the main datetime column.`,\n          )}\n          control={<CheckboxControl controlId=\"always_filter_main_dttm\" />}\n        />\n      </Fieldset>\n    );\n  }\n\n  renderSpatialTab() {\n    const { datasource } = this.state;\n    const { spatials, all_cols: allCols } = datasource;\n    return (\n      <Tabs.TabPane\n        tab={<CollectionTabTitle collection={spatials} title={t('Spatial')} />}\n        key={4}\n      >\n        <CollectionTable\n          tableColumns={['name', 'config']}\n          onChange={this.onDatasourcePropChange.bind(this, 'spatials')}\n          itemGenerator={() => ({\n            name: t('<new spatial>'),\n            type: t('<no type>'),\n            config: null,\n          })}\n          collection={spatials}\n          allowDeletes\n          itemRenderers={{\n            name: (d, onChange) => (\n              <EditableTitle canEdit title={d} onSaveTitle={onChange} />\n            ),\n            config: (v, onChange) => (\n              <SpatialControl value={v} onChange={onChange} choices={allCols} />\n            ),\n          }}\n        />\n      </Tabs.TabPane>\n    );\n  }\n\n  renderSourceFieldset() {\n    const { datasource } = this.state;\n    return (\n      <div>\n        <EditLockContainer>\n          <span role=\"button\" tabIndex={0} onClick={this.onChangeEditMode}>\n            {this.state.isEditMode ? (\n              <Icons.UnlockOutlined\n                iconSize=\"xl\"\n                css={theme => css`\n                  margin: auto ${theme.gridUnit}px auto 0;\n                `}\n              />\n            ) : (\n              <Icons.LockOutlined\n                iconSize=\"xl\"\n                css={theme => ({\n                  margin: `auto ${theme.gridUnit}px auto 0`,\n                })}\n              />\n            )}\n          </span>\n          {!this.state.isEditMode && (\n            <div>{t('Click the lock to make changes.')}</div>\n          )}\n          {this.state.isEditMode && (\n            <div>{t('Click the lock to prevent further changes.')}</div>\n          )}\n        </EditLockContainer>\n        <div className=\"m-l-10 m-t-20 m-b-10\">\n          {DATASOURCE_TYPES_ARR.map(type => (\n            <Radio\n              key={type.key}\n              value={type.key}\n              inline\n              onChange={this.onDatasourceTypeChange.bind(this, type.key)}\n              checked={this.state.datasourceType === type.key}\n              disabled={!this.state.isEditMode}\n            >\n              {type.label}\n            </Radio>\n          ))}\n        </div>\n        <hr />\n        <Fieldset item={datasource} onChange={this.onDatasourceChange} compact>\n          {this.state.datasourceType === DATASOURCE_TYPES.virtual.key && (\n            <div>\n              {this.state.isSqla && (\n                <>\n                  <Col xs={24} md={12}>\n                    <Field\n                      fieldKey=\"databaseSelector\"\n                      label={t('Virtual')}\n                      control={\n                        <div css={{ marginTop: 8 }}>\n                          <DatabaseSelector\n                            db={datasource?.database}\n                            catalog={datasource.catalog}\n                            schema={datasource.schema}\n                            onCatalogChange={catalog =>\n                              this.state.isEditMode &&\n                              this.onDatasourcePropChange('catalog', catalog)\n                            }\n                            onSchemaChange={schema =>\n                              this.state.isEditMode &&\n                              this.onDatasourcePropChange('schema', schema)\n                            }\n                            onDbChange={database =>\n                              this.state.isEditMode &&\n                              this.onDatasourcePropChange('database', database)\n                            }\n                            formMode={false}\n                            handleError={this.props.addDangerToast}\n                            readOnly={!this.state.isEditMode}\n                          />\n                        </div>\n                      }\n                    />\n                    <div css={{ width: 'calc(100% - 34px)', marginTop: -16 }}>\n                      <Field\n                        fieldKey=\"table_name\"\n                        label={t('Name')}\n                        control={\n                          <TextControl\n                            controlId=\"table_name\"\n                            onChange={table => {\n                              this.onDatasourcePropChange('table_name', table);\n                            }}\n                            placeholder={t('Dataset name')}\n                            disabled={!this.state.isEditMode}\n                          />\n                        }\n                      />\n                    </div>\n                  </Col>\n                  <Field\n                    fieldKey=\"sql\"\n                    label={t('SQL')}\n                    description={t(\n                      'When specifying SQL, the datasource acts as a view. ' +\n                        'Superset will use this statement as a subquery while grouping and filtering ' +\n                        'on the generated parent queries.',\n                    )}\n                    control={\n                      <TextAreaControl\n                        language=\"sql\"\n                        offerEditInModal={false}\n                        minLines={20}\n                        maxLines={Infinity}\n                        readOnly={!this.state.isEditMode}\n                        resize=\"both\"\n                        tooltipOptions={sqlTooltipOptions}\n                      />\n                    }\n                  />\n                </>\n              )}\n            </div>\n          )}\n          {this.state.datasourceType === DATASOURCE_TYPES.physical.key && (\n            <Col xs={24} md={12}>\n              {this.state.isSqla && (\n                <Field\n                  fieldKey=\"tableSelector\"\n                  label={t('Physical')}\n                  control={\n                    <div css={{ marginTop: 8 }}>\n                      <TableSelector\n                        clearable={false}\n                        database={{\n                          ...datasource.database,\n                          database_name:\n                            datasource.database?.database_name ||\n                            datasource.database?.name,\n                        }}\n                        dbId={datasource.database?.id}\n                        handleError={this.props.addDangerToast}\n                        catalog={datasource.catalog}\n                        schema={datasource.schema}\n                        sqlLabMode={false}\n                        tableValue={datasource.table_name}\n                        onCatalogChange={\n                          this.state.isEditMode\n                            ? catalog =>\n                                this.onDatasourcePropChange('catalog', catalog)\n                            : undefined\n                        }\n                        onSchemaChange={\n                          this.state.isEditMode\n                            ? schema =>\n                                this.onDatasourcePropChange('schema', schema)\n                            : undefined\n                        }\n                        onDbChange={\n                          this.state.isEditMode\n                            ? database =>\n                                this.onDatasourcePropChange(\n                                  'database',\n                                  database,\n                                )\n                            : undefined\n                        }\n                        onTableSelectChange={\n                          this.state.isEditMode\n                            ? table =>\n                                this.onDatasourcePropChange('table_name', table)\n                            : undefined\n                        }\n                        readOnly={!this.state.isEditMode}\n                      />\n                    </div>\n                  }\n                  description={t(\n                    'The pointer to a physical table (or view). Keep in mind that the chart is ' +\n                      'associated to this Superset logical table, and this logical table points ' +\n                      'the physical table referenced here.',\n                  )}\n                />\n              )}\n            </Col>\n          )}\n        </Fieldset>\n      </div>\n    );\n  }\n\n  renderErrors() {\n    if (this.state.errors.length > 0) {\n      return (\n        <Alert\n          css={theme => ({ marginBottom: theme.gridUnit * 4 })}\n          type=\"error\"\n          message={\n            <>\n              {this.state.errors.map(err => (\n                <div key={err}>{err}</div>\n              ))}\n            </>\n          }\n        />\n      );\n    }\n    return null;\n  }\n\n  renderMetricCollection() {\n    const { datasource } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics?.length ? this.sortMetrics(metrics) : [];\n    return (\n      <CollectionTable\n        tableColumns={['metric_name', 'verbose_name', 'expression']}\n        sortColumns={['metric_name', 'verbose_name', 'expression']}\n        columnLabels={{\n          metric_name: t('Metric Key'),\n          verbose_name: t('Label'),\n          expression: t('SQL expression'),\n        }}\n        columnLabelTooltips={{\n          metric_name: t(\n            'This field is used as a unique identifier to attach ' +\n              'the metric to charts. It is also used as the alias in the ' +\n              'SQL query.',\n          ),\n        }}\n        expandFieldset={\n          <FormContainer>\n            <Fieldset compact>\n              <Field\n                fieldKey=\"description\"\n                label={t('Description')}\n                control={\n                  <TextControl\n                    controlId=\"description\"\n                    placeholder={t('Description')}\n                  />\n                }\n              />\n              <Field\n                fieldKey=\"d3format\"\n                label={t('D3 format')}\n                control={\n                  <TextControl controlId=\"d3format\" placeholder=\"%y/%m/%d\" />\n                }\n              />\n              <Field\n                fieldKey=\"currency\"\n                label={t('Metric currency')}\n                control={\n                  <CurrencyControl\n                    currencySelectOverrideProps={{\n                      placeholder: t('Select or type currency symbol'),\n                    }}\n                    symbolSelectAdditionalStyles={css`\n                      max-width: 30%;\n                    `}\n                  />\n                }\n              />\n              <Field\n                label={t('Certified by')}\n                fieldKey=\"certified_by\"\n                description={t(\n                  'Person or group that has certified this metric',\n                )}\n                control={\n                  <TextControl\n                    controlId=\"certified_by\"\n                    placeholder={t('Certified by')}\n                  />\n                }\n              />\n              <Field\n                label={t('Certification details')}\n                fieldKey=\"certification_details\"\n                description={t('Details of the certification')}\n                control={\n                  <TextControl\n                    controlId=\"certification_details\"\n                    placeholder={t('Certification details')}\n                  />\n                }\n              />\n              <Field\n                label={t('Warning')}\n                fieldKey=\"warning_markdown\"\n                description={t('Optional warning about use of this metric')}\n                control={\n                  <TextAreaControl\n                    controlId=\"warning_markdown\"\n                    language=\"markdown\"\n                    offerEditInModal={false}\n                    resize=\"vertical\"\n                  />\n                }\n              />\n            </Fieldset>\n          </FormContainer>\n        }\n        collection={sortedMetrics}\n        allowAddItem\n        onChange={this.onDatasourcePropChange.bind(this, 'metrics')}\n        itemGenerator={() => ({\n          metric_name: t('<new metric>'),\n          verbose_name: '',\n          expression: '',\n        })}\n        itemCellProps={{\n          expression: () => ({\n            width: '240px',\n          }),\n        }}\n        itemRenderers={{\n          metric_name: (v, onChange, _, record) => (\n            <FlexRowContainer>\n              {record.is_certified && (\n                <CertifiedBadge\n                  certifiedBy={record.certified_by}\n                  details={record.certification_details}\n                />\n              )}\n              {record.warning_markdown && (\n                <WarningIconWithTooltip\n                  warningMarkdown={record.warning_markdown}\n                />\n              )}\n              <EditableTitle canEdit title={v} onSaveTitle={onChange} />\n            </FlexRowContainer>\n          ),\n          verbose_name: (v, onChange) => (\n            <TextControl canEdit value={v} onChange={onChange} />\n          ),\n          expression: (v, onChange) => (\n            <TextAreaControl\n              canEdit\n              initialValue={v}\n              onChange={onChange}\n              extraClasses={['datasource-sql-expression']}\n              language=\"sql\"\n              offerEditInModal={false}\n              minLines={5}\n              textAreaStyles={{ minWidth: '200px', maxWidth: '450px' }}\n              resize=\"both\"\n            />\n          ),\n          description: (v, onChange, label) => (\n            <StackedField\n              label={label}\n              formElement={<TextControl value={v} onChange={onChange} />}\n            />\n          ),\n          d3format: (v, onChange, label) => (\n            <StackedField\n              label={label}\n              formElement={<TextControl value={v} onChange={onChange} />}\n            />\n          ),\n        }}\n        allowDeletes\n        stickyHeader\n      />\n    );\n  }\n\n  render() {\n    const { datasource, activeTabKey } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics?.length ? this.sortMetrics(metrics) : [];\n    const { theme } = this.props;\n\n    return (\n      <DatasourceContainer data-test=\"datasource-editor\">\n        {this.renderErrors()}\n        <Alert\n          css={theme => ({ marginBottom: theme.gridUnit * 4 })}\n          type=\"warning\"\n          message={\n            <>\n              {' '}\n              <strong>{t('Be careful.')} </strong>\n              {t(\n                'Changing these settings will affect all charts using this dataset, including charts owned by other people.',\n              )}\n            </>\n          }\n        />\n        <StyledTableTabs\n          fullWidth={false}\n          id=\"table-tabs\"\n          data-test=\"edit-dataset-tabs\"\n          onChange={this.handleTabSelect}\n          defaultActiveKey={activeTabKey}\n        >\n          <Tabs.TabPane key={0} tab={t('Source')}>\n            {this.renderSourceFieldset(theme)}\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={sortedMetrics}\n                title={t('Metrics')}\n              />\n            }\n            key={1}\n          >\n            {this.renderMetricCollection()}\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={this.state.databaseColumns}\n                title={t('Columns')}\n              />\n            }\n            key={2}\n          >\n            <StyledColumnsTabWrapper>\n              <ColumnButtonWrapper>\n                <StyledButtonWrapper>\n                  <Button\n                    buttonSize=\"small\"\n                    buttonStyle=\"tertiary\"\n                    onClick={this.syncMetadata}\n                    className=\"sync-from-source\"\n                    disabled={this.state.isEditMode}\n                  >\n                    <Icons.DatabaseOutlined iconSize=\"m\" />\n                    {t('Sync columns from source')}\n                  </Button>\n                </StyledButtonWrapper>\n              </ColumnButtonWrapper>\n              <ColumnCollectionTable\n                className=\"columns-table\"\n                columns={this.state.databaseColumns}\n                datasource={datasource}\n                onColumnsChange={databaseColumns =>\n                  this.setColumns({ databaseColumns })\n                }\n                onDatasourceChange={this.onDatasourceChange}\n              />\n              {this.state.metadataLoading && <Loading />}\n            </StyledColumnsTabWrapper>\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={this.state.calculatedColumns}\n                title={t('Calculated columns')}\n              />\n            }\n            key={3}\n          >\n            <StyledColumnsTabWrapper>\n              <ColumnCollectionTable\n                columns={this.state.calculatedColumns}\n                onColumnsChange={calculatedColumns =>\n                  this.setColumns({ calculatedColumns })\n                }\n                columnLabelTooltips={{\n                  column_name: t(\n                    'This field is used as a unique identifier to attach ' +\n                      'the calculated dimension to charts. It is also used ' +\n                      'as the alias in the SQL query.',\n                  ),\n                }}\n                onDatasourceChange={this.onDatasourceChange}\n                datasource={datasource}\n                editableColumnName\n                showExpression\n                allowAddItem\n                allowEditDataType\n                itemGenerator={() => ({\n                  column_name: t('<new column>'),\n                  filterable: true,\n                  groupby: true,\n                  expression: t('<enter SQL expression here>'),\n                  __expanded: true,\n                })}\n              />\n            </StyledColumnsTabWrapper>\n          </Tabs.TabPane>\n          <Tabs.TabPane key={4} tab={t('Settings')}>\n            <Row gutter={16}>\n              <Col xs={24} md={12}>\n                <FormContainer>{this.renderSettingsFieldset()}</FormContainer>\n              </Col>\n              <Col xs={24} md={12}>\n                <FormContainer>{this.renderAdvancedFieldset()}</FormContainer>\n              </Col>\n            </Row>\n          </Tabs.TabPane>\n        </StyledTableTabs>\n      </DatasourceContainer>\n    );\n  }\n}\n\nDatasourceEditor.defaultProps = defaultProps;\nDatasourceEditor.propTypes = propTypes;\n\nconst DataSourceComponent = withTheme(DatasourceEditor);\n\nexport default withToasts(DataSourceComponent);\n"],"mappings":"4mBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,EAAEC,WAAW,QAAQ,OAAO;AAClD,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,KAAK,QAAQ,sBAAsB;AAC5C,OAAOC,IAAI,MAAM,qBAAqB;AACtC,OAAOC,KAAK,MAAM,sBAAsB;AACxC,OAAOC,KAAK,MAAM,sBAAsB;AACxC;EACEC,GAAG;EACHC,gBAAgB;EAChBC,iBAAiB;EACjBC,aAAa;EACbC,WAAW;EACXC,MAAM;EACNC,cAAc;EACdC,CAAC;EACDC,SAAS;EACTC,oBAAoB;AACf,mBAAmB;AAC1B,SAASC,MAAM,EAAEC,WAAW,EAAEC,GAAG,EAAEC,GAAG,QAAQ,gBAAgB;AAC9D,SAASC,SAAS,QAAQ,qBAAqB;AAC/C,OAAOC,MAAM,MAAM,uBAAuB;AAC1C,OAAOC,IAAI,MAAM,qBAAqB;AACtC,OAAOC,cAAc,MAAM,+BAA+B;AAC1D,OAAOC,sBAAsB,MAAM,uCAAuC;AAC1E,OAAOC,gBAAgB,MAAM,iCAAiC;AAC9D,OAAOC,KAAK,MAAM,sBAAsB;AACxC,OAAOC,OAAO,MAAM,wBAAwB;AAC5C,OAAOC,aAAa,MAAM,8BAA8B;AACxD,OAAOC,aAAa,MAAM,8BAA8B;AACxD,OAAOC,eAAe,MAAM,iDAAiD;AAC7E,OAAOC,WAAW,MAAM,6CAA6C;AACrE,OAAOC,eAAe,MAAM,iDAAiD;AAC7E,OAAOC,cAAc,MAAM,gDAAgD;AAC3E,OAAOC,UAAU,MAAM,yCAAyC;AAChE,SAASC,KAAK,QAAQ,sBAAsB;AAC5C,OAAOC,eAAe,MAAM,iDAAiD;AAC7E,OAAOC,eAAe,MAAM,mBAAmB;AAC/C,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,KAAK,MAAM,SAAS;AAC3B,SAASC,kBAAkB,EAAEC,aAAa,QAAQ,SAAS,CAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA,EAAAC,QAAA,IAAAC,SAAA;;AAE5D,MAAMC,mBAAmB,GAAGrC,MAAM,CAACsC,GAAG;AACtC;AACA;AACA,aAAa,CAAC,EAAEC,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACC,MAAM,CAACC,OAAO,CAACC,IAAI;AACrD;AACA;AACA;AACA,mBAAmB,CAAC,EAAEH,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACI,UAAU,CAACC,OAAO,CAACC,IAAI;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,MAAMC,gBAAgB,GAAG9C,MAAM,CAACsC,GAAG;AACnC;AACA;AACA;AACA;AACA,oBAAoB,CAAC,EAAEC,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACQ,QAAQ;AACjD;AACA,CAAC;;AAED,MAAMC,eAAe,GAAGhD,MAAM,CAACW,IAAI,CAAC;AACpC;AACA;AACA;AACA;AACA,CAAC;;AAED,MAAMsC,WAAW,GAAGjD,MAAM,CAACN,KAAK,CAAC;AACjC;AACA,mBAAmB,CAAC,EAAE6C,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACQ,QAAQ,GAAG,CAAC;AACpD,cAAc,CAAC,EAAER,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACQ,QAAQ,GAAG,CAAC;AAC/C,mBAAmB,CAAC,EAAER,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACQ,QAAQ;AAChD;AACA,CAAC;;AAED,MAAMG,iBAAiB,GAAGlD,MAAM,CAACsC,GAAG;AACpC,eAAe,CAAC,EAAEC,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACI,UAAU,CAACQ,KAAK,CAACC,CAAC;AACtD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,MAAMC,mBAAmB,GAAGrD,MAAM,CAACsC,GAAG;AACtC;AACA,IAAI,CAAC,EAAEC,KAAK,CAAC,CAAC,KAAK,kBAAkBA,KAAK,CAACQ,QAAQ,GAAG,CAAC,IAAI;AAC3D,CAAC;;AAED,MAAMO,kBAAkB,GAAGtD,MAAM,CAACsC,GAAG;AACrC;AACA;AACA;AACA,oBAAoB,CAAC,EAAEC,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACQ,QAAQ;AACjD;AACA,CAAC;;AAED,MAAMQ,uBAAuB,GAAGvD,MAAM,CAACsC,GAAG;AAC1C;AACA;AACA;AACA;AACA;AACA,kBAAkB,CAAC,EAAEC,KAAK,CAAC,CAAC,KAAKA,KAAK,CAACQ,QAAQ;AAC/C;AACA,CAAC;;AAED,MAAMS,mBAAmB,GAAGxD,MAAM,CAACyD,IAAI;AACvC,IAAI,CAAC,EAAElB,KAAK,CAAC,CAAC,KAAK;AACnB,kBAAkBA,KAAK,CAACQ,QAAQ,GAAG,CAAC;AACpC,mBAAmBR,KAAK,CAACQ,QAAQ,GAAG,CAAC;AACrC;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED,MAAMW,iBAAiB,GAAG;EACxBC,SAAS,EAAE,UAAU;EACrBC,KAAK,EAAE1D,CAAC;IACN,yCAAyC;IACvC;EACJ;AACF,CAAC;;AAED,MAAM2D,iBAAiB,GAAGA,CAACC,CAAC,EAAEC,QAAQ;AACpC/B,IAAA,CAACb,eAAe,IAAC6C,KAAK,EAAEF,CAAE,EAACC,QAAQ,EAAEA,QAAS,EAAE,CACjD;;AACD,MAAME,UAAU,GAAG;AACjB,EAAED,KAAK,EAAE,QAAQ,EAAEE,KAAK,EAAEhE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AACvC,EAAE8D,KAAK,EAAE,SAAS,EAAEE,KAAK,EAAEhE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;AACzC,EAAE8D,KAAK,EAAE,UAAU,EAAEE,KAAK,EAAEhE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;AAC3C,EAAE8D,KAAK,EAAE,SAAS,EAAEE,KAAK,EAAEhE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAC1C;;;AAED,MAAMiE,oBAAoB,GAAG;AAC3B,EAAEC,GAAG,EAAE,UAAU,EAAEF,KAAK,EAAEhE,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAAC;AACzD,EAAEkE,GAAG,EAAE,SAAS,EAAEF,KAAK,EAAEhE,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAC9C;;AACD,MAAMmE,gBAAgB,GAAG,CAAC,CAAC;AAC3BF,oBAAoB,CAACG,OAAO,CAAC,CAAAC,CAAC,KAAI;EAChCF,gBAAgB,CAACE,CAAC,CAACH,GAAG,CAAC,GAAGG,CAAC;AAC7B,CAAC,CAAC,CAAC,IAAAC,IAAA,GAAAC,OAAA,CAAAC,GAAA,CAAAC,QAAA,sBAAAC,IAAA,YAAAC,MAAA,0CAAAD,IAAA,+BAAAC,MAAA,8hkEAAAC,QAAA,EAAAC,gCAAA;;AAEH,SAASC,kBAAkBA,CAAC,EAAEpB,KAAK,EAAEqB,UAAU,CAAC,CAAC,EAAE;EACjD;IACE/C,KAAA;MACEvC,GAAG,EAAA6E,IAA4C;MAC/C,aAAW,kBAAkBZ,KAAK,EAAG,EAAAsB,QAAA;;MAEpCtB,KAAK,EAAE,GAAG;MACX5B,IAAA,CAACiB,WAAW,IAACkC,KAAK,EAAEF,UAAU,GAAGA,UAAU,CAACG,MAAM,GAAG,CAAE,EAACC,QAAQ,QAAE,CAAC;IAChE,CAAC;;AAEV;;AAEAL,kBAAkB,CAACM,SAAS,GAAG;EAC7B1B,KAAK,EAAEtE,SAAS,CAACiG,MAAM;EACvBN,UAAU,EAAE3F,SAAS,CAACkG;AACxB,CAAC;;AAED,SAASC,qBAAqBA,CAAC;EAC7BC,OAAO;EACPC,UAAU;EACVC,eAAe;EACfC,kBAAkB;EAClBC,kBAAkB;EAClBC,cAAc;EACdC,YAAY;EACZC,iBAAiB;EACjBC,aAAa;EACbC;AACF,CAAC,EAAE;EACD;IACEnE,IAAA,CAACN,eAAe;MACd0E,YAAY;MACVxG,gBAAgB,CAACG,WAAW,CAACsG,uBAAuB,CAAC;MACjD;MACE,aAAa;MACb,oBAAoB;MACpB,MAAM;MACN,SAAS;MACT,eAAe;MACf,YAAY;MACZ,SAAS,CACV;;MACD;MACE,aAAa;MACb,MAAM;MACN,SAAS;MACT,eAAe;MACf,YAAY;MACZ,SAAS,CAEhB;;;MACDC,WAAW;MACT1G,gBAAgB,CAACG,WAAW,CAACsG,uBAAuB,CAAC;MACjD;MACE,aAAa;MACb,oBAAoB;MACpB,MAAM;MACN,SAAS;MACT,eAAe;MACf,YAAY;MACZ,SAAS,CACV;;MACD;MACE,aAAa;MACb,MAAM;MACN,SAAS;MACT,eAAe;MACf,YAAY;MACZ,SAAS,CAEhB;;;MACDE,YAAY;MACZP,YAAY,EAAEA,YAAa;MAC3BE,aAAa,EAAEA,aAAc;MAC7BjB,UAAU,EAAES,OAAQ;MACpBS,mBAAmB,EAAEA,mBAAoB;MACzCK,YAAY;MACZC,cAAc;MACZzE,IAAA,CAAC0E,aAAa,IAAAxB,QAAA;QACZhD,KAAA,CAACP,QAAQ,IAACgF,OAAO,QAAAzB,QAAA;UACda,cAAc;UACb/D,IAAA,CAACJ,KAAK;YACJgF,QAAQ,EAAC,YAAY;YACrB1C,KAAK,EAAEhE,CAAC,CAAC,gBAAgB,CAAE;YAC3B2G,OAAO;YACL7E,IAAA,CAACX,eAAe;cACdyF,QAAQ,EAAC,UAAU;cACnBC,gBAAgB,EAAE,KAAM;cACxBC,MAAM,EAAC,UAAU;YAClB,CACF;;UACF,CACF;;UACDhF,IAAA,CAACJ,KAAK;YACJgF,QAAQ,EAAC,cAAc;YACvB1C,KAAK,EAAEhE,CAAC,CAAC,OAAO,CAAE;YAClB2G,OAAO;YACL7E,IAAA,CAACZ,WAAW;cACV6F,SAAS,EAAC,cAAc;cACxBC,WAAW,EAAEhH,CAAC,CAAC,OAAO,CAAE;YACzB,CACF;;UACF,CAAC;UACF8B,IAAA,CAACJ,KAAK;YACJgF,QAAQ,EAAC,aAAa;YACtB1C,KAAK,EAAEhE,CAAC,CAAC,aAAa,CAAE;YACxB2G,OAAO;YACL7E,IAAA,CAACZ,WAAW;cACV6F,SAAS,EAAC,aAAa;cACvBC,WAAW,EAAEhH,CAAC,CAAC,aAAa,CAAE;YAC/B,CACF;;UACF,CAAC;UACD+F,iBAAiB;UAChBjE,IAAA,CAACJ,KAAK;YACJgF,QAAQ,EAAC,MAAM;YACf1C,KAAK,EAAEhE,CAAC,CAAC,WAAW,CAAE;YACtB2G,OAAO;YACL7E,IAAA,CAAC3B,MAAM;cACL8G,SAAS,EAAEjH,CAAC,CAAC,WAAW,CAAE;cAC1BkH,OAAO,EAAEnD,UAAW;cACpBW,IAAI,EAAC,MAAM;cACXyC,eAAe;cACfC,UAAU;YACX,CACF;;UACF,CACF;;UACA1H,gBAAgB,CAACG,WAAW,CAACsG,uBAAuB,CAAC;UACpDrE,IAAA,CAACJ,KAAK;YACJgF,QAAQ,EAAC,oBAAoB;YAC7B1C,KAAK,EAAEhE,CAAC,CAAC,oBAAoB,CAAE;YAC/B2G,OAAO;YACL7E,IAAA,CAACZ,WAAW;cACV6F,SAAS,EAAC,oBAAoB;cAC9BC,WAAW,EAAEhH,CAAC,CAAC,oBAAoB,CAAE;YACtC,CACF;;UACF,CAAC;;UAEF8B,IAAA,CAAAI,SAAA,IAAI,CACL;;UACDJ,IAAA,CAACJ,KAAK;YACJgF,QAAQ,EAAC,oBAAoB;YAC7B1C,KAAK,EAAEhE,CAAC,CAAC,iBAAiB,CAAE;YAC5BqH,WAAW;YACT;YACArF,KAAA,UAAAgD,QAAA;cACGhF,CAAC,CAAC,mDAAmD,CAAC;cACvD8B,IAAA,QAAGwF,IAAI,EAAC,4EAA4E,EAAAtC,QAAA;gBACjFhF,CAAC,CAAC,gCAAgC,CAAC;cACnC,CAAC;cACHA,CAAC,CAAC,2CAA2C,CAAC;cAC/C8B,IAAA,QAAGwF,IAAI,EAAC,wCAAwC,EAAAtC,QAAA;gBAC7ChF,CAAC,CAAC,UAAU,CAAC;cACb,CAAC;cACHA,CAAC,CAAC;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,CAAC;YACtD,CACN;;YACD2G,OAAO;YACL7E,IAAA,CAACZ,WAAW;cACV6F,SAAS,EAAC,oBAAoB;cAC9BC,WAAW,EAAC,UAAU;YACvB,CACF;;UACF,CAAC;UACFlF,IAAA,CAACJ,KAAK;YACJgF,QAAQ,EAAC,cAAc;YACvB1C,KAAK,EAAEhE,CAAC,CAAC,cAAc,CAAE;YACzBqH,WAAW,EAAErH,CAAC,CAAC,gDAAgD,CAAE;YACjE2G,OAAO;YACL7E,IAAA,CAACZ,WAAW;cACV6F,SAAS,EAAC,WAAW;cACrBC,WAAW,EAAEhH,CAAC,CAAC,cAAc,CAAE;YAChC,CACF;;UACF,CAAC;UACF8B,IAAA,CAACJ,KAAK;YACJgF,QAAQ,EAAC,uBAAuB;YAChC1C,KAAK,EAAEhE,CAAC,CAAC,uBAAuB,CAAE;YAClCqH,WAAW,EAAErH,CAAC,CAAC,8BAA8B,CAAE;YAC/C2G,OAAO;YACL7E,IAAA,CAACZ,WAAW;cACV6F,SAAS,EAAC,sBAAsB;cAChCC,WAAW,EAAEhH,CAAC,CAAC,uBAAuB,CAAE;YACzC,CACF;;UACF,CAAC;QACM,CAAC;MACE,CAChB;;MACDuH,YAAY;MACV7H,gBAAgB,CAACG,WAAW,CAACsG,uBAAuB,CAAC;MACjD;QACEqB,WAAW,EAAExH,CAAC,CAAC,QAAQ,CAAC;QACxByH,kBAAkB,EAAEzH,CAAC,CAAC,oBAAoB,CAAC;QAC3C0H,IAAI,EAAE1H,CAAC,CAAC,WAAW,CAAC;QACpB2H,OAAO,EAAE3H,CAAC,CAAC,cAAc,CAAC;QAC1B4H,OAAO,EAAE5H,CAAC,CAAC,aAAa,CAAC;QACzB6H,aAAa,EAAE7H,CAAC,CAAC,kBAAkB,CAAC;QACpC8H,UAAU,EAAE9H,CAAC,CAAC,eAAe;MAC/B,CAAC;MACD;QACEwH,WAAW,EAAExH,CAAC,CAAC,QAAQ,CAAC;QACxB0H,IAAI,EAAE1H,CAAC,CAAC,WAAW,CAAC;QACpB2H,OAAO,EAAE3H,CAAC,CAAC,cAAc,CAAC;QAC1B4H,OAAO,EAAE5H,CAAC,CAAC,aAAa,CAAC;QACzB6H,aAAa,EAAE7H,CAAC,CAAC,kBAAkB,CAAC;QACpC8H,UAAU,EAAE9H,CAAC,CAAC,eAAe;MAC/B,CACL;;MACD6D,QAAQ,EAAE6B,eAAgB;MAC1BqC,aAAa;MACXrI,gBAAgB,CAACG,WAAW,CAACsG,uBAAuB,CAAC;MACjD;QACEqB,WAAW,EAAEA,CAACQ,CAAC,EAAEC,YAAY,EAAEC,CAAC,EAAEC,MAAM;QACtCvC,kBAAkB;QAChB5D,KAAA,CAACoB,kBAAkB,IAAA4B,QAAA;UAChBmD,MAAM,CAACC,YAAY;UAClBtG,IAAA,CAACpB,cAAc;YACb2H,WAAW,EAAEF,MAAM,CAACG,YAAa;YACjCC,OAAO,EAAEJ,MAAM,CAACK,qBAAsB;UACvC,CACF;;UACD1G,IAAA,CAACd,aAAa;YACZyH,OAAO;YACP/E,KAAK,EAAEsE,CAAE;YACTU,WAAW,EAAET,YAAa;UAC3B,CAAC;QACgB,CAAC;;QAErBjG,KAAA,CAACoB,kBAAkB,IAAA4B,QAAA;UAChBmD,MAAM,CAACC,YAAY;UAClBtG,IAAA,CAACpB,cAAc;YACb2H,WAAW,EAAEF,MAAM,CAACG,YAAa;YACjCC,OAAO,EAAEJ,MAAM,CAACK,qBAAsB;UACvC,CACF;;UACAR,CAAC;QACgB,CACrB;;QACHH,aAAa,EAAEA,CAAC/D,KAAK,EAAE6E,aAAa,EAAEC,MAAM,EAAET,MAAM,KAAK;UACvD,MAAMU,OAAO,GAAGpD,UAAU,CAACoC,aAAa,KAAKM,MAAM,CAACX,WAAW;UAC/D,MAAMsB,QAAQ,GAAG,CAACtD,OAAO,CAACuD,IAAI;YAC5B,CAAAC,MAAM,KAAIA,MAAM,CAACxB,WAAW,KAAKW,MAAM,CAACX;UAC1C,CAAC,CAACI,OAAO;UACT;YACE9F,IAAA,CAACzC,KAAK;cACJ,aAAW,sBAAsB8I,MAAM,CAACX,WAAW,EAAG;cACtDqB,OAAO,EAAEA,OAAQ;cACjBC,QAAQ,EAAEA,QAAS;cACnBjF,QAAQ,EAAEA,CAAA;cACR8B,kBAAkB,CAAC;gBACjB,GAAGF,UAAU;gBACboC,aAAa,EAAEM,MAAM,CAACX;cACxB,CAAC,CACF;;YACF,CAAC;;QAEN,CAAC;QACDE,IAAI,EAAEA,CAAA9D,CAAC,KAAKA,CAAC,GAAG9B,IAAA,CAACjB,KAAK,IAAAmE,QAAA,EAAEpB,CAAC,EAAQ,CAAC,GAAG,IAAK;QAC1C6D,kBAAkB,EAAEA,CAAA7D,CAAC;QACnB9B,IAAA,CAACjB,KAAK,IAACgD,QAAQ,EAAE6B,eAAgB,EAAAV,QAAA,EAAEpB,CAAC,EAAQ,CAC7C;;QACDgE,OAAO,EAAEjE,iBAAiB;QAC1BmE,UAAU,EAAEnE,iBAAiB;QAC7BgE,OAAO,EAAEhE;MACX,CAAC;MACD;QACE6D,WAAW,EAAEA,CAACQ,CAAC,EAAEC,YAAY,EAAEC,CAAC,EAAEC,MAAM;QACtCvC,kBAAkB;QAChB5D,KAAA,CAACoB,kBAAkB,IAAA4B,QAAA;UAChBmD,MAAM,CAACC,YAAY;UAClBtG,IAAA,CAACpB,cAAc;YACb2H,WAAW,EAAEF,MAAM,CAACG,YAAa;YACjCC,OAAO,EAAEJ,MAAM,CAACK,qBAAsB;UACvC,CACF;;UACD1G,IAAA,CAACZ,WAAW,IAAC4C,KAAK,EAAEkE,CAAE,EAACnE,QAAQ,EAAEoE,YAAa,EAAE,CAAC;QAC/B,CAAC;;QAErBjG,KAAA,CAACoB,kBAAkB,IAAA4B,QAAA;UAChBmD,MAAM,CAACC,YAAY;UAClBtG,IAAA,CAACpB,cAAc;YACb2H,WAAW,EAAEF,MAAM,CAACG,YAAa;YACjCC,OAAO,EAAEJ,MAAM,CAACK,qBAAsB;UACvC,CACF;;UACAR,CAAC;QACgB,CACrB;;QACHH,aAAa,EAAEA,CAAC/D,KAAK,EAAE6E,aAAa,EAAEC,MAAM,EAAET,MAAM,KAAK;UACvD,MAAMU,OAAO,GAAGpD,UAAU,CAACoC,aAAa,KAAKM,MAAM,CAACX,WAAW;UAC/D,MAAMsB,QAAQ,GAAG,CAACtD,OAAO,CAACuD,IAAI;YAC5B,CAAAC,MAAM,KAAIA,MAAM,CAACxB,WAAW,KAAKW,MAAM,CAACX;UAC1C,CAAC,CAACI,OAAO;UACT;YACE9F,IAAA,CAACzC,KAAK;cACJ,aAAW,sBAAsB8I,MAAM,CAACX,WAAW,EAAG;cACtDqB,OAAO,EAAEA,OAAQ;cACjBC,QAAQ,EAAEA,QAAS;cACnBjF,QAAQ,EAAEA,CAAA;cACR8B,kBAAkB,CAAC;gBACjB,GAAGF,UAAU;gBACboC,aAAa,EAAEM,MAAM,CAACX;cACxB,CAAC,CACF;;YACF,CAAC;;QAEN,CAAC;QACDE,IAAI,EAAEA,CAAA9D,CAAC,KAAKA,CAAC,GAAG9B,IAAA,CAACjB,KAAK,IAAAmE,QAAA,EAAEpB,CAAC,EAAQ,CAAC,GAAG,IAAK;QAC1CgE,OAAO,EAAEjE,iBAAiB;QAC1BmE,UAAU,EAAEnE,iBAAiB;QAC7BgE,OAAO,EAAEhE;MACX,CACL;;IACF,CAAC;;AAEN;AACA4B,qBAAqB,CAACH,SAAS,GAAG;EAChCI,OAAO,EAAEpG,SAAS,CAACkG,KAAK,CAAC2D,UAAU;EACnCxD,UAAU,EAAErG,SAAS,CAAC8J,MAAM,CAACD,UAAU;EACvCvD,eAAe,EAAEtG,SAAS,CAAC+J,IAAI,CAACF,UAAU;EAC1CtD,kBAAkB,EAAEvG,SAAS,CAAC+J,IAAI,CAACF,UAAU;EAC7CrD,kBAAkB,EAAExG,SAAS,CAACgK,IAAI;EAClCvD,cAAc,EAAEzG,SAAS,CAACgK,IAAI;EAC9BtD,YAAY,EAAE1G,SAAS,CAACgK,IAAI;EAC5BrD,iBAAiB,EAAE3G,SAAS,CAACgK,IAAI;EACjCpD,aAAa,EAAE5G,SAAS,CAAC+J;AAC3B,CAAC;AACD5D,qBAAqB,CAAC8D,YAAY,GAAG;EACnCzD,kBAAkB,EAAE,KAAK;EACzBC,cAAc,EAAE,KAAK;EACrBC,YAAY,EAAE,KAAK;EACnBC,iBAAiB,EAAE,KAAK;EACxBC,aAAa,EAAEA,CAAA,MAAO;IACpBwB,WAAW,EAAExH,CAAC,CAAC,cAAc,CAAC;IAC9B8H,UAAU,EAAE,IAAI;IAChBH,OAAO,EAAE;EACX,CAAC;AACH,CAAC;;AAED,SAAS2B,YAAYA,CAAC,EAAEtF,KAAK,EAAEuF,WAAW,CAAC,CAAC,EAAE;EAC5C;IACEvH,KAAA,UAAAgD,QAAA;MACElD,IAAA,UAAAkD,QAAA;QACElD,IAAA,aAAAkD,QAAA,EAAShB,KAAK,EAAS,CAAC;MACrB,CAAC;MACNlC,IAAA,UAAAkD,QAAA,EAAMuE,WAAW,EAAM,CAAC;IACrB,CAAC;;AAEV;;AAEAD,YAAY,CAAClE,SAAS,GAAG;EACvBpB,KAAK,EAAE5E,SAAS,CAACiG,MAAM;EACvBkE,WAAW,EAAEnK,SAAS,CAACoK;AACzB,CAAC;;AAED,SAAShD,aAAaA,CAAC,EAAExB,QAAQ,CAAC,CAAC,EAAE;EACnC,OAAOlD,IAAA,CAACxC,IAAI,IAACmK,MAAM,QAAAzE,QAAA,EAAEA,QAAQ,EAAO,CAAC;AACvC;;AAEAwB,aAAa,CAACpB,SAAS,GAAG;EACxBJ,QAAQ,EAAE5F,SAAS,CAACoK;AACtB,CAAC;;AAED,MAAMpE,SAAS,GAAG;EAChBK,UAAU,EAAErG,SAAS,CAAC8J,MAAM,CAACD,UAAU;EACvCpF,QAAQ,EAAEzE,SAAS,CAAC+J,IAAI;EACxBO,eAAe,EAAEtK,SAAS,CAAC+J,IAAI,CAACF,UAAU;EAC1CU,cAAc,EAAEvK,SAAS,CAAC+J,IAAI,CAACF,UAAU;EACzCW,YAAY,EAAExK,SAAS,CAAC+J;AAC1B,CAAC;;AAED,MAAME,YAAY,GAAG;EACnBxF,QAAQ,EAAEA,CAAA,KAAM,CAAC,CAAC;EAClB+F,YAAY,EAAEA,CAAA,KAAM,CAAC;AACvB,CAAC;;AAED,SAASC,cAAcA,CAAC,EAAEpE,UAAU,EAAE5B,QAAQ,CAAC,CAAC,EAAE;EAChD,MAAMiG,WAAW,GAAG3K,WAAW,CAAC,CAAC4K,MAAM,GAAG,EAAE,EAAEC,IAAI,EAAEC,QAAQ,KAAK;IAC/D,MAAMC,KAAK,GAAGjL,KAAK,CAACkL,MAAM,CAAC,EAAEC,MAAM,EAAEL,MAAM,EAAEC,IAAI,EAAEK,SAAS,EAAEJ,QAAQ,CAAC,CAAC,CAAC;IACzE,OAAOlK,cAAc,CAACuK,GAAG,CAAC;MACxBC,QAAQ,EAAE,oCAAoCL,KAAK;IACrD,CAAC,CAAC,CAACM,IAAI,CAAC,CAAAC,QAAQ,MAAK;MACnBC,IAAI,EAAED,QAAQ,CAACE,IAAI,CAACC,MAAM;MACvBR,MAAM,CAAC,CAAAS,IAAI,KAAIA,IAAI,CAACC,KAAK,CAACC,MAAM,CAAC;MACjCC,GAAG,CAAC,CAAAH,IAAI,MAAK;QACZ/G,KAAK,EAAE+G,IAAI,CAAC/G,KAAK;QACjBE,KAAK,EAAE6G,IAAI,CAACI;MACd,CAAC,CAAC,CAAC;MACLC,UAAU,EAAET,QAAQ,CAACE,IAAI,CAAC1F;IAC5B,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;;EAEN;IACEnD,IAAA,CAAC1B,WAAW;MACV6G,SAAS,EAAEjH,CAAC,CAAC,eAAe,CAAE;MAC9BmL,IAAI,EAAC,UAAU;MACfzG,IAAI,EAAC,QAAQ;MACbZ,KAAK,EAAE2B,UAAU,CAAC2F,MAAO;MACzBlE,OAAO,EAAE4C,WAAY;MACrBjG,QAAQ,EAAEA,QAAS;MACnBwH,MAAM,EAAEvJ,IAAA,CAACvB,SAAS,IAAAyE,QAAA,EAAEhF,CAAC,CAAC,QAAQ,CAAC,EAAY,CAAE;MAC7CoH,UAAU;IACX,CAAC;;AAEN,CAACkE,aAAA,CA5BQzB,cAAc,kCAAA0B,KAAA,GAAAhH,OAAA,CAAAC,GAAA,CAAAC,QAAA,sBAAAC,IAAA,YAAAC,MAAA,yBAAAD,IAAA,8BAAAC,MAAA,+gkEAAAC,QAAA,EAAAC,gCAAA,OAAA2G,KAAA,GAAAjH,OAAA,CAAAC,GAAA,CAAAC,QAAA,sBAAAC,IAAA,YAAAC,MAAA,yBAAAD,IAAA,8BAAAC,MAAA,+gkEAAAC,QAAA,EAAAC,gCAAA;;AA8BvB,MAAM4G,gBAAgB,SAASvM,aAAa,CAAC;EAC3CwM,WAAWA,CAACC,KAAK,EAAE,KAAAC,qBAAA;IACjB,KAAK,CAACD,KAAK,CAAC;IACZ,IAAI,CAACE,KAAK,GAAG;MACXpG,UAAU,EAAE;QACV,GAAGkG,KAAK,CAAClG,UAAU;QACnB2F,MAAM,EAAEO,KAAK,CAAClG,UAAU,CAAC2F,MAAM,CAACJ,GAAG,CAAC,CAAAc,KAAK,MAAK;UAC5ChI,KAAK,EAAEgI,KAAK,CAAChI,KAAK,IAAIgI,KAAK,CAACC,EAAE;UAC9B/H,KAAK,EAAE8H,KAAK,CAAC9H,KAAK,IAAI,GAAG8H,KAAK,CAACE,UAAU,IAAIF,KAAK,CAACG,SAAS;QAC9D,CAAC,CAAC,CAAC;QACHC,OAAO,GAAAN,qBAAA,GAAED,KAAK,CAAClG,UAAU,CAACyG,OAAO,qBAAxBN,qBAAA,CAA0BZ,GAAG,CAAC,CAAAmB,MAAM,KAAI;UAC/C,MAAM;YACJ7D,YAAY,EAAE8D,iBAAiB;YAC/B5D,qBAAqB,EAAE6D;UACzB,CAAC,GAAGF,MAAM;UACV,MAAM;YACJG,aAAa,EAAE,EAAE/D,OAAO,EAAED,YAAY,EAAED,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC;YAC1DkE,gBAAgB,EAAEC;UACpB,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACP,MAAM,CAACrB,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;UAC1C,OAAO;YACL,GAAGqB,MAAM;YACT3D,qBAAqB,EAAE6D,oBAAoB,IAAI9D,OAAO;YACtDgE,gBAAgB,EAAEC,eAAe,IAAI,EAAE;YACvClE,YAAY,EAAED,WAAW,IAAI+D;UAC/B,CAAC;QACH,CAAC;MACH,CAAC;MACDO,MAAM,EAAE,EAAE;MACVC,MAAM;MACJjB,KAAK,CAAClG,UAAU,CAACoH,eAAe,KAAK,OAAO;MAC5ClB,KAAK,CAAClG,UAAU,CAACiC,IAAI,KAAK,OAAO;MACnCoF,UAAU,EAAE,KAAK;MACjBC,eAAe,EAAEpB,KAAK,CAAClG,UAAU,CAACD,OAAO,CAAC4E,MAAM,CAAC,CAAA4C,GAAG,KAAI,CAACA,GAAG,CAACC,UAAU,CAAC;MACxEC,iBAAiB,EAAEvB,KAAK,CAAClG,UAAU,CAACD,OAAO,CAAC4E,MAAM;QAChD,CAAA4C,GAAG,KAAI,CAAC,CAACA,GAAG,CAACC;MACf,CAAC;MACDE,eAAe,EAAE,KAAK;MACtBC,YAAY,EAAE,CAAC;MACfC,cAAc,EAAE1B,KAAK,CAAClG,UAAU,CAAC6H,GAAG;MAChCnJ,gBAAgB,CAACoJ,OAAO,CAACrJ,GAAG;MAC5BC,gBAAgB,CAACqJ,QAAQ,CAACtJ;IAChC,CAAC;;IAED,IAAI,CAACL,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAAC4J,IAAI,CAAC,IAAI,CAAC;IACxC,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACD,IAAI,CAAC,IAAI,CAAC;IACxD,IAAI,CAACE,sBAAsB,GAAG,IAAI,CAACA,sBAAsB,CAACF,IAAI,CAAC,IAAI,CAAC;IACpE,IAAI,CAAC9H,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAAC8H,IAAI,CAAC,IAAI,CAAC;IAC5D,IAAI,CAACG,0BAA0B;IAC7B,IAAI,CAACA,0BAA0B,CAACH,IAAI,CAAC,IAAI,CAAC;IAC5C,IAAI,CAACI,YAAY,GAAG,IAAI,CAACA,YAAY,CAACJ,IAAI,CAAC,IAAI,CAAC;IAChD,IAAI,CAACK,UAAU,GAAG,IAAI,CAACA,UAAU,CAACL,IAAI,CAAC,IAAI,CAAC;IAC5C,IAAI,CAACM,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,CAACN,IAAI,CAAC,IAAI,CAAC;IAC1D,IAAI,CAACO,eAAe,GAAG,IAAI,CAACA,eAAe,CAACP,IAAI,CAAC,IAAI,CAAC;IACtD,IAAI,CAACQ,UAAU,GAAGrO,aAAa,CAAC+L,KAAK,CAACsC,UAAU,CAAC,CAACjD,GAAG,CAAC,CAAAkD,YAAY,MAAK;MACrEpK,KAAK,EAAEoK,YAAY;MACnBlK,KAAK,EAAE,GAAGrE,iBAAiB,CAAC;QAC1BwO,MAAM,EAAED;MACV,CAAC,CAAC,KAAKA,YAAY;IACrB,CAAC,CAAC,CAAC;EACL;;EAEArK,QAAQA,CAAA,EAAG;IACT;IACA;IACA;IACA,MAAM,EAAEwJ,cAAc,EAAE5H,UAAU,CAAC,CAAC,GAAG,IAAI,CAACoG,KAAK;IACjD,MAAMyB,GAAG;IACPD,cAAc,KAAKlJ,gBAAgB,CAACqJ,QAAQ,CAACtJ,GAAG,GAAG,EAAE,GAAGuB,UAAU,CAAC6H,GAAG;IACxE,MAAMc,aAAa,GAAG;MACpB,GAAG,IAAI,CAACvC,KAAK,CAACpG,UAAU;MACxB6H,GAAG;MACH9H,OAAO,EAAE,CAAC,GAAG,IAAI,CAACqG,KAAK,CAACkB,eAAe,EAAE,GAAG,IAAI,CAAClB,KAAK,CAACqB,iBAAiB;IAC1E,CAAC;IACD,IAAI,CAACvB,KAAK,CAAC9H,QAAQ,CAACuK,aAAa,EAAE,IAAI,CAACvC,KAAK,CAACc,MAAM,CAAC;EACvD;;EAEAe,gBAAgBA,CAAA,EAAG;IACjB,IAAI,CAAC/B,KAAK,CAAC/B,YAAY,CAAC,CAAC,IAAI,CAACiC,KAAK,CAACiB,UAAU,CAAC;IAC/C,IAAI,CAACuB,QAAQ,CAAC,CAAAC,SAAS,MAAK,EAAExB,UAAU,EAAE,CAACwB,SAAS,CAACxB,UAAU,CAAC,CAAC,CAAC,CAAC;EACrE;;EAEAnH,kBAAkBA,CAACF,UAAU,EAAE8I,QAAQ,GAAG,IAAI,CAACR,iBAAiB,EAAE;IAChE,IAAI,CAACM,QAAQ,CAAC,EAAE5I,UAAU,CAAC,CAAC,EAAE8I,QAAQ,CAAC;EACzC;;EAEAZ,sBAAsBA,CAACa,IAAI,EAAE1K,KAAK,EAAE;IAClC,IAAIA,KAAK,KAAK2K,SAAS,EAAE,OAAO,CAAC;IACjC,MAAMhJ,UAAU,GAAG,EAAE,GAAG,IAAI,CAACoG,KAAK,CAACpG,UAAU,EAAE,CAAC+I,IAAI,GAAG1K,KAAK,CAAC,CAAC;IAC9D,IAAI,CAACuK,QAAQ;MACX,CAAAC,SAAS,MAAK;QACZ7I,UAAU,EAAE,EAAE,GAAG6I,SAAS,CAAC7I,UAAU,EAAE,CAAC+I,IAAI,GAAG1K,KAAK,CAAC;MACvD,CAAC,CAAC;MACF0K,IAAI,KAAK,YAAY;MACjB,IAAI,CAAC7I,kBAAkB,CAACF,UAAU,EAAE,IAAI,CAACmI,0BAA0B,CAAC;MACpE,IAAI,CAACjI,kBAAkB,CAACF,UAAU,EAAE,IAAI,CAACsI,iBAAiB;IAChE,CAAC;EACH;;EAEAW,sBAAsBA,CAACrB,cAAc,EAAE;IACrC,IAAI,CAACgB,QAAQ,CAAC,EAAEhB,cAAc,CAAC,CAAC,CAAC;EACnC;;EAEAS,UAAUA,CAACa,GAAG,EAAE;IACd;IACA,IAAI,CAACN,QAAQ,CAACM,GAAG,EAAE,IAAI,CAACZ,iBAAiB,CAAC;EAC5C;;EAEAA,iBAAiBA,CAAA,EAAG;IAClB,IAAI,CAACa,QAAQ,CAAC,IAAI,CAAC/K,QAAQ,CAAC;EAC9B;;EAEA+J,0BAA0BA,CAAA,EAAG;IAC3B,IAAI,CAACgB,QAAQ,CAAC,MAAM;MAClB,IAAI,CAACf,YAAY,CAAC,CAAC;MACnB,IAAI,CAAChK,QAAQ,CAAC,CAAC;IACjB,CAAC,CAAC;EACJ;;EAEA,MAAMgK,YAAYA,CAAA,EAAG;IACnB,MAAM,EAAEpI,UAAU,CAAC,CAAC,GAAG,IAAI,CAACoG,KAAK;IACjC,IAAI,CAACwC,QAAQ,CAAC,EAAElB,eAAe,EAAE,IAAI,CAAC,CAAC,CAAC;IACxC,IAAI;MACF,MAAM0B,OAAO,GAAG,MAAMlN,kBAAkB,CAAC8D,UAAU,CAAC;MACpD,MAAMqJ,aAAa,GAAGlN,aAAa;QACjC6D,UAAU,CAACD,OAAO;QAClBqJ,OAAO;QACP,IAAI,CAAClD,KAAK,CAACjC;MACb,CAAC;MACD,IAAI,CAACoE,UAAU,CAAC;QACdf,eAAe,EAAE+B,aAAa,CAACC,YAAY,CAAC3E,MAAM;UAChD,CAAA4C,GAAG,KAAI,CAACA,GAAG,CAACC,UAAU,CAAE;QAC1B;MACF,CAAC,CAAC;MACF,IAAI,CAACtB,KAAK,CAACjC,eAAe,CAAC1J,CAAC,CAAC,0BAA0B,CAAC,CAAC;MACzD,IAAI,CAACqO,QAAQ,CAAC,EAAElB,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;IAC3C,CAAC,CAAC,OAAO6B,KAAK,EAAE;MACd,MAAM,EAAEA,KAAK,EAAEC,WAAW,EAAEC,UAAU,CAAC,CAAC;MACtC,MAAMhP,oBAAoB,CAAC8O,KAAK,CAAC;MACnC,IAAI,CAACrD,KAAK,CAAChC,cAAc;QACvBsF,WAAW,IAAIC,UAAU,IAAIlP,CAAC,CAAC,uBAAuB;MACxD,CAAC;MACD,IAAI,CAACqO,QAAQ,CAAC,EAAElB,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;IAC3C;EACF;;EAEAgC,cAAcA,CAACC,GAAG,EAAEC,QAAQ,EAAE;IAC5B,MAAMC,IAAI,GAAG,CAAC,CAAC;IACf,MAAMC,IAAI,GAAG,EAAE;IACfH,GAAG,CAAChL,OAAO,CAAC,CAAAuK,GAAG,KAAI;MACjB,MAAM9D,IAAI,GAAGwE,QAAQ,CAACV,GAAG,CAAC;MAC1B,IAAI9D,IAAI,IAAIyE,IAAI,EAAE;QAChBC,IAAI,CAACC,IAAI,CAAC3E,IAAI,CAAC;MACjB,CAAC,MAAM;QACLyE,IAAI,CAACzE,IAAI,CAAC,GAAG,IAAI;MACnB;IACF,CAAC,CAAC;IACF,OAAO0E,IAAI;EACb;;EAEAX,QAAQA,CAACL,QAAQ,EAAE;IACjB,IAAI5B,MAAM,GAAG,EAAE;IACf,IAAI4C,IAAI;IACR,MAAM,EAAE9J,UAAU,CAAC,CAAC,GAAG,IAAI,CAACoG,KAAK;;IAEjC;IACA0D,IAAI,GAAG,IAAI,CAACJ,cAAc,CAAC1J,UAAU,CAACD,OAAO,EAAE,CAAAmJ,GAAG,KAAIA,GAAG,CAACnH,WAAW,CAAC;IACtEmF,MAAM,GAAGA,MAAM,CAAC8C,MAAM;MACpBF,IAAI,CAACvE,GAAG,CAAC,CAAAtG,IAAI,KAAI1E,CAAC,CAAC,gCAAgC,EAAE0E,IAAI,CAAC;IAC5D,CAAC;;IAED;IACA6K,IAAI,GAAG,IAAI,CAACJ,cAAc,CAAC1J,UAAU,CAACyG,OAAO,EAAE,CAAAyC,GAAG,KAAIA,GAAG,CAACe,WAAW,CAAC;IACtE/C,MAAM,GAAGA,MAAM,CAAC8C,MAAM;MACpBF,IAAI,CAACvE,GAAG,CAAC,CAAAtG,IAAI,KAAI1E,CAAC,CAAC,gCAAgC,EAAE0E,IAAI,CAAC;IAC5D,CAAC;;IAED;IACA,MAAMiL,gBAAgB,GAAG,IAAI,CAAC9D,KAAK,CAACqB,iBAAiB,CAAC9C,MAAM;MAC1D,CAAA4C,GAAG,KAAI,CAACA,GAAG,CAACC,UAAU,IAAI,CAACD,GAAG,CAACrC;IACjC,CAAC;IACDgC,MAAM,GAAGA,MAAM,CAAC8C,MAAM;MACpBE,gBAAgB,CAAC3E,GAAG,CAAC,CAAAgC,GAAG;MACtBhN,CAAC,CAAC,+CAA+C,EAAEgN,GAAG,CAACxF,WAAW;MACpE;IACF,CAAC;;IAED;IACA,IAAI,KAAAoI,qBAAA;MACF,CAAAA,qBAAA,OAAI,CAAC/D,KAAK,CAACpG,UAAU,CAACyG,OAAO,qBAA7B0D,qBAAA,CAA+BxL,OAAO;QACpC,CAAA+H,MAAM,UAAA0D,gBAAA;YACJ,EAAAA,gBAAA,GAAA1D,MAAM,CAAC2D,QAAQ,qBAAfD,gBAAA,CAAiB1B,MAAM;YACvB,IAAI4B,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;cAC7BC,KAAK,EAAE,UAAU;cACjBH,QAAQ,EAAE3D,MAAM,CAAC2D,QAAQ,CAAC3B;YAC5B,CAAC,CAAC;MACN,CAAC;IACH,CAAC,CAAC,MAAM;MACNxB,MAAM,GAAGA,MAAM,CAAC8C,MAAM,CAAC,CAACzP,CAAC,CAAC,wCAAwC,CAAC,CAAC,CAAC;IACvE;;IAEA,IAAI,CAACqO,QAAQ,CAAC,EAAE1B,MAAM,CAAC,CAAC,EAAE4B,QAAQ,CAAC;EACrC;;EAEAP,eAAeA,CAACZ,YAAY,EAAE;IAC5B,IAAI,CAACiB,QAAQ,CAAC,EAAEjB,YAAY,CAAC,CAAC,CAAC;EACjC;;EAEA8C,WAAWA,CAAChE,OAAO,EAAE;IACnB,OAAOA,OAAO,CAACiE,IAAI,CAAC,CAAC,EAAEpE,EAAE,EAAEqE,CAAC,CAAC,CAAC,EAAE,EAAErE,EAAE,EAAEsE,CAAC,CAAC,CAAC,KAAKA,CAAC,GAAGD,CAAC,CAAC;EACtD;;EAEAE,sBAAsBA,CAAA,EAAG;IACvB,MAAM,EAAE7K,UAAU,CAAC,CAAC,GAAG,IAAI,CAACoG,KAAK;IACjC;MACE7J,KAAA,CAACP,QAAQ;QACPiC,KAAK,EAAE1D,CAAC,CAAC,OAAO,CAAE;QAClB6K,IAAI,EAAEpF,UAAW;QACjB5B,QAAQ,EAAE,IAAI,CAAC8B,kBAAmB,EAAAX,QAAA;;QAElClD,IAAA,CAACJ,KAAK;UACJgF,QAAQ,EAAC,aAAa;UACtB1C,KAAK,EAAEhE,CAAC,CAAC,aAAa,CAAE;UACxB2G,OAAO;UACL7E,IAAA,CAACX,eAAe;YACdyF,QAAQ,EAAC,UAAU;YACnBC,gBAAgB,EAAE,KAAM;YACxBC,MAAM,EAAC,UAAU;UAClB,CACF;;QACF,CAAC;QACFhF,IAAA,CAACJ,KAAK;UACJgF,QAAQ,EAAC,kBAAkB;UAC3B1C,KAAK,EAAEhE,CAAC,CAAC,aAAa,CAAE;UACxBqH,WAAW,EAAErH,CAAC;YACZ;AACZ;UACU,CAAE;UACF2G,OAAO,EAAE7E,IAAA,CAACZ,WAAW,IAAC6F,SAAS,EAAC,kBAAkB,EAAE,CAAE;QACvD,CAAC;QACFjF,IAAA,CAACJ,KAAK;UACJ6O,MAAM;UACN7J,QAAQ,EAAC,uBAAuB;UAChC1C,KAAK,EAAEhE,CAAC,CAAC,sBAAsB,CAAE;UACjCqH,WAAW,EAAErH,CAAC,CAAC,kDAAkD,CAAE;UACnE2G,OAAO,EAAE7E,IAAA,CAACb,eAAe,IAAE,CAAE;QAC9B,CAAC;QACD,IAAI,CAAC4K,KAAK,CAACe,MAAM;QAChB9K,IAAA,CAACJ,KAAK;UACJgF,QAAQ,EAAC,wBAAwB;UACjC1C,KAAK,EAAEhE,CAAC,CAAC,8BAA8B,CAAE;UACzCqH,WAAW,EAAErH,CAAC;YACZ,6EAA6E;YAC3E,+DAA+D;YAC/D,+DAA+D;YAC/D,yEAAyE;YACzE;UACJ,CAAE;UACF2G,OAAO;UACL7E,IAAA,CAACX,eAAe;YACdyF,QAAQ,EAAC,KAAK;YACdG,SAAS,EAAC,wBAAwB;YAClCyJ,QAAQ,EAAE,CAAE;YACZ1J,MAAM,EAAC,UAAU;UAClB,CACF;;QACF,CACF;;QACA,IAAI,CAAC+E,KAAK,CAACe,MAAM;QAChB9K,IAAA,CAACJ,KAAK;UACJgF,QAAQ,EAAC,OAAO;UAChB1C,KAAK,EAAEhE,CAAC,CAAC,OAAO,CAAE;UAClBqH,WAAW,EAAErH,CAAC;YACZ,2DAA2D;YACzD,gEAAgE;YAChE,wEAAwE;YACxE;UACJ,CAAE;UACF2G,OAAO;UACL7E,IAAA,CAACX,eAAe;YACd4F,SAAS,EAAC,OAAO;YACjBH,QAAQ,EAAC,MAAM;YACfC,gBAAgB,EAAE,KAAM;YACxBC,MAAM,EAAC,UAAU;UAClB,CACF;;QACF,CACF;;QACDhF,IAAA,CAAC+H,cAAc;UACbpE,UAAU,EAAEA,UAAW;UACvB5B,QAAQ,EAAEA,CAAA4M,SAAS,KAAI;YACrB,IAAI,CAAC9K,kBAAkB,CAAC,EAAE,GAAGF,UAAU,EAAE2F,MAAM,EAAEqF,SAAS,CAAC,CAAC,CAAC;UAC/D,CAAE;QACH,CAAC;MACM,CAAC;;EAEf;;EAEAC,sBAAsBA,CAAA,EAAG;IACvB,MAAM,EAAEjL,UAAU,CAAC,CAAC,GAAG,IAAI,CAACoG,KAAK;IACjC;MACE7J,KAAA,CAACP,QAAQ;QACPiC,KAAK,EAAE1D,CAAC,CAAC,UAAU,CAAE;QACrB6K,IAAI,EAAEpF,UAAW;QACjB5B,QAAQ,EAAE,IAAI,CAAC8B,kBAAmB,EAAAX,QAAA;;QAElClD,IAAA,CAACJ,KAAK;UACJgF,QAAQ,EAAC,eAAe;UACxB1C,KAAK,EAAEhE,CAAC,CAAC,eAAe,CAAE;UAC1BqH,WAAW,EAAErH,CAAC;YACZ;UACF,CAAE;UACF2G,OAAO,EAAE7E,IAAA,CAACZ,WAAW,IAAC6F,SAAS,EAAC,eAAe,EAAE,CAAE;QACpD,CAAC;QACFjF,IAAA,CAACJ,KAAK;UACJgF,QAAQ,EAAC,QAAQ;UACjB1C,KAAK,EAAEhE,CAAC,CAAC,cAAc,CAAE;UACzB2G,OAAO,EAAE7E,IAAA,CAACZ,WAAW,IAAC6F,SAAS,EAAC,QAAQ,EAAE,CAAE;UAC5CM,WAAW,EAAErH,CAAC;YACZ;UACF,CAAE;QACH,CAAC;QACD,IAAI,CAAC6L,KAAK,CAACe,MAAM;QAChB9K,IAAA,CAACJ,KAAK;UACJgF,QAAQ,EAAC,iBAAiB;UAC1B1C,KAAK,EAAEhE,CAAC,CAAC,qBAAqB,CAAE;UAChCqH,WAAW,EAAErH,CAAC;YACZ;UACF,CAAE;UACF2G,OAAO,EAAE7E,IAAA,CAACZ,WAAW,IAAC6F,SAAS,EAAC,iBAAiB,EAAE,CAAE;QACtD,CACF;;QACDjF,IAAA,CAACJ,KAAK;UACJ6O,MAAM;UACN7J,QAAQ,EAAC,mBAAmB;UAC5B1C,KAAK,EAAEhE,CAAC,CAAC,wBAAwB,CAAE;UACnCqH,WAAW,EAAErH,CAAC;YACZ;UACF,CAAE;UACF2G,OAAO,EAAE7E,IAAA,CAACb,eAAe,IAAC8F,SAAS,EAAC,mBAAmB,EAAE,CAAE;QAC5D,CAAC;QACFjF,IAAA,CAACJ,KAAK;UACJ6O,MAAM;UACN7J,QAAQ,EAAC,yBAAyB;UAClC1C,KAAK,EAAEhE,CAAC,CAAC,oCAAoC,CAAE;UAC/CqH,WAAW,EAAErH,CAAC;YACZ;UACF,CAAE;UACF2G,OAAO,EAAE7E,IAAA,CAACb,eAAe,IAAC8F,SAAS,EAAC,yBAAyB,EAAE,CAAE;QAClE,CAAC;MACM,CAAC;;EAEf;;EAEA4J,gBAAgBA,CAAA,EAAG;IACjB,MAAM,EAAElL,UAAU,CAAC,CAAC,GAAG,IAAI,CAACoG,KAAK;IACjC,MAAM,EAAE+E,QAAQ,EAAEC,QAAQ,EAAEC,OAAO,CAAC,CAAC,GAAGrL,UAAU;IAClD;MACE3D,IAAA,CAACrB,IAAI,CAACsQ,OAAO;QACXC,GAAG,EAAElP,IAAA,CAACgD,kBAAkB,IAACC,UAAU,EAAE6L,QAAS,EAAClN,KAAK,EAAE1D,CAAC,CAAC,SAAS,CAAE,EAAE,CAAE,EAAAgF,QAAA;;;QAGvElD,IAAA,CAACN,eAAe;UACd0E,YAAY,EAAE,CAAC,MAAM,EAAE,QAAQ,CAAE;UACjCrC,QAAQ,EAAE,IAAI,CAAC8J,sBAAsB,CAACF,IAAI,CAAC,IAAI,EAAE,UAAU,CAAE;UAC7DzH,aAAa,EAAEA,CAAA,MAAO;YACpBtB,IAAI,EAAE1E,CAAC,CAAC,eAAe,CAAC;YACxB0H,IAAI,EAAE1H,CAAC,CAAC,WAAW,CAAC;YACpBiR,MAAM,EAAE;UACV,CAAC,CAAE;UACHlM,UAAU,EAAE6L,QAAS;UACrBvK,YAAY;UACZ0B,aAAa,EAAE;YACbrD,IAAI,EAAEA,CAACd,CAAC,EAAEC,QAAQ;YAChB/B,IAAA,CAACd,aAAa,IAACyH,OAAO,QAAC/E,KAAK,EAAEE,CAAE,EAAC8E,WAAW,EAAE7E,QAAS,EAAE,CAC1D;;YACDoN,MAAM,EAAEA,CAACjJ,CAAC,EAAEnE,QAAQ;YAClB/B,IAAA,CAACV,cAAc,IAAC0C,KAAK,EAAEkE,CAAE,EAACnE,QAAQ,EAAEA,QAAS,EAACqN,OAAO,EAAEJ,OAAQ,EAAE;;UAErE,CAAE;QACH,CAAC,IApBG;MAqBO,CAAC;;EAEnB;;EAEAK,oBAAoBA,CAAA,EAAG,KAAAC,oBAAA,EAAAC,qBAAA,EAAAC,qBAAA;IACrB,MAAM,EAAE7L,UAAU,CAAC,CAAC,GAAG,IAAI,CAACoG,KAAK;IACjC;MACE7J,KAAA,UAAAgD,QAAA;QACEhD,KAAA,CAACgB,iBAAiB,IAAAgC,QAAA;UAChBlD,IAAA,WAAMyP,IAAI,EAAC,QAAQ,EAACC,QAAQ,EAAE,CAAE,EAACC,OAAO,EAAE,IAAI,CAAC/D,gBAAiB,EAAA1I,QAAA;YAC7D,IAAI,CAAC6G,KAAK,CAACiB,UAAU;YACpBhL,IAAA,CAACR,KAAK,CAACoQ,cAAc;cACnBC,QAAQ,EAAC,IAAI;cACblS,GAAG,EAAEA,CAAA4C,KAAK,KAAI5C,GAAG;AACjC,iCAAiC4C,KAAK,CAACQ,QAAQ;AAC/C,iBAAkB;YACH,CAAC;;YAEFf,IAAA,CAACR,KAAK,CAACsQ,YAAY;cACjBD,QAAQ,EAAC,IAAI;cACblS,GAAG,EAAEA,CAAA4C,KAAK,MAAK;gBACbwP,MAAM,EAAE,QAAQxP,KAAK,CAACQ,QAAQ;cAChC,CAAC,CAAE;YACJ,CACF;;UACG,CAAC;UACN,CAAC,IAAI,CAACgJ,KAAK,CAACiB,UAAU;UACrBhL,IAAA,UAAAkD,QAAA,EAAMhF,CAAC,CAAC,iCAAiC,CAAC,EAAM,CACjD;;UACA,IAAI,CAAC6L,KAAK,CAACiB,UAAU;UACpBhL,IAAA,UAAAkD,QAAA,EAAMhF,CAAC,CAAC,4CAA4C,CAAC,EAAM,CAC5D;;QACgB,CAAC;QACpB8B,IAAA,UAAKgQ,SAAS,EAAC,sBAAsB,EAAA9M,QAAA;UAClCf,oBAAoB,CAAC+G,GAAG,CAAC,CAAAtD,IAAI;UAC5B5F,IAAA,CAACzC,KAAK;;YAEJyE,KAAK,EAAE4D,IAAI,CAACxD,GAAI;YAChBqM,MAAM;YACN1M,QAAQ,EAAE,IAAI,CAAC6K,sBAAsB,CAACjB,IAAI,CAAC,IAAI,EAAE/F,IAAI,CAACxD,GAAG,CAAE;YAC3D2E,OAAO,EAAE,IAAI,CAACgD,KAAK,CAACwB,cAAc,KAAK3F,IAAI,CAACxD,GAAI;YAChD4E,QAAQ,EAAE,CAAC,IAAI,CAAC+C,KAAK,CAACiB,UAAW,EAAA9H,QAAA;;YAEhC0C,IAAI,CAAC1D,KAAK,IAPN0D,IAAI,CAACxD;UAQL;UACR,CAAC;QACC,CAAC;QACNpC,IAAA,SAAK,CAAC;QACNE,KAAA,CAACP,QAAQ,IAACoJ,IAAI,EAAEpF,UAAW,EAAC5B,QAAQ,EAAE,IAAI,CAAC8B,kBAAmB,EAACc,OAAO,QAAAzB,QAAA;UACnE,IAAI,CAAC6G,KAAK,CAACwB,cAAc,KAAKlJ,gBAAgB,CAACoJ,OAAO,CAACrJ,GAAG;UACzDpC,IAAA,UAAAkD,QAAA;YACG,IAAI,CAAC6G,KAAK,CAACe,MAAM;YAChB5K,KAAA,CAAAE,SAAA,IAAA8C,QAAA;cACEhD,KAAA,CAAC1B,GAAG,IAACyR,EAAE,EAAE,EAAG,EAACC,EAAE,EAAE,EAAG,EAAAhN,QAAA;gBAClBlD,IAAA,CAACJ,KAAK;kBACJgF,QAAQ,EAAC,kBAAkB;kBAC3B1C,KAAK,EAAEhE,CAAC,CAAC,SAAS,CAAE;kBACpB2G,OAAO;kBACL7E,IAAA,UAAKrC,GAAG,EAAA8L,KAAmB,EAAAvG,QAAA;oBACzBlD,IAAA,CAAClB,gBAAgB;sBACfqR,EAAE,EAAExM,UAAU,oBAAVA,UAAU,CAAEyM,QAAS;sBACzBC,OAAO,EAAE1M,UAAU,CAAC0M,OAAQ;sBAC5BC,MAAM,EAAE3M,UAAU,CAAC2M,MAAO;sBAC1BC,eAAe,EAAEA,CAAAF,OAAO;sBACtB,IAAI,CAACtG,KAAK,CAACiB,UAAU;sBACrB,IAAI,CAACa,sBAAsB,CAAC,SAAS,EAAEwE,OAAO,CAC/C;;sBACDG,cAAc,EAAEA,CAAAF,MAAM;sBACpB,IAAI,CAACvG,KAAK,CAACiB,UAAU;sBACrB,IAAI,CAACa,sBAAsB,CAAC,QAAQ,EAAEyE,MAAM,CAC7C;;sBACDG,UAAU,EAAEA,CAAAL,QAAQ;sBAClB,IAAI,CAACrG,KAAK,CAACiB,UAAU;sBACrB,IAAI,CAACa,sBAAsB,CAAC,UAAU,EAAEuE,QAAQ,CACjD;;sBACDM,QAAQ,EAAE,KAAM;sBAChBC,WAAW,EAAE,IAAI,CAAC9G,KAAK,CAAChC,cAAe;sBACvC+I,QAAQ,EAAE,CAAC,IAAI,CAAC7G,KAAK,CAACiB,UAAW;oBAClC,CAAC;kBACC,CACN;;gBACF,CAAC;gBACFhL,IAAA,UAAKrC,GAAG,eAAAkT,IAAA,CAAE,EAAEC,KAAK,EAAE,mBAAmB,EAAEC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,EAAAtO,OAAA,CAAAC,GAAA,CAAAC,QAAA,qDAAAF,OAAA,CAAAC,GAAA,CAAAC,QAAA,+/jEAAC,EAAAO,QAAA;kBACvDlD,IAAA,CAACJ,KAAK;oBACJgF,QAAQ,EAAC,YAAY;oBACrB1C,KAAK,EAAEhE,CAAC,CAAC,MAAM,CAAE;oBACjB2G,OAAO;oBACL7E,IAAA,CAACZ,WAAW;sBACV6F,SAAS,EAAC,YAAY;sBACtBlD,QAAQ,EAAEA,CAAAiP,KAAK,KAAI;wBACjB,IAAI,CAACnF,sBAAsB,CAAC,YAAY,EAAEmF,KAAK,CAAC;sBAClD,CAAE;sBACF9L,WAAW,EAAEhH,CAAC,CAAC,cAAc,CAAE;sBAC/B8I,QAAQ,EAAE,CAAC,IAAI,CAAC+C,KAAK,CAACiB,UAAW;oBAClC,CACF;;kBACF,CAAC;gBACC,CAAC;cACH,CAAC;cACNhL,IAAA,CAACJ,KAAK;gBACJgF,QAAQ,EAAC,KAAK;gBACd1C,KAAK,EAAEhE,CAAC,CAAC,KAAK,CAAE;gBAChBqH,WAAW,EAAErH,CAAC;kBACZ,sDAAsD;kBACpD,8EAA8E;kBAC9E;gBACJ,CAAE;gBACF2G,OAAO;gBACL7E,IAAA,CAACX,eAAe;kBACdyF,QAAQ,EAAC,KAAK;kBACdC,gBAAgB,EAAE,KAAM;kBACxB2J,QAAQ,EAAE,EAAG;kBACbuC,QAAQ,EAAEC,QAAS;kBACnBN,QAAQ,EAAE,CAAC,IAAI,CAAC7G,KAAK,CAACiB,UAAW;kBACjChG,MAAM,EAAC,MAAM;kBACbmM,cAAc,EAAEzP,iBAAkB;gBACnC,CACF;;cACF,CAAC;YACF,CACH;;UACE,CACN;;UACA,IAAI,CAACqI,KAAK,CAACwB,cAAc,KAAKlJ,gBAAgB,CAACqJ,QAAQ,CAACtJ,GAAG;UAC1DpC,IAAA,CAACxB,GAAG,IAACyR,EAAE,EAAE,EAAG,EAACC,EAAE,EAAE,EAAG,EAAAhN,QAAA;YACjB,IAAI,CAAC6G,KAAK,CAACe,MAAM;YAChB9K,IAAA,CAACJ,KAAK;cACJgF,QAAQ,EAAC,eAAe;cACxB1C,KAAK,EAAEhE,CAAC,CAAC,UAAU,CAAE;cACrB2G,OAAO;cACL7E,IAAA,UAAKrC,GAAG,EAAA+L,KAAmB,EAAAxG,QAAA;gBACzBlD,IAAA,CAACf,aAAa;kBACZmS,SAAS,EAAE,KAAM;kBACjBhB,QAAQ,EAAE;oBACR,GAAGzM,UAAU,CAACyM,QAAQ;oBACtBiB,aAAa;oBACX,EAAA/B,oBAAA,GAAA3L,UAAU,CAACyM,QAAQ,qBAAnBd,oBAAA,CAAqB+B,aAAa,OAAA9B,qBAAA;oBAClC5L,UAAU,CAACyM,QAAQ,qBAAnBb,qBAAA,CAAqB3M,IAAI;kBAC7B,CAAE;kBACF0O,IAAI,GAAA9B,qBAAA,GAAE7L,UAAU,CAACyM,QAAQ,qBAAnBZ,qBAAA,CAAqBvF,EAAG;kBAC9B0G,WAAW,EAAE,IAAI,CAAC9G,KAAK,CAAChC,cAAe;kBACvCwI,OAAO,EAAE1M,UAAU,CAAC0M,OAAQ;kBAC5BC,MAAM,EAAE3M,UAAU,CAAC2M,MAAO;kBAC1BiB,UAAU,EAAE,KAAM;kBAClBC,UAAU,EAAE7N,UAAU,CAAC8N,UAAW;kBAClClB,eAAe;kBACb,IAAI,CAACxG,KAAK,CAACiB,UAAU;kBACjB,CAAAqF,OAAO;kBACL,IAAI,CAACxE,sBAAsB,CAAC,SAAS,EAAEwE,OAAO,CAAC;kBACjD1D,SACL;;kBACD6D,cAAc;kBACZ,IAAI,CAACzG,KAAK,CAACiB,UAAU;kBACjB,CAAAsF,MAAM;kBACJ,IAAI,CAACzE,sBAAsB,CAAC,QAAQ,EAAEyE,MAAM,CAAC;kBAC/C3D,SACL;;kBACD8D,UAAU;kBACR,IAAI,CAAC1G,KAAK,CAACiB,UAAU;kBACjB,CAAAoF,QAAQ;kBACN,IAAI,CAACvE,sBAAsB;oBACzB,UAAU;oBACVuE;kBACF,CAAC;kBACHzD,SACL;;kBACD+E,mBAAmB;kBACjB,IAAI,CAAC3H,KAAK,CAACiB,UAAU;kBACjB,CAAAgG,KAAK;kBACH,IAAI,CAACnF,sBAAsB,CAAC,YAAY,EAAEmF,KAAK,CAAC;kBAClDrE,SACL;;kBACDiE,QAAQ,EAAE,CAAC,IAAI,CAAC7G,KAAK,CAACiB,UAAW;gBAClC,CAAC;cACC,CACN;;cACDzF,WAAW,EAAErH,CAAC;gBACZ,4EAA4E;gBAC1E,2EAA2E;gBAC3E;cACJ,CAAE;YACH,CACF;;UACE,CACN;;QACO,CAAC;MACR,CAAC;;EAEV;;EAEAyT,YAAYA,CAAA,EAAG;IACb,IAAI,IAAI,CAAC5H,KAAK,CAACc,MAAM,CAACzH,MAAM,GAAG,CAAC,EAAE;MAChC;QACEpD,IAAA,CAACvC,KAAK;UACJE,GAAG,EAAEA,CAAA4C,KAAK,MAAK,EAAEqR,YAAY,EAAErR,KAAK,CAACQ,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAE;UACrD6E,IAAI,EAAC,OAAO;UACZiM,OAAO;UACL7R,IAAA,CAAAI,SAAA,IAAA8C,QAAA;YACG,IAAI,CAAC6G,KAAK,CAACc,MAAM,CAAC3B,GAAG,CAAC,CAAA4I,GAAG;YACxB9R,IAAA,UAAAkD,QAAA,EAAgB4O,GAAG,IAATA,GAAe;YAC1B,CAAC;UACF,CACH;;QACF,CAAC;;IAEN;IACA,OAAO,IAAI;EACb;;EAEAC,sBAAsBA,CAAA,EAAG;IACvB,MAAM,EAAEpO,UAAU,CAAC,CAAC,GAAG,IAAI,CAACoG,KAAK;IACjC,MAAM,EAAEK,OAAO,CAAC,CAAC,GAAGzG,UAAU;IAC9B,MAAMqO,aAAa,GAAG5H,OAAO,YAAPA,OAAO,CAAEhH,MAAM,GAAG,IAAI,CAACgL,WAAW,CAAChE,OAAO,CAAC,GAAG,EAAE;IACtE;MACEpK,IAAA,CAACN,eAAe;QACd0E,YAAY,EAAE,CAAC,aAAa,EAAE,cAAc,EAAE,YAAY,CAAE;QAC5DE,WAAW,EAAE,CAAC,aAAa,EAAE,cAAc,EAAE,YAAY,CAAE;QAC3DmB,YAAY,EAAE;UACZmI,WAAW,EAAE1P,CAAC,CAAC,YAAY,CAAC;UAC5B+T,YAAY,EAAE/T,CAAC,CAAC,OAAO,CAAC;UACxBiN,UAAU,EAAEjN,CAAC,CAAC,gBAAgB;QAChC,CAAE;QACFiG,mBAAmB,EAAE;UACnByJ,WAAW,EAAE1P,CAAC;YACZ,sDAAsD;YACpD,4DAA4D;YAC5D;UACJ;QACF,CAAE;QACFuG,cAAc;QACZzE,IAAA,CAAC0E,aAAa,IAAAxB,QAAA;UACZhD,KAAA,CAACP,QAAQ,IAACgF,OAAO,QAAAzB,QAAA;YACflD,IAAA,CAACJ,KAAK;cACJgF,QAAQ,EAAC,aAAa;cACtB1C,KAAK,EAAEhE,CAAC,CAAC,aAAa,CAAE;cACxB2G,OAAO;cACL7E,IAAA,CAACZ,WAAW;gBACV6F,SAAS,EAAC,aAAa;gBACvBC,WAAW,EAAEhH,CAAC,CAAC,aAAa,CAAE;cAC/B,CACF;;YACF,CAAC;YACF8B,IAAA,CAACJ,KAAK;cACJgF,QAAQ,EAAC,UAAU;cACnB1C,KAAK,EAAEhE,CAAC,CAAC,WAAW,CAAE;cACtB2G,OAAO;cACL7E,IAAA,CAACZ,WAAW,IAAC6F,SAAS,EAAC,UAAU,EAACC,WAAW,EAAC,UAAU,EAAE,CAC3D;;YACF,CAAC;YACFlF,IAAA,CAACJ,KAAK;cACJgF,QAAQ,EAAC,UAAU;cACnB1C,KAAK,EAAEhE,CAAC,CAAC,iBAAiB,CAAE;cAC5B2G,OAAO;cACL7E,IAAA,CAACP,eAAe;gBACdyS,2BAA2B,EAAE;kBAC3BhN,WAAW,EAAEhH,CAAC,CAAC,gCAAgC;gBACjD,CAAE;gBACFiU,4BAA4B,EAAExU,GAAG;AACrD;AACA,qBAAsB;cACH,CACF;;YACF,CAAC;YACFqC,IAAA,CAACJ,KAAK;cACJsC,KAAK,EAAEhE,CAAC,CAAC,cAAc,CAAE;cACzB0G,QAAQ,EAAC,cAAc;cACvBW,WAAW,EAAErH,CAAC;gBACZ;cACF,CAAE;cACF2G,OAAO;cACL7E,IAAA,CAACZ,WAAW;gBACV6F,SAAS,EAAC,cAAc;gBACxBC,WAAW,EAAEhH,CAAC,CAAC,cAAc,CAAE;cAChC,CACF;;YACF,CAAC;YACF8B,IAAA,CAACJ,KAAK;cACJsC,KAAK,EAAEhE,CAAC,CAAC,uBAAuB,CAAE;cAClC0G,QAAQ,EAAC,uBAAuB;cAChCW,WAAW,EAAErH,CAAC,CAAC,8BAA8B,CAAE;cAC/C2G,OAAO;cACL7E,IAAA,CAACZ,WAAW;gBACV6F,SAAS,EAAC,uBAAuB;gBACjCC,WAAW,EAAEhH,CAAC,CAAC,uBAAuB,CAAE;cACzC,CACF;;YACF,CAAC;YACF8B,IAAA,CAACJ,KAAK;cACJsC,KAAK,EAAEhE,CAAC,CAAC,SAAS,CAAE;cACpB0G,QAAQ,EAAC,kBAAkB;cAC3BW,WAAW,EAAErH,CAAC,CAAC,2CAA2C,CAAE;cAC5D2G,OAAO;cACL7E,IAAA,CAACX,eAAe;gBACd4F,SAAS,EAAC,kBAAkB;gBAC5BH,QAAQ,EAAC,UAAU;gBACnBC,gBAAgB,EAAE,KAAM;gBACxBC,MAAM,EAAC,UAAU;cAClB,CACF;;YACF,CAAC;UACM,CAAC;QACE,CAChB;;QACD/B,UAAU,EAAE+O,aAAc;QAC1BhO,YAAY;QACZjC,QAAQ,EAAE,IAAI,CAAC8J,sBAAsB,CAACF,IAAI,CAAC,IAAI,EAAE,SAAS,CAAE;QAC5DzH,aAAa,EAAEA,CAAA,MAAO;UACpB0J,WAAW,EAAE1P,CAAC,CAAC,cAAc,CAAC;UAC9B+T,YAAY,EAAE,EAAE;UAChB9G,UAAU,EAAE;QACd,CAAC,CAAE;QACHiH,aAAa,EAAE;UACbjH,UAAU,EAAEA,CAAA,MAAO;YACjB2F,KAAK,EAAE;UACT,CAAC;QACH,CAAE;QACF7K,aAAa,EAAE;UACb2H,WAAW,EAAEA,CAAC1H,CAAC,EAAEnE,QAAQ,EAAEqE,CAAC,EAAEC,MAAM;UAClCnG,KAAA,CAACY,gBAAgB,IAAAoC,QAAA;YACdmD,MAAM,CAACC,YAAY;YAClBtG,IAAA,CAACpB,cAAc;cACb2H,WAAW,EAAEF,MAAM,CAACG,YAAa;cACjCC,OAAO,EAAEJ,MAAM,CAACK,qBAAsB;YACvC,CACF;;YACAL,MAAM,CAACoE,gBAAgB;YACtBzK,IAAA,CAACnB,sBAAsB;cACrB6L,eAAe,EAAErE,MAAM,CAACoE,gBAAiB;YAC1C,CACF;;YACDzK,IAAA,CAACd,aAAa,IAACyH,OAAO,QAAC/E,KAAK,EAAEsE,CAAE,EAACU,WAAW,EAAE7E,QAAS,EAAE,CAAC;UAC1C,CACnB;;UACDkQ,YAAY,EAAEA,CAAC/L,CAAC,EAAEnE,QAAQ;UACxB/B,IAAA,CAACZ,WAAW,IAACuH,OAAO,QAAC3E,KAAK,EAAEkE,CAAE,EAACnE,QAAQ,EAAEA,QAAS,EAAE,CACrD;;UACDoJ,UAAU,EAAEA,CAACjF,CAAC,EAAEnE,QAAQ;UACtB/B,IAAA,CAACX,eAAe;YACdsH,OAAO;YACP0L,YAAY,EAAEnM,CAAE;YAChBnE,QAAQ,EAAEA,QAAS;YACnBuQ,YAAY,EAAE,CAAC,2BAA2B,CAAE;YAC5CxN,QAAQ,EAAC,KAAK;YACdC,gBAAgB,EAAE,KAAM;YACxB2J,QAAQ,EAAE,CAAE;YACZ6D,cAAc,EAAE,EAAEC,QAAQ,EAAE,OAAO,EAAEC,QAAQ,EAAE,OAAO,CAAC,CAAE;YACzDzN,MAAM,EAAC,MAAM;UACd,CACF;;UACDO,WAAW,EAAEA,CAACW,CAAC,EAAEnE,QAAQ,EAAEG,KAAK;UAC9BlC,IAAA,CAACwH,YAAY;YACXtF,KAAK,EAAEA,KAAM;YACbuF,WAAW,EAAEzH,IAAA,CAACZ,WAAW,IAAC4C,KAAK,EAAEkE,CAAE,EAACnE,QAAQ,EAAEA,QAAS,EAAE,CAAE;UAC5D,CACF;;UACD2Q,QAAQ,EAAEA,CAACxM,CAAC,EAAEnE,QAAQ,EAAEG,KAAK;UAC3BlC,IAAA,CAACwH,YAAY;YACXtF,KAAK,EAAEA,KAAM;YACbuF,WAAW,EAAEzH,IAAA,CAACZ,WAAW,IAAC4C,KAAK,EAAEkE,CAAE,EAACnE,QAAQ,EAAEA,QAAS,EAAE,CAAE;UAC5D;;QAEL,CAAE;QACFwC,YAAY;QACZC,YAAY;MACb,CAAC;;EAEN;;EAEAmO,MAAMA,CAAA,EAAG;IACP,MAAM,EAAEhP,UAAU,EAAE2H,YAAY,CAAC,CAAC,GAAG,IAAI,CAACvB,KAAK;IAC/C,MAAM,EAAEK,OAAO,CAAC,CAAC,GAAGzG,UAAU;IAC9B,MAAMqO,aAAa,GAAG5H,OAAO,YAAPA,OAAO,CAAEhH,MAAM,GAAG,IAAI,CAACgL,WAAW,CAAChE,OAAO,CAAC,GAAG,EAAE;IACtE,MAAM,EAAE7J,KAAK,CAAC,CAAC,GAAG,IAAI,CAACsJ,KAAK;;IAE5B;MACE3J,KAAA,CAACG,mBAAmB,IAAC,aAAU,mBAAmB,EAAA6C,QAAA;QAC/C,IAAI,CAACyO,YAAY,CAAC,CAAC;QACpB3R,IAAA,CAACvC,KAAK;UACJE,GAAG,EAAEA,CAAA4C,KAAK,MAAK,EAAEqR,YAAY,EAAErR,KAAK,CAACQ,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAE;UACrD6E,IAAI,EAAC,SAAS;UACdiM,OAAO;UACL3R,KAAA,CAAAE,SAAA,IAAA8C,QAAA;YACG,GAAG;YACJhD,KAAA,aAAAgD,QAAA,GAAShF,CAAC,CAAC,aAAa,CAAC,EAAC,GAAC,GAAQ,CAAC;YACnCA,CAAC;cACA;YACF,CAAC;UACD,CACH;;QACF,CAAC;QACFgC,KAAA,CAACc,eAAe;UACd4R,SAAS,EAAE,KAAM;UACjB3I,EAAE,EAAC,YAAY;UACf,aAAU,mBAAmB;UAC7BlI,QAAQ,EAAE,IAAI,CAACmK,eAAgB;UAC/B2G,gBAAgB,EAAEvH,YAAa,EAAApI,QAAA;;UAE/BlD,IAAA,CAACrB,IAAI,CAACsQ,OAAO,IAASC,GAAG,EAAEhR,CAAC,CAAC,QAAQ,CAAE,EAAAgF,QAAA;YACpC,IAAI,CAACmM,oBAAoB,CAAC9O,KAAK,CAAC,IADhB;UAEL,CAAC;UACfP,IAAA,CAACrB,IAAI,CAACsQ,OAAO;YACXC,GAAG;YACDlP,IAAA,CAACgD,kBAAkB;cACjBC,UAAU,EAAE+O,aAAc;cAC1BpQ,KAAK,EAAE1D,CAAC,CAAC,SAAS,CAAE;YACrB,CACF,EAAAgF,QAAA;;;;YAGA,IAAI,CAAC6O,sBAAsB,CAAC,CAAC,IAFzB;UAGO,CAAC;UACf/R,IAAA,CAACrB,IAAI,CAACsQ,OAAO;YACXC,GAAG;YACDlP,IAAA,CAACgD,kBAAkB;cACjBC,UAAU,EAAE,IAAI,CAAC8G,KAAK,CAACkB,eAAgB;cACvCrJ,KAAK,EAAE1D,CAAC,CAAC,SAAS,CAAE;YACrB,CACF,EAAAgF,QAAA;;;;YAGDhD,KAAA,CAACqB,uBAAuB,IAAA2B,QAAA;cACtBlD,IAAA,CAACqB,mBAAmB,IAAA6B,QAAA;gBAClBlD,IAAA,CAACwB,mBAAmB,IAAA0B,QAAA;kBAClBhD,KAAA,CAACxB,MAAM;oBACLoU,UAAU,EAAC,OAAO;oBAClBC,WAAW,EAAC,UAAU;oBACtBpD,OAAO,EAAE,IAAI,CAAC5D,YAAa;oBAC3BiE,SAAS,EAAC,kBAAkB;oBAC5BhJ,QAAQ,EAAE,IAAI,CAAC+C,KAAK,CAACiB,UAAW,EAAA9H,QAAA;;oBAEhClD,IAAA,CAACR,KAAK,CAACwT,gBAAgB,IAACnD,QAAQ,EAAC,GAAG,EAAE,CAAC;oBACtC3R,CAAC,CAAC,0BAA0B,CAAC;kBACxB,CAAC;gBACU,CAAC;cACH,CAAC;cACtB8B,IAAA,CAACyD,qBAAqB;gBACpBuM,SAAS,EAAC,eAAe;gBACzBtM,OAAO,EAAE,IAAI,CAACqG,KAAK,CAACkB,eAAgB;gBACpCtH,UAAU,EAAEA,UAAW;gBACvBC,eAAe,EAAEA,CAAAqH,eAAe;gBAC9B,IAAI,CAACe,UAAU,CAAC,EAAEf,eAAe,CAAC,CAAC,CACpC;;gBACDpH,kBAAkB,EAAE,IAAI,CAACA,kBAAmB;cAC7C,CAAC;cACD,IAAI,CAACkG,KAAK,CAACsB,eAAe,IAAIrL,IAAA,CAAChB,OAAO,IAAE,CAAC;YACnB,CAAC,IA3BrB;UA4BO,CAAC;UACfgB,IAAA,CAACrB,IAAI,CAACsQ,OAAO;YACXC,GAAG;YACDlP,IAAA,CAACgD,kBAAkB;cACjBC,UAAU,EAAE,IAAI,CAAC8G,KAAK,CAACqB,iBAAkB;cACzCxJ,KAAK,EAAE1D,CAAC,CAAC,oBAAoB,CAAE;YAChC,CACF,EAAAgF,QAAA;;;;YAGDlD,IAAA,CAACuB,uBAAuB,IAAA2B,QAAA;cACtBlD,IAAA,CAACyD,qBAAqB;gBACpBC,OAAO,EAAE,IAAI,CAACqG,KAAK,CAACqB,iBAAkB;gBACtCxH,eAAe,EAAEA,CAAAwH,iBAAiB;gBAChC,IAAI,CAACY,UAAU,CAAC,EAAEZ,iBAAiB,CAAC,CAAC,CACtC;;gBACDjH,mBAAmB,EAAE;kBACnBuB,WAAW,EAAExH,CAAC;oBACZ,sDAAsD;oBACpD,sDAAsD;oBACtD;kBACJ;gBACF,CAAE;gBACF2F,kBAAkB,EAAE,IAAI,CAACA,kBAAmB;gBAC5CF,UAAU,EAAEA,UAAW;gBACvBG,kBAAkB;gBAClBC,cAAc;gBACdC,YAAY;gBACZC,iBAAiB;gBACjBC,aAAa,EAAEA,CAAA,MAAO;kBACpBwB,WAAW,EAAExH,CAAC,CAAC,cAAc,CAAC;kBAC9B8H,UAAU,EAAE,IAAI;kBAChBH,OAAO,EAAE,IAAI;kBACbsF,UAAU,EAAEjN,CAAC,CAAC,6BAA6B,CAAC;kBAC5C+U,UAAU,EAAE;gBACd,CAAC,CAAE;cACJ,CAAC;YACqB,CAAC,IA7BrB;UA8BO,CAAC;UACfjT,IAAA,CAACrB,IAAI,CAACsQ,OAAO,IAASC,GAAG,EAAEhR,CAAC,CAAC,UAAU,CAAE,EAAAgF,QAAA;YACvChD,KAAA,CAAC3B,GAAG,IAAC2U,MAAM,EAAE,EAAG,EAAAhQ,QAAA;cACdlD,IAAA,CAACxB,GAAG,IAACyR,EAAE,EAAE,EAAG,EAACC,EAAE,EAAE,EAAG,EAAAhN,QAAA;gBAClBlD,IAAA,CAAC0E,aAAa,IAAAxB,QAAA,EAAE,IAAI,CAACsL,sBAAsB,CAAC,CAAC,EAAgB,CAAC;cAC3D,CAAC;cACNxO,IAAA,CAACxB,GAAG,IAACyR,EAAE,EAAE,EAAG,EAACC,EAAE,EAAE,EAAG,EAAAhN,QAAA;gBAClBlD,IAAA,CAAC0E,aAAa,IAAAxB,QAAA,EAAE,IAAI,CAAC0L,sBAAsB,CAAC,CAAC,EAAgB,CAAC;cAC3D,CAAC;YACH,CAAC,IARW;UASL,CAAC;QACA,CAAC;MACC,CAAC;;EAE1B,CAAC;EAAAuE,iCAAA/Q,GAAA,EAAAgR,IAAA;IAAA,KAAAhR,GAAA,IAAAiR,IAAA,CAAAD,IAAA,GACH;AAEAzJ,gBAAgB,CAACpC,YAAY,GAAGA,YAAY;AAC5CoC,gBAAgB,CAACrG,SAAS,GAAGA,SAAS;;AAEtC,MAAMgQ,mBAAmB,GAAGnV,SAAS,CAACwL,gBAAgB,CAAC,CAAC,MAAA4J,QAAA;;AAEzChU,UAAU,CAAC+T,mBAAmB,CAAC,CAA9C,eAAAC,QAAA,CAA+C,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAA/G,SAAA,MAAA6G,cAAA,WAAAA,cAAA,CAAAG,QAAA,CAv4CzCtT,mBAAmB,sHAAAmT,cAAA,CAAAG,QAAA,CAmBnB7S,gBAAgB,mHAAA0S,cAAA,CAAAG,QAAA,CAShB3S,eAAe,kHAAAwS,cAAA,CAAAG,QAAA,CAOf1S,WAAW,8GAAAuS,cAAA,CAAAG,QAAA,CAQXzS,iBAAiB,oHAAAsS,cAAA,CAAAG,QAAA,CASjBtS,mBAAmB,sHAAAmS,cAAA,CAAAG,QAAA,CAKnBrS,kBAAkB,qHAAAkS,cAAA,CAAAG,QAAA,CAQlBpS,uBAAuB,0HAAAiS,cAAA,CAAAG,QAAA,CAUvBnS,mBAAmB,sHAAAgS,cAAA,CAAAG,QAAA,CAUnBjS,iBAAiB,oHAAA8R,cAAA,CAAAG,QAAA,CAQjB9R,iBAAiB,oHAAA2R,cAAA,CAAAG,QAAA,CAGjB1R,UAAU,6GAAAuR,cAAA,CAAAG,QAAA,CAOVxR,oBAAoB,uHAAAqR,cAAA,CAAAG,QAAA,CAIpBtR,gBAAgB,mHAAAmR,cAAA,CAAAG,QAAA,CAKb3Q,kBAAkB,qHAAAwQ,cAAA,CAAAG,QAAA,CAiBlBlQ,qBAAqB,wHAAA+P,cAAA,CAAAG,QAAA,CA6UrBnM,YAAY,+GAAAgM,cAAA,CAAAG,QAAA,CAgBZjP,aAAa,gHAAA8O,cAAA,CAAAG,QAAA,CAQhBrQ,SAAS,4GAAAkQ,cAAA,CAAAG,QAAA,CAQTpM,YAAY,+GAAAiM,cAAA,CAAAG,QAAA,CAKT5L,cAAc,iHAAAyL,cAAA,CAAAG,QAAA,CA8BjBhK,gBAAgB,mHAAA6J,cAAA,CAAAG,QAAA,CAo3BhBL,mBAAmB,sHAAAE,cAAA,CAAAG,QAAA,CAAAJ,QAAA,kIAAAK,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAjH,SAAA,CAAAiH,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}