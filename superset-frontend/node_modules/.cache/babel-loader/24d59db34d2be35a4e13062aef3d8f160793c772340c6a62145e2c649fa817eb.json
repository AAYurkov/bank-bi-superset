{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useSelector } from 'react-redux';\nimport { findPermission } from 'src/utils/findPermission';\nexport const usePermissions = () => {\n  const canExplore = useSelector((state) => {var _state$user;return findPermission('can_explore', 'Superset', (_state$user = state.user) == null ? void 0 : _state$user.roles);});\n  const canWriteExploreFormData = useSelector((state) => {var _state$user2;return findPermission('can_write', 'ExploreFormDataRestApi', (_state$user2 = state.user) == null ? void 0 : _state$user2.roles);});\n  const canDatasourceSamples = useSelector((state) => {var _state$user3;return findPermission('can_samples', 'Datasource', (_state$user3 = state.user) == null ? void 0 : _state$user3.roles);});\n  const canDownload = useSelector((state) => {var _state$user4;return findPermission('can_csv', 'Superset', (_state$user4 = state.user) == null ? void 0 : _state$user4.roles);});\n  const canDrill = useSelector((state) => {var _state$user5;return findPermission('can_drill', 'Dashboard', (_state$user5 = state.user) == null ? void 0 : _state$user5.roles);});\n  const canDrillBy = (canExplore || canDrill) && canWriteExploreFormData;\n  const canDrillToDetail = (canExplore || canDrill) && canDatasourceSamples;\n  const canViewQuery = useSelector((state) => {var _state$user6;return findPermission('can_view_query', 'Dashboard', (_state$user6 = state.user) == null ? void 0 : _state$user6.roles);});\n  const canViewTable = useSelector((state) => {var _state$user7;return findPermission('can_view_chart_as_table', 'Dashboard', (_state$user7 = state.user) == null ? void 0 : _state$user7.roles);});\n  return {\n    canExplore,\n    canWriteExploreFormData,\n    canDatasourceSamples,\n    canDownload,\n    canDrill,\n    canDrillBy,\n    canDrillToDetail,\n    canViewQuery,\n    canViewTable\n  };\n};__signature__(usePermissions, \"useSelector{canExplore}\\nuseSelector{canWriteExploreFormData}\\nuseSelector{canDatasourceSamples}\\nuseSelector{canDownload}\\nuseSelector{canDrill}\\nuseSelector{canViewQuery}\\nuseSelector{canViewTable}\", () => [useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(usePermissions, \"usePermissions\", \"/Users/aryurkov/superset/superset-frontend/src/hooks/usePermissions.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useSelector","findPermission","usePermissions","canExplore","state","_state$user","user","roles","canWriteExploreFormData","_state$user2","canDatasourceSamples","_state$user3","canDownload","_state$user4","canDrill","_state$user5","canDrillBy","canDrillToDetail","canViewQuery","_state$user6","canViewTable","_state$user7","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/hooks/usePermissions.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useSelector } from 'react-redux';\nimport { RootState } from 'src/dashboard/types';\nimport { findPermission } from 'src/utils/findPermission';\n\nexport const usePermissions = () => {\n  const canExplore = useSelector((state: RootState) =>\n    findPermission('can_explore', 'Superset', state.user?.roles),\n  );\n  const canWriteExploreFormData = useSelector((state: RootState) =>\n    findPermission('can_write', 'ExploreFormDataRestApi', state.user?.roles),\n  );\n  const canDatasourceSamples = useSelector((state: RootState) =>\n    findPermission('can_samples', 'Datasource', state.user?.roles),\n  );\n  const canDownload = useSelector((state: RootState) =>\n    findPermission('can_csv', 'Superset', state.user?.roles),\n  );\n  const canDrill = useSelector((state: RootState) =>\n    findPermission('can_drill', 'Dashboard', state.user?.roles),\n  );\n  const canDrillBy = (canExplore || canDrill) && canWriteExploreFormData;\n  const canDrillToDetail = (canExplore || canDrill) && canDatasourceSamples;\n  const canViewQuery = useSelector((state: RootState) =>\n    findPermission('can_view_query', 'Dashboard', state.user?.roles),\n  );\n  const canViewTable = useSelector((state: RootState) =>\n    findPermission('can_view_chart_as_table', 'Dashboard', state.user?.roles),\n  );\n\n  return {\n    canExplore,\n    canWriteExploreFormData,\n    canDatasourceSamples,\n    canDownload,\n    canDrill,\n    canDrillBy,\n    canDrillToDetail,\n    canViewQuery,\n    canViewTable,\n  };\n};\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SAASA,WAAW,QAAQ,aAAa;AAEzC,SAASC,cAAc,QAAQ,0BAA0B;AAEzD,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAK;EACjC,MAAMC,UAAU,GAAGH,WAAW,CAAC,CAACI,KAAgB,UAAAC,WAAA,QAC9CJ,cAAc,CAAC,aAAa,EAAE,UAAU,GAAAI,WAAA,GAAED,KAAK,CAACE,IAAI,qBAAVD,WAAA,CAAYE,KAAK,CAAC,GAC7D;EACD,MAAMC,uBAAuB,GAAGR,WAAW,CAAC,CAACI,KAAgB,UAAAK,YAAA,QAC3DR,cAAc,CAAC,WAAW,EAAE,wBAAwB,GAAAQ,YAAA,GAAEL,KAAK,CAACE,IAAI,qBAAVG,YAAA,CAAYF,KAAK,CAAC,GACzE;EACD,MAAMG,oBAAoB,GAAGV,WAAW,CAAC,CAACI,KAAgB,UAAAO,YAAA,QACxDV,cAAc,CAAC,aAAa,EAAE,YAAY,GAAAU,YAAA,GAAEP,KAAK,CAACE,IAAI,qBAAVK,YAAA,CAAYJ,KAAK,CAAC,GAC/D;EACD,MAAMK,WAAW,GAAGZ,WAAW,CAAC,CAACI,KAAgB,UAAAS,YAAA,QAC/CZ,cAAc,CAAC,SAAS,EAAE,UAAU,GAAAY,YAAA,GAAET,KAAK,CAACE,IAAI,qBAAVO,YAAA,CAAYN,KAAK,CAAC,GACzD;EACD,MAAMO,QAAQ,GAAGd,WAAW,CAAC,CAACI,KAAgB,UAAAW,YAAA,QAC5Cd,cAAc,CAAC,WAAW,EAAE,WAAW,GAAAc,YAAA,GAAEX,KAAK,CAACE,IAAI,qBAAVS,YAAA,CAAYR,KAAK,CAAC,GAC5D;EACD,MAAMS,UAAU,GAAG,CAACb,UAAU,IAAIW,QAAQ,KAAKN,uBAAuB;EACtE,MAAMS,gBAAgB,GAAG,CAACd,UAAU,IAAIW,QAAQ,KAAKJ,oBAAoB;EACzE,MAAMQ,YAAY,GAAGlB,WAAW,CAAC,CAACI,KAAgB,UAAAe,YAAA,QAChDlB,cAAc,CAAC,gBAAgB,EAAE,WAAW,GAAAkB,YAAA,GAAEf,KAAK,CAACE,IAAI,qBAAVa,YAAA,CAAYZ,KAAK,CAAC,GACjE;EACD,MAAMa,YAAY,GAAGpB,WAAW,CAAC,CAACI,KAAgB,UAAAiB,YAAA,QAChDpB,cAAc,CAAC,yBAAyB,EAAE,WAAW,GAAAoB,YAAA,GAAEjB,KAAK,CAACE,IAAI,qBAAVe,YAAA,CAAYd,KAAK,CAAC,GAC1E;EAED,OAAO;IACLJ,UAAU;IACVK,uBAAuB;IACvBE,oBAAoB;IACpBE,WAAW;IACXE,QAAQ;IACRE,UAAU;IACVC,gBAAgB;IAChBC,YAAY;IACZE;GACD;AACH,CAAC,CAACE,aAAA,CApCWpB,cAAc,oNACNF,WAAW,EAGEA,WAAW,EAGdA,WAAW,EAGpBA,WAAW,EAGdA,WAAW,EAKPA,WAAW,EAGXA,WAAW,sBAAAuB,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CArBrBzB,cAAc,sHAAA0B,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}