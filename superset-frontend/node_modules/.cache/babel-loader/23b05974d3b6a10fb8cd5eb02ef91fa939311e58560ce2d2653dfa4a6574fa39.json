{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useMemo, forwardRef, useImperativeHandle } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { RangePicker } from 'src/components/DatePicker';\nimport { FormLabel } from 'src/components/Form';\nimport { extendedDayjs } from 'src/utils/dates';\nimport Loading from 'src/components/Loading';\nimport { AntdThemeProvider } from 'src/components/AntdThemeProvider';\nimport { useLocale } from 'src/hooks/useLocale';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst RangeFilterContainer = styled.div`\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 360px;\n`;\nfunction DateRangeFilter({ Header, initialValue, onSubmit, dateFilterValueType = 'unix' }, ref) {\n  const [value, setValue] = useState(initialValue != null ? initialValue : null);\n  const dayjsValue = useMemo(() => {\n    if (!value || Array.isArray(value) && !value.length)\n    return null;\n    return [extendedDayjs(value[0]), extendedDayjs(value[1])];\n  }, [value]);\n  const locale = useLocale();\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue(null);\n      onSubmit([]);\n    }\n  }));\n  if (locale === null) {\n    return _jsx(Loading, { position: \"inline-centered\" });\n  }\n  return _jsx(AntdThemeProvider, { locale: locale, children:\n    _jsxs(RangeFilterContainer, { children: [\n      _jsx(FormLabel, { children: Header }),\n      _jsx(RangePicker, { placeholder: [t('Start date'), t('End date')], showTime: true, value: dayjsValue, onCalendarChange: (dayjsRange) => {var _dayjsRange$, _dayjsRange$2, _dayjsRange$0$valueOf, _dayjsRange$3, _dayjsRange$1$valueOf, _dayjsRange$4;\n          if (!(dayjsRange != null && (_dayjsRange$ = dayjsRange[0]) != null && _dayjsRange$.valueOf()) || !(dayjsRange != null && (_dayjsRange$2 = dayjsRange[1]) != null && _dayjsRange$2.valueOf())) {\n            setValue(null);\n            onSubmit([]);\n            return;\n          }\n          const changeValue = dateFilterValueType === 'iso' ?\n          [dayjsRange[0].toISOString(), dayjsRange[1].toISOString()] :\n          [(_dayjsRange$0$valueOf = (_dayjsRange$3 =\n          dayjsRange[0]) == null ? void 0 : _dayjsRange$3.valueOf()) != null ? _dayjsRange$0$valueOf : 0, (_dayjsRange$1$valueOf = (_dayjsRange$4 =\n          dayjsRange[1]) == null ? void 0 : _dayjsRange$4.valueOf()) != null ? _dayjsRange$1$valueOf : 0];\n\n          setValue(changeValue);\n          onSubmit(changeValue);\n        } })] }\n    ) }\n  );\n}__signature__(DateRangeFilter, \"useState{[value, setValue](initialValue ?? null)}\\nuseMemo{dayjsValue}\\nuseLocale{locale}\\nuseImperativeHandle{}\", () => [useLocale, useImperativeHandle]);const _default = /*#__PURE__*/\nforwardRef(DateRangeFilter);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(RangeFilterContainer, \"RangeFilterContainer\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/DateRange.tsx\");reactHotLoader.register(DateRangeFilter, \"DateRangeFilter\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/DateRange.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/DateRange.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useMemo","forwardRef","useImperativeHandle","styled","t","RangePicker","FormLabel","extendedDayjs","Loading","AntdThemeProvider","useLocale","jsx","_jsx","jsxs","_jsxs","RangeFilterContainer","div","DateRangeFilter","Header","initialValue","onSubmit","dateFilterValueType","ref","value","setValue","dayjsValue","Array","isArray","length","locale","clearFilter","position","children","placeholder","showTime","onCalendarChange","dayjsRange","_dayjsRange$","_dayjsRange$2","_dayjsRange$0$valueOf","_dayjsRange$3","_dayjsRange$1$valueOf","_dayjsRange$4","valueOf","changeValue","toISOString","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/components/ListView/Filters/DateRange.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  useState,\n  useMemo,\n  forwardRef,\n  useImperativeHandle,\n  RefObject,\n} from 'react';\n\nimport { styled, t } from '@superset-ui/core';\nimport { RangePicker } from 'src/components/DatePicker';\nimport { FormLabel } from 'src/components/Form';\nimport { extendedDayjs } from 'src/utils/dates';\nimport { Dayjs } from 'dayjs';\nimport Loading from 'src/components/Loading';\nimport { AntdThemeProvider } from 'src/components/AntdThemeProvider';\nimport { useLocale } from 'src/hooks/useLocale';\nimport { BaseFilter, FilterHandler } from './Base';\n\ninterface DateRangeFilterProps extends BaseFilter {\n  onSubmit: (val: number[] | string[]) => void;\n  name: string;\n  dateFilterValueType?: 'unix' | 'iso';\n}\n\ntype ValueState = [number, number] | [string, string] | null;\n\nconst RangeFilterContainer = styled.div`\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 360px;\n`;\n\nfunction DateRangeFilter(\n  {\n    Header,\n    initialValue,\n    onSubmit,\n    dateFilterValueType = 'unix',\n  }: DateRangeFilterProps,\n  ref: RefObject<FilterHandler>,\n) {\n  const [value, setValue] = useState<ValueState | null>(initialValue ?? null);\n  const dayjsValue = useMemo((): [Dayjs, Dayjs] | null => {\n    if (!value || (Array.isArray(value) && !value.length)) return null;\n    return [extendedDayjs(value[0]), extendedDayjs(value[1])];\n  }, [value]);\n\n  const locale = useLocale();\n\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue(null);\n      onSubmit([]);\n    },\n  }));\n\n  if (locale === null) {\n    return <Loading position=\"inline-centered\" />;\n  }\n  return (\n    <AntdThemeProvider locale={locale}>\n      <RangeFilterContainer>\n        <FormLabel>{Header}</FormLabel>\n        <RangePicker\n          placeholder={[t('Start date'), t('End date')]}\n          showTime\n          value={dayjsValue}\n          onCalendarChange={(dayjsRange: [Dayjs, Dayjs]) => {\n            if (!dayjsRange?.[0]?.valueOf() || !dayjsRange?.[1]?.valueOf()) {\n              setValue(null);\n              onSubmit([]);\n              return;\n            }\n            const changeValue =\n              dateFilterValueType === 'iso'\n                ? [dayjsRange[0].toISOString(), dayjsRange[1].toISOString()]\n                : [\n                    dayjsRange[0]?.valueOf() ?? 0,\n                    dayjsRange[1]?.valueOf() ?? 0,\n                  ];\n            setValue(changeValue as ValueState);\n            onSubmit(changeValue);\n          }}\n        />\n      </RangeFilterContainer>\n    </AntdThemeProvider>\n  );\n}\n\nexport default forwardRef(DateRangeFilter);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}