{"ast":null,"code":"import _intersection from \"lodash/intersection\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { logging, styled, SupersetClient, getClientErrorObject, t, lruCache } from '@superset-ui/core';\n\nimport rison from 'rison';\nimport SupersetText from 'src/utils/textUtils';\nimport { findPermission } from 'src/utils/findPermission';\nimport { WelcomeTable } from 'src/features/home/types';\nimport { TableTab } from './types';\n// Modifies the rison encoding slightly to match the backend's rison encoding/decoding. Applies globally.\n// Code pulled from rison.js (https://github.com/Nanonid/rison), rison is licensed under the MIT license.\n(() => {\n  const risonRef = rison;\n  const l = [];\n  for (let hi = 0; hi < 16; hi += 1) {\n    for (let lo = 0; lo < 16; lo += 1) {\n      if (hi + lo === 0)\n      continue;\n      const c = String.fromCharCode(hi * 16 + lo);\n      if (!/\\w|[-_./~]/.test(c))\n      l.push(`\\\\u00${hi.toString(16)}${lo.toString(16)}`);\n    }\n  }\n  risonRef.not_idchar = l.join('');\n  risonRef.not_idstart = '-0123456789';\n  const idrx = `[^${risonRef.not_idstart}${risonRef.not_idchar}][^${risonRef.not_idchar}]*`;\n  risonRef.id_ok = new RegExp(`^${idrx}$`);\n  risonRef.next_id = new RegExp(idrx, 'g');\n})();\nexport const Actions = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\nconst createFetchResourceMethod = (method) => (resource, relation, handleError, user) => async (filterValue = '', page, pageSize) => {var _json$result;\n  const resourceEndpoint = `/api/v1/${resource}/${method}/${relation}`;\n  const queryParams = rison.encode_uri({\n    filter: filterValue,\n    page,\n    page_size: pageSize\n  });\n  const { json = {} } = await SupersetClient.get({\n    endpoint: `${resourceEndpoint}?q=${queryParams}`\n  });\n  let fetchedLoggedUser = false;\n  const loggedUser = user ?\n  {\n    label: `${user.firstName} ${user.lastName}`,\n    value: user.userId\n  } :\n  undefined;\n  const data = [];\n  json == null ? void 0 : (_json$result = json.result) == null ? void 0 : _json$result.\n  filter(({ text }) => text.trim().length > 0).\n  forEach(({ text, value }) => {\n    if (loggedUser &&\n    value === loggedUser.value &&\n    text === loggedUser.label) {\n      fetchedLoggedUser = true;\n    } else\n    {\n      data.push({\n        label: text,\n        value\n      });\n    }\n  });\n  if (loggedUser && (!filterValue || fetchedLoggedUser)) {\n    data.unshift(loggedUser);\n  }\n  return {\n    data,\n    totalCount: json == null ? void 0 : json.count\n  };\n};\nexport const PAGE_SIZE = 5;\nconst getParams = (filters, selectColumns) => {\n  const params = {\n    order_column: 'changed_on_delta_humanized',\n    order_direction: 'desc',\n    page: 0,\n    page_size: PAGE_SIZE,\n    filters,\n    select_columns: selectColumns\n  };\n  if (!filters)\n  delete params.filters;\n  if (!selectColumns)\n  delete params.select_columns;\n  return rison.encode(params);\n};\nexport const getEditedObjects = (userId) => {\n  const filters = {\n    edited: [\n    {\n      col: 'changed_by',\n      opr: 'rel_o_m',\n      value: `${userId}`\n    }]\n\n  };\n  const batch = [\n  SupersetClient.get({\n    endpoint: `/api/v1/dashboard/?q=${getParams(filters.edited)}`\n  }),\n  SupersetClient.get({\n    endpoint: `/api/v1/chart/?q=${getParams(filters.edited)}`\n  })];\n\n  return Promise.all(batch).\n  then(([editedCharts, editedDashboards]) => {var _editedDashboards$jso, _editedCharts$json;\n    const res = {\n      editedDash: (_editedDashboards$jso = editedDashboards.json) == null ? void 0 : _editedDashboards$jso.result.slice(0, 3),\n      editedChart: (_editedCharts$json = editedCharts.json) == null ? void 0 : _editedCharts$json.result.slice(0, 3)\n    };\n    return res;\n  }).\n  catch((err) => err);\n};\nexport const getUserOwnedObjects = (userId, resource, filters = [\n{\n  col: 'owners',\n  opr: 'rel_m_m',\n  value: `${userId}`\n}],\nselectColumns) => SupersetClient.get({\n  endpoint: `/api/v1/${resource}/?q=${getParams(filters, selectColumns)}`\n}).then((res) => {var _res$json;return (_res$json = res.json) == null ? void 0 : _res$json.result;});\nexport const getFilteredChartsandDashboards = (addDangerToast, filters, dashboardSelectColumns, chartSelectColumns) => {\n  const newBatch = [\n  SupersetClient.get({\n    endpoint: `/api/v1/chart/?q=${getParams(filters, chartSelectColumns)}`\n  }),\n  SupersetClient.get({\n    endpoint: `/api/v1/dashboard/?q=${getParams(filters, dashboardSelectColumns)}`\n  })];\n\n  return Promise.all(newBatch).\n  then(([chartRes, dashboardRes]) => ({\n    other: [...chartRes.json.result, ...dashboardRes.json.result]\n  })).\n  catch((errMsg) => {\n    addDangerToast(t('There was an error fetching the filtered charts and dashboards:'), errMsg);\n    return { other: [] };\n  });\n};\nexport const getRecentActivityObjs = (userId, recent, addDangerToast, filters) => SupersetClient.get({ endpoint: recent }).then((recentsRes) => {\n  const res = {};\n  const distinctRes = lruCache(6);\n  recentsRes.json.result.reverse().forEach((record) => {\n    distinctRes.set(record.item_url, record);\n  });\n  return getFilteredChartsandDashboards(addDangerToast, filters).then(({ other }) => {\n    res.other = other;\n    res.viewed = distinctRes.values().reverse();\n    return res;\n  });\n});\nexport const createFetchRelated = createFetchResourceMethod('related');\nexport const createFetchDistinct = createFetchResourceMethod('distinct');\nexport function createErrorHandler(handleErrorFunc) {\n  return async (e) => {\n    const parsedError = await getClientErrorObject(e);\n    // Taking the first error returned from the API\n    // @ts-ignore\n    const errorsArray = parsedError == null ? void 0 : parsedError.errors;\n    const config = await SupersetText;\n    if (errorsArray != null && errorsArray.length &&\n    config != null && config.ERRORS &&\n    errorsArray[0].error_type in config.ERRORS) {\n      parsedError.message = config.ERRORS[errorsArray[0].error_type];\n    }\n    logging.error(e);\n    handleErrorFunc(parsedError.message || parsedError.error);\n  };\n}\nexport function handleChartDelete({ id, slice_name: sliceName }, addSuccessToast, addDangerToast, refreshData, chartFilter, userId) {\n  const filters = {\n    pageIndex: 0,\n    pageSize: PAGE_SIZE,\n    sortBy: [\n    {\n      id: 'changed_on_delta_humanized',\n      desc: true\n    }],\n\n    filters: [\n    {\n      id: 'created_by',\n      operator: 'rel_o_m',\n      value: `${userId}`\n    }]\n\n  };\n  SupersetClient.delete({\n    endpoint: `/api/v1/chart/${id}`\n  }).then(() => {\n    if (chartFilter === 'Mine')\n    refreshData(filters);else\n\n    refreshData();\n    addSuccessToast(t('Deleted: %s', sliceName));\n  }, () => {\n    addDangerToast(t('There was an issue deleting: %s', sliceName));\n  });\n}\nexport function handleDashboardDelete({ id, dashboard_title: dashboardTitle }, refreshData, addSuccessToast, addDangerToast, dashboardFilter, userId) {\n  return SupersetClient.delete({\n    endpoint: `/api/v1/dashboard/${id}`\n  }).then(() => {\n    const filters = {\n      pageIndex: 0,\n      pageSize: PAGE_SIZE,\n      sortBy: [\n      {\n        id: 'changed_on_delta_humanized',\n        desc: true\n      }],\n\n      filters: [\n      {\n        id: 'owners',\n        operator: 'rel_m_m',\n        value: `${userId}`\n      }]\n\n    };\n    if (dashboardFilter === 'Mine')\n    refreshData(filters);else\n\n    refreshData();\n    addSuccessToast(t('Deleted: %s', dashboardTitle));\n  }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue deleting %s: %s', dashboardTitle, errMsg))));\n}\nexport function shortenSQL(sql, maxLines) {\n  let lines = sql.split('\\n');\n  if (lines.length >= maxLines) {\n    lines = lines.slice(0, maxLines);\n    lines.push('...');\n  }\n  return lines.join('\\n');\n}\n// loading card count for homepage\nexport const loadingCardCount = 5;\nconst breakpoints = [576, 768, 992, 1200];\nexport const mq = breakpoints.map((bp) => `@media (max-width: ${bp}px)`);\nexport const CardContainer = styled.div`\n  ${({ showThumbnails, theme }) => `\n    overflow: hidden;\n    display: grid;\n    grid-gap: ${theme.gridUnit * 12}px ${theme.gridUnit * 4}px;\n    grid-template-columns: repeat(auto-fit, 300px);\n    max-height: ${showThumbnails ? '314' : '148'}px;\n    margin-top: ${theme.gridUnit * -6}px;\n    padding: ${showThumbnails ?\n`${theme.gridUnit * 8 + 3}px ${theme.gridUnit * 9}px` :\n`${theme.gridUnit * 8 + 1}px ${theme.gridUnit * 9}px`};\n  `}\n`;\nexport const CardStyles = styled.div`\n  cursor: pointer;\n  a {\n    text-decoration: none;\n  }\n  .antd5-card-cover > div {\n    /* Height is calculated based on 300px width, to keep the same aspect ratio as the 800*450 thumbnails */\n    height: 168px;\n  }\n`;\nexport /* eslint-disable no-underscore-dangle */const isNeedsPassword = (payload) => {var _payload$_schema;return typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!((_payload$_schema = payload._schema) != null && _payload$_schema.find((e) => e === 'Must provide a password for the database'));};\nexport /* eslint-disable no-underscore-dangle */const isNeedsSSHPassword = (payload) => {var _payload$_schema2;return typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!((_payload$_schema2 = payload._schema) != null && _payload$_schema2.find((e) => e === 'Must provide a password for the ssh tunnel'));};\nexport /* eslint-disable no-underscore-dangle */const isNeedsSSHPrivateKey = (payload) => {var _payload$_schema3;return typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!((_payload$_schema3 = payload._schema) != null && _payload$_schema3.find((e) => e === 'Must provide a private key for the ssh tunnel'));};\nexport /* eslint-disable no-underscore-dangle */const isNeedsSSHPrivateKeyPassword = (payload) => {var _payload$_schema4;return typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!((_payload$_schema4 = payload._schema) != null && _payload$_schema4.find((e) => e === 'Must provide a private key password for the ssh tunnel'));};\nexport const isAlreadyExists = (payload) => typeof payload === 'string' &&\npayload.includes('already exists and `overwrite=true` was not passed');\nexport const getPasswordsNeeded = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter(([, payload]) => isNeedsPassword(payload)).\nmap(([fileName]) => fileName)).\nflat();\nexport const getSSHPasswordsNeeded = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter(([, payload]) => isNeedsSSHPassword(payload)).\nmap(([fileName]) => fileName)).\nflat();\nexport const getSSHPrivateKeysNeeded = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter(([, payload]) => isNeedsSSHPrivateKey(payload)).\nmap(([fileName]) => fileName)).\nflat();\nexport const getSSHPrivateKeyPasswordsNeeded = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter(([, payload]) => isNeedsSSHPrivateKeyPassword(payload)).\nmap(([fileName]) => fileName)).\nflat();\nexport const getAlreadyExists = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter(([, payload]) => isAlreadyExists(payload)).\nmap(([fileName]) => fileName)).\nflat();\nexport const hasTerminalValidation = (errors) => errors.some((error) => {\n  const noIssuesCodes = Object.entries(error.extra).filter(([key]) => key !== 'issue_codes');\n  if (noIssuesCodes.length === 0)\n  return true;\n  return !noIssuesCodes.every(([, payload]) => isNeedsPassword(payload) ||\n  isAlreadyExists(payload) ||\n  isNeedsSSHPassword(payload) ||\n  isNeedsSSHPrivateKey(payload) ||\n  isNeedsSSHPrivateKeyPassword(payload));\n});\nexport const checkUploadExtensions = (perm, cons) => {\n  if (perm !== undefined) {\n    return _intersection(perm, cons).length > 0;\n  }\n  return false;\n};\nexport const uploadUserPerms = (roles, csvExt, colExt, excelExt, allowedExt) => {\n  const canUploadCSV = findPermission('can_upload', 'Database', roles) &&\n  checkUploadExtensions(csvExt, allowedExt);\n  const canUploadColumnar = checkUploadExtensions(colExt, allowedExt) &&\n  findPermission('can_upload', 'Database', roles);\n  const canUploadExcel = checkUploadExtensions(excelExt, allowedExt) &&\n  findPermission('can_upload', 'Database', roles);\n  return {\n    canUploadCSV,\n    canUploadColumnar,\n    canUploadExcel,\n    canUploadData: canUploadCSV || canUploadColumnar || canUploadExcel\n  };\n};\nexport function getFilterValues(tab, welcomeTable, user, otherTabFilters) {\n  if (tab === TableTab.Created ||\n  welcomeTable === WelcomeTable.SavedQueries && tab === TableTab.Mine) {\n    return [\n    {\n      id: 'created_by',\n      operator: 'rel_o_m',\n      value: `${user == null ? void 0 : user.userId}`\n    }];\n\n  }\n  if (welcomeTable === WelcomeTable.SavedQueries && tab === TableTab.Favorite) {\n    return [\n    {\n      id: 'id',\n      operator: 'saved_query_is_fav',\n      value: true\n    }];\n\n  }\n  if (tab === TableTab.Mine && user) {\n    return [\n    {\n      id: 'owners',\n      operator: 'rel_m_m',\n      value: `${user.userId}`\n    }];\n\n  }\n  if (tab === TableTab.Favorite &&\n  [WelcomeTable.Dashboards, WelcomeTable.Charts].includes(welcomeTable)) {\n    return [\n    {\n      id: 'id',\n      operator: welcomeTable === WelcomeTable.Dashboards ?\n      'dashboard_is_favorite' :\n      'chart_is_favorite',\n      value: true\n    }];\n\n  }\n  if (tab === TableTab.Other) {\n    return (otherTabFilters || []).map((flt) => ({\n      id: flt.col,\n      operator: flt.opr,\n      value: flt.value\n    }));\n  }\n  return [];\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Actions, \"Actions\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(createFetchResourceMethod, \"createFetchResourceMethod\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(PAGE_SIZE, \"PAGE_SIZE\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getParams, \"getParams\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getEditedObjects, \"getEditedObjects\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getUserOwnedObjects, \"getUserOwnedObjects\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getFilteredChartsandDashboards, \"getFilteredChartsandDashboards\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getRecentActivityObjs, \"getRecentActivityObjs\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(createFetchRelated, \"createFetchRelated\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(createFetchDistinct, \"createFetchDistinct\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(createErrorHandler, \"createErrorHandler\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(handleChartDelete, \"handleChartDelete\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(handleDashboardDelete, \"handleDashboardDelete\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(shortenSQL, \"shortenSQL\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(loadingCardCount, \"loadingCardCount\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(breakpoints, \"breakpoints\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(mq, \"mq\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(CardContainer, \"CardContainer\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(CardStyles, \"CardStyles\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isNeedsPassword, \"isNeedsPassword\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isNeedsSSHPassword, \"isNeedsSSHPassword\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isNeedsSSHPrivateKey, \"isNeedsSSHPrivateKey\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isNeedsSSHPrivateKeyPassword, \"isNeedsSSHPrivateKeyPassword\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isAlreadyExists, \"isAlreadyExists\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getPasswordsNeeded, \"getPasswordsNeeded\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getSSHPasswordsNeeded, \"getSSHPasswordsNeeded\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getSSHPrivateKeysNeeded, \"getSSHPrivateKeysNeeded\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getSSHPrivateKeyPasswordsNeeded, \"getSSHPrivateKeyPasswordsNeeded\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getAlreadyExists, \"getAlreadyExists\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(hasTerminalValidation, \"hasTerminalValidation\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(checkUploadExtensions, \"checkUploadExtensions\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(uploadUserPerms, \"uploadUserPerms\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getFilterValues, \"getFilterValues\", \"/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["logging","styled","SupersetClient","getClientErrorObject","t","lruCache","rison","SupersetText","findPermission","WelcomeTable","TableTab","risonRef","l","hi","lo","c","String","fromCharCode","test","push","toString","not_idchar","join","not_idstart","idrx","id_ok","RegExp","next_id","Actions","div","theme","colors","grayscale","base","createFetchResourceMethod","method","resource","relation","handleError","user","filterValue","page","pageSize","_json$result","resourceEndpoint","queryParams","encode_uri","filter","page_size","json","get","endpoint","fetchedLoggedUser","loggedUser","label","firstName","lastName","value","userId","undefined","data","result","text","trim","length","forEach","unshift","totalCount","count","PAGE_SIZE","getParams","filters","selectColumns","params","order_column","order_direction","select_columns","encode","getEditedObjects","edited","col","opr","batch","Promise","all","then","editedCharts","editedDashboards","_editedDashboards$jso","_editedCharts$json","res","editedDash","slice","editedChart","catch","err","getUserOwnedObjects","_res$json","getFilteredChartsandDashboards","addDangerToast","dashboardSelectColumns","chartSelectColumns","newBatch","chartRes","dashboardRes","other","errMsg","getRecentActivityObjs","recent","recentsRes","distinctRes","reverse","record","set","item_url","viewed","values","createFetchRelated","createFetchDistinct","createErrorHandler","handleErrorFunc","e","parsedError","errorsArray","errors","config","ERRORS","error_type","message","error","handleChartDelete","id","slice_name","sliceName","addSuccessToast","refreshData","chartFilter","pageIndex","sortBy","desc","operator","delete","handleDashboardDelete","dashboard_title","dashboardTitle","dashboardFilter","shortenSQL","sql","maxLines","lines","split","loadingCardCount","breakpoints","mq","map","bp","CardContainer","showThumbnails","gridUnit","CardStyles","isNeedsPassword","payload","_payload$_schema","Array","isArray","_schema","find","isNeedsSSHPassword","_payload$_schema2","isNeedsSSHPrivateKey","_payload$_schema3","isNeedsSSHPrivateKeyPassword","_payload$_schema4","isAlreadyExists","includes","getPasswordsNeeded","Object","entries","extra","fileName","flat","getSSHPasswordsNeeded","getSSHPrivateKeysNeeded","getSSHPrivateKeyPasswordsNeeded","getAlreadyExists","hasTerminalValidation","some","noIssuesCodes","key","every","checkUploadExtensions","perm","cons","_intersection","uploadUserPerms","roles","csvExt","colExt","excelExt","allowedExt","canUploadCSV","canUploadColumnar","canUploadExcel","canUploadData","getFilterValues","tab","welcomeTable","otherTabFilters","Created","SavedQueries","Mine","Favorite","Dashboards","Charts","Other","flt","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/views/CRUD/utils.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  logging,\n  styled,\n  SupersetClient,\n  SupersetClientResponse,\n  getClientErrorObject,\n  t,\n  lruCache,\n} from '@superset-ui/core';\nimport Chart from 'src/types/Chart';\nimport { intersection } from 'lodash';\nimport rison from 'rison';\nimport { FetchDataConfig, FilterValue } from 'src/components/ListView';\nimport SupersetText from 'src/utils/textUtils';\nimport { findPermission } from 'src/utils/findPermission';\nimport { User } from 'src/types/bootstrapTypes';\nimport { RecentActivity, WelcomeTable } from 'src/features/home/types';\nimport { Dashboard, Filter, TableTab } from './types';\n\n// Modifies the rison encoding slightly to match the backend's rison encoding/decoding. Applies globally.\n// Code pulled from rison.js (https://github.com/Nanonid/rison), rison is licensed under the MIT license.\n(() => {\n  const risonRef: {\n    not_idchar: string;\n    not_idstart: string;\n    id_ok: RegExp;\n    next_id: RegExp;\n  } = rison as any;\n\n  const l = [];\n  for (let hi = 0; hi < 16; hi += 1) {\n    for (let lo = 0; lo < 16; lo += 1) {\n      if (hi + lo === 0) continue;\n      const c = String.fromCharCode(hi * 16 + lo);\n      if (!/\\w|[-_./~]/.test(c))\n        l.push(`\\\\u00${hi.toString(16)}${lo.toString(16)}`);\n    }\n  }\n\n  risonRef.not_idchar = l.join('');\n  risonRef.not_idstart = '-0123456789';\n\n  const idrx = `[^${risonRef.not_idstart}${risonRef.not_idchar}][^${risonRef.not_idchar}]*`;\n\n  risonRef.id_ok = new RegExp(`^${idrx}$`);\n  risonRef.next_id = new RegExp(idrx, 'g');\n})();\n\nexport const Actions = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst createFetchResourceMethod =\n  (method: string) =>\n  (\n    resource: string,\n    relation: string,\n    handleError: (error: Response) => void,\n    user?: { userId: string | number; firstName: string; lastName: string },\n  ) =>\n  async (filterValue = '', page: number, pageSize: number) => {\n    const resourceEndpoint = `/api/v1/${resource}/${method}/${relation}`;\n    const queryParams = rison.encode_uri({\n      filter: filterValue,\n      page,\n      page_size: pageSize,\n    });\n    const { json = {} } = await SupersetClient.get({\n      endpoint: `${resourceEndpoint}?q=${queryParams}`,\n    });\n\n    let fetchedLoggedUser = false;\n    const loggedUser = user\n      ? {\n          label: `${user.firstName} ${user.lastName}`,\n          value: user.userId,\n        }\n      : undefined;\n\n    const data: { label: string; value: string | number }[] = [];\n    json?.result\n      ?.filter(({ text }: { text: string }) => text.trim().length > 0)\n      .forEach(({ text, value }: { text: string; value: string | number }) => {\n        if (\n          loggedUser &&\n          value === loggedUser.value &&\n          text === loggedUser.label\n        ) {\n          fetchedLoggedUser = true;\n        } else {\n          data.push({\n            label: text,\n            value,\n          });\n        }\n      });\n\n    if (loggedUser && (!filterValue || fetchedLoggedUser)) {\n      data.unshift(loggedUser);\n    }\n\n    return {\n      data,\n      totalCount: json?.count,\n    };\n  };\n\nexport const PAGE_SIZE = 5;\nconst getParams = (filters?: Filter[], selectColumns?: string[]) => {\n  const params = {\n    order_column: 'changed_on_delta_humanized',\n    order_direction: 'desc',\n    page: 0,\n    page_size: PAGE_SIZE,\n    filters,\n    select_columns: selectColumns,\n  };\n  if (!filters) delete params.filters;\n  if (!selectColumns) delete params.select_columns;\n  return rison.encode(params);\n};\n\nexport const getEditedObjects = (userId: string | number) => {\n  const filters = {\n    edited: [\n      {\n        col: 'changed_by',\n        opr: 'rel_o_m',\n        value: `${userId}`,\n      },\n    ],\n  };\n  const batch = [\n    SupersetClient.get({\n      endpoint: `/api/v1/dashboard/?q=${getParams(filters.edited)}`,\n    }),\n    SupersetClient.get({\n      endpoint: `/api/v1/chart/?q=${getParams(filters.edited)}`,\n    }),\n  ];\n  return Promise.all(batch)\n    .then(([editedCharts, editedDashboards]) => {\n      const res = {\n        editedDash: editedDashboards.json?.result.slice(0, 3),\n        editedChart: editedCharts.json?.result.slice(0, 3),\n      };\n      return res;\n    })\n    .catch(err => err);\n};\n\nexport const getUserOwnedObjects = (\n  userId: string | number,\n  resource: string,\n  filters: Filter[] = [\n    {\n      col: 'owners',\n      opr: 'rel_m_m',\n      value: `${userId}`,\n    },\n  ],\n  selectColumns?: string[],\n) =>\n  SupersetClient.get({\n    endpoint: `/api/v1/${resource}/?q=${getParams(filters, selectColumns)}`,\n  }).then(res => res.json?.result);\n\nexport const getFilteredChartsandDashboards = (\n  addDangerToast: (arg1: string, arg2: any) => any,\n  filters: Filter[],\n  dashboardSelectColumns?: string[],\n  chartSelectColumns?: string[],\n) => {\n  const newBatch = [\n    SupersetClient.get({\n      endpoint: `/api/v1/chart/?q=${getParams(filters, chartSelectColumns)}`,\n    }),\n    SupersetClient.get({\n      endpoint: `/api/v1/dashboard/?q=${getParams(\n        filters,\n        dashboardSelectColumns,\n      )}`,\n    }),\n  ];\n  return Promise.all(newBatch)\n    .then(([chartRes, dashboardRes]) => ({\n      other: [...chartRes.json.result, ...dashboardRes.json.result],\n    }))\n    .catch(errMsg => {\n      addDangerToast(\n        t('There was an error fetching the filtered charts and dashboards:'),\n        errMsg,\n      );\n      return { other: [] };\n    });\n};\n\nexport const getRecentActivityObjs = (\n  userId: string | number,\n  recent: string,\n  addDangerToast: (arg1: string, arg2: any) => any,\n  filters: Filter[],\n) =>\n  SupersetClient.get({ endpoint: recent }).then(recentsRes => {\n    const res: any = {};\n    const distinctRes = lruCache<RecentActivity>(6);\n    recentsRes.json.result.reverse().forEach((record: RecentActivity) => {\n      distinctRes.set(record.item_url, record);\n    });\n    return getFilteredChartsandDashboards(addDangerToast, filters).then(\n      ({ other }) => {\n        res.other = other;\n        res.viewed = distinctRes.values().reverse();\n        return res;\n      },\n    );\n  });\n\nexport const createFetchRelated = createFetchResourceMethod('related');\nexport const createFetchDistinct = createFetchResourceMethod('distinct');\n\nexport function createErrorHandler(\n  handleErrorFunc: (\n    errMsg?: string | Record<string, string[] | string>,\n  ) => void,\n) {\n  return async (e: SupersetClientResponse | string) => {\n    const parsedError = await getClientErrorObject(e);\n    // Taking the first error returned from the API\n    // @ts-ignore\n    const errorsArray = parsedError?.errors;\n    const config = await SupersetText;\n    if (\n      errorsArray?.length &&\n      config?.ERRORS &&\n      errorsArray[0].error_type in config.ERRORS\n    ) {\n      parsedError.message = config.ERRORS[errorsArray[0].error_type];\n    }\n    logging.error(e);\n    handleErrorFunc(parsedError.message || parsedError.error);\n  };\n}\n\nexport function handleChartDelete(\n  { id, slice_name: sliceName }: Chart,\n  addSuccessToast: (arg0: string) => void,\n  addDangerToast: (arg0: string) => void,\n  refreshData: (arg0?: FetchDataConfig | null) => void,\n  chartFilter?: string,\n  userId?: string | number,\n) {\n  const filters = {\n    pageIndex: 0,\n    pageSize: PAGE_SIZE,\n    sortBy: [\n      {\n        id: 'changed_on_delta_humanized',\n        desc: true,\n      },\n    ],\n    filters: [\n      {\n        id: 'created_by',\n        operator: 'rel_o_m',\n        value: `${userId}`,\n      },\n    ],\n  };\n  SupersetClient.delete({\n    endpoint: `/api/v1/chart/${id}`,\n  }).then(\n    () => {\n      if (chartFilter === 'Mine') refreshData(filters);\n      else refreshData();\n      addSuccessToast(t('Deleted: %s', sliceName));\n    },\n    () => {\n      addDangerToast(t('There was an issue deleting: %s', sliceName));\n    },\n  );\n}\n\nexport function handleDashboardDelete(\n  { id, dashboard_title: dashboardTitle }: Dashboard,\n  refreshData: (config?: FetchDataConfig | null) => void,\n  addSuccessToast: (arg0: string) => void,\n  addDangerToast: (arg0: string) => void,\n  dashboardFilter?: string,\n  userId?: string | number,\n) {\n  return SupersetClient.delete({\n    endpoint: `/api/v1/dashboard/${id}`,\n  }).then(\n    () => {\n      const filters = {\n        pageIndex: 0,\n        pageSize: PAGE_SIZE,\n        sortBy: [\n          {\n            id: 'changed_on_delta_humanized',\n            desc: true,\n          },\n        ],\n        filters: [\n          {\n            id: 'owners',\n            operator: 'rel_m_m',\n            value: `${userId}`,\n          },\n        ],\n      };\n      if (dashboardFilter === 'Mine') refreshData(filters);\n      else refreshData();\n      addSuccessToast(t('Deleted: %s', dashboardTitle));\n    },\n    createErrorHandler(errMsg =>\n      addDangerToast(\n        t('There was an issue deleting %s: %s', dashboardTitle, errMsg),\n      ),\n    ),\n  );\n}\n\nexport function shortenSQL(sql: string, maxLines: number) {\n  let lines: string[] = sql.split('\\n');\n  if (lines.length >= maxLines) {\n    lines = lines.slice(0, maxLines);\n    lines.push('...');\n  }\n  return lines.join('\\n');\n}\n\n// loading card count for homepage\nexport const loadingCardCount = 5;\n\nconst breakpoints = [576, 768, 992, 1200];\nexport const mq = breakpoints.map(bp => `@media (max-width: ${bp}px)`);\n\nexport const CardContainer = styled.div<{\n  showThumbnails?: boolean | undefined;\n}>`\n  ${({ showThumbnails, theme }) => `\n    overflow: hidden;\n    display: grid;\n    grid-gap: ${theme.gridUnit * 12}px ${theme.gridUnit * 4}px;\n    grid-template-columns: repeat(auto-fit, 300px);\n    max-height: ${showThumbnails ? '314' : '148'}px;\n    margin-top: ${theme.gridUnit * -6}px;\n    padding: ${\n      showThumbnails\n        ? `${theme.gridUnit * 8 + 3}px ${theme.gridUnit * 9}px`\n        : `${theme.gridUnit * 8 + 1}px ${theme.gridUnit * 9}px`\n    };\n  `}\n`;\n\nexport const CardStyles = styled.div`\n  cursor: pointer;\n  a {\n    text-decoration: none;\n  }\n  .antd5-card-cover > div {\n    /* Height is calculated based on 300px width, to keep the same aspect ratio as the 800*450 thumbnails */\n    height: 168px;\n  }\n`;\n\nexport /* eslint-disable no-underscore-dangle */\nconst isNeedsPassword = (payload: any) =>\n  typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!payload._schema?.find(\n    (e: string) => e === 'Must provide a password for the database',\n  );\n\nexport /* eslint-disable no-underscore-dangle */\nconst isNeedsSSHPassword = (payload: any) =>\n  typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!payload._schema?.find(\n    (e: string) => e === 'Must provide a password for the ssh tunnel',\n  );\n\nexport /* eslint-disable no-underscore-dangle */\nconst isNeedsSSHPrivateKey = (payload: any) =>\n  typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!payload._schema?.find(\n    (e: string) => e === 'Must provide a private key for the ssh tunnel',\n  );\n\nexport /* eslint-disable no-underscore-dangle */\nconst isNeedsSSHPrivateKeyPassword = (payload: any) =>\n  typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!payload._schema?.find(\n    (e: string) =>\n      e === 'Must provide a private key password for the ssh tunnel',\n  );\n\nexport const isAlreadyExists = (payload: any) =>\n  typeof payload === 'string' &&\n  payload.includes('already exists and `overwrite=true` was not passed');\n\nexport const getPasswordsNeeded = (errors: Record<string, any>[]) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isNeedsPassword(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const getSSHPasswordsNeeded = (errors: Record<string, any>[]) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isNeedsSSHPassword(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const getSSHPrivateKeysNeeded = (errors: Record<string, any>[]) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isNeedsSSHPrivateKey(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const getSSHPrivateKeyPasswordsNeeded = (\n  errors: Record<string, any>[],\n) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isNeedsSSHPrivateKeyPassword(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const getAlreadyExists = (errors: Record<string, any>[]) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isAlreadyExists(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const hasTerminalValidation = (errors: Record<string, any>[]) =>\n  errors.some(error => {\n    const noIssuesCodes = Object.entries(error.extra).filter(\n      ([key]) => key !== 'issue_codes',\n    );\n\n    if (noIssuesCodes.length === 0) return true;\n\n    return !noIssuesCodes.every(\n      ([, payload]) =>\n        isNeedsPassword(payload) ||\n        isAlreadyExists(payload) ||\n        isNeedsSSHPassword(payload) ||\n        isNeedsSSHPrivateKey(payload) ||\n        isNeedsSSHPrivateKeyPassword(payload),\n    );\n  });\n\nexport const checkUploadExtensions = (\n  perm: Array<string>,\n  cons: Array<string>,\n) => {\n  if (perm !== undefined) {\n    return intersection(perm, cons).length > 0;\n  }\n  return false;\n};\n\nexport const uploadUserPerms = (\n  roles: Record<string, [string, string][]>,\n  csvExt: Array<string>,\n  colExt: Array<string>,\n  excelExt: Array<string>,\n  allowedExt: Array<string>,\n) => {\n  const canUploadCSV =\n    findPermission('can_upload', 'Database', roles) &&\n    checkUploadExtensions(csvExt, allowedExt);\n  const canUploadColumnar =\n    checkUploadExtensions(colExt, allowedExt) &&\n    findPermission('can_upload', 'Database', roles);\n  const canUploadExcel =\n    checkUploadExtensions(excelExt, allowedExt) &&\n    findPermission('can_upload', 'Database', roles);\n  return {\n    canUploadCSV,\n    canUploadColumnar,\n    canUploadExcel,\n    canUploadData: canUploadCSV || canUploadColumnar || canUploadExcel,\n  };\n};\n\nexport function getFilterValues(\n  tab: TableTab,\n  welcomeTable: WelcomeTable,\n  user?: User,\n  otherTabFilters?: Filter[],\n): FilterValue[] {\n  if (\n    tab === TableTab.Created ||\n    (welcomeTable === WelcomeTable.SavedQueries && tab === TableTab.Mine)\n  ) {\n    return [\n      {\n        id: 'created_by',\n        operator: 'rel_o_m',\n        value: `${user?.userId}`,\n      },\n    ];\n  }\n  if (welcomeTable === WelcomeTable.SavedQueries && tab === TableTab.Favorite) {\n    return [\n      {\n        id: 'id',\n        operator: 'saved_query_is_fav',\n        value: true,\n      },\n    ];\n  }\n  if (tab === TableTab.Mine && user) {\n    return [\n      {\n        id: 'owners',\n        operator: 'rel_m_m',\n        value: `${user.userId}`,\n      },\n    ];\n  }\n  if (\n    tab === TableTab.Favorite &&\n    [WelcomeTable.Dashboards, WelcomeTable.Charts].includes(welcomeTable)\n  ) {\n    return [\n      {\n        id: 'id',\n        operator:\n          welcomeTable === WelcomeTable.Dashboards\n            ? 'dashboard_is_favorite'\n            : 'chart_is_favorite',\n        value: true,\n      },\n    ];\n  }\n  if (tab === TableTab.Other) {\n    return (otherTabFilters || []).map(flt => ({\n      id: flt.col,\n      operator: flt.opr,\n      value: flt.value,\n    }));\n  }\n  return [];\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}