{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport d3 from 'd3';\nimport d3tip from 'd3-tip';\nimport dompurify from 'dompurify';\nimport {\n  SMART_DATE_ID,\n  getTimeFormatter,\n  getNumberFormatter } from\n'@superset-ui/core';\n// Regexp for the label added to time shifted series\n// (1 hour offset, 2 days offset, etc.)\nconst TIME_SHIFT_PATTERN = /\\d+ \\w+ offset/;\n\nconst ANIMATION_TIME = 1000;\n\nexport function cleanColorInput(value) {\n  // for superset series that should have the same color\n  return String(value).\n  trim().\n  replace(' (right axis)', '').\n  split(', ').\n  filter((k) => !TIME_SHIFT_PATTERN.test(k)).\n  join(', ');\n}\n\n/**\n * If format is smart_date, format date\n * Otherwise, format number with the given format name\n * @param {*} format\n */\nexport function getTimeOrNumberFormatter(format) {\n  return format === SMART_DATE_ID ?\n  getTimeFormatter(SMART_DATE_ID) :\n  getNumberFormatter(format);\n}\n\nexport function drawBarValues(svg, data, stacked, axisFormat) {\n  const format = getNumberFormatter(axisFormat);\n  const countSeriesDisplayed = data.filter((d) => !d.disabled).length;\n  const totalStackedValues =\n  stacked && data.length !== 0 ?\n  data[0].values.map((bar, iBar) => {\n    const bars = data.\n    filter((series) => !series.disabled).\n    map((series) => series.values[iBar]);\n\n    return d3.sum(bars, (d) => d.y);\n  }) :\n  [];\n  svg.selectAll('.bar-chart-label-group').remove();\n  setTimeout(() => {\n    svg.selectAll('.bar-chart-label-group').remove();\n    const groupLabels = svg.\n    select('g.nv-barsWrap').\n    append('g').\n    attr('class', 'bar-chart-label-group');\n    svg.\n    selectAll('g.nv-group').\n    filter((d, i) => !stacked || i === countSeriesDisplayed - 1).\n    selectAll('rect').\n    each(function each(d, index) {\n      const rectObj = d3.select(this);\n      const transformAttr = rectObj.attr('transform');\n      const xPos = parseFloat(rectObj.attr('x'));\n      const yPos = parseFloat(rectObj.attr('y'));\n      const rectWidth = parseFloat(rectObj.attr('width'));\n      const rectHeight = parseFloat(rectObj.attr('height'));\n      const textEls = groupLabels.\n      append('text').\n      text(format(stacked ? totalStackedValues[index] : d.y)).\n      attr('transform', transformAttr).\n      attr('class', 'bar-chart-label');\n\n      // fine tune text position\n      const bbox = textEls.node().getBBox();\n      const labelWidth = bbox.width;\n      const labelHeight = bbox.height;\n      textEls.attr('x', xPos + rectWidth / 2 - labelWidth / 2);\n      if (rectObj.attr('class').includes('positive')) {\n        textEls.attr('y', yPos - 5);\n      } else {\n        textEls.attr('y', yPos + rectHeight + labelHeight);\n      }\n    });\n  }, ANIMATION_TIME);\n}\n\n// Formats the series key to account for a possible NULL value\nfunction getFormattedKey(seriesKey, shouldDompurify) {\n  if (seriesKey === '<NULL>') {\n    return `&lt;${seriesKey.slice(1, -1)}&gt;`;\n  }\n\n  return shouldDompurify ? dompurify.sanitize(seriesKey) : seriesKey;\n}\n\nexport function generateCompareTooltipContent(d, valueFormatter) {\n  let tooltip = '';\n  tooltip +=\n  \"<table><thead><tr><td colspan='3'>\" +\n  `<strong class='x-value'>${d.value}</strong>` +\n  '</td></tr></thead><tbody>';\n  d.series.sort((a, b) => a.value >= b.value ? -1 : 1);\n  d.series.forEach((series) => {\n    const key = getFormattedKey(series.key, true);\n    tooltip +=\n    `<tr class=\"${series.highlight ? 'emph' : ''}\">` +\n    `<td class='legend-color-guide' style=\"opacity: ${\n    series.highlight ? '1' : '0.75'};\"\">` +\n\n    '<div ' +\n    `style=\"border: 2px solid ${\n    series.highlight ? 'black' : 'transparent'}; background-color: ${\n    series.color};\"` +\n    '></div>' +\n    '</td>' +\n    `<td>${key}</td>` +\n    `<td>${valueFormatter(series.value)}</td>` +\n    '</tr>';\n  });\n  tooltip += '</tbody></table>';\n\n  return dompurify.sanitize(tooltip);\n}\n\nexport function generateMultiLineTooltipContent(d, xFormatter, yFormatters) {\n  const tooltipTitle = xFormatter(d.value);\n  let tooltip = '';\n\n  tooltip +=\n  \"<table><thead><tr><td colspan='3'>\" +\n  `<strong class='x-value'>${tooltipTitle}</strong>` +\n  '</td></tr></thead><tbody>';\n\n  d.series.forEach((series, i) => {\n    const yFormatter = yFormatters[i];\n    const key = getFormattedKey(series.key, false);\n    tooltip +=\n    \"<tr><td class='legend-color-guide'>\" +\n    `<div style=\"background-color: ${series.color};\"></div></td>` +\n    `<td class='key'>${key}</td>` +\n    `<td class='value'>${yFormatter(series.value)}</td></tr>`;\n  });\n\n  tooltip += '</tbody></table>';\n\n  return tooltip;\n}\n\nexport function generateTimePivotTooltip(d, xFormatter, yFormatter) {\n  const tooltipTitle = xFormatter(d.value);\n  let tooltip = '';\n\n  tooltip +=\n  \"<table><thead><tr><td colspan='3'>\" +\n  `<strong class='x-value'>${tooltipTitle}</strong>` +\n  '</td></tr></thead><tbody>';\n\n  d.series.forEach((series) => {\n    if (series.highlight) {\n      let label = '';\n      if (series.key === 'current') {\n        label = series.key;\n      } else {\n        label = `${series.key} of the selected frequency:`;\n      }\n      tooltip +=\n      \"<tr><td class='legend-color-guide'>\" +\n      `<div style=\"background-color: ${series.color};\"></div></td>` +\n      `<td class='key'>${label}</td>` +\n      `<td class='value'>${yFormatter(series.value)}</td></tr>`;\n    }\n  });\n\n  tooltip += '</tbody></table>';\n\n  return dompurify.sanitize(tooltip);\n}\n\nfunction getLabel(stringOrObjectWithLabel) {\n  return stringOrObjectWithLabel.label || stringOrObjectWithLabel;\n}\n\nfunction createHTMLRow(col1, col2) {\n  return `<tr><td>${col1}</td><td>${col2}</td></tr>`;\n}\n\nexport function generateBubbleTooltipContent({\n  point,\n  entity,\n  xField,\n  yField,\n  sizeField,\n  xFormatter,\n  yFormatter,\n  sizeFormatter\n}) {\n  let s = '<table>';\n  s +=\n  `<tr><td style=\"color: ${point.color};\">` +\n  `<strong>${point[entity]}</strong> (${point.group})` +\n  '</td></tr>';\n  s += createHTMLRow(getLabel(xField), xFormatter(point.x));\n  s += createHTMLRow(getLabel(yField), yFormatter(point.y));\n  s += createHTMLRow(getLabel(sizeField), sizeFormatter(point.size));\n  s += '</table>';\n\n  return s;\n}\n\n// shouldRemove indicates whether the nvtooltips should be removed from the DOM\nexport function hideTooltips(shouldRemove) {\n  const targets = document.querySelectorAll('.nvtooltip');\n  if (targets.length > 0) {\n    // Only set opacity to 0 when hiding tooltips so they would reappear\n    // on hover, which sets the opacity to 1\n    targets.forEach((t) => {\n      if (shouldRemove) {\n        t.remove();\n      } else {\n        // eslint-disable-next-line no-param-reassign\n        t.style.opacity = 0;\n      }\n    });\n  }\n}\n\nexport function generateTooltipClassName(uuid) {\n  return `tooltip-${uuid}`;\n}\n\nexport function removeTooltip(uuid) {\n  const classSelector = `.${generateTooltipClassName(uuid)}`;\n  const target = document.querySelector(classSelector);\n  if (target) {\n    target.remove();\n  }\n}\n\nexport function wrapTooltip(chart) {\n  const tooltipLayer =\n  chart.useInteractiveGuideline && chart.useInteractiveGuideline() ?\n  chart.interactiveLayer :\n  chart;\n  const tooltipGeneratorFunc = tooltipLayer.tooltip.contentGenerator();\n  tooltipLayer.tooltip.contentGenerator((d) => {\n    let tooltip = `<div>`;\n    tooltip += tooltipGeneratorFunc(d);\n    tooltip += '</div>';\n\n    return tooltip;\n  });\n}__signature__(wrapTooltip, \"useInteractiveGuideline{}\");\n\nexport function tipFactory(layer) {\n  return d3tip().\n  attr('class', `d3-tip ${layer.annotationTipClass || ''}`).\n  direction('n').\n  offset([-5, 0]).\n  html((d) => {\n    if (!d) {\n      return '';\n    }\n    const title =\n    d[layer.titleColumn] && d[layer.titleColumn].length > 0 ?\n    `${d[layer.titleColumn]} - ${layer.name}` :\n    layer.name;\n    const body = Array.isArray(layer.descriptionColumns) ?\n    layer.descriptionColumns.map((c) => d[c]) :\n    Object.values(d);\n\n    return `<div><strong>${title}</strong></div><br/><div>${body.join(\n      ', '\n    )}</div>`;\n  });\n}\n\nexport function getMaxLabelSize(svg, axisClass) {\n  // axis class = .nv-y2  // second y axis on dual line chart\n  // axis class = .nv-x  // x axis on time series line chart\n  const tickTexts = svg.selectAll(`.${axisClass} g.tick text`);\n  if (tickTexts.length > 0) {\n    const lengths = tickTexts[0].map((text) => text.getComputedTextLength());\n\n    return Math.ceil(Math.max(0, ...lengths));\n  }\n\n  return 0;\n}\n\nexport function formatLabel(input, verboseMap = {}) {\n  // The input for label may be a string or an array of string\n  // When using the time shift feature, the label contains a '---' in the array\n  const verboseLookup = (s) => verboseMap[s] || s;\n\n  return Array.isArray(input) && input.length > 0 ?\n  input.\n  map((l) => TIME_SHIFT_PATTERN.test(l) ? l : verboseLookup(l)).\n  join(', ') :\n  verboseLookup(input);\n}\n\nexport function stringifyTimeRange(extent) {\n  if (extent.some((d) => d.toISOString === undefined)) {\n    return null;\n  }\n\n  return extent.map((d) => d.toISOString().slice(0, -1)).join(' : ');\n}\n\nexport function setAxisShowMaxMin(axis, showminmax) {\n  if (axis && axis.showMaxMin && showminmax !== undefined) {\n    axis.showMaxMin(showminmax);\n  }\n}\n\nexport function computeYDomain(data) {\n  if (Array.isArray(data) && data.length > 0 && Array.isArray(data[0].values)) {\n    const extents = data.\n    filter((d) => !d.disabled).\n    map((row) => d3.extent(row.values, (v) => v.y));\n    const minOfMin = d3.min(extents, ([min]) => min);\n    const maxOfMax = d3.max(extents, ([, max]) => max);\n\n    return [minOfMin, maxOfMax];\n  }\n\n  return [0, 1];\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TIME_SHIFT_PATTERN, \"TIME_SHIFT_PATTERN\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(ANIMATION_TIME, \"ANIMATION_TIME\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(cleanColorInput, \"cleanColorInput\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(getTimeOrNumberFormatter, \"getTimeOrNumberFormatter\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(drawBarValues, \"drawBarValues\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(getFormattedKey, \"getFormattedKey\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(generateCompareTooltipContent, \"generateCompareTooltipContent\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(generateMultiLineTooltipContent, \"generateMultiLineTooltipContent\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(generateTimePivotTooltip, \"generateTimePivotTooltip\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(getLabel, \"getLabel\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(createHTMLRow, \"createHTMLRow\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(generateBubbleTooltipContent, \"generateBubbleTooltipContent\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(hideTooltips, \"hideTooltips\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(generateTooltipClassName, \"generateTooltipClassName\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(removeTooltip, \"removeTooltip\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(wrapTooltip, \"wrapTooltip\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(tipFactory, \"tipFactory\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(getMaxLabelSize, \"getMaxLabelSize\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(formatLabel, \"formatLabel\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(stringifyTimeRange, \"stringifyTimeRange\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(setAxisShowMaxMin, \"setAxisShowMaxMin\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");reactHotLoader.register(computeYDomain, \"computeYDomain\", \"/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["d3","d3tip","dompurify","SMART_DATE_ID","getTimeFormatter","getNumberFormatter","TIME_SHIFT_PATTERN","ANIMATION_TIME","cleanColorInput","value","String","trim","replace","split","filter","k","test","join","getTimeOrNumberFormatter","format","drawBarValues","svg","data","stacked","axisFormat","countSeriesDisplayed","d","disabled","length","totalStackedValues","values","map","bar","iBar","bars","series","sum","y","selectAll","remove","setTimeout","groupLabels","select","append","attr","i","each","index","rectObj","transformAttr","xPos","parseFloat","yPos","rectWidth","rectHeight","textEls","text","bbox","node","getBBox","labelWidth","width","labelHeight","height","includes","getFormattedKey","seriesKey","shouldDompurify","slice","sanitize","generateCompareTooltipContent","valueFormatter","tooltip","sort","a","b","forEach","key","highlight","color","generateMultiLineTooltipContent","xFormatter","yFormatters","tooltipTitle","yFormatter","generateTimePivotTooltip","label","getLabel","stringOrObjectWithLabel","createHTMLRow","col1","col2","generateBubbleTooltipContent","point","entity","xField","yField","sizeField","sizeFormatter","s","group","x","size","hideTooltips","shouldRemove","targets","document","querySelectorAll","t","style","opacity","generateTooltipClassName","uuid","removeTooltip","classSelector","target","querySelector","wrapTooltip","chart","tooltipLayer","useInteractiveGuideline","interactiveLayer","tooltipGeneratorFunc","contentGenerator","__signature__","tipFactory","layer","annotationTipClass","direction","offset","html","title","titleColumn","name","body","Array","isArray","descriptionColumns","c","Object","getMaxLabelSize","axisClass","tickTexts","lengths","getComputedTextLength","Math","ceil","max","formatLabel","input","verboseMap","verboseLookup","l","stringifyTimeRange","extent","some","toISOString","undefined","setAxisShowMaxMin","axis","showminmax","showMaxMin","computeYDomain","extents","row","v","minOfMin","min","maxOfMax","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/plugins/legacy-preset-chart-nvd3/src/utils.js"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport d3 from 'd3';\nimport d3tip from 'd3-tip';\nimport dompurify from 'dompurify';\nimport {\n  SMART_DATE_ID,\n  getTimeFormatter,\n  getNumberFormatter,\n} from '@superset-ui/core';\n// Regexp for the label added to time shifted series\n// (1 hour offset, 2 days offset, etc.)\nconst TIME_SHIFT_PATTERN = /\\d+ \\w+ offset/;\n\nconst ANIMATION_TIME = 1000;\n\nexport function cleanColorInput(value) {\n  // for superset series that should have the same color\n  return String(value)\n    .trim()\n    .replace(' (right axis)', '')\n    .split(', ')\n    .filter(k => !TIME_SHIFT_PATTERN.test(k))\n    .join(', ');\n}\n\n/**\n * If format is smart_date, format date\n * Otherwise, format number with the given format name\n * @param {*} format\n */\nexport function getTimeOrNumberFormatter(format) {\n  return format === SMART_DATE_ID\n    ? getTimeFormatter(SMART_DATE_ID)\n    : getNumberFormatter(format);\n}\n\nexport function drawBarValues(svg, data, stacked, axisFormat) {\n  const format = getNumberFormatter(axisFormat);\n  const countSeriesDisplayed = data.filter(d => !d.disabled).length;\n  const totalStackedValues =\n    stacked && data.length !== 0\n      ? data[0].values.map((bar, iBar) => {\n          const bars = data\n            .filter(series => !series.disabled)\n            .map(series => series.values[iBar]);\n\n          return d3.sum(bars, d => d.y);\n        })\n      : [];\n  svg.selectAll('.bar-chart-label-group').remove();\n  setTimeout(() => {\n    svg.selectAll('.bar-chart-label-group').remove();\n    const groupLabels = svg\n      .select('g.nv-barsWrap')\n      .append('g')\n      .attr('class', 'bar-chart-label-group');\n    svg\n      .selectAll('g.nv-group')\n      .filter((d, i) => !stacked || i === countSeriesDisplayed - 1)\n      .selectAll('rect')\n      .each(function each(d, index) {\n        const rectObj = d3.select(this);\n        const transformAttr = rectObj.attr('transform');\n        const xPos = parseFloat(rectObj.attr('x'));\n        const yPos = parseFloat(rectObj.attr('y'));\n        const rectWidth = parseFloat(rectObj.attr('width'));\n        const rectHeight = parseFloat(rectObj.attr('height'));\n        const textEls = groupLabels\n          .append('text')\n          .text(format(stacked ? totalStackedValues[index] : d.y))\n          .attr('transform', transformAttr)\n          .attr('class', 'bar-chart-label');\n\n        // fine tune text position\n        const bbox = textEls.node().getBBox();\n        const labelWidth = bbox.width;\n        const labelHeight = bbox.height;\n        textEls.attr('x', xPos + rectWidth / 2 - labelWidth / 2);\n        if (rectObj.attr('class').includes('positive')) {\n          textEls.attr('y', yPos - 5);\n        } else {\n          textEls.attr('y', yPos + rectHeight + labelHeight);\n        }\n      });\n  }, ANIMATION_TIME);\n}\n\n// Formats the series key to account for a possible NULL value\nfunction getFormattedKey(seriesKey, shouldDompurify) {\n  if (seriesKey === '<NULL>') {\n    return `&lt;${seriesKey.slice(1, -1)}&gt;`;\n  }\n\n  return shouldDompurify ? dompurify.sanitize(seriesKey) : seriesKey;\n}\n\nexport function generateCompareTooltipContent(d, valueFormatter) {\n  let tooltip = '';\n  tooltip +=\n    \"<table><thead><tr><td colspan='3'>\" +\n    `<strong class='x-value'>${d.value}</strong>` +\n    '</td></tr></thead><tbody>';\n  d.series.sort((a, b) => (a.value >= b.value ? -1 : 1));\n  d.series.forEach(series => {\n    const key = getFormattedKey(series.key, true);\n    tooltip +=\n      `<tr class=\"${series.highlight ? 'emph' : ''}\">` +\n      `<td class='legend-color-guide' style=\"opacity: ${\n        series.highlight ? '1' : '0.75'\n      };\"\">` +\n      '<div ' +\n      `style=\"border: 2px solid ${\n        series.highlight ? 'black' : 'transparent'\n      }; background-color: ${series.color};\"` +\n      '></div>' +\n      '</td>' +\n      `<td>${key}</td>` +\n      `<td>${valueFormatter(series.value)}</td>` +\n      '</tr>';\n  });\n  tooltip += '</tbody></table>';\n\n  return dompurify.sanitize(tooltip);\n}\n\nexport function generateMultiLineTooltipContent(d, xFormatter, yFormatters) {\n  const tooltipTitle = xFormatter(d.value);\n  let tooltip = '';\n\n  tooltip +=\n    \"<table><thead><tr><td colspan='3'>\" +\n    `<strong class='x-value'>${tooltipTitle}</strong>` +\n    '</td></tr></thead><tbody>';\n\n  d.series.forEach((series, i) => {\n    const yFormatter = yFormatters[i];\n    const key = getFormattedKey(series.key, false);\n    tooltip +=\n      \"<tr><td class='legend-color-guide'>\" +\n      `<div style=\"background-color: ${series.color};\"></div></td>` +\n      `<td class='key'>${key}</td>` +\n      `<td class='value'>${yFormatter(series.value)}</td></tr>`;\n  });\n\n  tooltip += '</tbody></table>';\n\n  return tooltip;\n}\n\nexport function generateTimePivotTooltip(d, xFormatter, yFormatter) {\n  const tooltipTitle = xFormatter(d.value);\n  let tooltip = '';\n\n  tooltip +=\n    \"<table><thead><tr><td colspan='3'>\" +\n    `<strong class='x-value'>${tooltipTitle}</strong>` +\n    '</td></tr></thead><tbody>';\n\n  d.series.forEach(series => {\n    if (series.highlight) {\n      let label = '';\n      if (series.key === 'current') {\n        label = series.key;\n      } else {\n        label = `${series.key} of the selected frequency:`;\n      }\n      tooltip +=\n        \"<tr><td class='legend-color-guide'>\" +\n        `<div style=\"background-color: ${series.color};\"></div></td>` +\n        `<td class='key'>${label}</td>` +\n        `<td class='value'>${yFormatter(series.value)}</td></tr>`;\n    }\n  });\n\n  tooltip += '</tbody></table>';\n\n  return dompurify.sanitize(tooltip);\n}\n\nfunction getLabel(stringOrObjectWithLabel) {\n  return stringOrObjectWithLabel.label || stringOrObjectWithLabel;\n}\n\nfunction createHTMLRow(col1, col2) {\n  return `<tr><td>${col1}</td><td>${col2}</td></tr>`;\n}\n\nexport function generateBubbleTooltipContent({\n  point,\n  entity,\n  xField,\n  yField,\n  sizeField,\n  xFormatter,\n  yFormatter,\n  sizeFormatter,\n}) {\n  let s = '<table>';\n  s +=\n    `<tr><td style=\"color: ${point.color};\">` +\n    `<strong>${point[entity]}</strong> (${point.group})` +\n    '</td></tr>';\n  s += createHTMLRow(getLabel(xField), xFormatter(point.x));\n  s += createHTMLRow(getLabel(yField), yFormatter(point.y));\n  s += createHTMLRow(getLabel(sizeField), sizeFormatter(point.size));\n  s += '</table>';\n\n  return s;\n}\n\n// shouldRemove indicates whether the nvtooltips should be removed from the DOM\nexport function hideTooltips(shouldRemove) {\n  const targets = document.querySelectorAll('.nvtooltip');\n  if (targets.length > 0) {\n    // Only set opacity to 0 when hiding tooltips so they would reappear\n    // on hover, which sets the opacity to 1\n    targets.forEach(t => {\n      if (shouldRemove) {\n        t.remove();\n      } else {\n        // eslint-disable-next-line no-param-reassign\n        t.style.opacity = 0;\n      }\n    });\n  }\n}\n\nexport function generateTooltipClassName(uuid) {\n  return `tooltip-${uuid}`;\n}\n\nexport function removeTooltip(uuid) {\n  const classSelector = `.${generateTooltipClassName(uuid)}`;\n  const target = document.querySelector(classSelector);\n  if (target) {\n    target.remove();\n  }\n}\n\nexport function wrapTooltip(chart) {\n  const tooltipLayer =\n    chart.useInteractiveGuideline && chart.useInteractiveGuideline()\n      ? chart.interactiveLayer\n      : chart;\n  const tooltipGeneratorFunc = tooltipLayer.tooltip.contentGenerator();\n  tooltipLayer.tooltip.contentGenerator(d => {\n    let tooltip = `<div>`;\n    tooltip += tooltipGeneratorFunc(d);\n    tooltip += '</div>';\n\n    return tooltip;\n  });\n}\n\nexport function tipFactory(layer) {\n  return d3tip()\n    .attr('class', `d3-tip ${layer.annotationTipClass || ''}`)\n    .direction('n')\n    .offset([-5, 0])\n    .html(d => {\n      if (!d) {\n        return '';\n      }\n      const title =\n        d[layer.titleColumn] && d[layer.titleColumn].length > 0\n          ? `${d[layer.titleColumn]} - ${layer.name}`\n          : layer.name;\n      const body = Array.isArray(layer.descriptionColumns)\n        ? layer.descriptionColumns.map(c => d[c])\n        : Object.values(d);\n\n      return `<div><strong>${title}</strong></div><br/><div>${body.join(\n        ', ',\n      )}</div>`;\n    });\n}\n\nexport function getMaxLabelSize(svg, axisClass) {\n  // axis class = .nv-y2  // second y axis on dual line chart\n  // axis class = .nv-x  // x axis on time series line chart\n  const tickTexts = svg.selectAll(`.${axisClass} g.tick text`);\n  if (tickTexts.length > 0) {\n    const lengths = tickTexts[0].map(text => text.getComputedTextLength());\n\n    return Math.ceil(Math.max(0, ...lengths));\n  }\n\n  return 0;\n}\n\nexport function formatLabel(input, verboseMap = {}) {\n  // The input for label may be a string or an array of string\n  // When using the time shift feature, the label contains a '---' in the array\n  const verboseLookup = s => verboseMap[s] || s;\n\n  return Array.isArray(input) && input.length > 0\n    ? input\n        .map(l => (TIME_SHIFT_PATTERN.test(l) ? l : verboseLookup(l)))\n        .join(', ')\n    : verboseLookup(input);\n}\n\nexport function stringifyTimeRange(extent) {\n  if (extent.some(d => d.toISOString === undefined)) {\n    return null;\n  }\n\n  return extent.map(d => d.toISOString().slice(0, -1)).join(' : ');\n}\n\nexport function setAxisShowMaxMin(axis, showminmax) {\n  if (axis && axis.showMaxMin && showminmax !== undefined) {\n    axis.showMaxMin(showminmax);\n  }\n}\n\nexport function computeYDomain(data) {\n  if (Array.isArray(data) && data.length > 0 && Array.isArray(data[0].values)) {\n    const extents = data\n      .filter(d => !d.disabled)\n      .map(row => d3.extent(row.values, v => v.y));\n    const minOfMin = d3.min(extents, ([min]) => min);\n    const maxOfMax = d3.max(extents, ([, max]) => max);\n\n    return [minOfMin, maxOfMax];\n  }\n\n  return [0, 1];\n}\n"],"mappings":"wSAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,EAAE,MAAM,IAAI;AACnB,OAAOC,KAAK,MAAM,QAAQ;AAC1B,OAAOC,SAAS,MAAM,WAAW;AACjC;EACEC,aAAa;EACbC,gBAAgB;EAChBC,kBAAkB;AACb,mBAAmB;AAC1B;AACA;AACA,MAAMC,kBAAkB,GAAG,gBAAgB;;AAE3C,MAAMC,cAAc,GAAG,IAAI;;AAE3B,OAAO,SAASC,eAAeA,CAACC,KAAK,EAAE;EACrC;EACA,OAAOC,MAAM,CAACD,KAAK,CAAC;EACjBE,IAAI,CAAC,CAAC;EACNC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC;EAC5BC,KAAK,CAAC,IAAI,CAAC;EACXC,MAAM,CAAC,CAAAC,CAAC,KAAI,CAACT,kBAAkB,CAACU,IAAI,CAACD,CAAC,CAAC,CAAC;EACxCE,IAAI,CAAC,IAAI,CAAC;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,wBAAwBA,CAACC,MAAM,EAAE;EAC/C,OAAOA,MAAM,KAAKhB,aAAa;EAC3BC,gBAAgB,CAACD,aAAa,CAAC;EAC/BE,kBAAkB,CAACc,MAAM,CAAC;AAChC;;AAEA,OAAO,SAASC,aAAaA,CAACC,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAEC,UAAU,EAAE;EAC5D,MAAML,MAAM,GAAGd,kBAAkB,CAACmB,UAAU,CAAC;EAC7C,MAAMC,oBAAoB,GAAGH,IAAI,CAACR,MAAM,CAAC,CAAAY,CAAC,KAAI,CAACA,CAAC,CAACC,QAAQ,CAAC,CAACC,MAAM;EACjE,MAAMC,kBAAkB;EACtBN,OAAO,IAAID,IAAI,CAACM,MAAM,KAAK,CAAC;EACxBN,IAAI,CAAC,CAAC,CAAC,CAACQ,MAAM,CAACC,GAAG,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAK;IAChC,MAAMC,IAAI,GAAGZ,IAAI;IACdR,MAAM,CAAC,CAAAqB,MAAM,KAAI,CAACA,MAAM,CAACR,QAAQ,CAAC;IAClCI,GAAG,CAAC,CAAAI,MAAM,KAAIA,MAAM,CAACL,MAAM,CAACG,IAAI,CAAC,CAAC;;IAErC,OAAOjC,EAAE,CAACoC,GAAG,CAACF,IAAI,EAAE,CAAAR,CAAC,KAAIA,CAAC,CAACW,CAAC,CAAC;EAC/B,CAAC,CAAC;EACF,EAAE;EACRhB,GAAG,CAACiB,SAAS,CAAC,wBAAwB,CAAC,CAACC,MAAM,CAAC,CAAC;EAChDC,UAAU,CAAC,MAAM;IACfnB,GAAG,CAACiB,SAAS,CAAC,wBAAwB,CAAC,CAACC,MAAM,CAAC,CAAC;IAChD,MAAME,WAAW,GAAGpB,GAAG;IACpBqB,MAAM,CAAC,eAAe,CAAC;IACvBC,MAAM,CAAC,GAAG,CAAC;IACXC,IAAI,CAAC,OAAO,EAAE,uBAAuB,CAAC;IACzCvB,GAAG;IACAiB,SAAS,CAAC,YAAY,CAAC;IACvBxB,MAAM,CAAC,CAACY,CAAC,EAAEmB,CAAC,KAAK,CAACtB,OAAO,IAAIsB,CAAC,KAAKpB,oBAAoB,GAAG,CAAC,CAAC;IAC5Da,SAAS,CAAC,MAAM,CAAC;IACjBQ,IAAI,CAAC,SAASA,IAAIA,CAACpB,CAAC,EAAEqB,KAAK,EAAE;MAC5B,MAAMC,OAAO,GAAGhD,EAAE,CAAC0C,MAAM,CAAC,IAAI,CAAC;MAC/B,MAAMO,aAAa,GAAGD,OAAO,CAACJ,IAAI,CAAC,WAAW,CAAC;MAC/C,MAAMM,IAAI,GAAGC,UAAU,CAACH,OAAO,CAACJ,IAAI,CAAC,GAAG,CAAC,CAAC;MAC1C,MAAMQ,IAAI,GAAGD,UAAU,CAACH,OAAO,CAACJ,IAAI,CAAC,GAAG,CAAC,CAAC;MAC1C,MAAMS,SAAS,GAAGF,UAAU,CAACH,OAAO,CAACJ,IAAI,CAAC,OAAO,CAAC,CAAC;MACnD,MAAMU,UAAU,GAAGH,UAAU,CAACH,OAAO,CAACJ,IAAI,CAAC,QAAQ,CAAC,CAAC;MACrD,MAAMW,OAAO,GAAGd,WAAW;MACxBE,MAAM,CAAC,MAAM,CAAC;MACda,IAAI,CAACrC,MAAM,CAACI,OAAO,GAAGM,kBAAkB,CAACkB,KAAK,CAAC,GAAGrB,CAAC,CAACW,CAAC,CAAC,CAAC;MACvDO,IAAI,CAAC,WAAW,EAAEK,aAAa,CAAC;MAChCL,IAAI,CAAC,OAAO,EAAE,iBAAiB,CAAC;;MAEnC;MACA,MAAMa,IAAI,GAAGF,OAAO,CAACG,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;MACrC,MAAMC,UAAU,GAAGH,IAAI,CAACI,KAAK;MAC7B,MAAMC,WAAW,GAAGL,IAAI,CAACM,MAAM;MAC/BR,OAAO,CAACX,IAAI,CAAC,GAAG,EAAEM,IAAI,GAAGG,SAAS,GAAG,CAAC,GAAGO,UAAU,GAAG,CAAC,CAAC;MACxD,IAAIZ,OAAO,CAACJ,IAAI,CAAC,OAAO,CAAC,CAACoB,QAAQ,CAAC,UAAU,CAAC,EAAE;QAC9CT,OAAO,CAACX,IAAI,CAAC,GAAG,EAAEQ,IAAI,GAAG,CAAC,CAAC;MAC7B,CAAC,MAAM;QACLG,OAAO,CAACX,IAAI,CAAC,GAAG,EAAEQ,IAAI,GAAGE,UAAU,GAAGQ,WAAW,CAAC;MACpD;IACF,CAAC,CAAC;EACN,CAAC,EAAEvD,cAAc,CAAC;AACpB;;AAEA;AACA,SAAS0D,eAAeA,CAACC,SAAS,EAAEC,eAAe,EAAE;EACnD,IAAID,SAAS,KAAK,QAAQ,EAAE;IAC1B,OAAO,OAAOA,SAAS,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM;EAC5C;;EAEA,OAAOD,eAAe,GAAGjE,SAAS,CAACmE,QAAQ,CAACH,SAAS,CAAC,GAAGA,SAAS;AACpE;;AAEA,OAAO,SAASI,6BAA6BA,CAAC5C,CAAC,EAAE6C,cAAc,EAAE;EAC/D,IAAIC,OAAO,GAAG,EAAE;EAChBA,OAAO;EACL,oCAAoC;EACpC,2BAA2B9C,CAAC,CAACjB,KAAK,WAAW;EAC7C,2BAA2B;EAC7BiB,CAAC,CAACS,MAAM,CAACsC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAMD,CAAC,CAACjE,KAAK,IAAIkE,CAAC,CAAClE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAE,CAAC;EACtDiB,CAAC,CAACS,MAAM,CAACyC,OAAO,CAAC,CAAAzC,MAAM,KAAI;IACzB,MAAM0C,GAAG,GAAGZ,eAAe,CAAC9B,MAAM,CAAC0C,GAAG,EAAE,IAAI,CAAC;IAC7CL,OAAO;IACL,cAAcrC,MAAM,CAAC2C,SAAS,GAAG,MAAM,GAAG,EAAE,IAAI;IAChD;IACE3C,MAAM,CAAC2C,SAAS,GAAG,GAAG,GAAG,MAAM,MAC3B;;IACN,OAAO;IACP;IACE3C,MAAM,CAAC2C,SAAS,GAAG,OAAO,GAAG,aAAa;IACrB3C,MAAM,CAAC4C,KAAK,IAAI;IACvC,SAAS;IACT,OAAO;IACP,OAAOF,GAAG,OAAO;IACjB,OAAON,cAAc,CAACpC,MAAM,CAAC1B,KAAK,CAAC,OAAO;IAC1C,OAAO;EACX,CAAC,CAAC;EACF+D,OAAO,IAAI,kBAAkB;;EAE7B,OAAOtE,SAAS,CAACmE,QAAQ,CAACG,OAAO,CAAC;AACpC;;AAEA,OAAO,SAASQ,+BAA+BA,CAACtD,CAAC,EAAEuD,UAAU,EAAEC,WAAW,EAAE;EAC1E,MAAMC,YAAY,GAAGF,UAAU,CAACvD,CAAC,CAACjB,KAAK,CAAC;EACxC,IAAI+D,OAAO,GAAG,EAAE;;EAEhBA,OAAO;EACL,oCAAoC;EACpC,2BAA2BW,YAAY,WAAW;EAClD,2BAA2B;;EAE7BzD,CAAC,CAACS,MAAM,CAACyC,OAAO,CAAC,CAACzC,MAAM,EAAEU,CAAC,KAAK;IAC9B,MAAMuC,UAAU,GAAGF,WAAW,CAACrC,CAAC,CAAC;IACjC,MAAMgC,GAAG,GAAGZ,eAAe,CAAC9B,MAAM,CAAC0C,GAAG,EAAE,KAAK,CAAC;IAC9CL,OAAO;IACL,qCAAqC;IACrC,iCAAiCrC,MAAM,CAAC4C,KAAK,gBAAgB;IAC7D,mBAAmBF,GAAG,OAAO;IAC7B,qBAAqBO,UAAU,CAACjD,MAAM,CAAC1B,KAAK,CAAC,YAAY;EAC7D,CAAC,CAAC;;EAEF+D,OAAO,IAAI,kBAAkB;;EAE7B,OAAOA,OAAO;AAChB;;AAEA,OAAO,SAASa,wBAAwBA,CAAC3D,CAAC,EAAEuD,UAAU,EAAEG,UAAU,EAAE;EAClE,MAAMD,YAAY,GAAGF,UAAU,CAACvD,CAAC,CAACjB,KAAK,CAAC;EACxC,IAAI+D,OAAO,GAAG,EAAE;;EAEhBA,OAAO;EACL,oCAAoC;EACpC,2BAA2BW,YAAY,WAAW;EAClD,2BAA2B;;EAE7BzD,CAAC,CAACS,MAAM,CAACyC,OAAO,CAAC,CAAAzC,MAAM,KAAI;IACzB,IAAIA,MAAM,CAAC2C,SAAS,EAAE;MACpB,IAAIQ,KAAK,GAAG,EAAE;MACd,IAAInD,MAAM,CAAC0C,GAAG,KAAK,SAAS,EAAE;QAC5BS,KAAK,GAAGnD,MAAM,CAAC0C,GAAG;MACpB,CAAC,MAAM;QACLS,KAAK,GAAG,GAAGnD,MAAM,CAAC0C,GAAG,6BAA6B;MACpD;MACAL,OAAO;MACL,qCAAqC;MACrC,iCAAiCrC,MAAM,CAAC4C,KAAK,gBAAgB;MAC7D,mBAAmBO,KAAK,OAAO;MAC/B,qBAAqBF,UAAU,CAACjD,MAAM,CAAC1B,KAAK,CAAC,YAAY;IAC7D;EACF,CAAC,CAAC;;EAEF+D,OAAO,IAAI,kBAAkB;;EAE7B,OAAOtE,SAAS,CAACmE,QAAQ,CAACG,OAAO,CAAC;AACpC;;AAEA,SAASe,QAAQA,CAACC,uBAAuB,EAAE;EACzC,OAAOA,uBAAuB,CAACF,KAAK,IAAIE,uBAAuB;AACjE;;AAEA,SAASC,aAAaA,CAACC,IAAI,EAAEC,IAAI,EAAE;EACjC,OAAO,WAAWD,IAAI,YAAYC,IAAI,YAAY;AACpD;;AAEA,OAAO,SAASC,4BAA4BA,CAAC;EAC3CC,KAAK;EACLC,MAAM;EACNC,MAAM;EACNC,MAAM;EACNC,SAAS;EACThB,UAAU;EACVG,UAAU;EACVc;AACF,CAAC,EAAE;EACD,IAAIC,CAAC,GAAG,SAAS;EACjBA,CAAC;EACC,yBAAyBN,KAAK,CAACd,KAAK,KAAK;EACzC,WAAWc,KAAK,CAACC,MAAM,CAAC,cAAcD,KAAK,CAACO,KAAK,GAAG;EACpD,YAAY;EACdD,CAAC,IAAIV,aAAa,CAACF,QAAQ,CAACQ,MAAM,CAAC,EAAEd,UAAU,CAACY,KAAK,CAACQ,CAAC,CAAC,CAAC;EACzDF,CAAC,IAAIV,aAAa,CAACF,QAAQ,CAACS,MAAM,CAAC,EAAEZ,UAAU,CAACS,KAAK,CAACxD,CAAC,CAAC,CAAC;EACzD8D,CAAC,IAAIV,aAAa,CAACF,QAAQ,CAACU,SAAS,CAAC,EAAEC,aAAa,CAACL,KAAK,CAACS,IAAI,CAAC,CAAC;EAClEH,CAAC,IAAI,UAAU;;EAEf,OAAOA,CAAC;AACV;;AAEA;AACA,OAAO,SAASI,YAAYA,CAACC,YAAY,EAAE;EACzC,MAAMC,OAAO,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,YAAY,CAAC;EACvD,IAAIF,OAAO,CAAC7E,MAAM,GAAG,CAAC,EAAE;IACtB;IACA;IACA6E,OAAO,CAAC7B,OAAO,CAAC,CAAAgC,CAAC,KAAI;MACnB,IAAIJ,YAAY,EAAE;QAChBI,CAAC,CAACrE,MAAM,CAAC,CAAC;MACZ,CAAC,MAAM;QACL;QACAqE,CAAC,CAACC,KAAK,CAACC,OAAO,GAAG,CAAC;MACrB;IACF,CAAC,CAAC;EACJ;AACF;;AAEA,OAAO,SAASC,wBAAwBA,CAACC,IAAI,EAAE;EAC7C,OAAO,WAAWA,IAAI,EAAE;AAC1B;;AAEA,OAAO,SAASC,aAAaA,CAACD,IAAI,EAAE;EAClC,MAAME,aAAa,GAAG,IAAIH,wBAAwB,CAACC,IAAI,CAAC,EAAE;EAC1D,MAAMG,MAAM,GAAGT,QAAQ,CAACU,aAAa,CAACF,aAAa,CAAC;EACpD,IAAIC,MAAM,EAAE;IACVA,MAAM,CAAC5E,MAAM,CAAC,CAAC;EACjB;AACF;;AAEA,OAAO,SAAS8E,WAAWA,CAACC,KAAK,EAAE;EACjC,MAAMC,YAAY;EAChBD,KAAK,CAACE,uBAAuB,IAAIF,KAAK,CAACE,uBAAuB,CAAC,CAAC;EAC5DF,KAAK,CAACG,gBAAgB;EACtBH,KAAK;EACX,MAAMI,oBAAoB,GAAGH,YAAY,CAAC/C,OAAO,CAACmD,gBAAgB,CAAC,CAAC;EACpEJ,YAAY,CAAC/C,OAAO,CAACmD,gBAAgB,CAAC,CAAAjG,CAAC,KAAI;IACzC,IAAI8C,OAAO,GAAG,OAAO;IACrBA,OAAO,IAAIkD,oBAAoB,CAAChG,CAAC,CAAC;IAClC8C,OAAO,IAAI,QAAQ;;IAEnB,OAAOA,OAAO;EAChB,CAAC,CAAC;AACJ,CAACoD,aAAA,CAbeP,WAAW;;AAe3B,OAAO,SAASQ,UAAUA,CAACC,KAAK,EAAE;EAChC,OAAO7H,KAAK,CAAC,CAAC;EACX2C,IAAI,CAAC,OAAO,EAAE,UAAUkF,KAAK,CAACC,kBAAkB,IAAI,EAAE,EAAE,CAAC;EACzDC,SAAS,CAAC,GAAG,CAAC;EACdC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACfC,IAAI,CAAC,CAAAxG,CAAC,KAAI;IACT,IAAI,CAACA,CAAC,EAAE;MACN,OAAO,EAAE;IACX;IACA,MAAMyG,KAAK;IACTzG,CAAC,CAACoG,KAAK,CAACM,WAAW,CAAC,IAAI1G,CAAC,CAACoG,KAAK,CAACM,WAAW,CAAC,CAACxG,MAAM,GAAG,CAAC;IACnD,GAAGF,CAAC,CAACoG,KAAK,CAACM,WAAW,CAAC,MAAMN,KAAK,CAACO,IAAI,EAAE;IACzCP,KAAK,CAACO,IAAI;IAChB,MAAMC,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACV,KAAK,CAACW,kBAAkB,CAAC;IAChDX,KAAK,CAACW,kBAAkB,CAAC1G,GAAG,CAAC,CAAA2G,CAAC,KAAIhH,CAAC,CAACgH,CAAC,CAAC,CAAC;IACvCC,MAAM,CAAC7G,MAAM,CAACJ,CAAC,CAAC;;IAEpB,OAAO,gBAAgByG,KAAK,4BAA4BG,IAAI,CAACrH,IAAI;MAC/D;IACF,CAAC,QAAQ;EACX,CAAC,CAAC;AACN;;AAEA,OAAO,SAAS2H,eAAeA,CAACvH,GAAG,EAAEwH,SAAS,EAAE;EAC9C;EACA;EACA,MAAMC,SAAS,GAAGzH,GAAG,CAACiB,SAAS,CAAC,IAAIuG,SAAS,cAAc,CAAC;EAC5D,IAAIC,SAAS,CAAClH,MAAM,GAAG,CAAC,EAAE;IACxB,MAAMmH,OAAO,GAAGD,SAAS,CAAC,CAAC,CAAC,CAAC/G,GAAG,CAAC,CAAAyB,IAAI,KAAIA,IAAI,CAACwF,qBAAqB,CAAC,CAAC,CAAC;;IAEtE,OAAOC,IAAI,CAACC,IAAI,CAACD,IAAI,CAACE,GAAG,CAAC,CAAC,EAAE,GAAGJ,OAAO,CAAC,CAAC;EAC3C;;EAEA,OAAO,CAAC;AACV;;AAEA,OAAO,SAASK,WAAWA,CAACC,KAAK,EAAEC,UAAU,GAAG,CAAC,CAAC,EAAE;EAClD;EACA;EACA,MAAMC,aAAa,GAAGA,CAAApD,CAAC,KAAImD,UAAU,CAACnD,CAAC,CAAC,IAAIA,CAAC;;EAE7C,OAAOoC,KAAK,CAACC,OAAO,CAACa,KAAK,CAAC,IAAIA,KAAK,CAACzH,MAAM,GAAG,CAAC;EAC3CyH,KAAK;EACFtH,GAAG,CAAC,CAAAyH,CAAC,KAAKlJ,kBAAkB,CAACU,IAAI,CAACwI,CAAC,CAAC,GAAGA,CAAC,GAAGD,aAAa,CAACC,CAAC,CAAE,CAAC;EAC7DvI,IAAI,CAAC,IAAI,CAAC;EACbsI,aAAa,CAACF,KAAK,CAAC;AAC1B;;AAEA,OAAO,SAASI,kBAAkBA,CAACC,MAAM,EAAE;EACzC,IAAIA,MAAM,CAACC,IAAI,CAAC,CAAAjI,CAAC,KAAIA,CAAC,CAACkI,WAAW,KAAKC,SAAS,CAAC,EAAE;IACjD,OAAO,IAAI;EACb;;EAEA,OAAOH,MAAM,CAAC3H,GAAG,CAAC,CAAAL,CAAC,KAAIA,CAAC,CAACkI,WAAW,CAAC,CAAC,CAACxF,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAACnD,IAAI,CAAC,KAAK,CAAC;AAClE;;AAEA,OAAO,SAAS6I,iBAAiBA,CAACC,IAAI,EAAEC,UAAU,EAAE;EAClD,IAAID,IAAI,IAAIA,IAAI,CAACE,UAAU,IAAID,UAAU,KAAKH,SAAS,EAAE;IACvDE,IAAI,CAACE,UAAU,CAACD,UAAU,CAAC;EAC7B;AACF;;AAEA,OAAO,SAASE,cAAcA,CAAC5I,IAAI,EAAE;EACnC,IAAIiH,KAAK,CAACC,OAAO,CAAClH,IAAI,CAAC,IAAIA,IAAI,CAACM,MAAM,GAAG,CAAC,IAAI2G,KAAK,CAACC,OAAO,CAAClH,IAAI,CAAC,CAAC,CAAC,CAACQ,MAAM,CAAC,EAAE;IAC3E,MAAMqI,OAAO,GAAG7I,IAAI;IACjBR,MAAM,CAAC,CAAAY,CAAC,KAAI,CAACA,CAAC,CAACC,QAAQ,CAAC;IACxBI,GAAG,CAAC,CAAAqI,GAAG,KAAIpK,EAAE,CAAC0J,MAAM,CAACU,GAAG,CAACtI,MAAM,EAAE,CAAAuI,CAAC,KAAIA,CAAC,CAAChI,CAAC,CAAC,CAAC;IAC9C,MAAMiI,QAAQ,GAAGtK,EAAE,CAACuK,GAAG,CAACJ,OAAO,EAAE,CAAC,CAACI,GAAG,CAAC,KAAKA,GAAG,CAAC;IAChD,MAAMC,QAAQ,GAAGxK,EAAE,CAACmJ,GAAG,CAACgB,OAAO,EAAE,CAAC,GAAGhB,GAAG,CAAC,KAAKA,GAAG,CAAC;;IAElD,OAAO,CAACmB,QAAQ,EAAEE,QAAQ,CAAC;EAC7B;;EAEA,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;AACf,CAAC,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAd,SAAA,MAAAY,cAAA,WAAAA,cAAA,CAAAG,QAAA,CA7TKtK,kBAAkB,oHAAAmK,cAAA,CAAAG,QAAA,CAElBrK,cAAc,gHAAAkK,cAAA,CAAAG,QAAA,CAEJpK,eAAe,iHAAAiK,cAAA,CAAAG,QAAA,CAef1J,wBAAwB,0HAAAuJ,cAAA,CAAAG,QAAA,CAMxBxJ,aAAa,+GAAAqJ,cAAA,CAAAG,QAAA,CAoDpB3G,eAAe,iHAAAwG,cAAA,CAAAG,QAAA,CAQRtG,6BAA6B,+HAAAmG,cAAA,CAAAG,QAAA,CA6B7B5F,+BAA+B,iIAAAyF,cAAA,CAAAG,QAAA,CAwB/BvF,wBAAwB,0HAAAoF,cAAA,CAAAG,QAAA,CA8B/BrF,QAAQ,0GAAAkF,cAAA,CAAAG,QAAA,CAIRnF,aAAa,+GAAAgF,cAAA,CAAAG,QAAA,CAINhF,4BAA4B,8HAAA6E,cAAA,CAAAG,QAAA,CAwB5BrE,YAAY,8GAAAkE,cAAA,CAAAG,QAAA,CAgBZ7D,wBAAwB,0HAAA0D,cAAA,CAAAG,QAAA,CAIxB3D,aAAa,+GAAAwD,cAAA,CAAAG,QAAA,CAQbvD,WAAW,6GAAAoD,cAAA,CAAAG,QAAA,CAeX/C,UAAU,4GAAA4C,cAAA,CAAAG,QAAA,CAuBVhC,eAAe,iHAAA6B,cAAA,CAAAG,QAAA,CAafxB,WAAW,6GAAAqB,cAAA,CAAAG,QAAA,CAYXnB,kBAAkB,oHAAAgB,cAAA,CAAAG,QAAA,CAQlBd,iBAAiB,mHAAAW,cAAA,CAAAG,QAAA,CAMjBV,cAAc,wIAAAW,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAhB,SAAA,CAAAgB,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}