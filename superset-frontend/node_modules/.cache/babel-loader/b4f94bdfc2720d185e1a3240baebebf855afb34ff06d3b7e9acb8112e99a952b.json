{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useDispatch } from 'react-redux';\nimport { t } from '@superset-ui/core';\nimport { Dropdown } from 'src/components/Dropdown';\nimport { Menu } from 'src/components/Menu';\nimport { Icons } from 'src/components/Icons';\nimport { queryEditorSetQueryLimit } from 'src/SqlLab/actions/sqlLab';\nimport useQueryEditor from 'src/SqlLab/hooks/useQueryEditor';\nimport Button from 'src/components/Button';import { jsxs as _jsxs, jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nexport function convertToNumWithSpaces(num) {\n  return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1 ');\n}\nfunction renderQueryLimit(maxRow, setQueryLimit) {\n  const limitDropdown = [];\n  // Construct limit dropdown as increasing powers of ten until we reach SQL_MAX_ROW\n  for (let i = 10; i < maxRow; i *= 10) {\n    limitDropdown.push(i);\n  }\n  limitDropdown.push(maxRow);\n  return _jsx(Menu, { children:\n    [...new Set(limitDropdown)].map((limit) => _jsxs(Menu.Item, { onClick: () => setQueryLimit(limit), children: [\n\n      convertToNumWithSpaces(limit), ' '] }, `${limit}`\n    )) }\n  );\n}\nconst QueryLimitSelect = ({ queryEditorId, maxRow, defaultQueryLimit }) => {\n  const dispatch = useDispatch();\n  const queryEditor = useQueryEditor(queryEditorId, ['id', 'queryLimit']);\n  const queryLimit = queryEditor.queryLimit || defaultQueryLimit;\n  const setQueryLimit = (updatedQueryLimit) => dispatch(queryEditorSetQueryLimit(queryEditor, updatedQueryLimit));\n  return _jsx(Dropdown, { dropdownRender: () => renderQueryLimit(maxRow, setQueryLimit), trigger: ['click'], children:\n    _jsxs(Button, { size: \"small\", showMarginRight: false, type: \"link\", children: [\n      _jsxs(\"span\", { children: [t('LIMIT'), \":\"] }),\n      _jsx(\"span\", { className: \"limitDropdown\", children:\n        convertToNumWithSpaces(queryLimit) }\n      ),\n      _jsx(Icons.CaretDownOutlined, { iconSize: \"m\" })] }\n    ) }\n  );\n};__signature__(QueryLimitSelect, \"useDispatch{dispatch}\\nuseQueryEditor{queryEditor}\", () => [useDispatch, useQueryEditor]);const _default =\nQueryLimitSelect;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(convertToNumWithSpaces, \"convertToNumWithSpaces\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/QueryLimitSelect/index.tsx\");reactHotLoader.register(renderQueryLimit, \"renderQueryLimit\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/QueryLimitSelect/index.tsx\");reactHotLoader.register(QueryLimitSelect, \"QueryLimitSelect\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/QueryLimitSelect/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/QueryLimitSelect/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useDispatch","t","Dropdown","Menu","Icons","queryEditorSetQueryLimit","useQueryEditor","Button","jsxs","_jsxs","jsx","_jsx","convertToNumWithSpaces","num","toString","replace","renderQueryLimit","maxRow","setQueryLimit","limitDropdown","i","push","children","Set","map","limit","Item","onClick","QueryLimitSelect","queryEditorId","defaultQueryLimit","dispatch","queryEditor","queryLimit","updatedQueryLimit","dropdownRender","trigger","size","showMarginRight","type","className","CaretDownOutlined","iconSize","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/QueryLimitSelect/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useDispatch } from 'react-redux';\nimport { t } from '@superset-ui/core';\nimport { Dropdown } from 'src/components/Dropdown';\nimport { Menu } from 'src/components/Menu';\nimport { Icons } from 'src/components/Icons';\nimport { queryEditorSetQueryLimit } from 'src/SqlLab/actions/sqlLab';\nimport useQueryEditor from 'src/SqlLab/hooks/useQueryEditor';\nimport Button from 'src/components/Button';\n\nexport interface QueryLimitSelectProps {\n  queryEditorId: string;\n  maxRow: number;\n  defaultQueryLimit: number;\n}\n\nexport function convertToNumWithSpaces(num: number) {\n  return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1 ');\n}\n\nfunction renderQueryLimit(\n  maxRow: number,\n  setQueryLimit: (limit: number) => void,\n) {\n  const limitDropdown = [];\n\n  // Construct limit dropdown as increasing powers of ten until we reach SQL_MAX_ROW\n  for (let i = 10; i < maxRow; i *= 10) {\n    limitDropdown.push(i);\n  }\n  limitDropdown.push(maxRow);\n\n  return (\n    <Menu>\n      {[...new Set(limitDropdown)].map(limit => (\n        <Menu.Item key={`${limit}`} onClick={() => setQueryLimit(limit)}>\n          {/* // eslint-disable-line no-use-before-define */}\n          {convertToNumWithSpaces(limit)}{' '}\n        </Menu.Item>\n      ))}\n    </Menu>\n  );\n}\n\nconst QueryLimitSelect = ({\n  queryEditorId,\n  maxRow,\n  defaultQueryLimit,\n}: QueryLimitSelectProps) => {\n  const dispatch = useDispatch();\n\n  const queryEditor = useQueryEditor(queryEditorId, ['id', 'queryLimit']);\n  const queryLimit = queryEditor.queryLimit || defaultQueryLimit;\n  const setQueryLimit = (updatedQueryLimit: number) =>\n    dispatch(queryEditorSetQueryLimit(queryEditor, updatedQueryLimit));\n\n  return (\n    <Dropdown\n      dropdownRender={() => renderQueryLimit(maxRow, setQueryLimit)}\n      trigger={['click']}\n    >\n      <Button size=\"small\" showMarginRight={false} type=\"link\">\n        <span>{t('LIMIT')}:</span>\n        <span className=\"limitDropdown\">\n          {convertToNumWithSpaces(queryLimit)}\n        </span>\n        <Icons.CaretDownOutlined iconSize=\"m\" />\n      </Button>\n    </Dropdown>\n  );\n};\n\nexport default QueryLimitSelect;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}