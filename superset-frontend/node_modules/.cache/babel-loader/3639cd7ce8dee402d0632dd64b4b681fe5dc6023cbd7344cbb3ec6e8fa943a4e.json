{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FeatureFlag, isFeatureEnabled, styled, SupersetClient, t, css, useTheme } from '@superset-ui/core';\nimport { useCallback, useMemo, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport rison from 'rison';\nimport { createErrorHandler, createFetchDistinct, createFetchRelated } from 'src/views/CRUD/utils';\nimport { useSelector } from 'react-redux';\nimport Popover from 'src/components/Popover';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { useListViewResource } from 'src/views/CRUD/hooks';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport handleResourceExport from 'src/utils/export';\nimport SubMenu from 'src/features/home/SubMenu';\nimport ListView, { FilterOperator } from 'src/components/ListView';\nimport Loading from 'src/components/Loading';\nimport DeleteModal from 'src/components/DeleteModal';\nimport ActionsBar from 'src/components/ListView/ActionsBar';\nimport { TagsList } from 'src/components/Tags';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { commonMenuData } from 'src/features/home/commonMenuData';\nimport { QueryObjectColumns } from 'src/views/CRUD/types';\nimport ImportModelsModal from 'src/components/ImportModal/index';\nimport { ModifiedInfo } from 'src/components/AuditInfo';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { Icons } from 'src/components/Icons';\nimport SavedQueryPreviewModal from 'src/features/queries/SavedQueryPreviewModal';\nimport { findPermission } from 'src/utils/findPermission';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst PAGE_SIZE = 25;\nconst PASSWORDS_NEEDED_MESSAGE = t('The passwords for the databases below are needed in order to ' +\n'import them together with the saved queries. Please note that the ' +\n'\"Secure Extra\" and \"Certificate\" sections of ' +\n'the database configuration are not present in export files, and ' +\n'should be added manually after the import if they are needed.');\nconst CONFIRM_OVERWRITE_MESSAGE = t('You are importing one or more saved queries that already exist. ' +\n'Overwriting might cause you to lose some of your work. Are you ' +\n'sure you want to overwrite?');\nconst StyledTableLabel = styled.div`\n  .count {\n    margin-left: 5px;\n    color: ${({ theme }) => theme.colors.primary.base};\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\nconst StyledPopoverItem = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.dark2};\n`;\nfunction SavedQueryList({ addDangerToast, addSuccessToast, user }) {\n  const theme = useTheme();\n  const { state: { loading, resourceCount: queryCount, resourceCollection: queries, bulkSelectEnabled }, hasPerm, fetchData, toggleBulkSelect, refreshData } = useListViewResource('saved_query', t('Saved queries'), addDangerToast);\n  const { roles } = useSelector((state) => state.user);\n  const canReadTag = findPermission('can_read', 'Tag', roles);\n  const [queryCurrentlyDeleting, setQueryCurrentlyDeleting] = useState(null);\n  const [savedQueryCurrentlyPreviewing, setSavedQueryCurrentlyPreviewing] = useState(null);\n  const [importingSavedQuery, showImportModal] = useState(false);\n  const [passwordFields, setPasswordFields] = useState([]);\n  const [preparingExport, setPreparingExport] = useState(false);\n  const [sshTunnelPasswordFields, setSSHTunnelPasswordFields] = useState([]);\n  const [sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields] = useState([]);\n  const [sshTunnelPrivateKeyPasswordFields, setSSHTunnelPrivateKeyPasswordFields] = useState([]);\n  const history = useHistory();\n  const openSavedQueryImportModal = () => {\n    showImportModal(true);\n  };\n  const closeSavedQueryImportModal = () => {\n    showImportModal(false);\n  };\n  const handleSavedQueryImport = () => {\n    showImportModal(false);\n    refreshData();\n    addSuccessToast(t('Query imported'));\n  };\n  const canCreate = hasPerm('can_write');\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canExport = hasPerm('can_export');\n  const handleSavedQueryPreview = useCallback((id) => {\n    SupersetClient.get({\n      endpoint: `/api/v1/saved_query/${id}`\n    }).then(({ json = {} }) => {\n      setSavedQueryCurrentlyPreviewing({ ...json.result });\n    }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue previewing the selected query %s', errMsg))));\n  }, [addDangerToast]);\n  const menuData = {\n    activeChild: 'Saved queries',\n    ...commonMenuData\n  };\n  const subMenuButtons = [];\n  if (canDelete) {\n    subMenuButtons.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary'\n    });\n  }\n  subMenuButtons.push({\n    name: _jsxs(Link, { to: \"/sqllab?new=true\", css: css`\n          display: flex;\n          &:hover {\n            color: currentColor;\n            text-decoration: none;\n          }\n        `, children: [\n      _jsx(Icons.PlusOutlined, { iconColor: theme.colors.primary.light5, iconSize: \"m\", css: css`\n            margin: auto ${theme.gridUnit * 2}px auto 0;\n          ` }),\n      t('Query')] }\n    ),\n    buttonStyle: 'primary'\n  });\n  if (canCreate) {\n    subMenuButtons.push({\n      name: _jsx(Tooltip, { id: \"import-tooltip\", title: t('Import queries'), placement: \"bottomRight\", \"data-test\": \"import-tooltip-test\", children:\n        _jsx(Icons.DownloadOutlined, { \"data-test\": \"import-icon\" }) }\n      ),\n      buttonStyle: 'link',\n      onClick: openSavedQueryImportModal,\n      'data-test': 'import-button'\n    });\n  }\n  menuData.buttons = subMenuButtons;\n  // Action methods\n  const openInSqlLab = (id, openInNewWindow) => {\n    if (openInNewWindow) {\n      window.open(`/sqllab?savedQueryId=${id}`);\n    } else\n    {\n      history.push(`/sqllab?savedQueryId=${id}`);\n    }\n  };\n  const copyQueryLink = useCallback(async (savedQuery) => {\n    try {\n      const payload = {\n        dbId: savedQuery.db_id,\n        name: savedQuery.label,\n        schema: savedQuery.schema,\n        catalog: savedQuery.catalog,\n        sql: savedQuery.sql,\n        autorun: false,\n        templateParams: null\n      };\n      const response = await SupersetClient.post({\n        endpoint: '/api/v1/sqllab/permalink',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      const { url: permalink } = response.json;\n      await navigator.clipboard.writeText(permalink);\n      addSuccessToast(t('Link Copied!'));\n    }\n    catch (error) {\n      addDangerToast(t('There was an error generating the permalink.'));\n    }\n  }, [addDangerToast, addSuccessToast]);\n  const handleQueryDelete = ({ id, label }) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/saved_query/${id}`\n    }).then(() => {\n      refreshData();\n      setQueryCurrentlyDeleting(null);\n      addSuccessToast(t('Deleted: %s', label));\n    }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue deleting %s: %s', label, errMsg))));\n  };\n  const handleBulkSavedQueryExport = (savedQueriesToExport) => {\n    const ids = savedQueriesToExport.map(({ id }) => id);\n    handleResourceExport('saved_query', ids, () => {\n      setPreparingExport(false);\n    });\n    setPreparingExport(true);\n  };\n  const handleBulkQueryDelete = (queriesToDelete) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/saved_query/?q=${rison.encode(queriesToDelete.map(({ id }) => id))}`\n    }).then(({ json = {} }) => {\n      refreshData();\n      addSuccessToast(json.message);\n    }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue deleting the selected queries: %s', errMsg))));\n  };\n  const initialSort = [{ id: 'changed_on_delta_humanized', desc: true }];\n  const columns = useMemo(() => [\n  {\n    accessor: 'label',\n    Header: t('Name'),\n    Cell: ({ row: { original: { id, label } } }) => _jsx(Link, { to: `/sqllab?savedQueryId=${id}`, children: label })\n  },\n  {\n    accessor: 'description',\n    Header: t('Description')\n  },\n  {\n    accessor: 'database.database_name',\n    Header: t('Database'),\n    size: 'xl'\n  },\n  {\n    accessor: 'database',\n    hidden: true,\n    disableSortBy: true\n  },\n  {\n    accessor: 'schema',\n    Header: t('Schema'),\n    size: 'xl'\n  },\n  {\n    Cell: ({ row: { original: { sql_tables: tables = [] } } }) => {\n      const names = tables.map((table) => table.table);\n      const main = (names == null ? void 0 : names.shift()) || '';\n      if (names.length) {\n        return _jsxs(StyledTableLabel, { children: [\n          _jsx(\"span\", { children: main }),\n          _jsx(Popover, { placement: \"right\", title: t('TABLES'), trigger: \"click\", content: _jsx(_Fragment, { children:\n              names.map((name) => _jsx(StyledPopoverItem, { children: name }, name)) }\n            ), children:\n            _jsxs(\"span\", { className: \"count\", children: [\"(+\", names.length, \")\"] }) }\n          )] }\n        );\n      }\n      return main;\n    },\n    accessor: 'sql_tables',\n    Header: t('Tables'),\n    size: 'xl',\n    disableSortBy: true\n  },\n  {\n    Cell: ({ row: { original: { tags = [] } } }) =>\n    // Only show custom type tags\n    _jsx(TagsList, { tags: tags.filter((tag) => tag.type === 1) }),\n    Header: t('Tags'),\n    accessor: 'tags',\n    disableSortBy: true,\n    hidden: !isFeatureEnabled(FeatureFlag.TaggingSystem)\n  },\n  {\n    Cell: ({ row: { original: { changed_by: changedBy, changed_on_delta_humanized: changedOn } } }) => _jsx(ModifiedInfo, { user: changedBy, date: changedOn }),\n    Header: t('Last modified'),\n    accessor: 'changed_on_delta_humanized',\n    size: 'xl'\n  },\n  {\n    Cell: ({ row: { original } }) => {\n      const handlePreview = () => {\n        handleSavedQueryPreview(original.id);\n      };\n      const handleEdit = ({ metaKey }) => openInSqlLab(original.id, Boolean(metaKey));\n      const handleCopy = () => copyQueryLink(original);\n      const handleExport = () => handleBulkSavedQueryExport([original]);\n      const handleDelete = () => setQueryCurrentlyDeleting(original);\n      const actions = [\n      {\n        label: 'preview-action',\n        tooltip: t('Query preview'),\n        placement: 'bottom',\n        icon: 'Binoculars',\n        onClick: handlePreview\n      },\n      canEdit && {\n        label: 'edit-action',\n        tooltip: t('Edit query'),\n        placement: 'bottom',\n        icon: 'EditOutlined',\n        onClick: handleEdit\n      },\n      {\n        label: 'copy-action',\n        tooltip: t('Copy query URL'),\n        placement: 'bottom',\n        icon: 'CopyOutlined',\n        onClick: handleCopy\n      },\n      canExport && {\n        label: 'export-action',\n        tooltip: t('Export query'),\n        placement: 'bottom',\n        icon: 'UploadOutlined',\n        onClick: handleExport\n      },\n      canDelete && {\n        label: 'delete-action',\n        tooltip: t('Delete query'),\n        placement: 'bottom',\n        icon: 'DeleteOutlined',\n        onClick: handleDelete\n      }].\n      filter((item) => !!item);\n      return _jsx(ActionsBar, { actions: actions });\n    },\n    Header: t('Actions'),\n    id: 'actions',\n    disableSortBy: true\n  },\n  {\n    accessor: QueryObjectColumns.ChangedBy,\n    hidden: true\n  }],\n  [canDelete, canEdit, canExport, copyQueryLink, handleSavedQueryPreview]);\n  const filters = useMemo(() => [\n  {\n    Header: t('Search'),\n    id: 'label',\n    key: 'search',\n    input: 'search',\n    operator: FilterOperator.AllText,\n    toolTipDescription: 'Searches all text fields: Name, Description, Database & Schema'\n  },\n  {\n    Header: t('Database'),\n    key: 'database',\n    id: 'database',\n    input: 'select',\n    operator: FilterOperator.RelationOneMany,\n    unfilteredLabel: t('All'),\n    fetchSelects: createFetchRelated('saved_query', 'database', createErrorHandler((errMsg) => addDangerToast(t('An error occurred while fetching dataset datasource values: %s', errMsg)))),\n    paginate: true\n  },\n  {\n    Header: t('Schema'),\n    id: 'schema',\n    key: 'schema',\n    input: 'select',\n    operator: FilterOperator.Equals,\n    unfilteredLabel: 'All',\n    fetchSelects: createFetchDistinct('saved_query', 'schema', createErrorHandler((errMsg) => addDangerToast(t('An error occurred while fetching schema values: %s', errMsg)))),\n    paginate: true\n  },\n  ...(isFeatureEnabled(FeatureFlag.TaggingSystem) && canReadTag ?\n  [\n  {\n    Header: t('Tag'),\n    id: 'tags',\n    key: 'tags',\n    input: 'select',\n    operator: FilterOperator.SavedQueryTagById,\n    fetchSelects: loadTags\n  }] :\n\n  []),\n  {\n    Header: t('Modified by'),\n    key: 'changed_by',\n    id: 'changed_by',\n    input: 'select',\n    operator: FilterOperator.RelationOneMany,\n    unfilteredLabel: t('All'),\n    fetchSelects: createFetchRelated('saved_query', 'changed_by', createErrorHandler((errMsg) => t('An error occurred while fetching dataset datasource values: %s', errMsg)), user),\n    paginate: true\n  }],\n  [addDangerToast]);\n  return _jsxs(_Fragment, { children: [\n    _jsx(SubMenu, { ...menuData }),\n    queryCurrentlyDeleting && _jsx(DeleteModal, { description: t('This action will permanently delete the saved query.'), onConfirm: () => {\n        if (queryCurrentlyDeleting) {\n          handleQueryDelete(queryCurrentlyDeleting);\n        }\n      }, onHide: () => setQueryCurrentlyDeleting(null), open: true, title: t('Delete Query?') }),\n    savedQueryCurrentlyPreviewing && _jsx(SavedQueryPreviewModal, { fetchData: handleSavedQueryPreview, onHide: () => setSavedQueryCurrentlyPreviewing(null), savedQuery: savedQueryCurrentlyPreviewing, queries: queries, openInSqlLab: openInSqlLab, show: true }),\n    _jsx(ConfirmStatusChange, { title: t('Please confirm'), description: t('Are you sure you want to delete the selected queries?'), onConfirm: handleBulkQueryDelete, children:\n      (confirmDelete) => {\n        const bulkActions = [];\n        if (canDelete) {\n          bulkActions.push({\n            key: 'delete',\n            name: t('Delete'),\n            onSelect: confirmDelete,\n            type: 'danger'\n          });\n        }\n        if (canExport) {\n          bulkActions.push({\n            key: 'export',\n            name: t('Export'),\n            type: 'primary',\n            onSelect: handleBulkSavedQueryExport\n          });\n        }\n        return _jsx(ListView, { className: \"saved_query-list-view\", columns: columns, count: queryCount, data: queries, fetchData: fetchData, filters: filters, initialSort: initialSort, loading: loading, pageSize: PAGE_SIZE, bulkActions: bulkActions, addSuccessToast: addSuccessToast, addDangerToast: addDangerToast, bulkSelectEnabled: bulkSelectEnabled, disableBulkSelect: toggleBulkSelect, highlightRowId: savedQueryCurrentlyPreviewing == null ? void 0 : savedQueryCurrentlyPreviewing.id, enableBulkTag: true, bulkTagResourceName: \"query\", refreshData: refreshData });\n      } }\n    ),\n\n    _jsx(ImportModelsModal, { resourceName: \"saved_query\", resourceLabel: t('queries'), passwordsNeededMessage: PASSWORDS_NEEDED_MESSAGE, confirmOverwriteMessage: CONFIRM_OVERWRITE_MESSAGE, addDangerToast: addDangerToast, addSuccessToast: addSuccessToast, onModelImport: handleSavedQueryImport, show: importingSavedQuery, onHide: closeSavedQueryImportModal, passwordFields: passwordFields, setPasswordFields: setPasswordFields, sshTunnelPasswordFields: sshTunnelPasswordFields, setSSHTunnelPasswordFields: setSSHTunnelPasswordFields, sshTunnelPrivateKeyFields: sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields: setSSHTunnelPrivateKeyFields, sshTunnelPrivateKeyPasswordFields: sshTunnelPrivateKeyPasswordFields, setSSHTunnelPrivateKeyPasswordFields: setSSHTunnelPrivateKeyPasswordFields }),\n    preparingExport && _jsx(Loading, {})] }\n  );\n}__signature__(SavedQueryList, \"useTheme{theme}\\nuseListViewResource{{ state: { loading, resourceCount: queryCount, resourceCollection: queries, bulkSelectEnabled, }, hasPerm, fetchData, toggleBulkSelect, refreshData, }}\\nuseSelector{{ roles }}\\nuseState{[queryCurrentlyDeleting, setQueryCurrentlyDeleting](null)}\\nuseState{[savedQueryCurrentlyPreviewing, setSavedQueryCurrentlyPreviewing](null)}\\nuseState{[importingSavedQuery, showImportModal](false)}\\nuseState{[passwordFields, setPasswordFields]([])}\\nuseState{[preparingExport, setPreparingExport](false)}\\nuseState{[sshTunnelPasswordFields, setSSHTunnelPasswordFields]([])}\\nuseState{[sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields]([])}\\nuseState{[sshTunnelPrivateKeyPasswordFields, setSSHTunnelPrivateKeyPasswordFields,]([])}\\nuseHistory{history}\\nuseCallback{handleSavedQueryPreview}\\nuseCallback{copyQueryLink}\\nuseMemo{columns}\\nuseMemo{filters}\", () => [useTheme, useListViewResource, useSelector, useHistory]);const _default =\nwithToasts(SavedQueryList);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PAGE_SIZE, \"PAGE_SIZE\", \"/Users/aryurkov/superset/superset-frontend/src/pages/SavedQueryList/index.tsx\");reactHotLoader.register(PASSWORDS_NEEDED_MESSAGE, \"PASSWORDS_NEEDED_MESSAGE\", \"/Users/aryurkov/superset/superset-frontend/src/pages/SavedQueryList/index.tsx\");reactHotLoader.register(CONFIRM_OVERWRITE_MESSAGE, \"CONFIRM_OVERWRITE_MESSAGE\", \"/Users/aryurkov/superset/superset-frontend/src/pages/SavedQueryList/index.tsx\");reactHotLoader.register(StyledTableLabel, \"StyledTableLabel\", \"/Users/aryurkov/superset/superset-frontend/src/pages/SavedQueryList/index.tsx\");reactHotLoader.register(StyledPopoverItem, \"StyledPopoverItem\", \"/Users/aryurkov/superset/superset-frontend/src/pages/SavedQueryList/index.tsx\");reactHotLoader.register(SavedQueryList, \"SavedQueryList\", \"/Users/aryurkov/superset/superset-frontend/src/pages/SavedQueryList/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/pages/SavedQueryList/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["FeatureFlag","isFeatureEnabled","styled","SupersetClient","t","css","useTheme","useCallback","useMemo","useState","Link","useHistory","rison","createErrorHandler","createFetchDistinct","createFetchRelated","useSelector","Popover","withToasts","useListViewResource","ConfirmStatusChange","handleResourceExport","SubMenu","ListView","FilterOperator","Loading","DeleteModal","ActionsBar","TagsList","Tooltip","commonMenuData","QueryObjectColumns","ImportModelsModal","ModifiedInfo","loadTags","Icons","SavedQueryPreviewModal","findPermission","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PAGE_SIZE","PASSWORDS_NEEDED_MESSAGE","CONFIRM_OVERWRITE_MESSAGE","StyledTableLabel","div","theme","colors","primary","base","StyledPopoverItem","grayscale","dark2","SavedQueryList","addDangerToast","addSuccessToast","user","state","loading","resourceCount","queryCount","resourceCollection","queries","bulkSelectEnabled","hasPerm","fetchData","toggleBulkSelect","refreshData","roles","canReadTag","queryCurrentlyDeleting","setQueryCurrentlyDeleting","savedQueryCurrentlyPreviewing","setSavedQueryCurrentlyPreviewing","importingSavedQuery","showImportModal","passwordFields","setPasswordFields","preparingExport","setPreparingExport","sshTunnelPasswordFields","setSSHTunnelPasswordFields","sshTunnelPrivateKeyFields","setSSHTunnelPrivateKeyFields","sshTunnelPrivateKeyPasswordFields","setSSHTunnelPrivateKeyPasswordFields","history","openSavedQueryImportModal","closeSavedQueryImportModal","handleSavedQueryImport","canCreate","canEdit","canDelete","canExport","handleSavedQueryPreview","id","get","endpoint","then","json","result","errMsg","menuData","activeChild","subMenuButtons","push","name","onClick","buttonStyle","to","children","PlusOutlined","iconColor","light5","iconSize","gridUnit","title","placement","DownloadOutlined","buttons","openInSqlLab","openInNewWindow","window","open","copyQueryLink","savedQuery","payload","dbId","db_id","label","schema","catalog","sql","autorun","templateParams","response","post","headers","body","JSON","stringify","url","permalink","navigator","clipboard","writeText","error","handleQueryDelete","delete","handleBulkSavedQueryExport","savedQueriesToExport","ids","map","handleBulkQueryDelete","queriesToDelete","encode","message","initialSort","desc","columns","accessor","Header","Cell","row","original","size","hidden","disableSortBy","sql_tables","tables","names","table","main","shift","length","trigger","content","className","tags","filter","tag","type","TaggingSystem","changed_by","changedBy","changed_on_delta_humanized","changedOn","date","handlePreview","handleEdit","metaKey","Boolean","handleCopy","handleExport","handleDelete","actions","tooltip","icon","item","ChangedBy","filters","key","input","operator","AllText","toolTipDescription","RelationOneMany","unfilteredLabel","fetchSelects","paginate","Equals","SavedQueryTagById","description","onConfirm","onHide","show","confirmDelete","bulkActions","onSelect","count","data","pageSize","disableBulkSelect","highlightRowId","enableBulkTag","bulkTagResourceName","resourceName","resourceLabel","passwordsNeededMessage","confirmOverwriteMessage","onModelImport","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/pages/SavedQueryList/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  FeatureFlag,\n  isFeatureEnabled,\n  styled,\n  SupersetClient,\n  t,\n  css,\n  useTheme,\n} from '@superset-ui/core';\nimport { useCallback, useMemo, useState, MouseEvent } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport rison from 'rison';\nimport {\n  createErrorHandler,\n  createFetchDistinct,\n  createFetchRelated,\n} from 'src/views/CRUD/utils';\nimport { useSelector } from 'react-redux';\nimport Popover from 'src/components/Popover';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { useListViewResource } from 'src/views/CRUD/hooks';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport handleResourceExport from 'src/utils/export';\nimport SubMenu, { ButtonProps, SubMenuProps } from 'src/features/home/SubMenu';\nimport ListView, {\n  FilterOperator,\n  Filters,\n  ListViewProps,\n} from 'src/components/ListView';\nimport Loading from 'src/components/Loading';\nimport DeleteModal from 'src/components/DeleteModal';\nimport ActionsBar, { ActionProps } from 'src/components/ListView/ActionsBar';\nimport { TagsList } from 'src/components/Tags';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { commonMenuData } from 'src/features/home/commonMenuData';\nimport { QueryObjectColumns, SavedQueryObject } from 'src/views/CRUD/types';\nimport Tag from 'src/types/TagType';\nimport ImportModelsModal from 'src/components/ImportModal/index';\nimport { ModifiedInfo } from 'src/components/AuditInfo';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { Icons } from 'src/components/Icons';\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport SavedQueryPreviewModal from 'src/features/queries/SavedQueryPreviewModal';\nimport { findPermission } from 'src/utils/findPermission';\n\nconst PAGE_SIZE = 25;\nconst PASSWORDS_NEEDED_MESSAGE = t(\n  'The passwords for the databases below are needed in order to ' +\n    'import them together with the saved queries. Please note that the ' +\n    '\"Secure Extra\" and \"Certificate\" sections of ' +\n    'the database configuration are not present in export files, and ' +\n    'should be added manually after the import if they are needed.',\n);\nconst CONFIRM_OVERWRITE_MESSAGE = t(\n  'You are importing one or more saved queries that already exist. ' +\n    'Overwriting might cause you to lose some of your work. Are you ' +\n    'sure you want to overwrite?',\n);\n\ninterface SavedQueryListProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  user: {\n    userId: string | number;\n    firstName: string;\n    lastName: string;\n  };\n}\n\nconst StyledTableLabel = styled.div`\n  .count {\n    margin-left: 5px;\n    color: ${({ theme }) => theme.colors.primary.base};\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nconst StyledPopoverItem = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.dark2};\n`;\n\nfunction SavedQueryList({\n  addDangerToast,\n  addSuccessToast,\n  user,\n}: SavedQueryListProps) {\n  const theme = useTheme();\n  const {\n    state: {\n      loading,\n      resourceCount: queryCount,\n      resourceCollection: queries,\n      bulkSelectEnabled,\n    },\n    hasPerm,\n    fetchData,\n    toggleBulkSelect,\n    refreshData,\n  } = useListViewResource<SavedQueryObject>(\n    'saved_query',\n    t('Saved queries'),\n    addDangerToast,\n  );\n  const { roles } = useSelector<any, UserWithPermissionsAndRoles>(\n    state => state.user,\n  );\n  const canReadTag = findPermission('can_read', 'Tag', roles);\n  const [queryCurrentlyDeleting, setQueryCurrentlyDeleting] =\n    useState<SavedQueryObject | null>(null);\n  const [savedQueryCurrentlyPreviewing, setSavedQueryCurrentlyPreviewing] =\n    useState<SavedQueryObject | null>(null);\n  const [importingSavedQuery, showImportModal] = useState<boolean>(false);\n  const [passwordFields, setPasswordFields] = useState<string[]>([]);\n  const [preparingExport, setPreparingExport] = useState<boolean>(false);\n  const [sshTunnelPasswordFields, setSSHTunnelPasswordFields] = useState<\n    string[]\n  >([]);\n  const [sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields] = useState<\n    string[]\n  >([]);\n  const [\n    sshTunnelPrivateKeyPasswordFields,\n    setSSHTunnelPrivateKeyPasswordFields,\n  ] = useState<string[]>([]);\n  const history = useHistory();\n\n  const openSavedQueryImportModal = () => {\n    showImportModal(true);\n  };\n\n  const closeSavedQueryImportModal = () => {\n    showImportModal(false);\n  };\n\n  const handleSavedQueryImport = () => {\n    showImportModal(false);\n    refreshData();\n    addSuccessToast(t('Query imported'));\n  };\n\n  const canCreate = hasPerm('can_write');\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canExport = hasPerm('can_export');\n\n  const handleSavedQueryPreview = useCallback(\n    (id: number) => {\n      SupersetClient.get({\n        endpoint: `/api/v1/saved_query/${id}`,\n      }).then(\n        ({ json = {} }) => {\n          setSavedQueryCurrentlyPreviewing({ ...json.result });\n        },\n        createErrorHandler(errMsg =>\n          addDangerToast(\n            t('There was an issue previewing the selected query %s', errMsg),\n          ),\n        ),\n      );\n    },\n    [addDangerToast],\n  );\n\n  const menuData: SubMenuProps = {\n    activeChild: 'Saved queries',\n    ...commonMenuData,\n  };\n\n  const subMenuButtons: Array<ButtonProps> = [];\n\n  if (canDelete) {\n    subMenuButtons.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary',\n    });\n  }\n\n  subMenuButtons.push({\n    name: (\n      <Link\n        to=\"/sqllab?new=true\"\n        css={css`\n          display: flex;\n          &:hover {\n            color: currentColor;\n            text-decoration: none;\n          }\n        `}\n      >\n        <Icons.PlusOutlined\n          iconColor={theme.colors.primary.light5}\n          iconSize=\"m\"\n          css={css`\n            margin: auto ${theme.gridUnit * 2}px auto 0;\n          `}\n        />\n        {t('Query')}\n      </Link>\n    ),\n    buttonStyle: 'primary',\n  });\n\n  if (canCreate) {\n    subMenuButtons.push({\n      name: (\n        <Tooltip\n          id=\"import-tooltip\"\n          title={t('Import queries')}\n          placement=\"bottomRight\"\n          data-test=\"import-tooltip-test\"\n        >\n          <Icons.DownloadOutlined data-test=\"import-icon\" />\n        </Tooltip>\n      ),\n      buttonStyle: 'link',\n      onClick: openSavedQueryImportModal,\n      'data-test': 'import-button',\n    });\n  }\n\n  menuData.buttons = subMenuButtons;\n\n  // Action methods\n  const openInSqlLab = (id: number, openInNewWindow: boolean) => {\n    if (openInNewWindow) {\n      window.open(`/sqllab?savedQueryId=${id}`);\n    } else {\n      history.push(`/sqllab?savedQueryId=${id}`);\n    }\n  };\n\n  const copyQueryLink = useCallback(\n    async (savedQuery: SavedQueryObject) => {\n      try {\n        const payload = {\n          dbId: savedQuery.db_id,\n          name: savedQuery.label,\n          schema: savedQuery.schema,\n          catalog: savedQuery.catalog,\n          sql: savedQuery.sql,\n          autorun: false,\n          templateParams: null,\n        };\n\n        const response = await SupersetClient.post({\n          endpoint: '/api/v1/sqllab/permalink',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload),\n        });\n\n        const { url: permalink } = response.json;\n\n        await navigator.clipboard.writeText(permalink);\n        addSuccessToast(t('Link Copied!'));\n      } catch (error) {\n        addDangerToast(t('There was an error generating the permalink.'));\n      }\n    },\n    [addDangerToast, addSuccessToast],\n  );\n\n  const handleQueryDelete = ({ id, label }: SavedQueryObject) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/saved_query/${id}`,\n    }).then(\n      () => {\n        refreshData();\n        setQueryCurrentlyDeleting(null);\n        addSuccessToast(t('Deleted: %s', label));\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(t('There was an issue deleting %s: %s', label, errMsg)),\n      ),\n    );\n  };\n\n  const handleBulkSavedQueryExport = (\n    savedQueriesToExport: SavedQueryObject[],\n  ) => {\n    const ids = savedQueriesToExport.map(({ id }) => id);\n    handleResourceExport('saved_query', ids, () => {\n      setPreparingExport(false);\n    });\n    setPreparingExport(true);\n  };\n\n  const handleBulkQueryDelete = (queriesToDelete: SavedQueryObject[]) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/saved_query/?q=${rison.encode(\n        queriesToDelete.map(({ id }) => id),\n      )}`,\n    }).then(\n      ({ json = {} }) => {\n        refreshData();\n        addSuccessToast(json.message);\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t('There was an issue deleting the selected queries: %s', errMsg),\n        ),\n      ),\n    );\n  };\n\n  const initialSort = [{ id: 'changed_on_delta_humanized', desc: true }];\n  const columns = useMemo(\n    () => [\n      {\n        accessor: 'label',\n        Header: t('Name'),\n        Cell: ({\n          row: {\n            original: { id, label },\n          },\n        }: any) => <Link to={`/sqllab?savedQueryId=${id}`}>{label}</Link>,\n      },\n      {\n        accessor: 'description',\n        Header: t('Description'),\n      },\n      {\n        accessor: 'database.database_name',\n        Header: t('Database'),\n        size: 'xl',\n      },\n      {\n        accessor: 'database',\n        hidden: true,\n        disableSortBy: true,\n      },\n      {\n        accessor: 'schema',\n        Header: t('Schema'),\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { sql_tables: tables = [] },\n          },\n        }: any) => {\n          const names = tables.map((table: any) => table.table);\n          const main = names?.shift() || '';\n\n          if (names.length) {\n            return (\n              <StyledTableLabel>\n                <span>{main}</span>\n                <Popover\n                  placement=\"right\"\n                  title={t('TABLES')}\n                  trigger=\"click\"\n                  content={\n                    <>\n                      {names.map((name: string) => (\n                        <StyledPopoverItem key={name}>{name}</StyledPopoverItem>\n                      ))}\n                    </>\n                  }\n                >\n                  <span className=\"count\">(+{names.length})</span>\n                </Popover>\n              </StyledTableLabel>\n            );\n          }\n\n          return main;\n        },\n        accessor: 'sql_tables',\n        Header: t('Tables'),\n        size: 'xl',\n        disableSortBy: true,\n      },\n      {\n        Cell: ({\n          row: {\n            original: { tags = [] },\n          },\n        }: any) => (\n          // Only show custom type tags\n          <TagsList tags={tags.filter((tag: Tag) => tag.type === 1)} />\n        ),\n        Header: t('Tags'),\n        accessor: 'tags',\n        disableSortBy: true,\n        hidden: !isFeatureEnabled(FeatureFlag.TaggingSystem),\n      },\n      {\n        Cell: ({\n          row: {\n            original: {\n              changed_by: changedBy,\n              changed_on_delta_humanized: changedOn,\n            },\n          },\n        }: any) => <ModifiedInfo user={changedBy} date={changedOn} />,\n        Header: t('Last modified'),\n        accessor: 'changed_on_delta_humanized',\n        size: 'xl',\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          const handlePreview = () => {\n            handleSavedQueryPreview(original.id);\n          };\n          const handleEdit = ({ metaKey }: MouseEvent) =>\n            openInSqlLab(original.id, Boolean(metaKey));\n          const handleCopy = () => copyQueryLink(original);\n          const handleExport = () => handleBulkSavedQueryExport([original]);\n          const handleDelete = () => setQueryCurrentlyDeleting(original);\n\n          const actions = [\n            {\n              label: 'preview-action',\n              tooltip: t('Query preview'),\n              placement: 'bottom',\n              icon: 'Binoculars',\n              onClick: handlePreview,\n            },\n            canEdit && {\n              label: 'edit-action',\n              tooltip: t('Edit query'),\n              placement: 'bottom',\n              icon: 'EditOutlined',\n              onClick: handleEdit,\n            },\n            {\n              label: 'copy-action',\n              tooltip: t('Copy query URL'),\n              placement: 'bottom',\n              icon: 'CopyOutlined',\n              onClick: handleCopy,\n            },\n            canExport && {\n              label: 'export-action',\n              tooltip: t('Export query'),\n              placement: 'bottom',\n              icon: 'UploadOutlined',\n              onClick: handleExport,\n            },\n            canDelete && {\n              label: 'delete-action',\n              tooltip: t('Delete query'),\n              placement: 'bottom',\n              icon: 'DeleteOutlined',\n              onClick: handleDelete,\n            },\n          ].filter(item => !!item);\n\n          return <ActionsBar actions={actions as ActionProps[]} />;\n        },\n        Header: t('Actions'),\n        id: 'actions',\n        disableSortBy: true,\n      },\n      {\n        accessor: QueryObjectColumns.ChangedBy,\n        hidden: true,\n      },\n    ],\n    [canDelete, canEdit, canExport, copyQueryLink, handleSavedQueryPreview],\n  );\n\n  const filters: Filters = useMemo(\n    () => [\n      {\n        Header: t('Search'),\n        id: 'label',\n        key: 'search',\n        input: 'search',\n        operator: FilterOperator.AllText,\n        toolTipDescription:\n          'Searches all text fields: Name, Description, Database & Schema',\n      },\n      {\n        Header: t('Database'),\n        key: 'database',\n        id: 'database',\n        input: 'select',\n        operator: FilterOperator.RelationOneMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'saved_query',\n          'database',\n          createErrorHandler(errMsg =>\n            addDangerToast(\n              t(\n                'An error occurred while fetching dataset datasource values: %s',\n                errMsg,\n              ),\n            ),\n          ),\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Schema'),\n        id: 'schema',\n        key: 'schema',\n        input: 'select',\n        operator: FilterOperator.Equals,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchDistinct(\n          'saved_query',\n          'schema',\n          createErrorHandler(errMsg =>\n            addDangerToast(\n              t('An error occurred while fetching schema values: %s', errMsg),\n            ),\n          ),\n        ),\n        paginate: true,\n      },\n      ...((isFeatureEnabled(FeatureFlag.TaggingSystem) && canReadTag\n        ? [\n            {\n              Header: t('Tag'),\n              id: 'tags',\n              key: 'tags',\n              input: 'select',\n              operator: FilterOperator.SavedQueryTagById,\n              fetchSelects: loadTags,\n            },\n          ]\n        : []) as Filters),\n      {\n        Header: t('Modified by'),\n        key: 'changed_by',\n        id: 'changed_by',\n        input: 'select',\n        operator: FilterOperator.RelationOneMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'saved_query',\n          'changed_by',\n          createErrorHandler(errMsg =>\n            t(\n              'An error occurred while fetching dataset datasource values: %s',\n              errMsg,\n            ),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n    ],\n    [addDangerToast],\n  );\n\n  return (\n    <>\n      <SubMenu {...menuData} />\n      {queryCurrentlyDeleting && (\n        <DeleteModal\n          description={t(\n            'This action will permanently delete the saved query.',\n          )}\n          onConfirm={() => {\n            if (queryCurrentlyDeleting) {\n              handleQueryDelete(queryCurrentlyDeleting);\n            }\n          }}\n          onHide={() => setQueryCurrentlyDeleting(null)}\n          open\n          title={t('Delete Query?')}\n        />\n      )}\n      {savedQueryCurrentlyPreviewing && (\n        <SavedQueryPreviewModal\n          fetchData={handleSavedQueryPreview}\n          onHide={() => setSavedQueryCurrentlyPreviewing(null)}\n          savedQuery={savedQueryCurrentlyPreviewing}\n          queries={queries}\n          openInSqlLab={openInSqlLab}\n          show\n        />\n      )}\n      <ConfirmStatusChange\n        title={t('Please confirm')}\n        description={t('Are you sure you want to delete the selected queries?')}\n        onConfirm={handleBulkQueryDelete}\n      >\n        {confirmDelete => {\n          const bulkActions: ListViewProps['bulkActions'] = [];\n          if (canDelete) {\n            bulkActions.push({\n              key: 'delete',\n              name: t('Delete'),\n              onSelect: confirmDelete,\n              type: 'danger',\n            });\n          }\n          if (canExport) {\n            bulkActions.push({\n              key: 'export',\n              name: t('Export'),\n              type: 'primary',\n              onSelect: handleBulkSavedQueryExport,\n            });\n          }\n          return (\n            <ListView<SavedQueryObject>\n              className=\"saved_query-list-view\"\n              columns={columns}\n              count={queryCount}\n              data={queries}\n              fetchData={fetchData}\n              filters={filters}\n              initialSort={initialSort}\n              loading={loading}\n              pageSize={PAGE_SIZE}\n              bulkActions={bulkActions}\n              addSuccessToast={addSuccessToast}\n              addDangerToast={addDangerToast}\n              bulkSelectEnabled={bulkSelectEnabled}\n              disableBulkSelect={toggleBulkSelect}\n              highlightRowId={savedQueryCurrentlyPreviewing?.id}\n              enableBulkTag\n              bulkTagResourceName=\"query\"\n              refreshData={refreshData}\n            />\n          );\n        }}\n      </ConfirmStatusChange>\n\n      <ImportModelsModal\n        resourceName=\"saved_query\"\n        resourceLabel={t('queries')}\n        passwordsNeededMessage={PASSWORDS_NEEDED_MESSAGE}\n        confirmOverwriteMessage={CONFIRM_OVERWRITE_MESSAGE}\n        addDangerToast={addDangerToast}\n        addSuccessToast={addSuccessToast}\n        onModelImport={handleSavedQueryImport}\n        show={importingSavedQuery}\n        onHide={closeSavedQueryImportModal}\n        passwordFields={passwordFields}\n        setPasswordFields={setPasswordFields}\n        sshTunnelPasswordFields={sshTunnelPasswordFields}\n        setSSHTunnelPasswordFields={setSSHTunnelPasswordFields}\n        sshTunnelPrivateKeyFields={sshTunnelPrivateKeyFields}\n        setSSHTunnelPrivateKeyFields={setSSHTunnelPrivateKeyFields}\n        sshTunnelPrivateKeyPasswordFields={sshTunnelPrivateKeyPasswordFields}\n        setSSHTunnelPrivateKeyPasswordFields={\n          setSSHTunnelPrivateKeyPasswordFields\n        }\n      />\n      {preparingExport && <Loading />}\n    </>\n  );\n}\n\nexport default withToasts(SavedQueryList);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}