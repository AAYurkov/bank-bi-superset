{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useLayoutEffect } from 'react';\nimport { css, SafeMarkdown, styled } from '@superset-ui/core';\nimport { Tooltip } from './Tooltip';\nimport { ColumnTypeLabel } from './ColumnTypeLabel/ColumnTypeLabel';\nimport CertifiedIconWithTooltip from './CertifiedIconWithTooltip';\nimport { getColumnLabelText, getColumnTooltipNode, getColumnTypeTooltipNode } from './labelUtils';\nimport { SQLPopover } from './SQLPopover';\nimport InfoTooltipWithTrigger from './InfoTooltipWithTrigger';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst StyleOverrides = styled.span`\n  display: flex;\n  align-items: center;\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\nexport function ColumnOption({ column, labelRef, showType = false }) {\n  const { expression, column_name, type_generic } = column;\n  const hasExpression = expression && expression !== column_name;\n  const warningMarkdown = column.warning_markdown || column.warning_text || column.error_text;\n  const type = hasExpression ? 'expression' : type_generic;\n  const [tooltipText, setTooltipText] = useState(column.column_name);\n  const [columnTypeTooltipText, setcolumnTypeTooltipText] = useState(column.type);\n  useLayoutEffect(() => {\n    setTooltipText(getColumnTooltipNode(column, labelRef));\n    setcolumnTypeTooltipText(getColumnTypeTooltipNode(column));\n  }, [labelRef, column]);\n  return _jsxs(StyleOverrides, { children: [\n    showType && type !== undefined && _jsx(Tooltip, { id: \"metric-type-tooltip\", title: columnTypeTooltipText, placement: \"bottomRight\", align: { offset: [8, -2] }, children:\n      _jsx(\"span\", { children:\n        _jsx(ColumnTypeLabel, { type: type }) }\n      ) }\n    ),\n    _jsx(Tooltip, { id: \"metric-name-tooltip\", title: tooltipText, children:\n      _jsx(\"span\", { className: \"option-label column-option-label\", css: (theme) => css`\n            margin-right: ${theme.gridUnit}px;\n          `, ref: labelRef, children:\n        getColumnLabelText(column) }\n      ) }\n    ),\n    hasExpression && _jsx(SQLPopover, { sqlExpression: expression }),\n    column.is_certified && _jsx(CertifiedIconWithTooltip, { metricName: column.metric_name, certifiedBy: column.certified_by, details: column.certification_details }),\n    warningMarkdown && _jsx(InfoTooltipWithTrigger, { className: \"text-warning\", icon: \"warning\", tooltip: _jsx(SafeMarkdown, { source: warningMarkdown }), label: `warn-${column.column_name}`, iconsStyle: { marginLeft: 0 }, ...(column.error_text && {\n        className: 'text-danger',\n        icon: 'exclamation-circle'\n      }) })] }\n  );\n}__signature__(ColumnOption, \"useState{[tooltipText, setTooltipText](column.column_name)}\\nuseState{[columnTypeTooltipText, setcolumnTypeTooltipText](column.type)}\\nuseLayoutEffect{}\");const _default =\nColumnOption;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyleOverrides, \"StyleOverrides\", \"/Users/aryurkov/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/ColumnOption.tsx\");reactHotLoader.register(ColumnOption, \"ColumnOption\", \"/Users/aryurkov/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/ColumnOption.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/ColumnOption.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useLayoutEffect","css","SafeMarkdown","styled","Tooltip","ColumnTypeLabel","CertifiedIconWithTooltip","getColumnLabelText","getColumnTooltipNode","getColumnTypeTooltipNode","SQLPopover","InfoTooltipWithTrigger","jsx","_jsx","jsxs","_jsxs","StyleOverrides","span","theme","gridUnit","ColumnOption","column","labelRef","showType","expression","column_name","type_generic","hasExpression","warningMarkdown","warning_markdown","warning_text","error_text","type","tooltipText","setTooltipText","columnTypeTooltipText","setcolumnTypeTooltipText","children","undefined","id","title","placement","align","offset","className","ref","sqlExpression","is_certified","metricName","metric_name","certifiedBy","certified_by","details","certification_details","icon","tooltip","source","label","iconsStyle","marginLeft","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/ColumnOption.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, ReactNode, useLayoutEffect, RefObject } from 'react';\nimport { css, SafeMarkdown, styled, SupersetTheme } from '@superset-ui/core';\nimport { Tooltip } from './Tooltip';\nimport { ColumnTypeLabel } from './ColumnTypeLabel/ColumnTypeLabel';\nimport CertifiedIconWithTooltip from './CertifiedIconWithTooltip';\nimport { ColumnMeta } from '../types';\nimport {\n  getColumnLabelText,\n  getColumnTooltipNode,\n  getColumnTypeTooltipNode,\n} from './labelUtils';\nimport { SQLPopover } from './SQLPopover';\nimport InfoTooltipWithTrigger from './InfoTooltipWithTrigger';\n\nexport type ColumnOptionProps = {\n  column: ColumnMeta;\n  showType?: boolean;\n  labelRef?: RefObject<any>;\n};\n\nconst StyleOverrides = styled.span`\n  display: flex;\n  align-items: center;\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nexport function ColumnOption({\n  column,\n  labelRef,\n  showType = false,\n}: ColumnOptionProps) {\n  const { expression, column_name, type_generic } = column;\n  const hasExpression = expression && expression !== column_name;\n  const warningMarkdown =\n    column.warning_markdown || column.warning_text || column.error_text;\n  const type = hasExpression ? 'expression' : type_generic;\n  const [tooltipText, setTooltipText] = useState<ReactNode>(column.column_name);\n  const [columnTypeTooltipText, setcolumnTypeTooltipText] = useState<ReactNode>(\n    column.type,\n  );\n\n  useLayoutEffect(() => {\n    setTooltipText(getColumnTooltipNode(column, labelRef));\n    setcolumnTypeTooltipText(getColumnTypeTooltipNode(column));\n  }, [labelRef, column]);\n\n  return (\n    <StyleOverrides>\n      {showType && type !== undefined && (\n        <Tooltip\n          id=\"metric-type-tooltip\"\n          title={columnTypeTooltipText}\n          placement=\"bottomRight\"\n          align={{ offset: [8, -2] }}\n        >\n          <span>\n            <ColumnTypeLabel type={type} />\n          </span>\n        </Tooltip>\n      )}\n      <Tooltip id=\"metric-name-tooltip\" title={tooltipText}>\n        <span\n          className=\"option-label column-option-label\"\n          css={(theme: SupersetTheme) => css`\n            margin-right: ${theme.gridUnit}px;\n          `}\n          ref={labelRef}\n        >\n          {getColumnLabelText(column)}\n        </span>\n      </Tooltip>\n      {hasExpression && <SQLPopover sqlExpression={expression} />}\n      {column.is_certified && (\n        <CertifiedIconWithTooltip\n          metricName={column.metric_name}\n          certifiedBy={column.certified_by}\n          details={column.certification_details}\n        />\n      )}\n      {warningMarkdown && (\n        <InfoTooltipWithTrigger\n          className=\"text-warning\"\n          icon=\"warning\"\n          tooltip={<SafeMarkdown source={warningMarkdown} />}\n          label={`warn-${column.column_name}`}\n          iconsStyle={{ marginLeft: 0 }}\n          {...(column.error_text && {\n            className: 'text-danger',\n            icon: 'exclamation-circle',\n          })}\n        />\n      )}\n    </StyleOverrides>\n  );\n}\n\nexport default ColumnOption;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}