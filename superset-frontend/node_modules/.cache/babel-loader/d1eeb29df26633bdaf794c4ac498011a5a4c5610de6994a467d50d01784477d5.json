{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState } from 'react';\nimport { styled, useTheme } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport { Icons } from 'src/components/Icons';\nimport { now, fDuration } from 'src/utils/dates';import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nconst TimerLabel = styled(Label)`\n  text-align: left;\n  font-family: ${({ theme }) => theme.typography.families.monospace};\n`;\nexport default function Timer({ endTime, isRunning, startTime, status = 'success' }) {\n  const theme = useTheme();\n  const [clockStr, setClockStr] = useState('00:00:00.00');\n  const timer = useRef();\n  const getIconColor = (status) => {\n    const { colors } = theme;\n    const colorMap = {\n      success: colors.success.dark2,\n      warning: colors.warning.dark2,\n      danger: colors.error.dark2,\n      info: colors.info.dark2,\n      default: colors.grayscale.dark1,\n      primary: colors.primary.dark2,\n      secondary: colors.secondary.dark2\n    };\n    return colorMap[status] || colors.grayscale.dark1;\n  };\n  useEffect(() => {\n    const stopTimer = () => {\n      if (timer.current) {\n        clearInterval(timer.current);\n        timer.current = undefined;\n      }\n    };\n    if (isRunning) {\n      timer.current = setInterval(() => {\n        if (startTime) {\n          const endDttm = endTime || now();\n          if (startTime < endDttm) {\n            setClockStr(fDuration(startTime, endDttm));\n          }\n          if (!isRunning) {\n            stopTimer();\n          }\n        }\n      }, 30);\n    }\n    return stopTimer;\n  }, [endTime, isRunning, startTime]);\n  return _jsx(TimerLabel, { icon: _jsx(Icons.ClockCircleOutlined, { iconColor: getIconColor(status), iconSize: \"m\" }), type: status, role: \"timer\", children:\n    clockStr }\n  );\n}__signature__(Timer, \"useTheme{theme}\\nuseState{[clockStr, setClockStr]('00:00:00.00')}\\nuseRef{timer}\\nuseEffect{}\", () => [useTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TimerLabel, \"TimerLabel\", \"/Users/aryurkov/superset/superset-frontend/src/components/Timer/index.tsx\");reactHotLoader.register(Timer, \"Timer\", \"/Users/aryurkov/superset/superset-frontend/src/components/Timer/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useEffect","useRef","useState","styled","useTheme","Label","Icons","now","fDuration","jsx","_jsx","TimerLabel","theme","typography","families","monospace","Timer","endTime","isRunning","startTime","status","clockStr","setClockStr","timer","getIconColor","colors","colorMap","success","dark2","warning","danger","error","info","default","grayscale","dark1","primary","secondary","stopTimer","current","clearInterval","undefined","setInterval","endDttm","icon","ClockCircleOutlined","iconColor","iconSize","type","role","children","__signature__","reactHotLoader","reactHotLoaderGlobal","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/components/Timer/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState } from 'react';\nimport { styled, useTheme } from '@superset-ui/core';\nimport Label, { Type } from 'src/components/Label';\nimport { Icons } from 'src/components/Icons';\n\nimport { now, fDuration } from 'src/utils/dates';\n\nexport interface TimerProps {\n  endTime?: number;\n  isRunning: boolean;\n  startTime?: number;\n  status?: Type;\n}\n\nconst TimerLabel = styled(Label)`\n  text-align: left;\n  font-family: ${({ theme }) => theme.typography.families.monospace};\n`;\n\nexport default function Timer({\n  endTime,\n  isRunning,\n  startTime,\n  status = 'success',\n}: TimerProps) {\n  const theme = useTheme();\n  const [clockStr, setClockStr] = useState('00:00:00.00');\n  const timer = useRef<ReturnType<typeof setInterval>>();\n\n  const getIconColor = (status: Type) => {\n    const { colors } = theme;\n\n    const colorMap: Record<Type, string> = {\n      success: colors.success.dark2,\n      warning: colors.warning.dark2,\n      danger: colors.error.dark2,\n      info: colors.info.dark2,\n      default: colors.grayscale.dark1,\n      primary: colors.primary.dark2,\n      secondary: colors.secondary.dark2,\n    };\n\n    return colorMap[status] || colors.grayscale.dark1;\n  };\n  useEffect(() => {\n    const stopTimer = () => {\n      if (timer.current) {\n        clearInterval(timer.current);\n        timer.current = undefined;\n      }\n    };\n\n    if (isRunning) {\n      timer.current = setInterval(() => {\n        if (startTime) {\n          const endDttm = endTime || now();\n          if (startTime < endDttm) {\n            setClockStr(fDuration(startTime, endDttm));\n          }\n          if (!isRunning) {\n            stopTimer();\n          }\n        }\n      }, 30);\n    }\n    return stopTimer;\n  }, [endTime, isRunning, startTime]);\n\n  return (\n    <TimerLabel\n      icon={\n        <Icons.ClockCircleOutlined\n          iconColor={getIconColor(status)}\n          iconSize=\"m\"\n        />\n      }\n      type={status}\n      role=\"timer\"\n    >\n      {clockStr}\n    </TimerLabel>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}