{"ast":null,"code":"import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// TODO: Remove fa-icon\n/* eslint-disable icons/no-fa-icons-usage */\nimport { useState, useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Collapse from 'src/components/Collapse';\nimport Card from 'src/components/Card';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport { css, t, styled, useTheme } from '@superset-ui/core';\n\nimport { removeDataPreview, removeTables, addDangerToast, syncTable } from 'src/SqlLab/actions/sqlLab';\nimport { tableApiUtil, useTableExtendedMetadataQuery, useTableMetadataQuery } from 'src/hooks/apiResources';\nimport { Tooltip } from 'src/components/Tooltip';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { IconTooltip } from 'src/components/IconTooltip';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Loading from 'src/components/Loading';\nimport useEffectEvent from 'src/hooks/useEffectEvent';\nimport { Icons } from 'src/components/Icons';\nimport ColumnElement from '../ColumnElement';\nimport ShowSQL from '../ShowSQL';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";import { createElement as _createElement } from \"@emotion/react\";\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &:hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;\nconst Fade = styled.div`\n  transition: all ${({ theme }) => theme.transitionTiming}s;\n  opacity: ${(props) => props.hovered ? 1 : 0};\n`;\nconst StyledCollapsePanel = styled(Collapse.Panel)`\n  ${({ theme }) => css`\n    & {\n      .ws-el-controls {\n        margin-right: ${-theme.gridUnit}px;\n        display: flex;\n      }\n\n      .header-container {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        width: 100%;\n\n        .table-name {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: ${theme.typography.sizes.l}px;\n          flex: 1;\n        }\n\n        .header-right-side {\n          margin-left: auto;\n          display: flex;\n          align-items: center;\n          margin-right: ${theme.gridUnit * 8}px;\n        }\n      }\n    }\n  `}\n`;var _ref = process.env.NODE_ENV === \"production\" ? { name: \"1hs1mx1\", styles: \"padding-top:6px\" } : { name: \"14hmmm7-metadata\", styles: \"padding-top:6px;label:metadata;/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvU3FsTGFiL2NvbXBvbmVudHMvVGFibGVFbGVtZW50L2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrUGtJIiwiZmlsZSI6Ii9Vc2Vycy9hcnl1cmtvdi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvU3FsTGFiL2NvbXBvbmVudHMvVGFibGVFbGVtZW50L2luZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE86IFJlbW92ZSBmYS1pY29uXG4vKiBlc2xpbnQtZGlzYWJsZSBpY29ucy9uby1mYS1pY29ucy11c2FnZSAqL1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlRGlzcGF0Y2ggfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgQ29sbGFwc2UgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ29sbGFwc2UnO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgQnV0dG9uR3JvdXAgZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uR3JvdXAnO1xuaW1wb3J0IHsgY3NzLCB0LCBzdHlsZWQsIHVzZVRoZW1lIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgcmVtb3ZlRGF0YVByZXZpZXcsIHJlbW92ZVRhYmxlcywgYWRkRGFuZ2VyVG9hc3QsIHN5bmNUYWJsZSwgfSBmcm9tICdzcmMvU3FsTGFiL2FjdGlvbnMvc3FsTGFiJztcbmltcG9ydCB7IHRhYmxlQXBpVXRpbCwgdXNlVGFibGVFeHRlbmRlZE1ldGFkYXRhUXVlcnksIHVzZVRhYmxlTWV0YWRhdGFRdWVyeSwgfSBmcm9tICdzcmMvaG9va3MvYXBpUmVzb3VyY2VzJztcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdzcmMvY29tcG9uZW50cy9Ub29sdGlwJztcbmltcG9ydCBDb3B5VG9DbGlwYm9hcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ29weVRvQ2xpcGJvYXJkJztcbmltcG9ydCB7IEljb25Ub29sdGlwIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvblRvb2x0aXAnO1xuaW1wb3J0IE1vZGFsVHJpZ2dlciBmcm9tICdzcmMvY29tcG9uZW50cy9Nb2RhbFRyaWdnZXInO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnc3JjL2NvbXBvbmVudHMvTG9hZGluZyc7XG5pbXBvcnQgdXNlRWZmZWN0RXZlbnQgZnJvbSAnc3JjL2hvb2tzL3VzZUVmZmVjdEV2ZW50JztcbmltcG9ydCB7IEljb25zIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IENvbHVtbkVsZW1lbnQgZnJvbSAnLi4vQ29sdW1uRWxlbWVudCc7XG5pbXBvcnQgU2hvd1NRTCBmcm9tICcuLi9TaG93U1FMJztcbmNvbnN0IFN0eWxlZFNwYW4gPSBzdHlsZWQuc3BhbiBgXG4gIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy5wcmltYXJ5LmRhcmsxfTtcbiAgJjpob3ZlciB7XG4gICAgY29sb3I6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuY29sb3JzLnByaW1hcnkuZGFyazJ9O1xuICB9XG4gIGN1cnNvcjogcG9pbnRlcjtcbmA7XG5jb25zdCBGYWRlID0gc3R5bGVkLmRpdiBgXG4gIHRyYW5zaXRpb246IGFsbCAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnRyYW5zaXRpb25UaW1pbmd9cztcbiAgb3BhY2l0eTogJHsocHJvcHMpID0+IChwcm9wcy5ob3ZlcmVkID8gMSA6IDApfTtcbmA7XG5jb25zdCBTdHlsZWRDb2xsYXBzZVBhbmVsID0gc3R5bGVkKENvbGxhcHNlLlBhbmVsKSBgXG4gICR7KHsgdGhlbWUgfSkgPT4gY3NzIGBcbiAgICAmIHtcbiAgICAgIC53cy1lbC1jb250cm9scyB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogJHstdGhlbWUuZ3JpZFVuaXR9cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXItY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG5cbiAgICAgICAgLnRhYmxlLW5hbWUge1xuICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICBmb250LXNpemU6ICR7dGhlbWUudHlwb2dyYXBoeS5zaXplcy5sfXB4O1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgIH1cblxuICAgICAgICAuaGVhZGVyLXJpZ2h0LXNpZGUge1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiA4fXB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBgfVxuYDtcbmNvbnN0IFRhYmxlRWxlbWVudCA9ICh7IHRhYmxlLCAuLi5wcm9wcyB9KSA9PiB7XG4gICAgY29uc3QgeyBkYklkLCBjYXRhbG9nLCBzY2hlbWEsIG5hbWUsIGV4cGFuZGVkIH0gPSB0YWJsZTtcbiAgICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lKCk7XG4gICAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICAgIGNvbnN0IHsgY3VycmVudERhdGE6IHRhYmxlTWV0YWRhdGEsIGlzU3VjY2VzczogaXNNZXRhZGF0YVN1Y2Nlc3MsIGlzRmV0Y2hpbmc6IGlzTWV0YWRhdGFGZXRjaGluZywgaXNFcnJvcjogaGFzTWV0YWRhdGFFcnJvciwgfSA9IHVzZVRhYmxlTWV0YWRhdGFRdWVyeSh7XG4gICAgICAgIGRiSWQsXG4gICAgICAgIGNhdGFsb2csXG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdGFibGU6IG5hbWUsXG4gICAgfSwgeyBza2lwOiAhZXhwYW5kZWQgfSk7XG4gICAgY29uc3QgeyBjdXJyZW50RGF0YTogdGFibGVFeHRlbmRlZE1ldGFkYXRhLCBpc1N1Y2Nlc3M6IGlzRXh0cmFNZXRhZGF0YVN1Y2Nlc3MsIGlzTG9hZGluZzogaXNFeHRyYU1ldGFkYXRhTG9hZGluZywgaXNFcnJvcjogaGFzRXh0ZW5kZWRNZXRhZGF0YUVycm9yLCB9ID0gdXNlVGFibGVFeHRlbmRlZE1ldGFkYXRhUXVlcnkoe1xuICAgICAgICBkYklkLFxuICAgICAgICBjYXRhbG9nLFxuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHRhYmxlOiBuYW1lLFxuICAgIH0sIHsgc2tpcDogIWV4cGFuZGVkIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChoYXNNZXRhZGF0YUVycm9yIHx8IGhhc0V4dGVuZGVkTWV0YWRhdGFFcnJvcikge1xuICAgICAgICAgICAgZGlzcGF0Y2goYWRkRGFuZ2VyVG9hc3QodCgnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdGFibGUgbWV0YWRhdGEnKSkpO1xuICAgICAgICB9XG4gICAgfSwgW2hhc01ldGFkYXRhRXJyb3IsIGhhc0V4dGVuZGVkTWV0YWRhdGFFcnJvciwgZGlzcGF0Y2hdKTtcbiAgICBjb25zdCB0YWJsZURhdGEgPSB7XG4gICAgICAgIC4uLnRhYmxlTWV0YWRhdGEsXG4gICAgICAgIC4uLnRhYmxlRXh0ZW5kZWRNZXRhZGF0YSxcbiAgICB9O1xuICAgIC8vIFRPRE86IG1pZ3JhdGUgc3luY1RhYmxlIGxvZ2ljIGJ5IFNJUC05M1xuICAgIGNvbnN0IHN5bmNUYWJsZU1ldGFkYXRhID0gdXNlRWZmZWN0RXZlbnQoKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemVkIH0gPSB0YWJsZTtcbiAgICAgICAgaWYgKCFpbml0aWFsaXplZCkge1xuICAgICAgICAgICAgZGlzcGF0Y2goc3luY1RhYmxlKHRhYmxlLCB0YWJsZURhdGEpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChpc01ldGFkYXRhU3VjY2VzcyAmJiBpc0V4dHJhTWV0YWRhdGFTdWNjZXNzKSB7XG4gICAgICAgICAgICBzeW5jVGFibGVNZXRhZGF0YSgpO1xuICAgICAgICB9XG4gICAgfSwgW2lzTWV0YWRhdGFTdWNjZXNzLCBpc0V4dHJhTWV0YWRhdGFTdWNjZXNzLCBzeW5jVGFibGVNZXRhZGF0YV0pO1xuICAgIGNvbnN0IFtzb3J0Q29sdW1ucywgc2V0U29ydENvbHVtbnNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtob3ZlcmVkLCBzZXRIb3ZlcmVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCB0YWJsZU5hbWVSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3Qgc2V0SG92ZXIgPSAoaG92ZXJlZCkgPT4ge1xuICAgICAgICBkZWJvdW5jZSgoKSA9PiBzZXRIb3ZlcmVkKGhvdmVyZWQpLCAxMDApKCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWJsZSA9ICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2gocmVtb3ZlRGF0YVByZXZpZXcodGFibGUpKTtcbiAgICAgICAgZGlzcGF0Y2gocmVtb3ZlVGFibGVzKFt0YWJsZV0pKTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVNvcnRDb2x1bW5zID0gKCkgPT4ge1xuICAgICAgICBzZXRTb3J0Q29sdW1ucyhwcmV2U3RhdGUgPT4gIXByZXZTdGF0ZSk7XG4gICAgfTtcbiAgICBjb25zdCByZWZyZXNoVGFibGVNZXRhZGF0YSA9ICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2godGFibGVBcGlVdGlsLmludmFsaWRhdGVUYWdzKFt7IHR5cGU6ICdUYWJsZU1ldGFkYXRhcycsIGlkOiBuYW1lIH1dKSk7XG4gICAgICAgIGRpc3BhdGNoKHN5bmNUYWJsZSh0YWJsZSwgdGFibGVEYXRhKSk7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJXZWxsID0gKCkgPT4ge1xuICAgICAgICBsZXQgcGFydGl0aW9ucztcbiAgICAgICAgbGV0IG1ldGFkYXRhO1xuICAgICAgICBpZiAodGFibGVEYXRhLnBhcnRpdGlvbnMpIHtcbiAgICAgICAgICAgIGxldCBwYXJ0aXRpb25RdWVyeTtcbiAgICAgICAgICAgIGxldCBwYXJ0aXRpb25DbGlwQm9hcmQ7XG4gICAgICAgICAgICBpZiAodGFibGVEYXRhLnBhcnRpdGlvbnMucGFydGl0aW9uUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAoeyBwYXJ0aXRpb25RdWVyeSB9ID0gdGFibGVEYXRhLnBhcnRpdGlvbnMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdCgnQ29weSBwYXJ0aXRpb24gcXVlcnkgdG8gY2xpcGJvYXJkJyk7XG4gICAgICAgICAgICAgICAgcGFydGl0aW9uQ2xpcEJvYXJkID0gKDxDb3B5VG9DbGlwYm9hcmQgdGV4dD17cGFydGl0aW9uUXVlcnl9IHNob3VsZFNob3dUZXh0PXtmYWxzZX0gdG9vbHRpcFRleHQ9e3R0fSBjb3B5Tm9kZT17PEljb25zLkNvcHlPdXRsaW5lZCBpY29uU2l6ZT1cInNcIi8+fS8+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxhdGVzdCA9IE9iamVjdC5lbnRyaWVzKHRhYmxlRGF0YS5wYXJ0aXRpb25zPy5sYXRlc3QgfHwgW10pXG4gICAgICAgICAgICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgJHtrZXl9PSR7dmFsdWV9YClcbiAgICAgICAgICAgICAgICAuam9pbignLycpO1xuICAgICAgICAgICAgcGFydGl0aW9ucyA9ICg8ZGl2PlxuICAgICAgICAgIDxzbWFsbD5cbiAgICAgICAgICAgIHt0KCdsYXRlc3QgcGFydGl0aW9uOicpfSB7bGF0ZXN0fVxuICAgICAgICAgIDwvc21hbGw+eycgJ31cbiAgICAgICAgICB7cGFydGl0aW9uQ2xpcEJvYXJkfVxuICAgICAgICA8L2Rpdj4pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YWJsZURhdGEubWV0YWRhdGEpIHtcbiAgICAgICAgICAgIG1ldGFkYXRhID0gT2JqZWN0LmVudHJpZXModGFibGVEYXRhLm1ldGFkYXRhKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKDxkaXY+XG4gICAgICAgICAgPHNtYWxsPlxuICAgICAgICAgICAgPHN0cm9uZz57a2V5fTo8L3N0cm9uZz4ge3ZhbHVlfVxuICAgICAgICAgIDwvc21hbGw+XG4gICAgICAgIDwvZGl2PikpO1xuICAgICAgICAgICAgaWYgKCFtZXRhZGF0YT8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8gaGlkZSBtZXRhZGF0YSBjYXJkIHZpZXdcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhcnRpdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIGhpZGUgcGFydGl0aW9uIGNhcmQgdmlld1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICg8Q2FyZCBzaXplPVwic21hbGxcIj5cbiAgICAgICAge3BhcnRpdGlvbnN9XG4gICAgICAgIHttZXRhZGF0YX1cbiAgICAgIDwvQ2FyZD4pO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQ29udHJvbHMgPSAoKSA9PiB7XG4gICAgICAgIGxldCBrZXlMaW5rO1xuICAgICAgICBjb25zdCBLRVlTX0ZPUl9UQUJMRV9URVhUID0gdCgnS2V5cyBmb3IgdGFibGUnKTtcbiAgICAgICAgaWYgKHRhYmxlRGF0YT8uaW5kZXhlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICBrZXlMaW5rID0gKDxNb2RhbFRyaWdnZXIgbW9kYWxUaXRsZT17YCR7S0VZU19GT1JfVEFCTEVfVEVYVH0gJHtuYW1lfWB9IG1vZGFsQm9keT17dGFibGVEYXRhLmluZGV4ZXMubWFwKChpeCwgaSkgPT4gKDxwcmUga2V5PXtpfT57SlNPTi5zdHJpbmdpZnkoaXgsIG51bGwsICcgICcpfTwvcHJlPikpfSB0cmlnZ2VyTm9kZT17PEljb25Ub29sdGlwIGNsYXNzTmFtZT1cInB1bGwtbGVmdCBtLWwtMlwiIHRvb2x0aXA9e3QoJ1ZpZXcga2V5cyAmIGluZGV4ZXMgKCVzKScsIHRhYmxlRGF0YS5pbmRleGVzLmxlbmd0aCl9PlxuICAgICAgICAgICAgICA8SWNvbnMuVGFibGVPdXRsaW5lZCBpY29uU2l6ZT1cIm1cIiBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5wcmltYXJ5LmRhcmsyfS8+XG4gICAgICAgICAgICA8L0ljb25Ub29sdGlwPn0vPik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICg8QnV0dG9uR3JvdXAgY3NzPXtjc3MgYFxuICAgICAgICAgIGNvbHVtbi1nYXA6ICR7dGhlbWUuZ3JpZFVuaXQgKiAxLjV9cHg7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAke3RoZW1lLmdyaWRVbml0fXB4O1xuICAgICAgICAgICYgc3BhbiB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICB3aWR0aDogJHt0aGVtZS5ncmlkVW5pdCAqIDR9cHg7XG4gICAgICAgICAgfVxuICAgICAgICBgfT5cbiAgICAgICAgPEljb25Ub29sdGlwIGNsYXNzTmFtZT1cInB1bGwtbGVmdCBtLWwtMiBwb2ludGVyXCIgb25DbGljaz17cmVmcmVzaFRhYmxlTWV0YWRhdGF9IHRvb2x0aXA9e3QoJ1JlZnJlc2ggdGFibGUgc2NoZW1hJyl9PlxuICAgICAgICAgIDxJY29ucy5TeW5jT3V0bGluZWQgaWNvblNpemU9XCJtXCIgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMn0vPlxuICAgICAgICA8L0ljb25Ub29sdGlwPlxuICAgICAgICB7a2V5TGlua31cbiAgICAgICAgPEljb25Ub29sdGlwIGNsYXNzTmFtZT17YGZhIGZhLXNvcnQtJHtzb3J0Q29sdW1ucyA/ICdudW1lcmljJyA6ICdhbHBoYSd9LWFzYyBgICtcbiAgICAgICAgICAgICAgICAncHVsbC1sZWZ0IHNvcnQtY29scyBtLWwtMiBwb2ludGVyJ30gb25DbGljaz17dG9nZ2xlU29ydENvbHVtbnN9IHRvb2x0aXA9e3NvcnRDb2x1bW5zXG4gICAgICAgICAgICAgICAgPyB0KCdPcmlnaW5hbCB0YWJsZSBjb2x1bW4gb3JkZXInKVxuICAgICAgICAgICAgICAgIDogdCgnU29ydCBjb2x1bW5zIGFscGhhYmV0aWNhbGx5Jyl9Lz5cbiAgICAgICAge3RhYmxlRGF0YS5zZWxlY3RTdGFyICYmICg8Q29weVRvQ2xpcGJvYXJkIGNvcHlOb2RlPXs8SWNvblRvb2x0aXAgYXJpYS1sYWJlbD1cIkNvcHlcIiB0b29sdGlwPXt0KCdDb3B5IFNFTEVDVCBzdGF0ZW1lbnQgdG8gdGhlIGNsaXBib2FyZCcpfT5cbiAgICAgICAgICAgICAgICA8SWNvbnMuQ29weU91dGxpbmVkIGljb25TaXplPVwibVwiIGljb25Db2xvcj17dGhlbWUuY29sb3JzLnByaW1hcnkuZGFyazJ9IGFyaWEtaGlkZGVuLz5cbiAgICAgICAgICAgICAgPC9JY29uVG9vbHRpcD59IHRleHQ9e3RhYmxlRGF0YS5zZWxlY3RTdGFyfSBzaG91bGRTaG93VGV4dD17ZmFsc2V9Lz4pfVxuICAgICAgICB7dGFibGVEYXRhLnZpZXcgJiYgKDxTaG93U1FMIHNxbD17dGFibGVEYXRhLnZpZXd9IHRvb2x0aXBUZXh0PXt0KCdTaG93IENSRUFURSBWSUVXIHN0YXRlbWVudCcpfSB0aXRsZT17dCgnQ1JFQVRFIFZJRVcgc3RhdGVtZW50Jyl9Lz4pfVxuICAgICAgICA8SWNvblRvb2x0aXAgY2xhc3NOYW1lPVwiIHRhYmxlLXJlbW92ZSBwdWxsLWxlZnQgbS1sLTIgcG9pbnRlclwiIG9uQ2xpY2s9e3JlbW92ZVRhYmxlfSB0b29sdGlwPXt0KCdSZW1vdmUgdGFibGUgcHJldmlldycpfT5cbiAgICAgICAgICA8SWNvbnMuQ2xvc2VPdXRsaW5lZCBpY29uU2l6ZT1cIm1cIiBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5wcmltYXJ5LmRhcmsyfSBhcmlhLWhpZGRlbi8+XG4gICAgICAgIDwvSWNvblRvb2x0aXA+XG4gICAgICA8L0J1dHRvbkdyb3VwPik7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJIZWFkZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0YWJsZU5hbWVSZWYuY3VycmVudDtcbiAgICAgICAgbGV0IHRyaWdnZXIgPSBbXTtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5vZmZzZXRXaWR0aCA8IGVsZW1lbnQuc2Nyb2xsV2lkdGgpIHtcbiAgICAgICAgICAgIHRyaWdnZXIgPSBbJ2hvdmVyJ107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICg8ZGl2IGRhdGEtdGVzdD1cInRhYmxlLWVsZW1lbnQtaGVhZGVyLWNvbnRhaW5lclwiIGNsYXNzTmFtZT1cImNsZWFyZml4IGhlYWRlci1jb250YWluZXJcIiBvbk1vdXNlRW50ZXI9eygpID0+IHNldEhvdmVyKHRydWUpfSBvbk1vdXNlTGVhdmU9eygpID0+IHNldEhvdmVyKGZhbHNlKX0+XG4gICAgICAgIDxUb29sdGlwIGlkPVwiY29weS10by1jbGlwYm9hcmQtdG9vbHRpcFwiIHN0eWxlPXt7IGN1cnNvcjogJ3BvaW50ZXInIH19IHRpdGxlPXtuYW1lfSB0cmlnZ2VyPXt0cmlnZ2VyfT5cbiAgICAgICAgICA8U3R5bGVkU3BhbiBkYXRhLXRlc3Q9XCJjb2xsYXBzZVwiIHJlZj17dGFibGVOYW1lUmVmfSBjbGFzc05hbWU9XCJ0YWJsZS1uYW1lXCI+XG4gICAgICAgICAgICA8c3Ryb25nPntuYW1lfTwvc3Ryb25nPlxuICAgICAgICAgIDwvU3R5bGVkU3Bhbj5cbiAgICAgICAgPC9Ub29sdGlwPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHVsbC1yaWdodCBoZWFkZXItcmlnaHQtc2lkZVwiPlxuICAgICAgICAgIHtpc01ldGFkYXRhRmV0Y2hpbmcgfHwgaXNFeHRyYU1ldGFkYXRhTG9hZGluZyA/ICg8TG9hZGluZyBwb3NpdGlvbj1cImlubGluZVwiLz4pIDogKDxGYWRlIGRhdGEtdGVzdD1cImZhZGVcIiBob3ZlcmVkPXtob3ZlcmVkfSBvbkNsaWNrPXtlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9PlxuICAgICAgICAgICAgICB7cmVuZGVyQ29udHJvbHMoKX1cbiAgICAgICAgICAgIDwvRmFkZT4pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2Pik7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJCb2R5ID0gKCkgPT4ge1xuICAgICAgICBsZXQgY29scztcbiAgICAgICAgaWYgKHRhYmxlRGF0YS5jb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2xzID0gdGFibGVEYXRhLmNvbHVtbnMuc2xpY2UoKTtcbiAgICAgICAgICAgIGlmIChzb3J0Q29sdW1ucykge1xuICAgICAgICAgICAgICAgIGNvbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xBID0gYS5uYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbEIgPSBiLm5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbEEgPCBjb2xCID8gLTEgOiBjb2xBID4gY29sQiA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gKDxkaXYgZGF0YS10ZXN0PVwidGFibGUtZWxlbWVudFwiIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0SG92ZXIodHJ1ZSl9IG9uTW91c2VMZWF2ZT17KCkgPT4gc2V0SG92ZXIoZmFsc2UpfSBjc3M9e3sgcGFkZGluZ1RvcDogNiB9fT5cbiAgICAgICAge3JlbmRlcldlbGwoKX1cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7Y29scz8ubWFwKGNvbCA9PiA8Q29sdW1uRWxlbWVudCBjb2x1bW49e2NvbH0ga2V5PXtjb2wubmFtZX0vPil9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+KTtcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xuICAgIH07XG4gICAgcmV0dXJuICg8U3R5bGVkQ29sbGFwc2VQYW5lbCB7Li4ucHJvcHN9IGtleT17dGFibGUuaWR9IGhlYWRlcj17cmVuZGVySGVhZGVyKCl9IGNsYXNzTmFtZT1cIlRhYmxlRWxlbWVudFwiIGZvcmNlUmVuZGVyPlxuICAgICAge3JlbmRlckJvZHkoKX1cbiAgICA8L1N0eWxlZENvbGxhcHNlUGFuZWw+KTtcbn07XG5leHBvcnQgZGVmYXVsdCBUYWJsZUVsZW1lbnQ7XG4iXX0= */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nconst TableElement = ({ table, ...props }) => {\n  const { dbId, catalog, schema, name, expanded } = table;\n  const theme = useTheme();\n  const dispatch = useDispatch();\n  const { currentData: tableMetadata, isSuccess: isMetadataSuccess, isFetching: isMetadataFetching, isError: hasMetadataError } = useTableMetadataQuery({\n    dbId,\n    catalog,\n    schema,\n    table: name\n  }, { skip: !expanded });\n  const { currentData: tableExtendedMetadata, isSuccess: isExtraMetadataSuccess, isLoading: isExtraMetadataLoading, isError: hasExtendedMetadataError } = useTableExtendedMetadataQuery({\n    dbId,\n    catalog,\n    schema,\n    table: name\n  }, { skip: !expanded });\n  useEffect(() => {\n    if (hasMetadataError || hasExtendedMetadataError) {\n      dispatch(addDangerToast(t('An error occurred while fetching table metadata')));\n    }\n  }, [hasMetadataError, hasExtendedMetadataError, dispatch]);\n  const tableData = {\n    ...tableMetadata,\n    ...tableExtendedMetadata\n  };\n  // TODO: migrate syncTable logic by SIP-93\n  const syncTableMetadata = useEffectEvent(() => {\n    const { initialized } = table;\n    if (!initialized) {\n      dispatch(syncTable(table, tableData));\n    }\n  });\n  useEffect(() => {\n    if (isMetadataSuccess && isExtraMetadataSuccess) {\n      syncTableMetadata();\n    }\n  }, [isMetadataSuccess, isExtraMetadataSuccess, syncTableMetadata]);\n  const [sortColumns, setSortColumns] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const tableNameRef = useRef(null);\n  const setHover = (hovered) => {\n    _debounce(() => setHovered(hovered), 100)();\n  };\n  const removeTable = () => {\n    dispatch(removeDataPreview(table));\n    dispatch(removeTables([table]));\n  };\n  const toggleSortColumns = () => {\n    setSortColumns((prevState) => !prevState);\n  };\n  const refreshTableMetadata = () => {\n    dispatch(tableApiUtil.invalidateTags([{ type: 'TableMetadatas', id: name }]));\n    dispatch(syncTable(table, tableData));\n  };\n  const renderWell = () => {\n    let partitions;\n    let metadata;\n    if (tableData.partitions) {var _tableData$partitions;\n      let partitionQuery;\n      let partitionClipBoard;\n      if (tableData.partitions.partitionQuery) {\n        ({ partitionQuery } = tableData.partitions);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard = _jsx(CopyToClipboard, { text: partitionQuery, shouldShowText: false, tooltipText: tt, copyNode: _jsx(Icons.CopyOutlined, { iconSize: \"s\" }) });\n      }\n      const latest = Object.entries(((_tableData$partitions = tableData.partitions) == null ? void 0 : _tableData$partitions.latest) || []).\n      map(([key, value]) => `${key}=${value}`).\n      join('/');\n      partitions = _jsxs(\"div\", { children: [\n        _jsxs(\"small\", { children: [\n          t('latest partition:'), \" \", latest] }\n        ), ' ',\n        partitionClipBoard] }\n      );\n    }\n    if (tableData.metadata) {var _metadata;\n      metadata = Object.entries(tableData.metadata).map(([key, value]) => _jsx(\"div\", { children:\n        _jsxs(\"small\", { children: [\n          _jsxs(\"strong\", { children: [key, \":\"] }), \" \", value] }\n        ) }\n      ));\n      if (!((_metadata = metadata) != null && _metadata.length)) {\n        // hide metadata card view\n        return null;\n      }\n    }\n    if (!partitions) {\n      // hide partition card view\n      return null;\n    }\n    return _jsxs(Card, { size: \"small\", children: [\n      partitions,\n      metadata] }\n    );\n  };\n  const renderControls = () => {var _tableData$indexes;\n    let keyLink;\n    const KEYS_FOR_TABLE_TEXT = t('Keys for table');\n    if (tableData != null && (_tableData$indexes = tableData.indexes) != null && _tableData$indexes.length) {\n      keyLink = _jsx(ModalTrigger, { modalTitle: `${KEYS_FOR_TABLE_TEXT} ${name}`, modalBody: tableData.indexes.map((ix, i) => _jsx(\"pre\", { children: JSON.stringify(ix, null, '  ') }, i)), triggerNode: _jsx(IconTooltip, { className: \"pull-left m-l-2\", tooltip: t('View keys & indexes (%s)', tableData.indexes.length), children:\n          _jsx(Icons.TableOutlined, { iconSize: \"m\", iconColor: theme.colors.primary.dark2 }) }\n        ) });\n    }\n    return _jsxs(ButtonGroup, { css: css`\n          column-gap: ${theme.gridUnit * 1.5}px;\n          margin-right: ${theme.gridUnit}px;\n          & span {\n            display: flex;\n            justify-content: center;\n            width: ${theme.gridUnit * 4}px;\n          }\n        `, children: [\n      _jsx(IconTooltip, { className: \"pull-left m-l-2 pointer\", onClick: refreshTableMetadata, tooltip: t('Refresh table schema'), children:\n        _jsx(Icons.SyncOutlined, { iconSize: \"m\", iconColor: theme.colors.primary.dark2 }) }\n      ),\n      keyLink,\n      _jsx(IconTooltip, { className: `fa fa-sort-${sortColumns ? 'numeric' : 'alpha'}-asc ` +\n        'pull-left sort-cols m-l-2 pointer', onClick: toggleSortColumns, tooltip: sortColumns ?\n        t('Original table column order') :\n        t('Sort columns alphabetically') }),\n      tableData.selectStar && _jsx(CopyToClipboard, { copyNode: _jsx(IconTooltip, { \"aria-label\": \"Copy\", tooltip: t('Copy SELECT statement to the clipboard'), children:\n          _jsx(Icons.CopyOutlined, { iconSize: \"m\", iconColor: theme.colors.primary.dark2, \"aria-hidden\": true }) }\n        ), text: tableData.selectStar, shouldShowText: false }),\n      tableData.view && _jsx(ShowSQL, { sql: tableData.view, tooltipText: t('Show CREATE VIEW statement'), title: t('CREATE VIEW statement') }),\n      _jsx(IconTooltip, { className: \" table-remove pull-left m-l-2 pointer\", onClick: removeTable, tooltip: t('Remove table preview'), children:\n        _jsx(Icons.CloseOutlined, { iconSize: \"m\", iconColor: theme.colors.primary.dark2, \"aria-hidden\": true }) }\n      )] }\n    );\n  };\n  const renderHeader = () => {\n    const element = tableNameRef.current;\n    let trigger = [];\n    if (element && element.offsetWidth < element.scrollWidth) {\n      trigger = ['hover'];\n    }\n    return _jsxs(\"div\", { \"data-test\": \"table-element-header-container\", className: \"clearfix header-container\", onMouseEnter: () => setHover(true), onMouseLeave: () => setHover(false), children: [\n      _jsx(Tooltip, { id: \"copy-to-clipboard-tooltip\", style: { cursor: 'pointer' }, title: name, trigger: trigger, children:\n        _jsx(StyledSpan, { \"data-test\": \"collapse\", ref: tableNameRef, className: \"table-name\", children:\n          _jsx(\"strong\", { children: name }) }\n        ) }\n      ),\n\n      _jsx(\"div\", { className: \"pull-right header-right-side\", children:\n        isMetadataFetching || isExtraMetadataLoading ? _jsx(Loading, { position: \"inline\" }) : _jsx(Fade, { \"data-test\": \"fade\", hovered: hovered, onClick: (e) => e.stopPropagation(), children:\n          renderControls() }\n        ) }\n      )] }\n    );\n  };\n  const renderBody = () => {var _cols;\n    let cols;\n    if (tableData.columns) {\n      cols = tableData.columns.slice();\n      if (sortColumns) {\n        cols.sort((a, b) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          return colA < colB ? -1 : colA > colB ? 1 : 0;\n        });\n      }\n    }\n    const metadata = _jsxs(\"div\", { \"data-test\": \"table-element\", onMouseEnter: () => setHover(true), onMouseLeave: () => setHover(false), css: _ref, children: [\n      renderWell(),\n      _jsx(\"div\", { children: (_cols =\n        cols) == null ? void 0 : _cols.map((col) => _jsx(ColumnElement, { column: col }, col.name)) }\n      )] }\n    );\n    return metadata;\n  };\n  return _createElement(StyledCollapsePanel, { ...props, key: table.id, header: renderHeader(), className: \"TableElement\", forceRender: true },\n  renderBody()\n  );\n};__signature__(TableElement, \"useTheme{theme}\\nuseDispatch{dispatch}\\nuseTableMetadataQuery{{ currentData: tableMetadata, isSuccess: isMetadataSuccess, isFetching: isMetadataFetching, isError: hasMetadataError, }}\\nuseTableExtendedMetadataQuery{{ currentData: tableExtendedMetadata, isSuccess: isExtraMetadataSuccess, isLoading: isExtraMetadataLoading, isError: hasExtendedMetadataError, }}\\nuseEffect{}\\nuseEffectEvent{syncTableMetadata}\\nuseEffect{}\\nuseState{[sortColumns, setSortColumns](false)}\\nuseState{[hovered, setHovered](false)}\\nuseRef{tableNameRef}\", () => [useTheme, useDispatch, useTableMetadataQuery, useTableExtendedMetadataQuery, useEffectEvent]);const _default =\nTableElement;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledSpan, \"StyledSpan\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(Fade, \"Fade\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(StyledCollapsePanel, \"StyledCollapsePanel\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(TableElement, \"TableElement\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useRef","useEffect","useDispatch","Collapse","Card","ButtonGroup","css","t","styled","useTheme","removeDataPreview","removeTables","addDangerToast","syncTable","tableApiUtil","useTableExtendedMetadataQuery","useTableMetadataQuery","Tooltip","CopyToClipboard","IconTooltip","ModalTrigger","Loading","useEffectEvent","Icons","ColumnElement","ShowSQL","jsx","_jsx","jsxs","_jsxs","createElement","_createElement","StyledSpan","span","theme","colors","primary","dark1","dark2","Fade","div","transitionTiming","props","hovered","StyledCollapsePanel","Panel","gridUnit","typography","sizes","l","_ref","process","env","NODE_ENV","name","styles","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","TableElement","table","dbId","catalog","schema","expanded","dispatch","currentData","tableMetadata","isSuccess","isMetadataSuccess","isFetching","isMetadataFetching","isError","hasMetadataError","skip","tableExtendedMetadata","isExtraMetadataSuccess","isLoading","isExtraMetadataLoading","hasExtendedMetadataError","tableData","syncTableMetadata","initialized","sortColumns","setSortColumns","setHovered","tableNameRef","setHover","_debounce","removeTable","toggleSortColumns","prevState","refreshTableMetadata","invalidateTags","type","id","renderWell","partitions","metadata","_tableData$partitions","partitionQuery","partitionClipBoard","tt","text","shouldShowText","tooltipText","copyNode","CopyOutlined","iconSize","latest","Object","entries","map","key","value","join","children","_metadata","length","size","renderControls","_tableData$indexes","keyLink","KEYS_FOR_TABLE_TEXT","indexes","modalTitle","modalBody","ix","i","JSON","stringify","triggerNode","className","tooltip","TableOutlined","iconColor","onClick","SyncOutlined","selectStar","view","sql","title","CloseOutlined","renderHeader","element","current","trigger","offsetWidth","scrollWidth","onMouseEnter","onMouseLeave","style","cursor","ref","position","e","stopPropagation","renderBody","_cols","cols","columns","slice","sort","a","b","colA","toUpperCase","colB","col","column","header","forceRender","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// TODO: Remove fa-icon\n/* eslint-disable icons/no-fa-icons-usage */\nimport { useState, useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport type { Table } from 'src/SqlLab/types';\nimport Collapse from 'src/components/Collapse';\nimport Card from 'src/components/Card';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport { css, t, styled, useTheme } from '@superset-ui/core';\nimport { debounce } from 'lodash';\n\nimport {\n  removeDataPreview,\n  removeTables,\n  addDangerToast,\n  syncTable,\n} from 'src/SqlLab/actions/sqlLab';\nimport {\n  tableApiUtil,\n  useTableExtendedMetadataQuery,\n  useTableMetadataQuery,\n} from 'src/hooks/apiResources';\nimport { Tooltip } from 'src/components/Tooltip';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { IconTooltip } from 'src/components/IconTooltip';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Loading from 'src/components/Loading';\nimport useEffectEvent from 'src/hooks/useEffectEvent';\nimport { ActionType } from 'src/types/Action';\nimport { Icons } from 'src/components/Icons';\nimport ColumnElement, { ColumnKeyTypeType } from '../ColumnElement';\nimport ShowSQL from '../ShowSQL';\n\nexport interface Column {\n  name: string;\n  keys?: { type: ColumnKeyTypeType }[];\n  type: string;\n}\n\nexport interface TableElementProps {\n  table: Table;\n}\n\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &:hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;\n\nconst Fade = styled.div`\n  transition: all ${({ theme }) => theme.transitionTiming}s;\n  opacity: ${(props: { hovered: boolean }) => (props.hovered ? 1 : 0)};\n`;\n\nconst StyledCollapsePanel = styled(Collapse.Panel)`\n  ${({ theme }) => css`\n    & {\n      .ws-el-controls {\n        margin-right: ${-theme.gridUnit}px;\n        display: flex;\n      }\n\n      .header-container {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        width: 100%;\n\n        .table-name {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: ${theme.typography.sizes.l}px;\n          flex: 1;\n        }\n\n        .header-right-side {\n          margin-left: auto;\n          display: flex;\n          align-items: center;\n          margin-right: ${theme.gridUnit * 8}px;\n        }\n      }\n    }\n  `}\n`;\n\nconst TableElement = ({ table, ...props }: TableElementProps) => {\n  const { dbId, catalog, schema, name, expanded } = table;\n  const theme = useTheme();\n  const dispatch = useDispatch();\n  const {\n    currentData: tableMetadata,\n    isSuccess: isMetadataSuccess,\n    isFetching: isMetadataFetching,\n    isError: hasMetadataError,\n  } = useTableMetadataQuery(\n    {\n      dbId,\n      catalog,\n      schema,\n      table: name,\n    },\n    { skip: !expanded },\n  );\n  const {\n    currentData: tableExtendedMetadata,\n    isSuccess: isExtraMetadataSuccess,\n    isLoading: isExtraMetadataLoading,\n    isError: hasExtendedMetadataError,\n  } = useTableExtendedMetadataQuery(\n    {\n      dbId,\n      catalog,\n      schema,\n      table: name,\n    },\n    { skip: !expanded },\n  );\n\n  useEffect(() => {\n    if (hasMetadataError || hasExtendedMetadataError) {\n      dispatch(\n        addDangerToast(t('An error occurred while fetching table metadata')),\n      );\n    }\n  }, [hasMetadataError, hasExtendedMetadataError, dispatch]);\n\n  const tableData = {\n    ...tableMetadata,\n    ...tableExtendedMetadata,\n  };\n\n  // TODO: migrate syncTable logic by SIP-93\n  const syncTableMetadata = useEffectEvent(() => {\n    const { initialized } = table;\n    if (!initialized) {\n      dispatch(syncTable(table, tableData));\n    }\n  });\n\n  useEffect(() => {\n    if (isMetadataSuccess && isExtraMetadataSuccess) {\n      syncTableMetadata();\n    }\n  }, [isMetadataSuccess, isExtraMetadataSuccess, syncTableMetadata]);\n\n  const [sortColumns, setSortColumns] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const tableNameRef = useRef<HTMLInputElement>(null);\n\n  const setHover = (hovered: boolean) => {\n    debounce(() => setHovered(hovered), 100)();\n  };\n\n  const removeTable = () => {\n    dispatch(removeDataPreview(table));\n    dispatch(removeTables([table]));\n  };\n\n  const toggleSortColumns = () => {\n    setSortColumns(prevState => !prevState);\n  };\n\n  const refreshTableMetadata = () => {\n    dispatch(\n      tableApiUtil.invalidateTags([{ type: 'TableMetadatas', id: name }]),\n    );\n    dispatch(syncTable(table, tableData));\n  };\n\n  const renderWell = () => {\n    let partitions;\n    let metadata;\n    if (tableData.partitions) {\n      let partitionQuery;\n      let partitionClipBoard;\n      if (tableData.partitions.partitionQuery) {\n        ({ partitionQuery } = tableData.partitions);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard = (\n          <CopyToClipboard\n            text={partitionQuery}\n            shouldShowText={false}\n            tooltipText={tt}\n            copyNode={<Icons.CopyOutlined iconSize=\"s\" />}\n          />\n        );\n      }\n      const latest = Object.entries(tableData.partitions?.latest || [])\n        .map(([key, value]) => `${key}=${value}`)\n        .join('/');\n\n      partitions = (\n        <div>\n          <small>\n            {t('latest partition:')} {latest}\n          </small>{' '}\n          {partitionClipBoard}\n        </div>\n      );\n    }\n\n    if (tableData.metadata) {\n      metadata = Object.entries(tableData.metadata).map(([key, value]) => (\n        <div>\n          <small>\n            <strong>{key}:</strong> {value}\n          </small>\n        </div>\n      ));\n      if (!metadata?.length) {\n        // hide metadata card view\n        return null;\n      }\n    }\n\n    if (!partitions) {\n      // hide partition card view\n      return null;\n    }\n\n    return (\n      <Card size=\"small\">\n        {partitions}\n        {metadata}\n      </Card>\n    );\n  };\n\n  const renderControls = () => {\n    let keyLink;\n    const KEYS_FOR_TABLE_TEXT = t('Keys for table');\n    if (tableData?.indexes?.length) {\n      keyLink = (\n        <ModalTrigger\n          modalTitle={`${KEYS_FOR_TABLE_TEXT} ${name}`}\n          modalBody={tableData.indexes.map((ix, i) => (\n            <pre key={i}>{JSON.stringify(ix, null, '  ')}</pre>\n          ))}\n          triggerNode={\n            <IconTooltip\n              className=\"pull-left m-l-2\"\n              tooltip={t('View keys & indexes (%s)', tableData.indexes.length)}\n            >\n              <Icons.TableOutlined\n                iconSize=\"m\"\n                iconColor={theme.colors.primary.dark2}\n              />\n            </IconTooltip>\n          }\n        />\n      );\n    }\n    return (\n      <ButtonGroup\n        css={css`\n          column-gap: ${theme.gridUnit * 1.5}px;\n          margin-right: ${theme.gridUnit}px;\n          & span {\n            display: flex;\n            justify-content: center;\n            width: ${theme.gridUnit * 4}px;\n          }\n        `}\n      >\n        <IconTooltip\n          className=\"pull-left m-l-2 pointer\"\n          onClick={refreshTableMetadata}\n          tooltip={t('Refresh table schema')}\n        >\n          <Icons.SyncOutlined\n            iconSize=\"m\"\n            iconColor={theme.colors.primary.dark2}\n          />\n        </IconTooltip>\n        {keyLink}\n        <IconTooltip\n          className={\n            `fa fa-sort-${sortColumns ? 'numeric' : 'alpha'}-asc ` +\n            'pull-left sort-cols m-l-2 pointer'\n          }\n          onClick={toggleSortColumns}\n          tooltip={\n            sortColumns\n              ? t('Original table column order')\n              : t('Sort columns alphabetically')\n          }\n        />\n        {tableData.selectStar && (\n          <CopyToClipboard\n            copyNode={\n              <IconTooltip\n                aria-label=\"Copy\"\n                tooltip={t('Copy SELECT statement to the clipboard')}\n              >\n                <Icons.CopyOutlined\n                  iconSize=\"m\"\n                  iconColor={theme.colors.primary.dark2}\n                  aria-hidden\n                />\n              </IconTooltip>\n            }\n            text={tableData.selectStar}\n            shouldShowText={false}\n          />\n        )}\n        {tableData.view && (\n          <ShowSQL\n            sql={tableData.view}\n            tooltipText={t('Show CREATE VIEW statement')}\n            title={t('CREATE VIEW statement')}\n          />\n        )}\n        <IconTooltip\n          className=\" table-remove pull-left m-l-2 pointer\"\n          onClick={removeTable}\n          tooltip={t('Remove table preview')}\n        >\n          <Icons.CloseOutlined\n            iconSize=\"m\"\n            iconColor={theme.colors.primary.dark2}\n            aria-hidden\n          />\n        </IconTooltip>\n      </ButtonGroup>\n    );\n  };\n\n  const renderHeader = () => {\n    const element: HTMLInputElement | null = tableNameRef.current;\n    let trigger = [] as ActionType[];\n    if (element && element.offsetWidth < element.scrollWidth) {\n      trigger = ['hover'];\n    }\n\n    return (\n      <div\n        data-test=\"table-element-header-container\"\n        className=\"clearfix header-container\"\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n      >\n        <Tooltip\n          id=\"copy-to-clipboard-tooltip\"\n          style={{ cursor: 'pointer' }}\n          title={name}\n          trigger={trigger}\n        >\n          <StyledSpan\n            data-test=\"collapse\"\n            ref={tableNameRef}\n            className=\"table-name\"\n          >\n            <strong>{name}</strong>\n          </StyledSpan>\n        </Tooltip>\n\n        <div className=\"pull-right header-right-side\">\n          {isMetadataFetching || isExtraMetadataLoading ? (\n            <Loading position=\"inline\" />\n          ) : (\n            <Fade\n              data-test=\"fade\"\n              hovered={hovered}\n              onClick={e => e.stopPropagation()}\n            >\n              {renderControls()}\n            </Fade>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderBody = () => {\n    let cols;\n    if (tableData.columns) {\n      cols = tableData.columns.slice();\n      if (sortColumns) {\n        cols.sort((a: Column, b: Column) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          return colA < colB ? -1 : colA > colB ? 1 : 0;\n        });\n      }\n    }\n\n    const metadata = (\n      <div\n        data-test=\"table-element\"\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n        css={{ paddingTop: 6 }}\n      >\n        {renderWell()}\n        <div>\n          {cols?.map(col => <ColumnElement column={col} key={col.name} />)}\n        </div>\n      </div>\n    );\n    return metadata;\n  };\n\n  return (\n    <StyledCollapsePanel\n      {...props}\n      key={table.id}\n      header={renderHeader()}\n      className=\"TableElement\"\n      forceRender\n    >\n      {renderBody()}\n    </StyledCollapsePanel>\n  );\n};\n\nexport default TableElement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}