{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent } from 'react';\nimport { t, getNumberFormatter, getTimeFormatter, SMART_DATE_VERBOSE_ID, computeMaxFontSize, BRAND_COLOR, styled } from '@superset-ui/core';\nimport Echart from '../components/Echart';import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst defaultNumberFormatter = getNumberFormatter();\nconst PROPORTION = {\n  // text size: proportion of the chart container sans trendline\n  KICKER: 0.1,\n  HEADER: 0.3,\n  SUBHEADER: 0.125,\n  // trendline size: proportion of the whole chart container\n  TRENDLINE: 0.3\n};\nclass BigNumberVis extends PureComponent {\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  getClassName() {\n    const { className, showTrendLine, bigNumberFallback } = this.props;\n    const names = `superset-legacy-chart-big-number ${className} ${bigNumberFallback ? 'is-fallback-value' : ''}`;\n    if (showTrendLine)\n    return names;\n    return `${names} no-trendline`;\n  }\n  createTemporaryContainer() {\n    const container = document.createElement('div');\n    container.className = this.getClassName();\n    container.style.position = 'absolute'; // so it won't disrupt page layout\n    container.style.opacity = '0'; // and not visible\n    return container;\n  }\n  renderFallbackWarning() {\n    const { bigNumberFallback, formatTime, showTimestamp } = this.props;\n    if (!formatTime || !bigNumberFallback || showTimestamp)\n    return null;\n    return _jsx(\"span\", { className: \"alert alert-warning\", role: \"alert\", title: t(`Last available value seen on %s`, formatTime(bigNumberFallback[0])), children:\n      t('Not up to date') }\n    );\n  }\n  renderKicker(maxHeight) {\n    const { timestamp, showTimestamp, formatTime, width } = this.props;\n    if (!formatTime ||\n    !showTimestamp ||\n    typeof timestamp === 'string' ||\n    typeof timestamp === 'bigint' ||\n    typeof timestamp === 'boolean')\n    return null;\n    const text = timestamp === null ? '' : formatTime(timestamp);\n    const container = this.createTemporaryContainer();\n    document.body.append(container);\n    const fontSize = computeMaxFontSize({\n      text,\n      maxWidth: width,\n      maxHeight,\n      className: 'kicker',\n      container\n    });\n    container.remove();\n    return _jsx(\"div\", { className: \"kicker\", style: {\n        fontSize,\n        height: 'auto'\n      }, children:\n      text }\n    );\n  }\n  renderHeader(maxHeight) {\n    const { bigNumber, headerFormatter, width, colorThresholdFormatters } = this.props;\n    // @ts-ignore\n    const text = bigNumber === null ? t('No data') : headerFormatter(bigNumber);\n    const hasThresholdColorFormatter = Array.isArray(colorThresholdFormatters) &&\n    colorThresholdFormatters.length > 0;\n    let numberColor;\n    if (hasThresholdColorFormatter) {\n      colorThresholdFormatters.forEach((formatter) => {\n        const formatterResult = bigNumber ?\n        formatter.getColorFromValue(bigNumber) :\n        false;\n        if (formatterResult) {\n          numberColor = formatterResult;\n        }\n      });\n    } else\n    {\n      numberColor = 'black';\n    }\n    const container = this.createTemporaryContainer();\n    document.body.append(container);\n    const fontSize = computeMaxFontSize({\n      text,\n      maxWidth: width * 0.9,\n      maxHeight,\n      className: 'header-line',\n      container\n    });\n    container.remove();\n    const onContextMenu = (e) => {\n      if (this.props.onContextMenu) {\n        e.preventDefault();\n        this.props.onContextMenu(e.nativeEvent.clientX, e.nativeEvent.clientY);\n      }\n    };\n    return _jsx(\"div\", { className: \"header-line\", style: {\n        display: 'flex',\n        alignItems: 'center',\n        fontSize,\n        height: 'auto',\n        color: numberColor\n      }, onContextMenu: onContextMenu, children:\n      text }\n    );\n  }\n  rendermetricComparisonSummary(maxHeight) {\n    const { subheader, width } = this.props;\n    let fontSize = 0;\n    const text = subheader;\n    if (text) {\n      const container = this.createTemporaryContainer();\n      document.body.append(container);\n      try {\n        fontSize = computeMaxFontSize({\n          text,\n          maxWidth: width * 0.9,\n          maxHeight,\n          className: 'subheader-line',\n          container\n        });\n      } finally\n      {\n        container.remove();\n      }\n      return _jsx(\"div\", { className: \"subheader-line\", style: {\n          fontSize,\n          height: maxHeight\n        }, children:\n        text }\n      );\n    }\n    return null;\n  }\n  renderSubtitle(maxHeight) {\n    const { subtitle, width, bigNumber, bigNumberFallback } = this.props;\n    let fontSize = 0;\n    const NO_DATA_OR_HASNT_LANDED = t('No data after filtering or data is NULL for the latest time record');\n    const NO_DATA = t('Try applying different filters or ensuring your datasource has data');\n    let text = subtitle;\n    if (bigNumber === null) {\n      text =\n      subtitle || (bigNumberFallback ? NO_DATA : NO_DATA_OR_HASNT_LANDED);\n    }\n    if (text) {\n      const container = this.createTemporaryContainer();\n      document.body.append(container);\n      fontSize = computeMaxFontSize({\n        text,\n        maxWidth: width * 0.9,\n        maxHeight,\n        className: 'subtitle-line',\n        container\n      });\n      container.remove();\n      return _jsx(_Fragment, { children:\n        _jsx(\"div\", { className: \"subtitle-line subheader-line\", style: {\n            fontSize: `${fontSize}px`,\n            height: maxHeight\n          }, children:\n          text }\n        ) }\n      );\n    }\n    return null;\n  }\n  renderTrendline(maxHeight) {\n    const { width, trendLineData, echartOptions, refs } = this.props;\n    // if can't find any non-null values, no point rendering the trendline\n    if (!(trendLineData != null && trendLineData.some((d) => d[1] !== null))) {\n      return null;\n    }\n    const eventHandlers = {\n      contextmenu: (eventParams) => {\n        if (this.props.onContextMenu) {\n          eventParams.event.stop();\n          const { data } = eventParams;\n          if (data) {var _this$props$formData, _this$props$formData2, _this$props$xValueFor, _this$props;\n            const pointerEvent = eventParams.event.event;\n            const drillToDetailFilters = [];\n            drillToDetailFilters.push({\n              col: (_this$props$formData = this.props.formData) == null ? void 0 : _this$props$formData.granularitySqla,\n              grain: (_this$props$formData2 = this.props.formData) == null ? void 0 : _this$props$formData2.timeGrainSqla,\n              op: '==',\n              val: data[0],\n              formattedVal: (_this$props$xValueFor = (_this$props = this.props).xValueFormatter) == null ? void 0 : _this$props$xValueFor.call(_this$props, data[0])\n            });\n            this.props.onContextMenu(pointerEvent.clientX, pointerEvent.clientY, { drillToDetail: drillToDetailFilters });\n          }\n        }\n      }\n    };\n    return echartOptions && _jsx(Echart, { refs: refs, width: Math.floor(width), height: maxHeight, echartOptions: echartOptions, eventHandlers: eventHandlers });\n  }\n  render() {\n    const { showTrendLine, height, kickerFontSize, headerFontSize, subtitleFontSize, subheaderFontSize } = this.props;\n    const className = this.getClassName();\n    if (showTrendLine) {\n      const chartHeight = Math.floor(PROPORTION.TRENDLINE * height);\n      const allTextHeight = height - chartHeight;\n      return _jsxs(\"div\", { className: className, children: [\n        _jsxs(\"div\", { className: \"text-container\", style: { height: allTextHeight }, children: [\n          this.renderFallbackWarning(),\n          this.renderKicker(Math.ceil((kickerFontSize || 0) * (1 - PROPORTION.TRENDLINE) * height)),\n          this.renderHeader(Math.ceil(headerFontSize * (1 - PROPORTION.TRENDLINE) * height)),\n          this.rendermetricComparisonSummary(Math.ceil(subheaderFontSize * (1 - PROPORTION.TRENDLINE) * height)),\n          this.renderSubtitle(Math.ceil(subtitleFontSize * (1 - PROPORTION.TRENDLINE) * height))] }\n        ),\n        this.renderTrendline(chartHeight)] }\n      );\n    }\n    return _jsxs(\"div\", { className: className, style: { height }, children: [\n      this.renderFallbackWarning(),\n      this.renderKicker((kickerFontSize || 0) * height),\n      this.renderHeader(Math.ceil(headerFontSize * height)),\n      this.rendermetricComparisonSummary(Math.ceil(subheaderFontSize * height)),\n      this.renderSubtitle(Math.ceil(subtitleFontSize * height))] }\n    );\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}BigNumberVis.defaultProps = { className: '', headerFormatter: defaultNumberFormatter, formatTime: getTimeFormatter(SMART_DATE_VERBOSE_ID), headerFontSize: PROPORTION.HEADER, kickerFontSize: PROPORTION.KICKER, mainColor: BRAND_COLOR, showTimestamp: false, showTrendLine: false, startYAxisAtZero: true, subheader: '', subheaderFontSize: PROPORTION.SUBHEADER, timeRangeFixed: false };const _default = styled(BigNumberVis)`\n  ${({ theme }) => `\n    font-family: ${theme.typography.families.sansSerif};\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n\n    &.no-trendline .subheader-line {\n      padding-bottom: 0.3em;\n    }\n\n    .text-container {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n      .alert {\n        font-size: ${theme.typography.sizes.s};\n        margin: -0.5em 0 0.4em;\n        line-height: 1;\n        padding: ${theme.gridUnit}px;\n        border-radius: ${theme.gridUnit}px;\n      }\n    }\n\n    .kicker {\n      line-height: 1em;\n      padding-bottom: 2em;\n    }\n\n    .header-line {\n      position: relative;\n      line-height: 1em;\n      white-space: nowrap;\n      margin-bottom:${theme.gridUnit * 2}px;\n      span {\n        position: absolute;\n        bottom: 0;\n      }\n    }\n\n    .subheader-line {\n      line-height: 1em;\n      padding-bottom: 0;\n    }\n\n    .subtitle-line {\n      line-height: 1em;\n      padding-bottom: 0;\n    }\n\n    &.is-fallback-value {\n      .kicker,\n      .header-line,\n      .subheader-line {\n        opacity: ${theme.opacity.mediumHeavy};\n      }\n    }\n  `}\n`;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(defaultNumberFormatter, \"defaultNumberFormatter\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\");reactHotLoader.register(PROPORTION, \"PROPORTION\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\");reactHotLoader.register(BigNumberVis, \"BigNumberVis\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["PureComponent","t","getNumberFormatter","getTimeFormatter","SMART_DATE_VERBOSE_ID","computeMaxFontSize","BRAND_COLOR","styled","Echart","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","defaultNumberFormatter","PROPORTION","KICKER","HEADER","SUBHEADER","TRENDLINE","BigNumberVis","getClassName","className","showTrendLine","bigNumberFallback","props","names","createTemporaryContainer","container","document","createElement","style","position","opacity","renderFallbackWarning","formatTime","showTimestamp","role","title","children","renderKicker","maxHeight","timestamp","width","text","body","append","fontSize","maxWidth","remove","height","renderHeader","bigNumber","headerFormatter","colorThresholdFormatters","hasThresholdColorFormatter","Array","isArray","length","numberColor","forEach","formatter","formatterResult","getColorFromValue","onContextMenu","e","preventDefault","nativeEvent","clientX","clientY","display","alignItems","color","rendermetricComparisonSummary","subheader","renderSubtitle","subtitle","NO_DATA_OR_HASNT_LANDED","NO_DATA","renderTrendline","trendLineData","echartOptions","refs","some","d","eventHandlers","contextmenu","eventParams","event","stop","data","_this$props$formData","_this$props$formData2","_this$props$xValueFor","_this$props","pointerEvent","drillToDetailFilters","push","col","formData","granularitySqla","grain","timeGrainSqla","op","val","formattedVal","xValueFormatter","call","drillToDetail","Math","floor","render","kickerFontSize","headerFontSize","subtitleFontSize","subheaderFontSize","chartHeight","allTextHeight","ceil","__reactstandin__regenerateByEval","key","code","eval","defaultProps","mainColor","startYAxisAtZero","timeRangeFixed","_default","theme","typography","families","sansSerif","sizes","s","gridUnit","mediumHeavy","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent, MouseEvent } from 'react';\nimport {\n  t,\n  getNumberFormatter,\n  getTimeFormatter,\n  SMART_DATE_VERBOSE_ID,\n  computeMaxFontSize,\n  BRAND_COLOR,\n  styled,\n  BinaryQueryObjectFilterClause,\n} from '@superset-ui/core';\nimport Echart from '../components/Echart';\nimport { BigNumberVizProps } from './types';\nimport { EventHandlers } from '../types';\n\nconst defaultNumberFormatter = getNumberFormatter();\n\nconst PROPORTION = {\n  // text size: proportion of the chart container sans trendline\n  KICKER: 0.1,\n  HEADER: 0.3,\n  SUBHEADER: 0.125,\n  // trendline size: proportion of the whole chart container\n  TRENDLINE: 0.3,\n};\n\nclass BigNumberVis extends PureComponent<BigNumberVizProps> {\n  static defaultProps = {\n    className: '',\n    headerFormatter: defaultNumberFormatter,\n    formatTime: getTimeFormatter(SMART_DATE_VERBOSE_ID),\n    headerFontSize: PROPORTION.HEADER,\n    kickerFontSize: PROPORTION.KICKER,\n    mainColor: BRAND_COLOR,\n    showTimestamp: false,\n    showTrendLine: false,\n    startYAxisAtZero: true,\n    subheader: '',\n    subheaderFontSize: PROPORTION.SUBHEADER,\n    timeRangeFixed: false,\n  };\n\n  getClassName() {\n    const { className, showTrendLine, bigNumberFallback } = this.props;\n    const names = `superset-legacy-chart-big-number ${className} ${\n      bigNumberFallback ? 'is-fallback-value' : ''\n    }`;\n    if (showTrendLine) return names;\n    return `${names} no-trendline`;\n  }\n\n  createTemporaryContainer() {\n    const container = document.createElement('div');\n    container.className = this.getClassName();\n    container.style.position = 'absolute'; // so it won't disrupt page layout\n    container.style.opacity = '0'; // and not visible\n    return container;\n  }\n\n  renderFallbackWarning() {\n    const { bigNumberFallback, formatTime, showTimestamp } = this.props;\n    if (!formatTime || !bigNumberFallback || showTimestamp) return null;\n    return (\n      <span\n        className=\"alert alert-warning\"\n        role=\"alert\"\n        title={t(\n          `Last available value seen on %s`,\n          formatTime(bigNumberFallback[0]),\n        )}\n      >\n        {t('Not up to date')}\n      </span>\n    );\n  }\n\n  renderKicker(maxHeight: number) {\n    const { timestamp, showTimestamp, formatTime, width } = this.props;\n    if (\n      !formatTime ||\n      !showTimestamp ||\n      typeof timestamp === 'string' ||\n      typeof timestamp === 'bigint' ||\n      typeof timestamp === 'boolean'\n    )\n      return null;\n\n    const text = timestamp === null ? '' : formatTime(timestamp);\n\n    const container = this.createTemporaryContainer();\n    document.body.append(container);\n    const fontSize = computeMaxFontSize({\n      text,\n      maxWidth: width,\n      maxHeight,\n      className: 'kicker',\n      container,\n    });\n    container.remove();\n\n    return (\n      <div\n        className=\"kicker\"\n        style={{\n          fontSize,\n          height: 'auto',\n        }}\n      >\n        {text}\n      </div>\n    );\n  }\n\n  renderHeader(maxHeight: number) {\n    const { bigNumber, headerFormatter, width, colorThresholdFormatters } =\n      this.props;\n    // @ts-ignore\n    const text = bigNumber === null ? t('No data') : headerFormatter(bigNumber);\n\n    const hasThresholdColorFormatter =\n      Array.isArray(colorThresholdFormatters) &&\n      colorThresholdFormatters.length > 0;\n\n    let numberColor;\n    if (hasThresholdColorFormatter) {\n      colorThresholdFormatters!.forEach(formatter => {\n        const formatterResult = bigNumber\n          ? formatter.getColorFromValue(bigNumber as number)\n          : false;\n        if (formatterResult) {\n          numberColor = formatterResult;\n        }\n      });\n    } else {\n      numberColor = 'black';\n    }\n\n    const container = this.createTemporaryContainer();\n    document.body.append(container);\n    const fontSize = computeMaxFontSize({\n      text,\n      maxWidth: width * 0.9, // reduced it's max width\n      maxHeight,\n      className: 'header-line',\n      container,\n    });\n    container.remove();\n\n    const onContextMenu = (e: MouseEvent<HTMLDivElement>) => {\n      if (this.props.onContextMenu) {\n        e.preventDefault();\n        this.props.onContextMenu(e.nativeEvent.clientX, e.nativeEvent.clientY);\n      }\n    };\n\n    return (\n      <div\n        className=\"header-line\"\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          fontSize,\n          height: 'auto',\n          color: numberColor,\n        }}\n        onContextMenu={onContextMenu}\n      >\n        {text}\n      </div>\n    );\n  }\n\n  rendermetricComparisonSummary(maxHeight: number) {\n    const { subheader, width } = this.props;\n    let fontSize = 0;\n\n    const text = subheader;\n\n    if (text) {\n      const container = this.createTemporaryContainer();\n      document.body.append(container);\n      try {\n        fontSize = computeMaxFontSize({\n          text,\n          maxWidth: width * 0.9,\n          maxHeight,\n          className: 'subheader-line',\n          container,\n        });\n      } finally {\n        container.remove();\n      }\n\n      return (\n        <div\n          className=\"subheader-line\"\n          style={{\n            fontSize,\n            height: maxHeight,\n          }}\n        >\n          {text}\n        </div>\n      );\n    }\n    return null;\n  }\n\n  renderSubtitle(maxHeight: number) {\n    const { subtitle, width, bigNumber, bigNumberFallback } = this.props;\n    let fontSize = 0;\n\n    const NO_DATA_OR_HASNT_LANDED = t(\n      'No data after filtering or data is NULL for the latest time record',\n    );\n    const NO_DATA = t(\n      'Try applying different filters or ensuring your datasource has data',\n    );\n\n    let text = subtitle;\n    if (bigNumber === null) {\n      text =\n        subtitle || (bigNumberFallback ? NO_DATA : NO_DATA_OR_HASNT_LANDED);\n    }\n\n    if (text) {\n      const container = this.createTemporaryContainer();\n      document.body.append(container);\n      fontSize = computeMaxFontSize({\n        text,\n        maxWidth: width * 0.9,\n        maxHeight,\n        className: 'subtitle-line',\n        container,\n      });\n      container.remove();\n\n      return (\n        <>\n          <div\n            className=\"subtitle-line subheader-line\"\n            style={{\n              fontSize: `${fontSize}px`,\n              height: maxHeight,\n            }}\n          >\n            {text}\n          </div>\n        </>\n      );\n    }\n    return null;\n  }\n\n  renderTrendline(maxHeight: number) {\n    const { width, trendLineData, echartOptions, refs } = this.props;\n\n    // if can't find any non-null values, no point rendering the trendline\n    if (!trendLineData?.some(d => d[1] !== null)) {\n      return null;\n    }\n\n    const eventHandlers: EventHandlers = {\n      contextmenu: eventParams => {\n        if (this.props.onContextMenu) {\n          eventParams.event.stop();\n          const { data } = eventParams;\n          if (data) {\n            const pointerEvent = eventParams.event.event;\n            const drillToDetailFilters: BinaryQueryObjectFilterClause[] = [];\n            drillToDetailFilters.push({\n              col: this.props.formData?.granularitySqla,\n              grain: this.props.formData?.timeGrainSqla,\n              op: '==',\n              val: data[0],\n              formattedVal: this.props.xValueFormatter?.(data[0]),\n            });\n            this.props.onContextMenu(\n              pointerEvent.clientX,\n              pointerEvent.clientY,\n              { drillToDetail: drillToDetailFilters },\n            );\n          }\n        }\n      },\n    };\n\n    return (\n      echartOptions && (\n        <Echart\n          refs={refs}\n          width={Math.floor(width)}\n          height={maxHeight}\n          echartOptions={echartOptions}\n          eventHandlers={eventHandlers}\n        />\n      )\n    );\n  }\n\n  render() {\n    const {\n      showTrendLine,\n      height,\n      kickerFontSize,\n      headerFontSize,\n      subtitleFontSize,\n      subheaderFontSize,\n    } = this.props;\n    const className = this.getClassName();\n\n    if (showTrendLine) {\n      const chartHeight = Math.floor(PROPORTION.TRENDLINE * height);\n      const allTextHeight = height - chartHeight;\n\n      return (\n        <div className={className}>\n          <div className=\"text-container\" style={{ height: allTextHeight }}>\n            {this.renderFallbackWarning()}\n            {this.renderKicker(\n              Math.ceil(\n                (kickerFontSize || 0) * (1 - PROPORTION.TRENDLINE) * height,\n              ),\n            )}\n            {this.renderHeader(\n              Math.ceil(headerFontSize * (1 - PROPORTION.TRENDLINE) * height),\n            )}\n            {this.rendermetricComparisonSummary(\n              Math.ceil(\n                subheaderFontSize * (1 - PROPORTION.TRENDLINE) * height,\n              ),\n            )}\n            {this.renderSubtitle(\n              Math.ceil(subtitleFontSize * (1 - PROPORTION.TRENDLINE) * height),\n            )}\n          </div>\n          {this.renderTrendline(chartHeight)}\n        </div>\n      );\n    }\n\n    return (\n      <div className={className} style={{ height }}>\n        {this.renderFallbackWarning()}\n        {this.renderKicker((kickerFontSize || 0) * height)}\n        {this.renderHeader(Math.ceil(headerFontSize * height))}\n        {this.rendermetricComparisonSummary(\n          Math.ceil(subheaderFontSize * height),\n        )}\n        {this.renderSubtitle(Math.ceil(subtitleFontSize * height))}\n      </div>\n    );\n  }\n}\n\nexport default styled(BigNumberVis)`\n  ${({ theme }) => `\n    font-family: ${theme.typography.families.sansSerif};\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n\n    &.no-trendline .subheader-line {\n      padding-bottom: 0.3em;\n    }\n\n    .text-container {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n      .alert {\n        font-size: ${theme.typography.sizes.s};\n        margin: -0.5em 0 0.4em;\n        line-height: 1;\n        padding: ${theme.gridUnit}px;\n        border-radius: ${theme.gridUnit}px;\n      }\n    }\n\n    .kicker {\n      line-height: 1em;\n      padding-bottom: 2em;\n    }\n\n    .header-line {\n      position: relative;\n      line-height: 1em;\n      white-space: nowrap;\n      margin-bottom:${theme.gridUnit * 2}px;\n      span {\n        position: absolute;\n        bottom: 0;\n      }\n    }\n\n    .subheader-line {\n      line-height: 1em;\n      padding-bottom: 0;\n    }\n\n    .subtitle-line {\n      line-height: 1em;\n      padding-bottom: 0;\n    }\n\n    &.is-fallback-value {\n      .kicker,\n      .header-line,\n      .subheader-line {\n        opacity: ${theme.opacity.mediumHeavy};\n      }\n    }\n  `}\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}