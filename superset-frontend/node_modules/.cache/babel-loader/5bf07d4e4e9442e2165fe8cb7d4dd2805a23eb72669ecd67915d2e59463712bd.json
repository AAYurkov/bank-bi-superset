{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { sharedControls, InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport { t, validateNonEmpty, useTheme, SafeMarkdown } from '@superset-ui/core';\nimport { CodeEditor } from '../../components/CodeEditor/CodeEditor';\nimport { ControlHeader } from '../../components/ControlHeader/controlHeader';\nimport { debounceFunc } from '../../consts';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst HandlebarsTemplateControl = (props) => {\n  const theme = useTheme();\n  const val = String(props != null && props.value ? props == null ? void 0 : props.value : props != null && props.default ? props == null ? void 0 : props.default : '');\n  const helperDescriptionsHeader = t('Available Handlebars Helpers in Superset:');\n  const helperDescriptions = [\n  { key: 'dateFormat', descKey: 'Formats a date using a specified format.' },\n  { key: 'stringify', descKey: 'Converts an object to a JSON string.' },\n  {\n    key: 'formatNumber',\n    descKey: 'Formats a number using locale-specific formatting.'\n  },\n  {\n    key: 'parseJson',\n    descKey: 'Parses a JSON string into a JavaScript object.'\n  }];\n\n  const helpersTooltipContent = `\n${helperDescriptionsHeader}\n\n${helperDescriptions.\n  map(({ key, descKey }) => `- **${key}**: ${t(descKey)}`).\n  join('\\n')}\n`;\n  return _jsxs(\"div\", { children: [\n    _jsx(ControlHeader, { children:\n      _jsxs(\"div\", { children: [\n        props.label,\n        _jsx(InfoTooltipWithTrigger, { iconsStyle: { marginLeft: theme.gridUnit }, tooltip: _jsx(SafeMarkdown, { source: helpersTooltipContent }) })] }\n      ) }\n    ),\n    _jsx(CodeEditor, { theme: \"dark\", value: val, onChange: (source) => {\n        debounceFunc(props.onChange, source || '');\n      } })] }\n  );\n};__signature__(HandlebarsTemplateControl, \"useTheme{theme}\", () => [useTheme]);\nexport const handlebarsTemplateControlSetItem = {\n  name: 'handlebarsTemplate',\n  config: {\n    ...sharedControls.entity,\n    type: HandlebarsTemplateControl,\n    label: t('Handlebars Template'),\n    description: t('A handlebars template that is applied to the data'),\n    default: `<ul class=\"data-list\">\n  {{#each data}}\n    <li>{{stringify this}}</li>\n  {{/each}}\n</ul>`,\n    isInt: false,\n    renderTrigger: true,\n    valueKey: null,\n    validators: [validateNonEmpty],\n    mapStateToProps: ({ controls }) => {var _controls$handlebars_;return {\n        value: controls == null ? void 0 : (_controls$handlebars_ = controls.handlebars_template) == null ? void 0 : _controls$handlebars_.value\n      };}\n  }\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(HandlebarsTemplateControl, \"HandlebarsTemplateControl\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/handlebarTemplate.tsx\");reactHotLoader.register(handlebarsTemplateControlSetItem, \"handlebarsTemplateControlSetItem\", \"/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/handlebarTemplate.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["sharedControls","InfoTooltipWithTrigger","t","validateNonEmpty","useTheme","SafeMarkdown","CodeEditor","ControlHeader","debounceFunc","jsx","_jsx","jsxs","_jsxs","HandlebarsTemplateControl","props","theme","val","String","value","default","helperDescriptionsHeader","helperDescriptions","key","descKey","helpersTooltipContent","map","join","children","label","iconsStyle","marginLeft","gridUnit","tooltip","source","onChange","__signature__","handlebarsTemplateControlSetItem","name","config","entity","type","description","isInt","renderTrigger","valueKey","validators","mapStateToProps","controls","_controls$handlebars_","handlebars_template","reactHotLoader","reactHotLoaderGlobal","undefined","register","leaveModule","module"],"sources":["/Users/aryurkov/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/handlebarTemplate.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  ControlSetItem,\n  CustomControlConfig,\n  sharedControls,\n  InfoTooltipWithTrigger,\n} from '@superset-ui/chart-controls';\nimport { t, validateNonEmpty, useTheme, SafeMarkdown } from '@superset-ui/core';\nimport { CodeEditor } from '../../components/CodeEditor/CodeEditor';\nimport { ControlHeader } from '../../components/ControlHeader/controlHeader';\nimport { debounceFunc } from '../../consts';\n\ninterface HandlebarsCustomControlProps {\n  value: string;\n}\n\nconst HandlebarsTemplateControl = (\n  props: CustomControlConfig<HandlebarsCustomControlProps>,\n) => {\n  const theme = useTheme();\n\n  const val = String(\n    props?.value ? props?.value : props?.default ? props?.default : '',\n  );\n\n  const helperDescriptionsHeader = t(\n    'Available Handlebars Helpers in Superset:',\n  );\n\n  const helperDescriptions = [\n    { key: 'dateFormat', descKey: 'Formats a date using a specified format.' },\n    { key: 'stringify', descKey: 'Converts an object to a JSON string.' },\n    {\n      key: 'formatNumber',\n      descKey: 'Formats a number using locale-specific formatting.',\n    },\n    {\n      key: 'parseJson',\n      descKey: 'Parses a JSON string into a JavaScript object.',\n    },\n  ];\n\n  const helpersTooltipContent = `\n${helperDescriptionsHeader}\n\n${helperDescriptions\n  .map(({ key, descKey }) => `- **${key}**: ${t(descKey)}`)\n  .join('\\n')}\n`;\n\n  return (\n    <div>\n      <ControlHeader>\n        <div>\n          {props.label}\n          <InfoTooltipWithTrigger\n            iconsStyle={{ marginLeft: theme.gridUnit }}\n            tooltip={<SafeMarkdown source={helpersTooltipContent} />}\n          />\n        </div>\n      </ControlHeader>\n      <CodeEditor\n        theme=\"dark\"\n        value={val}\n        onChange={source => {\n          debounceFunc(props.onChange, source || '');\n        }}\n      />\n    </div>\n  );\n};\n\nexport const handlebarsTemplateControlSetItem: ControlSetItem = {\n  name: 'handlebarsTemplate',\n  config: {\n    ...sharedControls.entity,\n    type: HandlebarsTemplateControl,\n    label: t('Handlebars Template'),\n    description: t('A handlebars template that is applied to the data'),\n    default: `<ul class=\"data-list\">\n  {{#each data}}\n    <li>{{stringify this}}</li>\n  {{/each}}\n</ul>`,\n    isInt: false,\n    renderTrigger: true,\n    valueKey: null,\n\n    validators: [validateNonEmpty],\n    mapStateToProps: ({ controls }) => ({\n      value: controls?.handlebars_template?.value,\n    }),\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}