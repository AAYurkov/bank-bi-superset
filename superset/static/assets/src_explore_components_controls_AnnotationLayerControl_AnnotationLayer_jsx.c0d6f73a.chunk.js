"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["src_explore_components_controls_AnnotationLayerControl_AnnotationLayer_jsx"],{

/***/ "./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx":
/*!************************************************************************************!*\
  !*** ./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx ***!
  \************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var rison__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rison */ \"./node_modules/rison/js/rison.js\");\n/* harmony import */ var rison__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rison__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var react_color__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-color */ \"./node_modules/react-color/es/index.js\");\n/* harmony import */ var src_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/components/Button */ \"./src/components/Button/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/connection/SupersetClient.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/chart/registries/ChartMetadataRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/getColumnLabel.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/math-expression/index.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/validator/validateNonEmpty.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/color/CategoricalSchemeRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@emotion/react/dist/emotion-element-489459f2.browser.development.esm.js\");\n/* harmony import */ var src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/explore/components/controls/SelectControl */ \"./src/explore/components/controls/SelectControl.jsx\");\n/* harmony import */ var src_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/components */ \"./src/components/index.ts\");\n/* harmony import */ var src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/explore/components/controls/TextControl */ \"./src/explore/components/controls/TextControl/index.tsx\");\n/* harmony import */ var src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! src/explore/components/controls/CheckboxControl */ \"./src/explore/components/controls/CheckboxControl.jsx\");\n/* harmony import */ var src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! src/components/PopoverSection */ \"./src/components/PopoverSection/index.tsx\");\n/* harmony import */ var src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! src/explore/components/ControlHeader */ \"./src/explore/components/ControlHeader.tsx\");\n/* harmony import */ var src_components_EmptyState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! src/components/EmptyState */ \"./src/components/EmptyState/index.tsx\");\n/* harmony import */ var _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./AnnotationTypes */ \"./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.development.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst AUTOMATIC_COLOR = '';\n\nconst propTypes = {\n  name: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  annotationType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  sourceType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  color: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  opacity: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  style: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  width: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().number),\n  showMarkers: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  hideLine: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  value: prop_types__WEBPACK_IMPORTED_MODULE_12___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_12___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_12___default().number)]),\n  overrides: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().object),\n  show: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  showLabel: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  titleColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  descriptionColumns: prop_types__WEBPACK_IMPORTED_MODULE_12___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_12___default().string)),\n  timeColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  intervalEndColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  vizType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n\n  error: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  colorScheme: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n\n  addAnnotationLayer: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func),\n  removeAnnotationLayer: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func),\n  close: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func)\n};\n\nconst defaultProps = {\n  name: '',\n  annotationType: _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_ANNOTATION_TYPE,\n  sourceType: '',\n  color: AUTOMATIC_COLOR,\n  opacity: '',\n  style: 'solid',\n  width: 1,\n  showMarkers: false,\n  hideLine: false,\n  overrides: {},\n  colorScheme: 'd3Category10',\n  show: true,\n  showLabel: false,\n  titleColumn: '',\n  descriptionColumns: [],\n  timeColumn: '',\n  intervalEndColumn: '',\n\n  addAnnotationLayer: () => {},\n  removeAnnotationLayer: () => {},\n  close: () => {}\n};\n\nconst NotFoundContentWrapper = _superset_ui_core__WEBPACK_IMPORTED_MODULE_13__.styled.div`\n  && > div:first-child {\n    padding-left: 0;\n    padding-right: 0;\n  }\n`;\n\nconst NotFoundContent = () =>\n(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContentWrapper, { children:\n  (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_EmptyState__WEBPACK_IMPORTED_MODULE_10__.EmptyState, {\n    title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('No annotation layers'),\n    size: \"small\",\n    description:\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"span\", { children: [\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Add an annotation layer'), ' ',\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"a\", {\n        href: \"/annotationlayer/list\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\", children:\n\n        (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('here') }\n      ), \".\"] }\n\n    ),\n\n    image: \"empty.svg\" }\n  ) }\n);\n\n\nclass AnnotationLayer extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n  constructor(props) {\n    super(props);this.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    fetchNativeAnnotations = async (search, page, pageSize) => {\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        filters: [\n        {\n          col: 'name',\n          opr: 'ct',\n          value: search\n        }],\n\n        columns: ['id', 'name'],\n        page,\n        page_size: pageSize\n      });\n\n      const { json } = await _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/annotation_layer/?q=${queryParams}`\n      });\n\n      const { result, count } = json;\n\n      const layersArray = result.map((layer) => ({\n        value: layer.id,\n        label: layer.name\n      }));\n\n      return {\n        data: layersArray,\n        totalCount: count\n      };\n    };this.\n\n    fetchCharts = async (search, page, pageSize) => {\n      const { annotationType } = this.state;\n\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        filters: [\n        { col: 'slice_name', opr: 'chart_all_text', value: search },\n        {\n          col: 'id',\n          opr: 'chart_owned_created_favored_by_me',\n          value: true\n        }],\n\n        columns: ['id', 'slice_name', 'viz_type'],\n        order_column: 'slice_name',\n        order_direction: 'asc',\n        page,\n        page_size: pageSize\n      });\n      const { json } = await _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/chart/?q=${queryParams}`\n      });\n\n      const { result, count } = json;\n      const registry = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n\n      const chartsArray = result.\n      filter((chart) => {\n        const metadata = registry.get(chart.viz_type);\n        return metadata && metadata.canBeAnnotationType(annotationType);\n      }).\n      map((chart) => ({\n        value: chart.id,\n        label: chart.slice_name,\n        viz_type: chart.viz_type\n      }));\n\n      return {\n        data: chartsArray,\n        totalCount: count\n      };\n    };this.\n\n    fetchOptions = (search, page, pageSize) => {\n      const { sourceType } = this.state;\n\n      if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n        return this.fetchNativeAnnotations(search, page, pageSize);\n      }\n      return this.fetchCharts(search, page, pageSize);\n    };this.\n\n    fetchSliceData = (id) => {\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        columns: ['query_context']\n      });\n      _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/chart/${id}?q=${queryParams}`\n      }).then(({ json }) => {var _formData$groupby;\n        const { result } = json;\n        const queryContext = result.query_context;\n        const formData = JSON.parse(queryContext).form_data;\n        const dataObject = {\n          data: {\n            ...formData,\n            groupby: (_formData$groupby = formData.groupby) == null ? void 0 : _formData$groupby.map((column) => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(column))\n          }\n        };\n        this.setState({\n          slice: dataObject\n        });\n      });\n    };const { name, annotationType: _annotationType, sourceType: _sourceType, color, opacity, style, width, showMarkers, hideLine, value, overrides, show, showLabel, titleColumn, descriptionColumns, timeColumn, intervalEndColumn, vizType } = props; // Only allow override whole time_range\n    if ('since' in overrides || 'until' in overrides) {overrides.time_range = null;delete overrides.since;delete overrides.until;} // Check if annotationType is supported by this chart\n    const _metadata = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().get(vizType);const supportedAnnotationTypes = (_metadata == null ? void 0 : _metadata.supportedAnnotationTypes) || [];const validAnnotationType = supportedAnnotationTypes.includes(_annotationType) ? _annotationType : supportedAnnotationTypes[0];this.state = { // base\n      name, annotationType: validAnnotationType, sourceType: _sourceType, value, overrides, show, showLabel, // slice\n      titleColumn, descriptionColumns, timeColumn, intervalEndColumn, // display\n      color: color || AUTOMATIC_COLOR, opacity, style, width, showMarkers, hideLine, // refData\n      isNew: !name, slice: null };this.submitAnnotation = this.submitAnnotation.bind(this);this.deleteAnnotation = this.deleteAnnotation.bind(this);this.applyAnnotation = this.applyAnnotation.bind(this);this.isValidForm = this.isValidForm.bind(this); // Handlers\n    this.handleAnnotationType = this.handleAnnotationType.bind(this);this.handleAnnotationSourceType = this.handleAnnotationSourceType.bind(this);this.handleSelectValue = this.handleSelectValue.bind(this);this.handleTextValue = this.handleTextValue.bind(this); // Fetch related functions\n    this.fetchOptions = this.fetchOptions.bind(this);this.fetchCharts = this.fetchCharts.bind(this);this.fetchNativeAnnotations = this.fetchNativeAnnotations.bind(this);this.fetchAppliedAnnotation = this.fetchAppliedAnnotation.bind(this);this.fetchSliceData = this.fetchSliceData.bind(this);this.shouldFetchSliceData = this.shouldFetchSliceData.bind(this);this.fetchAppliedChart = this.fetchAppliedChart.bind(this);this.fetchAppliedNativeAnnotation = this.fetchAppliedNativeAnnotation.bind(this);this.shouldFetchAppliedAnnotation = this.shouldFetchAppliedAnnotation.bind(this);}componentDidMount() {if (this.shouldFetchAppliedAnnotation()) {const { value } = this.state; /* The value prop is the id of the chart/native. This function will set\n      value in state to an object with the id as value.value to be used by\n      AsyncSelect */this.fetchAppliedAnnotation(value);}}componentDidUpdate(prevProps, prevState) {if (this.shouldFetchSliceData(prevState)) {const { value } = this.state;this.fetchSliceData(value.value);}}getSupportedSourceTypes(annotationType) {var _ANNOTATION_TYPES_MET; // Get vis types that can be source.\n    const sources = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().entries().filter(({ value: chartMetadata }) => chartMetadata.canBeAnnotationType(annotationType)).map(({ key, value: chartMetadata }) => ({ value: key, label: chartMetadata.name })); // Prepend native source if applicable\n    if ((_ANNOTATION_TYPES_MET = _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES_METADATA[annotationType]) != null && _ANNOTATION_TYPES_MET.supportNativeSource) {sources.unshift(_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES_METADATA.NATIVE);}return sources;}shouldFetchAppliedAnnotation() {const { value, sourceType } = this.state;return value && (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType);}shouldFetchSliceData(prevState) {const { value, sourceType } = this.state;const isChart = sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE && (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType);const valueIsNew = value && prevState.value !== value;return valueIsNew && isChart;}isValidFormulaAnnotation(expression, annotationType) {if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {return (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_19__.isValidExpression)(expression);}return true;}isValidForm() {const { name, annotationType, sourceType, value, timeColumn, intervalEndColumn } = this.state;const errors = [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(name), (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(annotationType), (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(value)];if (sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.EVENT) {errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(timeColumn));}if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL) {errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(timeColumn));errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(intervalEndColumn));}}errors.push(!this.isValidFormulaAnnotation(value, annotationType));return !errors.filter((x) => x).length;}handleAnnotationType(annotationType) {this.setState({ annotationType, sourceType: null, value: null, slice: null });}handleAnnotationSourceType(sourceType) {const { sourceType: prevSourceType } = this.state;if (prevSourceType !== sourceType) {this.setState({ sourceType, value: null, slice: null });}}handleSelectValue(selectedValueObject) {this.setState({ value: selectedValueObject, descriptionColumns: [], intervalEndColumn: null, timeColumn: null, titleColumn: null, overrides: { time_range: null } });}handleTextValue(inputValue) {this.setState({ value: inputValue });}fetchAppliedChart(id) {const { annotationType } = this.state;const registry = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({ columns: ['slice_name', 'query_context', 'viz_type'] });_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({ endpoint: `/api/v1/chart/${id}?q=${queryParams}` }).then(({ json }) => {const { result } = json;const sliceName = result.slice_name;\n        const queryContext = result.query_context;\n        const vizType = result.viz_type;\n        const formData = JSON.parse(queryContext).form_data;\n        const metadata = registry.get(vizType);\n        const canBeAnnotationType =\n        metadata && metadata.canBeAnnotationType(annotationType);\n        if (canBeAnnotationType) {var _formData$groupby2;\n          this.setState({\n            value: {\n              value: id,\n              label: sliceName\n            },\n            slice: {\n              data: {\n                ...formData,\n                groupby: (_formData$groupby2 = formData.groupby) == null ? void 0 : _formData$groupby2.map((column) => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(column))\n              }\n            }\n          });\n        }\n      });\n  }\n\n  fetchAppliedNativeAnnotation(id) {\n    _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n      endpoint: `/api/v1/annotation_layer/${id}`\n    }).then(({ json }) => {\n      const { result } = json;\n      const layer = result;\n      this.setState({\n        value: {\n          value: layer.id,\n          label: layer.name\n        }\n      });\n    });\n  }\n\n  fetchAppliedAnnotation(id) {\n    const { sourceType } = this.state;\n\n    if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n      return this.fetchAppliedNativeAnnotation(id);\n    }\n    return this.fetchAppliedChart(id);\n  }\n\n  deleteAnnotation() {\n    this.props.removeAnnotationLayer();\n    this.props.close();\n  }\n\n  applyAnnotation() {\n    const { value, sourceType } = this.state;\n    if (this.isValidForm()) {\n      const annotationFields = [\n      'name',\n      'annotationType',\n      'sourceType',\n      'color',\n      'opacity',\n      'style',\n      'width',\n      'showMarkers',\n      'hideLine',\n      'overrides',\n      'show',\n      'showLabel',\n      'titleColumn',\n      'descriptionColumns',\n      'timeColumn',\n      'intervalEndColumn'];\n\n      const newAnnotation = {};\n      annotationFields.forEach((field) => {\n        if (this.state[field] !== null) {\n          newAnnotation[field] = this.state[field];\n        }\n      });\n\n      // Prepare newAnnotation.value for use in runAnnotationQuery()\n      const applicableValue = (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType) ? value.value : value;\n      newAnnotation.value = applicableValue;\n\n      if (newAnnotation.color === AUTOMATIC_COLOR) {\n        newAnnotation.color = null;\n      }\n\n      this.props.addAnnotationLayer(newAnnotation);\n      this.setState({ isNew: false });\n    }\n  }\n\n  submitAnnotation() {\n    this.applyAnnotation();\n    this.props.close();\n  }\n\n  renderChartHeader(label, description, value) {\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n        hovered: true,\n        label: label,\n        description: description,\n        validationErrors: !value ? ['Mandatory'] : [] }\n      ));\n\n  }\n\n  renderValueConfiguration() {\n    const { annotationType, sourceType, value } = this.state;\n    let label = '';\n    let description = '';\n    if ((0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType)) {\n      if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n        label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer');\n        description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Select the Annotation Layer you would like to use.');\n      } else {\n        label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Chart');\n        description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n          `Use another existing chart as a source for annotations and overlays.\n          Your chart must be one of these visualization types: [%s]`,\n          this.getSupportedSourceTypes(annotationType).\n          map((x) => x.label).\n          join(', ')\n        );\n      }\n    } else if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {\n      label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Formula');\n      description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`Expects a formula with depending time parameter 'x'\n        in milliseconds since epoch. mathjs is used to evaluate the formulas.\n        Example: '2x+5'`);\n    }\n    if ((0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType)) {\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components__WEBPACK_IMPORTED_MODULE_5__.AsyncSelect\n        /* key to force re-render on sourceType change */, {\n\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer value'),\n          name: \"annotation-layer-value\",\n          header: this.renderChartHeader(label, description, value),\n          options: this.fetchOptions,\n          value: value || null,\n          onChange: this.handleSelectValue,\n          notFoundContent: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContent, {}) }, sourceType\n        ));\n\n    }\n    if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n          name: \"annotation-layer-value\",\n          hovered: true,\n          showHeader: true,\n          description: description,\n          label: label,\n          placeholder: \"\",\n          value: value,\n          onChange: this.handleTextValue,\n          validationErrors:\n          !this.isValidFormulaAnnotation(value, annotationType) ?\n          [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Bad formula.')] :\n          [] }\n\n        ));\n\n    }\n    return '';\n  }\n\n  renderSliceConfiguration() {\n    const {\n      annotationType,\n      sourceType,\n      value,\n      slice,\n      overrides,\n      titleColumn,\n      timeColumn,\n      intervalEndColumn,\n      descriptionColumns\n    } = this.state;\n\n    if (!slice || !value) {\n      return '';\n    }\n\n    if (sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE && slice) {\n      const columns = (slice.data.groupby || []).\n      concat(slice.data.all_columns || []).\n      map((x) => ({ value: x, label: x }));\n      const timeColumnOptions = slice.data.include_time ?\n      [{ value: '__timestamp', label: '__timestamp' }].concat(columns) :\n      columns;\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"div\", { style: { marginRight: '2rem' }, children:\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n            isSelected: true,\n            title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation Slice Configuration'),\n            info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This section allows you to configure how to use the slice\n              to generate annotations.`), children: [\n\n            (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.EVENT ||\n            annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL) &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer time column'),\n              hovered: true,\n              name: \"annotation-layer-time-column\",\n              label:\n              annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL ?\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Interval start column') :\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Event time column'),\n\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                'This column must contain date/time information.'\n              ),\n              validationErrors: !timeColumn ? ['Mandatory'] : [],\n              clearable: false,\n              options: timeColumnOptions,\n              value: timeColumn,\n              onChange: (v) => this.setState({ timeColumn: v }) }\n            ),\n\n            annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer interval end'),\n              hovered: true,\n              name: \"annotation-layer-intervalEnd\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Interval End column'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                'This column must contain date/time information.'\n              ),\n              validationErrors: !intervalEndColumn ? ['Mandatory'] : [],\n              options: columns,\n              value: intervalEndColumn,\n              onChange: (value) => this.setState({ intervalEndColumn: value }) }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer title column'),\n              hovered: true,\n              name: \"annotation-layer-title\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Title Column'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Pick a title for you annotation.'),\n              options: [{ value: '', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('None') }].concat(columns),\n              value: titleColumn,\n              onChange: (value) => this.setState({ titleColumn: value }) }\n            ),\n            annotationType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer description columns'),\n              hovered: true,\n              name: \"annotation-layer-title\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Description Columns'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                \"Pick one or more columns that should be shown in the annotation. If you don't select a column all of them will be shown.\"\n              ),\n              multi: true,\n              options: columns,\n              value: descriptionColumns,\n              onChange: (value) => this.setState({ descriptionColumns: value }) }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { marginTop: '1rem' }, children: [\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                hovered: true,\n                name: \"annotation-override-time_range\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Override time range'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This controls whether the \"time_range\" field from the current\n                  view should be passed down to the chart containing the annotation data.`),\n                value: 'time_range' in overrides,\n                onChange: (v) => {\n                  delete overrides.time_range;\n                  if (v) {\n                    this.setState({\n                      overrides: { ...overrides, time_range: null }\n                    });\n                  } else {\n                    this.setState({ overrides: { ...overrides } });\n                  }\n                } }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                hovered: true,\n                name: \"annotation-override-timegrain\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Override time grain'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This controls whether the time grain field from the current\n                  view should be passed down to the chart containing the annotation data.`),\n                value: 'time_grain_sqla' in overrides,\n                onChange: (v) => {\n                  delete overrides.time_grain_sqla;\n                  delete overrides.granularity;\n                  if (v) {\n                    this.setState({\n                      overrides: {\n                        ...overrides,\n                        time_grain_sqla: null,\n                        granularity: null\n                      }\n                    });\n                  } else {\n                    this.setState({ overrides: { ...overrides } });\n                  }\n                } }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                hovered: true,\n                name: \"annotation-layer-timeshift\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Time Shift'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`Time delta in natural language\n                  (example:  24 hours, 7 days, 56 weeks, 365 days)`),\n                placeholder: \"\",\n                value: overrides.time_shift,\n                onChange: (v) =>\n                this.setState({ overrides: { ...overrides, time_shift: v } }) }\n\n              )] }\n            )] }\n          ) }\n        ));\n\n    }\n    return '';\n  }\n\n  renderDisplayConfiguration() {\n    const {\n      color,\n      opacity,\n      style,\n      width,\n      showMarkers,\n      hideLine,\n      annotationType\n    } = this.state;\n    const colorScheme = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_21__[\"default\"])().\n    get(this.props.colorScheme).\n    colors.concat();\n    if (\n    color &&\n    color !== AUTOMATIC_COLOR &&\n    !colorScheme.find((x) => x.toLowerCase() === color.toLowerCase()))\n    {\n      colorScheme.push(color);\n    }\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n        isSelected: true,\n        title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Display configuration'),\n        info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Configure your how you overlay is displayed here.'), children: [\n\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer stroke'),\n          name: \"annotation-layer-stroke\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Style')\n          // see '../../../visualizations/nvd3_vis.css'\n          , options: [\n          { value: 'solid', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Solid') },\n          { value: 'dashed', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Dashed') },\n          { value: 'longDashed', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Long dashed') },\n          { value: 'dotted', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Dotted') }],\n\n          value: style,\n          clearable: false,\n          onChange: (v) => this.setState({ style: v }) }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer opacity'),\n          name: \"annotation-layer-opacity\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Opacity')\n          // see '../../../visualizations/nvd3_vis.css'\n          , options: [\n          { value: '', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Solid') },\n          { value: 'opacityLow', label: '0.2' },\n          { value: 'opacityMedium', label: '0.5' },\n          { value: 'opacityHigh', label: '0.8' }],\n\n          value: opacity,\n          onChange: (value) => this.setState({ opacity: value }) }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { children: [\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Color') }),\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', flexDirection: 'column' }, children: [\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(react_color__WEBPACK_IMPORTED_MODULE_2__.CompactPicker, {\n              color: color,\n              colors: colorScheme,\n              onChangeComplete: (v) => this.setState({ color: v.hex }) }\n            ),\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              style: { marginTop: '0.5rem', marginBottom: '0.5rem' },\n              buttonStyle: color === AUTOMATIC_COLOR ? 'success' : 'default',\n              buttonSize: \"xsmall\",\n              onClick: () => this.setState({ color: AUTOMATIC_COLOR }), children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Automatic Color') }\n            )] }\n          )] }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n          name: \"annotation-layer-stroke-width\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Line width'),\n          isInt: true,\n          value: width,\n          onChange: (v) => this.setState({ width: v }) }\n        ),\n        annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n          hovered: true,\n          name: \"annotation-layer-show-markers\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Show Markers'),\n          description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Shows or hides markers for the time series'),\n          value: showMarkers,\n          onChange: (v) => this.setState({ showMarkers: v }) }\n        ),\n\n        annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n          hovered: true,\n          name: \"annotation-layer-hide-line\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hide Line'),\n          description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hides the Line for the time series'),\n          value: hideLine,\n          onChange: (v) => this.setState({ hideLine: v }) }\n        )] }\n\n      ));\n\n  }\n\n  render() {\n    const { isNew, name, annotationType, sourceType, show, showLabel } =\n    this.state;\n    const isValid = this.isValidForm();\n    const metadata = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().get(this.props.vizType);\n    const supportedAnnotationTypes = metadata ?\n    metadata.supportedAnnotationTypes.map(\n      (type) => _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES_METADATA[type]\n    ) :\n    [];\n    const supportedSourceTypes = this.getSupportedSourceTypes(annotationType);\n\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment, { children: [\n        this.props.error &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"span\", { style: { color: this.props.theme.colors.error.base }, children: [\"ERROR: \",\n          this.props.error] }\n        ),\n\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', flexDirection: 'row' }, children: [\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"div\", { style: { marginRight: '2rem' }, children:\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n              isSelected: true,\n              title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Layer configuration'),\n              info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Configure the basics of your Annotation Layer.'), children: [\n\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                name: \"annotation-layer-name\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Name'),\n                placeholder: \"\",\n                value: name,\n                onChange: (v) => this.setState({ name: v }),\n                validationErrors: !name ? [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Mandatory')] : [] }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                name: \"annotation-layer-hide\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hide layer'),\n                value: !show,\n                onChange: (v) => this.setState({ show: !v }) }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                name: \"annotation-label-show\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Show label'),\n                value: showLabel,\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Whether to always show the annotation label'),\n                onChange: (v) => this.setState({ showLabel: v }) }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer type'),\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Choose the annotation layer type'),\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer type'),\n                name: \"annotation-layer-type\",\n                clearable: false,\n                options: supportedAnnotationTypes,\n                value: annotationType,\n                onChange: this.handleAnnotationType }\n              ),\n              supportedSourceTypes.length > 0 &&\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation source type'),\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Choose the source of your annotations'),\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation source'),\n                name: \"annotation-source-type\",\n                options: supportedSourceTypes,\n                notFoundContent: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContent, {}),\n                value: sourceType,\n                onChange: this.handleAnnotationSourceType,\n                validationErrors: !sourceType ? [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Mandatory')] : [] }\n              ),\n\n              this.renderValueConfiguration()] }\n            ) }\n          ),\n          this.renderSliceConfiguration(),\n          this.renderDisplayConfiguration()] }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', justifyContent: 'space-between' }, children: [\n          isNew ?\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { buttonSize: \"small\", onClick: () => this.props.close(), children:\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Cancel') }\n          ) :\n\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { buttonSize: \"small\", onClick: this.deleteAnnotation, children:\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Remove') }\n          ),\n\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { children: [\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              buttonSize: \"small\",\n              disabled: !isValid,\n              onClick: this.applyAnnotation, children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Apply') }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              buttonSize: \"small\",\n              buttonStyle: \"primary\",\n              disabled: !isValid,\n              onClick: this.submitAnnotation, children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('OK') }\n            )] }\n          )] }\n        )] }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nAnnotationLayer.propTypes = propTypes;\nAnnotationLayer.defaultProps = defaultProps;const _default =\n\n(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_22__.b)(AnnotationLayer);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AUTOMATIC_COLOR, \"AUTOMATIC_COLOR\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(NotFoundContentWrapper, \"NotFoundContentWrapper\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(NotFoundContent, \"NotFoundContent\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(AnnotationLayer, \"AnnotationLayer\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvbkxheWVyLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvUkE7QUFPQTtBQVVBO0FBUUE7QUFLQTtBQU9BO0FBUUE7QUFNQTtBQWlCQTtBQUNBO0FBY0E7QUFVQTtBQStNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvbkxheWVyLmpzeD85YTRhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcmlzb24gZnJvbSAncmlzb24nO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IENvbXBhY3RQaWNrZXIgfSBmcm9tICdyZWFjdC1jb2xvcic7XG5pbXBvcnQgQnV0dG9uIGZyb20gJ3NyYy9jb21wb25lbnRzL0J1dHRvbic7XG5pbXBvcnQge1xuICB0LFxuICBTdXBlcnNldENsaWVudCxcbiAgZ2V0Q2F0ZWdvcmljYWxTY2hlbWVSZWdpc3RyeSxcbiAgZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5LFxuICB2YWxpZGF0ZU5vbkVtcHR5LFxuICBpc1ZhbGlkRXhwcmVzc2lvbixcbiAgc3R5bGVkLFxuICBnZXRDb2x1bW5MYWJlbCxcbiAgd2l0aFRoZW1lLFxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgU2VsZWN0Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1NlbGVjdENvbnRyb2wnO1xuaW1wb3J0IHsgQXN5bmNTZWxlY3QgfSBmcm9tICdzcmMvY29tcG9uZW50cyc7XG5pbXBvcnQgVGV4dENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0Q29udHJvbCc7XG5pbXBvcnQgQ2hlY2tib3hDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvQ2hlY2tib3hDb250cm9sJztcbmltcG9ydCBQb3BvdmVyU2VjdGlvbiBmcm9tICdzcmMvY29tcG9uZW50cy9Qb3BvdmVyU2VjdGlvbic7XG5pbXBvcnQgQ29udHJvbEhlYWRlciBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL0NvbnRyb2xIZWFkZXInO1xuaW1wb3J0IHsgRW1wdHlTdGF0ZSB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0VtcHR5U3RhdGUnO1xuaW1wb3J0IHtcbiAgQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMsXG4gIEFOTk9UQVRJT05fVFlQRVMsXG4gIEFOTk9UQVRJT05fVFlQRVNfTUVUQURBVEEsXG4gIERFRkFVTFRfQU5OT1RBVElPTl9UWVBFLFxuICByZXF1aXJlc1F1ZXJ5LFxuICBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFU19NRVRBREFUQSxcbn0gZnJvbSAnLi9Bbm5vdGF0aW9uVHlwZXMnO1xuXG5jb25zdCBBVVRPTUFUSUNfQ09MT1IgPSAnJztcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBhbm5vdGF0aW9uVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgc291cmNlVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG9wYWNpdHk6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHN0eWxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB3aWR0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgc2hvd01hcmtlcnM6IFByb3BUeXBlcy5ib29sLFxuICBoaWRlTGluZTogUHJvcFR5cGVzLmJvb2wsXG4gIHZhbHVlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSksXG4gIG92ZXJyaWRlczogUHJvcFR5cGVzLm9iamVjdCxcbiAgc2hvdzogUHJvcFR5cGVzLmJvb2wsXG4gIHNob3dMYWJlbDogUHJvcFR5cGVzLmJvb2wsXG4gIHRpdGxlQ29sdW1uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBkZXNjcmlwdGlvbkNvbHVtbnM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpLFxuICB0aW1lQ29sdW1uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBpbnRlcnZhbEVuZENvbHVtbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgdml6VHlwZTogUHJvcFR5cGVzLnN0cmluZyxcblxuICBlcnJvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29sb3JTY2hlbWU6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgYWRkQW5ub3RhdGlvbkxheWVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgcmVtb3ZlQW5ub3RhdGlvbkxheWVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgY2xvc2U6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBuYW1lOiAnJyxcbiAgYW5ub3RhdGlvblR5cGU6IERFRkFVTFRfQU5OT1RBVElPTl9UWVBFLFxuICBzb3VyY2VUeXBlOiAnJyxcbiAgY29sb3I6IEFVVE9NQVRJQ19DT0xPUixcbiAgb3BhY2l0eTogJycsXG4gIHN0eWxlOiAnc29saWQnLFxuICB3aWR0aDogMSxcbiAgc2hvd01hcmtlcnM6IGZhbHNlLFxuICBoaWRlTGluZTogZmFsc2UsXG4gIG92ZXJyaWRlczoge30sXG4gIGNvbG9yU2NoZW1lOiAnZDNDYXRlZ29yeTEwJyxcbiAgc2hvdzogdHJ1ZSxcbiAgc2hvd0xhYmVsOiBmYWxzZSxcbiAgdGl0bGVDb2x1bW46ICcnLFxuICBkZXNjcmlwdGlvbkNvbHVtbnM6IFtdLFxuICB0aW1lQ29sdW1uOiAnJyxcbiAgaW50ZXJ2YWxFbmRDb2x1bW46ICcnLFxuXG4gIGFkZEFubm90YXRpb25MYXllcjogKCkgPT4ge30sXG4gIHJlbW92ZUFubm90YXRpb25MYXllcjogKCkgPT4ge30sXG4gIGNsb3NlOiAoKSA9PiB7fSxcbn07XG5cbmNvbnN0IE5vdEZvdW5kQ29udGVudFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICAmJiA+IGRpdjpmaXJzdC1jaGlsZCB7XG4gICAgcGFkZGluZy1sZWZ0OiAwO1xuICAgIHBhZGRpbmctcmlnaHQ6IDA7XG4gIH1cbmA7XG5cbmNvbnN0IE5vdEZvdW5kQ29udGVudCA9ICgpID0+IChcbiAgPE5vdEZvdW5kQ29udGVudFdyYXBwZXI+XG4gICAgPEVtcHR5U3RhdGVcbiAgICAgIHRpdGxlPXt0KCdObyBhbm5vdGF0aW9uIGxheWVycycpfVxuICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgIGRlc2NyaXB0aW9uPXtcbiAgICAgICAgPHNwYW4+XG4gICAgICAgICAge3QoJ0FkZCBhbiBhbm5vdGF0aW9uIGxheWVyJyl9eycgJ31cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgaHJlZj1cIi9hbm5vdGF0aW9ubGF5ZXIvbGlzdFwiXG4gICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge3QoJ2hlcmUnKX1cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgLlxuICAgICAgICA8L3NwYW4+XG4gICAgICB9XG4gICAgICBpbWFnZT1cImVtcHR5LnN2Z1wiXG4gICAgLz5cbiAgPC9Ob3RGb3VuZENvbnRlbnRXcmFwcGVyPlxuKTtcblxuY2xhc3MgQW5ub3RhdGlvbkxheWVyIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIGNvbnN0IHtcbiAgICAgIG5hbWUsXG4gICAgICBhbm5vdGF0aW9uVHlwZSxcbiAgICAgIHNvdXJjZVR5cGUsXG4gICAgICBjb2xvcixcbiAgICAgIG9wYWNpdHksXG4gICAgICBzdHlsZSxcbiAgICAgIHdpZHRoLFxuICAgICAgc2hvd01hcmtlcnMsXG4gICAgICBoaWRlTGluZSxcbiAgICAgIHZhbHVlLFxuICAgICAgb3ZlcnJpZGVzLFxuICAgICAgc2hvdyxcbiAgICAgIHNob3dMYWJlbCxcbiAgICAgIHRpdGxlQ29sdW1uLFxuICAgICAgZGVzY3JpcHRpb25Db2x1bW5zLFxuICAgICAgdGltZUNvbHVtbixcbiAgICAgIGludGVydmFsRW5kQ29sdW1uLFxuICAgICAgdml6VHlwZSxcbiAgICB9ID0gcHJvcHM7XG5cbiAgICAvLyBPbmx5IGFsbG93IG92ZXJyaWRlIHdob2xlIHRpbWVfcmFuZ2VcbiAgICBpZiAoJ3NpbmNlJyBpbiBvdmVycmlkZXMgfHwgJ3VudGlsJyBpbiBvdmVycmlkZXMpIHtcbiAgICAgIG92ZXJyaWRlcy50aW1lX3JhbmdlID0gbnVsbDtcbiAgICAgIGRlbGV0ZSBvdmVycmlkZXMuc2luY2U7XG4gICAgICBkZWxldGUgb3ZlcnJpZGVzLnVudGlsO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGFubm90YXRpb25UeXBlIGlzIHN1cHBvcnRlZCBieSB0aGlzIGNoYXJ0XG4gICAgY29uc3QgbWV0YWRhdGEgPSBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnkoKS5nZXQodml6VHlwZSk7XG4gICAgY29uc3Qgc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzID0gbWV0YWRhdGE/LnN1cHBvcnRlZEFubm90YXRpb25UeXBlcyB8fCBbXTtcbiAgICBjb25zdCB2YWxpZEFubm90YXRpb25UeXBlID0gc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzLmluY2x1ZGVzKFxuICAgICAgYW5ub3RhdGlvblR5cGUsXG4gICAgKVxuICAgICAgPyBhbm5vdGF0aW9uVHlwZVxuICAgICAgOiBzdXBwb3J0ZWRBbm5vdGF0aW9uVHlwZXNbMF07XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgLy8gYmFzZVxuICAgICAgbmFtZSxcbiAgICAgIGFubm90YXRpb25UeXBlOiB2YWxpZEFubm90YXRpb25UeXBlLFxuICAgICAgc291cmNlVHlwZSxcbiAgICAgIHZhbHVlLFxuICAgICAgb3ZlcnJpZGVzLFxuICAgICAgc2hvdyxcbiAgICAgIHNob3dMYWJlbCxcbiAgICAgIC8vIHNsaWNlXG4gICAgICB0aXRsZUNvbHVtbixcbiAgICAgIGRlc2NyaXB0aW9uQ29sdW1ucyxcbiAgICAgIHRpbWVDb2x1bW4sXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbixcbiAgICAgIC8vIGRpc3BsYXlcbiAgICAgIGNvbG9yOiBjb2xvciB8fCBBVVRPTUFUSUNfQ09MT1IsXG4gICAgICBvcGFjaXR5LFxuICAgICAgc3R5bGUsXG4gICAgICB3aWR0aCxcbiAgICAgIHNob3dNYXJrZXJzLFxuICAgICAgaGlkZUxpbmUsXG4gICAgICAvLyByZWZEYXRhXG4gICAgICBpc05ldzogIW5hbWUsXG4gICAgICBzbGljZTogbnVsbCxcbiAgICB9O1xuICAgIHRoaXMuc3VibWl0QW5ub3RhdGlvbiA9IHRoaXMuc3VibWl0QW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlQW5ub3RhdGlvbiA9IHRoaXMuZGVsZXRlQW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYXBwbHlBbm5vdGF0aW9uID0gdGhpcy5hcHBseUFubm90YXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmlzVmFsaWRGb3JtID0gdGhpcy5pc1ZhbGlkRm9ybS5iaW5kKHRoaXMpO1xuICAgIC8vIEhhbmRsZXJzXG4gICAgdGhpcy5oYW5kbGVBbm5vdGF0aW9uVHlwZSA9IHRoaXMuaGFuZGxlQW5ub3RhdGlvblR5cGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZUFubm90YXRpb25Tb3VyY2VUeXBlID1cbiAgICAgIHRoaXMuaGFuZGxlQW5ub3RhdGlvblNvdXJjZVR5cGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZVNlbGVjdFZhbHVlID0gdGhpcy5oYW5kbGVTZWxlY3RWYWx1ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVGV4dFZhbHVlID0gdGhpcy5oYW5kbGVUZXh0VmFsdWUuYmluZCh0aGlzKTtcbiAgICAvLyBGZXRjaCByZWxhdGVkIGZ1bmN0aW9uc1xuICAgIHRoaXMuZmV0Y2hPcHRpb25zID0gdGhpcy5mZXRjaE9wdGlvbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZldGNoQ2hhcnRzID0gdGhpcy5mZXRjaENoYXJ0cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmV0Y2hOYXRpdmVBbm5vdGF0aW9ucyA9IHRoaXMuZmV0Y2hOYXRpdmVBbm5vdGF0aW9ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmV0Y2hBcHBsaWVkQW5ub3RhdGlvbiA9IHRoaXMuZmV0Y2hBcHBsaWVkQW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmV0Y2hTbGljZURhdGEgPSB0aGlzLmZldGNoU2xpY2VEYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zaG91bGRGZXRjaFNsaWNlRGF0YSA9IHRoaXMuc2hvdWxkRmV0Y2hTbGljZURhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZldGNoQXBwbGllZENoYXJ0ID0gdGhpcy5mZXRjaEFwcGxpZWRDaGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmV0Y2hBcHBsaWVkTmF0aXZlQW5ub3RhdGlvbiA9XG4gICAgICB0aGlzLmZldGNoQXBwbGllZE5hdGl2ZUFubm90YXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLnNob3VsZEZldGNoQXBwbGllZEFubm90YXRpb24gPVxuICAgICAgdGhpcy5zaG91bGRGZXRjaEFwcGxpZWRBbm5vdGF0aW9uLmJpbmQodGhpcyk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAodGhpcy5zaG91bGRGZXRjaEFwcGxpZWRBbm5vdGF0aW9uKCkpIHtcbiAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAvKiBUaGUgdmFsdWUgcHJvcCBpcyB0aGUgaWQgb2YgdGhlIGNoYXJ0L25hdGl2ZS4gVGhpcyBmdW5jdGlvbiB3aWxsIHNldFxuICAgICAgdmFsdWUgaW4gc3RhdGUgdG8gYW4gb2JqZWN0IHdpdGggdGhlIGlkIGFzIHZhbHVlLnZhbHVlIHRvIGJlIHVzZWQgYnlcbiAgICAgIEFzeW5jU2VsZWN0ICovXG4gICAgICB0aGlzLmZldGNoQXBwbGllZEFubm90YXRpb24odmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgIGlmICh0aGlzLnNob3VsZEZldGNoU2xpY2VEYXRhKHByZXZTdGF0ZSkpIHtcbiAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXMuc3RhdGU7XG4gICAgICB0aGlzLmZldGNoU2xpY2VEYXRhKHZhbHVlLnZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBnZXRTdXBwb3J0ZWRTb3VyY2VUeXBlcyhhbm5vdGF0aW9uVHlwZSkge1xuICAgIC8vIEdldCB2aXMgdHlwZXMgdGhhdCBjYW4gYmUgc291cmNlLlxuICAgIGNvbnN0IHNvdXJjZXMgPSBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnkoKVxuICAgICAgLmVudHJpZXMoKVxuICAgICAgLmZpbHRlcigoeyB2YWx1ZTogY2hhcnRNZXRhZGF0YSB9KSA9PlxuICAgICAgICBjaGFydE1ldGFkYXRhLmNhbkJlQW5ub3RhdGlvblR5cGUoYW5ub3RhdGlvblR5cGUpLFxuICAgICAgKVxuICAgICAgLm1hcCgoeyBrZXksIHZhbHVlOiBjaGFydE1ldGFkYXRhIH0pID0+ICh7XG4gICAgICAgIHZhbHVlOiBrZXksXG4gICAgICAgIGxhYmVsOiBjaGFydE1ldGFkYXRhLm5hbWUsXG4gICAgICB9KSk7XG4gICAgLy8gUHJlcGVuZCBuYXRpdmUgc291cmNlIGlmIGFwcGxpY2FibGVcbiAgICBpZiAoQU5OT1RBVElPTl9UWVBFU19NRVRBREFUQVthbm5vdGF0aW9uVHlwZV0/LnN1cHBvcnROYXRpdmVTb3VyY2UpIHtcbiAgICAgIHNvdXJjZXMudW5zaGlmdChBTk5PVEFUSU9OX1NPVVJDRV9UWVBFU19NRVRBREFUQS5OQVRJVkUpO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlcztcbiAgfVxuXG4gIHNob3VsZEZldGNoQXBwbGllZEFubm90YXRpb24oKSB7XG4gICAgY29uc3QgeyB2YWx1ZSwgc291cmNlVHlwZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gdmFsdWUgJiYgcmVxdWlyZXNRdWVyeShzb3VyY2VUeXBlKTtcbiAgfVxuXG4gIHNob3VsZEZldGNoU2xpY2VEYXRhKHByZXZTdGF0ZSkge1xuICAgIGNvbnN0IHsgdmFsdWUsIHNvdXJjZVR5cGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgaXNDaGFydCA9XG4gICAgICBzb3VyY2VUeXBlICE9PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUgJiZcbiAgICAgIHJlcXVpcmVzUXVlcnkoc291cmNlVHlwZSk7XG4gICAgY29uc3QgdmFsdWVJc05ldyA9IHZhbHVlICYmIHByZXZTdGF0ZS52YWx1ZSAhPT0gdmFsdWU7XG4gICAgcmV0dXJuIHZhbHVlSXNOZXcgJiYgaXNDaGFydDtcbiAgfVxuXG4gIGlzVmFsaWRGb3JtdWxhQW5ub3RhdGlvbihleHByZXNzaW9uLCBhbm5vdGF0aW9uVHlwZSkge1xuICAgIGlmIChhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5GT1JNVUxBKSB7XG4gICAgICByZXR1cm4gaXNWYWxpZEV4cHJlc3Npb24oZXhwcmVzc2lvbik7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaXNWYWxpZEZvcm0oKSB7XG4gICAgY29uc3Qge1xuICAgICAgbmFtZSxcbiAgICAgIGFubm90YXRpb25UeXBlLFxuICAgICAgc291cmNlVHlwZSxcbiAgICAgIHZhbHVlLFxuICAgICAgdGltZUNvbHVtbixcbiAgICAgIGludGVydmFsRW5kQ29sdW1uLFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGVycm9ycyA9IFtcbiAgICAgIHZhbGlkYXRlTm9uRW1wdHkobmFtZSksXG4gICAgICB2YWxpZGF0ZU5vbkVtcHR5KGFubm90YXRpb25UeXBlKSxcbiAgICAgIHZhbGlkYXRlTm9uRW1wdHkodmFsdWUpLFxuICAgIF07XG4gICAgaWYgKHNvdXJjZVR5cGUgIT09IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTLk5BVElWRSkge1xuICAgICAgaWYgKGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLkVWRU5UKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKHZhbGlkYXRlTm9uRW1wdHkodGltZUNvbHVtbikpO1xuICAgICAgfVxuICAgICAgaWYgKGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLklOVEVSVkFMKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKHZhbGlkYXRlTm9uRW1wdHkodGltZUNvbHVtbikpO1xuICAgICAgICBlcnJvcnMucHVzaCh2YWxpZGF0ZU5vbkVtcHR5KGludGVydmFsRW5kQ29sdW1uKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGVycm9ycy5wdXNoKCF0aGlzLmlzVmFsaWRGb3JtdWxhQW5ub3RhdGlvbih2YWx1ZSwgYW5ub3RhdGlvblR5cGUpKTtcbiAgICByZXR1cm4gIWVycm9ycy5maWx0ZXIoeCA9PiB4KS5sZW5ndGg7XG4gIH1cblxuICBoYW5kbGVBbm5vdGF0aW9uVHlwZShhbm5vdGF0aW9uVHlwZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYW5ub3RhdGlvblR5cGUsXG4gICAgICBzb3VyY2VUeXBlOiBudWxsLFxuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBzbGljZTogbnVsbCxcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZUFubm90YXRpb25Tb3VyY2VUeXBlKHNvdXJjZVR5cGUpIHtcbiAgICBjb25zdCB7IHNvdXJjZVR5cGU6IHByZXZTb3VyY2VUeXBlIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgaWYgKHByZXZTb3VyY2VUeXBlICE9PSBzb3VyY2VUeXBlKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc291cmNlVHlwZSxcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNsaWNlOiBudWxsLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlU2VsZWN0VmFsdWUoc2VsZWN0ZWRWYWx1ZU9iamVjdCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdmFsdWU6IHNlbGVjdGVkVmFsdWVPYmplY3QsXG4gICAgICBkZXNjcmlwdGlvbkNvbHVtbnM6IFtdLFxuICAgICAgaW50ZXJ2YWxFbmRDb2x1bW46IG51bGwsXG4gICAgICB0aW1lQ29sdW1uOiBudWxsLFxuICAgICAgdGl0bGVDb2x1bW46IG51bGwsXG4gICAgICBvdmVycmlkZXM6IHsgdGltZV9yYW5nZTogbnVsbCB9LFxuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlVGV4dFZhbHVlKGlucHV0VmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlOiBpbnB1dFZhbHVlLFxuICAgIH0pO1xuICB9XG5cbiAgZmV0Y2hOYXRpdmVBbm5vdGF0aW9ucyA9IGFzeW5jIChzZWFyY2gsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSByaXNvbi5lbmNvZGUoe1xuICAgICAgZmlsdGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgY29sOiAnbmFtZScsXG4gICAgICAgICAgb3ByOiAnY3QnLFxuICAgICAgICAgIHZhbHVlOiBzZWFyY2gsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgY29sdW1uczogWydpZCcsICduYW1lJ10sXG4gICAgICBwYWdlLFxuICAgICAgcGFnZV9zaXplOiBwYWdlU2l6ZSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHsganNvbiB9ID0gYXdhaXQgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9hbm5vdGF0aW9uX2xheWVyLz9xPSR7cXVlcnlQYXJhbXN9YCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgcmVzdWx0LCBjb3VudCB9ID0ganNvbjtcblxuICAgIGNvbnN0IGxheWVyc0FycmF5ID0gcmVzdWx0Lm1hcChsYXllciA9PiAoe1xuICAgICAgdmFsdWU6IGxheWVyLmlkLFxuICAgICAgbGFiZWw6IGxheWVyLm5hbWUsXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IGxheWVyc0FycmF5LFxuICAgICAgdG90YWxDb3VudDogY291bnQsXG4gICAgfTtcbiAgfTtcblxuICBmZXRjaENoYXJ0cyA9IGFzeW5jIChzZWFyY2gsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgY29uc3QgeyBhbm5vdGF0aW9uVHlwZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcmlzb24uZW5jb2RlKHtcbiAgICAgIGZpbHRlcnM6IFtcbiAgICAgICAgeyBjb2w6ICdzbGljZV9uYW1lJywgb3ByOiAnY2hhcnRfYWxsX3RleHQnLCB2YWx1ZTogc2VhcmNoIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBjb2w6ICdpZCcsXG4gICAgICAgICAgb3ByOiAnY2hhcnRfb3duZWRfY3JlYXRlZF9mYXZvcmVkX2J5X21lJyxcbiAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBjb2x1bW5zOiBbJ2lkJywgJ3NsaWNlX25hbWUnLCAndml6X3R5cGUnXSxcbiAgICAgIG9yZGVyX2NvbHVtbjogJ3NsaWNlX25hbWUnLFxuICAgICAgb3JkZXJfZGlyZWN0aW9uOiAnYXNjJyxcbiAgICAgIHBhZ2UsXG4gICAgICBwYWdlX3NpemU6IHBhZ2VTaXplLFxuICAgIH0pO1xuICAgIGNvbnN0IHsganNvbiB9ID0gYXdhaXQgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC8/cT0ke3F1ZXJ5UGFyYW1zfWAsXG4gICAgfSk7XG5cbiAgICBjb25zdCB7IHJlc3VsdCwgY291bnQgfSA9IGpzb247XG4gICAgY29uc3QgcmVnaXN0cnkgPSBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnkoKTtcblxuICAgIGNvbnN0IGNoYXJ0c0FycmF5ID0gcmVzdWx0XG4gICAgICAuZmlsdGVyKGNoYXJ0ID0+IHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSByZWdpc3RyeS5nZXQoY2hhcnQudml6X3R5cGUpO1xuICAgICAgICByZXR1cm4gbWV0YWRhdGEgJiYgbWV0YWRhdGEuY2FuQmVBbm5vdGF0aW9uVHlwZShhbm5vdGF0aW9uVHlwZSk7XG4gICAgICB9KVxuICAgICAgLm1hcChjaGFydCA9PiAoe1xuICAgICAgICB2YWx1ZTogY2hhcnQuaWQsXG4gICAgICAgIGxhYmVsOiBjaGFydC5zbGljZV9uYW1lLFxuICAgICAgICB2aXpfdHlwZTogY2hhcnQudml6X3R5cGUsXG4gICAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogY2hhcnRzQXJyYXksXG4gICAgICB0b3RhbENvdW50OiBjb3VudCxcbiAgICB9O1xuICB9O1xuXG4gIGZldGNoT3B0aW9ucyA9IChzZWFyY2gsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgY29uc3QgeyBzb3VyY2VUeXBlIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgaWYgKHNvdXJjZVR5cGUgPT09IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTLk5BVElWRSkge1xuICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hOYXRpdmVBbm5vdGF0aW9ucyhzZWFyY2gsIHBhZ2UsIHBhZ2VTaXplKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hDaGFydHMoc2VhcmNoLCBwYWdlLCBwYWdlU2l6ZSk7XG4gIH07XG5cbiAgZmV0Y2hTbGljZURhdGEgPSBpZCA9PiB7XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSByaXNvbi5lbmNvZGUoe1xuICAgICAgY29sdW1uczogWydxdWVyeV9jb250ZXh0J10sXG4gICAgfSk7XG4gICAgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC8ke2lkfT9xPSR7cXVlcnlQYXJhbXN9YCxcbiAgICB9KS50aGVuKCh7IGpzb24gfSkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IGpzb247XG4gICAgICBjb25zdCBxdWVyeUNvbnRleHQgPSByZXN1bHQucXVlcnlfY29udGV4dDtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gSlNPTi5wYXJzZShxdWVyeUNvbnRleHQpLmZvcm1fZGF0YTtcbiAgICAgIGNvbnN0IGRhdGFPYmplY3QgPSB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi5mb3JtRGF0YSxcbiAgICAgICAgICBncm91cGJ5OiBmb3JtRGF0YS5ncm91cGJ5Py5tYXAoY29sdW1uID0+IGdldENvbHVtbkxhYmVsKGNvbHVtbikpLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzbGljZTogZGF0YU9iamVjdCxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGZldGNoQXBwbGllZENoYXJ0KGlkKSB7XG4gICAgY29uc3QgeyBhbm5vdGF0aW9uVHlwZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCByZWdpc3RyeSA9IGdldENoYXJ0TWV0YWRhdGFSZWdpc3RyeSgpO1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcmlzb24uZW5jb2RlKHtcbiAgICAgIGNvbHVtbnM6IFsnc2xpY2VfbmFtZScsICdxdWVyeV9jb250ZXh0JywgJ3Zpel90eXBlJ10sXG4gICAgfSk7XG4gICAgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC8ke2lkfT9xPSR7cXVlcnlQYXJhbXN9YCxcbiAgICB9KS50aGVuKCh7IGpzb24gfSkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IGpzb247XG4gICAgICBjb25zdCBzbGljZU5hbWUgPSByZXN1bHQuc2xpY2VfbmFtZTtcbiAgICAgIGNvbnN0IHF1ZXJ5Q29udGV4dCA9IHJlc3VsdC5xdWVyeV9jb250ZXh0O1xuICAgICAgY29uc3Qgdml6VHlwZSA9IHJlc3VsdC52aXpfdHlwZTtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gSlNPTi5wYXJzZShxdWVyeUNvbnRleHQpLmZvcm1fZGF0YTtcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gcmVnaXN0cnkuZ2V0KHZpelR5cGUpO1xuICAgICAgY29uc3QgY2FuQmVBbm5vdGF0aW9uVHlwZSA9XG4gICAgICAgIG1ldGFkYXRhICYmIG1ldGFkYXRhLmNhbkJlQW5ub3RhdGlvblR5cGUoYW5ub3RhdGlvblR5cGUpO1xuICAgICAgaWYgKGNhbkJlQW5ub3RhdGlvblR5cGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBpZCxcbiAgICAgICAgICAgIGxhYmVsOiBzbGljZU5hbWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzbGljZToge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAuLi5mb3JtRGF0YSxcbiAgICAgICAgICAgICAgZ3JvdXBieTogZm9ybURhdGEuZ3JvdXBieT8ubWFwKGNvbHVtbiA9PiBnZXRDb2x1bW5MYWJlbChjb2x1bW4pKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmZXRjaEFwcGxpZWROYXRpdmVBbm5vdGF0aW9uKGlkKSB7XG4gICAgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9hbm5vdGF0aW9uX2xheWVyLyR7aWR9YCxcbiAgICB9KS50aGVuKCh7IGpzb24gfSkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IGpzb247XG4gICAgICBjb25zdCBsYXllciA9IHJlc3VsdDtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIHZhbHVlOiBsYXllci5pZCxcbiAgICAgICAgICBsYWJlbDogbGF5ZXIubmFtZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZmV0Y2hBcHBsaWVkQW5ub3RhdGlvbihpZCkge1xuICAgIGNvbnN0IHsgc291cmNlVHlwZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGlmIChzb3VyY2VUeXBlID09PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUpIHtcbiAgICAgIHJldHVybiB0aGlzLmZldGNoQXBwbGllZE5hdGl2ZUFubm90YXRpb24oaWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mZXRjaEFwcGxpZWRDaGFydChpZCk7XG4gIH1cblxuICBkZWxldGVBbm5vdGF0aW9uKCkge1xuICAgIHRoaXMucHJvcHMucmVtb3ZlQW5ub3RhdGlvbkxheWVyKCk7XG4gICAgdGhpcy5wcm9wcy5jbG9zZSgpO1xuICB9XG5cbiAgYXBwbHlBbm5vdGF0aW9uKCkge1xuICAgIGNvbnN0IHsgdmFsdWUsIHNvdXJjZVR5cGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKHRoaXMuaXNWYWxpZEZvcm0oKSkge1xuICAgICAgY29uc3QgYW5ub3RhdGlvbkZpZWxkcyA9IFtcbiAgICAgICAgJ25hbWUnLFxuICAgICAgICAnYW5ub3RhdGlvblR5cGUnLFxuICAgICAgICAnc291cmNlVHlwZScsXG4gICAgICAgICdjb2xvcicsXG4gICAgICAgICdvcGFjaXR5JyxcbiAgICAgICAgJ3N0eWxlJyxcbiAgICAgICAgJ3dpZHRoJyxcbiAgICAgICAgJ3Nob3dNYXJrZXJzJyxcbiAgICAgICAgJ2hpZGVMaW5lJyxcbiAgICAgICAgJ292ZXJyaWRlcycsXG4gICAgICAgICdzaG93JyxcbiAgICAgICAgJ3Nob3dMYWJlbCcsXG4gICAgICAgICd0aXRsZUNvbHVtbicsXG4gICAgICAgICdkZXNjcmlwdGlvbkNvbHVtbnMnLFxuICAgICAgICAndGltZUNvbHVtbicsXG4gICAgICAgICdpbnRlcnZhbEVuZENvbHVtbicsXG4gICAgICBdO1xuICAgICAgY29uc3QgbmV3QW5ub3RhdGlvbiA9IHt9O1xuICAgICAgYW5ub3RhdGlvbkZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVbZmllbGRdICE9PSBudWxsKSB7XG4gICAgICAgICAgbmV3QW5ub3RhdGlvbltmaWVsZF0gPSB0aGlzLnN0YXRlW2ZpZWxkXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFByZXBhcmUgbmV3QW5ub3RhdGlvbi52YWx1ZSBmb3IgdXNlIGluIHJ1bkFubm90YXRpb25RdWVyeSgpXG4gICAgICBjb25zdCBhcHBsaWNhYmxlVmFsdWUgPSByZXF1aXJlc1F1ZXJ5KHNvdXJjZVR5cGUpID8gdmFsdWUudmFsdWUgOiB2YWx1ZTtcbiAgICAgIG5ld0Fubm90YXRpb24udmFsdWUgPSBhcHBsaWNhYmxlVmFsdWU7XG5cbiAgICAgIGlmIChuZXdBbm5vdGF0aW9uLmNvbG9yID09PSBBVVRPTUFUSUNfQ09MT1IpIHtcbiAgICAgICAgbmV3QW5ub3RhdGlvbi5jb2xvciA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJvcHMuYWRkQW5ub3RhdGlvbkxheWVyKG5ld0Fubm90YXRpb24pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTmV3OiBmYWxzZSB9KTtcbiAgICB9XG4gIH1cblxuICBzdWJtaXRBbm5vdGF0aW9uKCkge1xuICAgIHRoaXMuYXBwbHlBbm5vdGF0aW9uKCk7XG4gICAgdGhpcy5wcm9wcy5jbG9zZSgpO1xuICB9XG5cbiAgcmVuZGVyQ2hhcnRIZWFkZXIobGFiZWwsIGRlc2NyaXB0aW9uLCB2YWx1ZSkge1xuICAgIHJldHVybiAoXG4gICAgICA8Q29udHJvbEhlYWRlclxuICAgICAgICBob3ZlcmVkXG4gICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXshdmFsdWUgPyBbJ01hbmRhdG9yeSddIDogW119XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJWYWx1ZUNvbmZpZ3VyYXRpb24oKSB7XG4gICAgY29uc3QgeyBhbm5vdGF0aW9uVHlwZSwgc291cmNlVHlwZSwgdmFsdWUgfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IGxhYmVsID0gJyc7XG4gICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XG4gICAgaWYgKHJlcXVpcmVzUXVlcnkoc291cmNlVHlwZSkpIHtcbiAgICAgIGlmIChzb3VyY2VUeXBlID09PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUpIHtcbiAgICAgICAgbGFiZWwgPSB0KCdBbm5vdGF0aW9uIGxheWVyJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gdCgnU2VsZWN0IHRoZSBBbm5vdGF0aW9uIExheWVyIHlvdSB3b3VsZCBsaWtlIHRvIHVzZS4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhYmVsID0gdCgnQ2hhcnQnKTtcbiAgICAgICAgZGVzY3JpcHRpb24gPSB0KFxuICAgICAgICAgIGBVc2UgYW5vdGhlciBleGlzdGluZyBjaGFydCBhcyBhIHNvdXJjZSBmb3IgYW5ub3RhdGlvbnMgYW5kIG92ZXJsYXlzLlxuICAgICAgICAgIFlvdXIgY2hhcnQgbXVzdCBiZSBvbmUgb2YgdGhlc2UgdmlzdWFsaXphdGlvbiB0eXBlczogWyVzXWAsXG4gICAgICAgICAgdGhpcy5nZXRTdXBwb3J0ZWRTb3VyY2VUeXBlcyhhbm5vdGF0aW9uVHlwZSlcbiAgICAgICAgICAgIC5tYXAoeCA9PiB4LmxhYmVsKVxuICAgICAgICAgICAgLmpvaW4oJywgJyksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5GT1JNVUxBKSB7XG4gICAgICBsYWJlbCA9IHQoJ0Zvcm11bGEnKTtcbiAgICAgIGRlc2NyaXB0aW9uID0gdChgRXhwZWN0cyBhIGZvcm11bGEgd2l0aCBkZXBlbmRpbmcgdGltZSBwYXJhbWV0ZXIgJ3gnXG4gICAgICAgIGluIG1pbGxpc2Vjb25kcyBzaW5jZSBlcG9jaC4gbWF0aGpzIGlzIHVzZWQgdG8gZXZhbHVhdGUgdGhlIGZvcm11bGFzLlxuICAgICAgICBFeGFtcGxlOiAnMngrNSdgKTtcbiAgICB9XG4gICAgaWYgKHJlcXVpcmVzUXVlcnkoc291cmNlVHlwZSkpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxBc3luY1NlbGVjdFxuICAgICAgICAgIC8qIGtleSB0byBmb3JjZSByZS1yZW5kZXIgb24gc291cmNlVHlwZSBjaGFuZ2UgKi9cbiAgICAgICAgICBrZXk9e3NvdXJjZVR5cGV9XG4gICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIHZhbHVlJyl9XG4gICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdmFsdWVcIlxuICAgICAgICAgIGhlYWRlcj17dGhpcy5yZW5kZXJDaGFydEhlYWRlcihsYWJlbCwgZGVzY3JpcHRpb24sIHZhbHVlKX1cbiAgICAgICAgICBvcHRpb25zPXt0aGlzLmZldGNoT3B0aW9uc31cbiAgICAgICAgICB2YWx1ZT17dmFsdWUgfHwgbnVsbH1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVTZWxlY3RWYWx1ZX1cbiAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9ezxOb3RGb3VuZENvbnRlbnQgLz59XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdmFsdWVcIlxuICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICBzaG93SGVhZGVyXG4gICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxuICAgICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlwiXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVRleHRWYWx1ZX1cbiAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXtcbiAgICAgICAgICAgICF0aGlzLmlzVmFsaWRGb3JtdWxhQW5ub3RhdGlvbih2YWx1ZSwgYW5ub3RhdGlvblR5cGUpXG4gICAgICAgICAgICAgID8gW3QoJ0JhZCBmb3JtdWxhLicpXVxuICAgICAgICAgICAgICA6IFtdXG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgcmVuZGVyU2xpY2VDb25maWd1cmF0aW9uKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGFubm90YXRpb25UeXBlLFxuICAgICAgc291cmNlVHlwZSxcbiAgICAgIHZhbHVlLFxuICAgICAgc2xpY2UsXG4gICAgICBvdmVycmlkZXMsXG4gICAgICB0aXRsZUNvbHVtbixcbiAgICAgIHRpbWVDb2x1bW4sXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbixcbiAgICAgIGRlc2NyaXB0aW9uQ29sdW1ucyxcbiAgICB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGlmICghc2xpY2UgfHwgIXZhbHVlKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgaWYgKHNvdXJjZVR5cGUgIT09IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTLk5BVElWRSAmJiBzbGljZSkge1xuICAgICAgY29uc3QgY29sdW1ucyA9IChzbGljZS5kYXRhLmdyb3VwYnkgfHwgW10pXG4gICAgICAgIC5jb25jYXQoc2xpY2UuZGF0YS5hbGxfY29sdW1ucyB8fCBbXSlcbiAgICAgICAgLm1hcCh4ID0+ICh7IHZhbHVlOiB4LCBsYWJlbDogeCB9KSk7XG4gICAgICBjb25zdCB0aW1lQ29sdW1uT3B0aW9ucyA9IHNsaWNlLmRhdGEuaW5jbHVkZV90aW1lXG4gICAgICAgID8gW3sgdmFsdWU6ICdfX3RpbWVzdGFtcCcsIGxhYmVsOiAnX190aW1lc3RhbXAnIH1dLmNvbmNhdChjb2x1bW5zKVxuICAgICAgICA6IGNvbHVtbnM7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAnMnJlbScgfX0+XG4gICAgICAgICAgPFBvcG92ZXJTZWN0aW9uXG4gICAgICAgICAgICBpc1NlbGVjdGVkXG4gICAgICAgICAgICB0aXRsZT17dCgnQW5ub3RhdGlvbiBTbGljZSBDb25maWd1cmF0aW9uJyl9XG4gICAgICAgICAgICBpbmZvPXt0KGBUaGlzIHNlY3Rpb24gYWxsb3dzIHlvdSB0byBjb25maWd1cmUgaG93IHRvIHVzZSB0aGUgc2xpY2VcbiAgICAgICAgICAgICAgdG8gZ2VuZXJhdGUgYW5ub3RhdGlvbnMuYCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgeyhhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5FVkVOVCB8fFxuICAgICAgICAgICAgICBhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5JTlRFUlZBTCkgJiYgKFxuICAgICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxuICAgICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciB0aW1lIGNvbHVtbicpfVxuICAgICAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci10aW1lLWNvbHVtblwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e1xuICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuSU5URVJWQUxcbiAgICAgICAgICAgICAgICAgICAgPyB0KCdJbnRlcnZhbCBzdGFydCBjb2x1bW4nKVxuICAgICAgICAgICAgICAgICAgICA6IHQoJ0V2ZW50IHRpbWUgY29sdW1uJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICAnVGhpcyBjb2x1bW4gbXVzdCBjb250YWluIGRhdGUvdGltZSBpbmZvcm1hdGlvbi4nLFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9ycz17IXRpbWVDb2x1bW4gPyBbJ01hbmRhdG9yeSddIDogW119XG4gICAgICAgICAgICAgICAgY2xlYXJhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICBvcHRpb25zPXt0aW1lQ29sdW1uT3B0aW9uc31cbiAgICAgICAgICAgICAgICB2YWx1ZT17dGltZUNvbHVtbn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgdGltZUNvbHVtbjogdiB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7YW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuSU5URVJWQUwgJiYgKFxuICAgICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxuICAgICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciBpbnRlcnZhbCBlbmQnKX1cbiAgICAgICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItaW50ZXJ2YWxFbmRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdJbnRlcnZhbCBFbmQgY29sdW1uJyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICAnVGhpcyBjb2x1bW4gbXVzdCBjb250YWluIGRhdGUvdGltZSBpbmZvcm1hdGlvbi4nLFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9ycz17IWludGVydmFsRW5kQ29sdW1uID8gWydNYW5kYXRvcnknXSA6IFtdfVxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e2NvbHVtbnN9XG4gICAgICAgICAgICAgICAgdmFsdWU9e2ludGVydmFsRW5kQ29sdW1ufVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZSA9PiB0aGlzLnNldFN0YXRlKHsgaW50ZXJ2YWxFbmRDb2x1bW46IHZhbHVlIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXG4gICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciB0aXRsZSBjb2x1bW4nKX1cbiAgICAgICAgICAgICAgaG92ZXJlZFxuICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci10aXRsZVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdUaXRsZSBDb2x1bW4nKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1BpY2sgYSB0aXRsZSBmb3IgeW91IGFubm90YXRpb24uJyl9XG4gICAgICAgICAgICAgIG9wdGlvbnM9e1t7IHZhbHVlOiAnJywgbGFiZWw6IHQoJ05vbmUnKSB9XS5jb25jYXQoY29sdW1ucyl9XG4gICAgICAgICAgICAgIHZhbHVlPXt0aXRsZUNvbHVtbn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3ZhbHVlID0+IHRoaXMuc2V0U3RhdGUoeyB0aXRsZUNvbHVtbjogdmFsdWUgfSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge2Fubm90YXRpb25UeXBlICE9PSBBTk5PVEFUSU9OX1RZUEVTLlRJTUVfU0VSSUVTICYmIChcbiAgICAgICAgICAgICAgPFNlbGVjdENvbnRyb2xcbiAgICAgICAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0Fubm90YXRpb24gbGF5ZXIgZGVzY3JpcHRpb24gY29sdW1ucycpfVxuICAgICAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci10aXRsZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uIENvbHVtbnMnKX1cbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgIFwiUGljayBvbmUgb3IgbW9yZSBjb2x1bW5zIHRoYXQgc2hvdWxkIGJlIHNob3duIGluIHRoZSBhbm5vdGF0aW9uLiBJZiB5b3UgZG9uJ3Qgc2VsZWN0IGEgY29sdW1uIGFsbCBvZiB0aGVtIHdpbGwgYmUgc2hvd24uXCIsXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICBtdWx0aVxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e2NvbHVtbnN9XG4gICAgICAgICAgICAgICAgdmFsdWU9e2Rlc2NyaXB0aW9uQ29sdW1uc31cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4gdGhpcy5zZXRTdGF0ZSh7IGRlc2NyaXB0aW9uQ29sdW1uczogdmFsdWUgfSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6ICcxcmVtJyB9fT5cbiAgICAgICAgICAgICAgPENoZWNrYm94Q29udHJvbFxuICAgICAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1vdmVycmlkZS10aW1lX3JhbmdlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnT3ZlcnJpZGUgdGltZSByYW5nZScpfVxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KGBUaGlzIGNvbnRyb2xzIHdoZXRoZXIgdGhlIFwidGltZV9yYW5nZVwiIGZpZWxkIGZyb20gdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAgIHZpZXcgc2hvdWxkIGJlIHBhc3NlZCBkb3duIHRvIHRoZSBjaGFydCBjb250YWluaW5nIHRoZSBhbm5vdGF0aW9uIGRhdGEuYCl9XG4gICAgICAgICAgICAgICAgdmFsdWU9eyd0aW1lX3JhbmdlJyBpbiBvdmVycmlkZXN9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4ge1xuICAgICAgICAgICAgICAgICAgZGVsZXRlIG92ZXJyaWRlcy50aW1lX3JhbmdlO1xuICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVzOiB7IC4uLm92ZXJyaWRlcywgdGltZV9yYW5nZTogbnVsbCB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvdmVycmlkZXM6IHsgLi4ub3ZlcnJpZGVzIH0gfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPENoZWNrYm94Q29udHJvbFxuICAgICAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1vdmVycmlkZS10aW1lZ3JhaW5cIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdPdmVycmlkZSB0aW1lIGdyYWluJyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoYFRoaXMgY29udHJvbHMgd2hldGhlciB0aGUgdGltZSBncmFpbiBmaWVsZCBmcm9tIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgICB2aWV3IHNob3VsZCBiZSBwYXNzZWQgZG93biB0byB0aGUgY2hhcnQgY29udGFpbmluZyB0aGUgYW5ub3RhdGlvbiBkYXRhLmApfVxuICAgICAgICAgICAgICAgIHZhbHVlPXsndGltZV9ncmFpbl9zcWxhJyBpbiBvdmVycmlkZXN9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4ge1xuICAgICAgICAgICAgICAgICAgZGVsZXRlIG92ZXJyaWRlcy50aW1lX2dyYWluX3NxbGE7XG4gICAgICAgICAgICAgICAgICBkZWxldGUgb3ZlcnJpZGVzLmdyYW51bGFyaXR5O1xuICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5vdmVycmlkZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lX2dyYWluX3NxbGE6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBncmFudWxhcml0eTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvdmVycmlkZXM6IHsgLi4ub3ZlcnJpZGVzIH0gfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgaG92ZXJlZFxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXRpbWVzaGlmdFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1RpbWUgU2hpZnQnKX1cbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChgVGltZSBkZWx0YSBpbiBuYXR1cmFsIGxhbmd1YWdlXG4gICAgICAgICAgICAgICAgICAoZXhhbXBsZTogIDI0IGhvdXJzLCA3IGRheXMsIDU2IHdlZWtzLCAzNjUgZGF5cylgKX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e292ZXJyaWRlcy50aW1lX3NoaWZ0fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3ZlcnJpZGVzOiB7IC4uLm92ZXJyaWRlcywgdGltZV9zaGlmdDogdiB9IH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICByZW5kZXJEaXNwbGF5Q29uZmlndXJhdGlvbigpIHtcbiAgICBjb25zdCB7XG4gICAgICBjb2xvcixcbiAgICAgIG9wYWNpdHksXG4gICAgICBzdHlsZSxcbiAgICAgIHdpZHRoLFxuICAgICAgc2hvd01hcmtlcnMsXG4gICAgICBoaWRlTGluZSxcbiAgICAgIGFubm90YXRpb25UeXBlLFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGNvbG9yU2NoZW1lID0gZ2V0Q2F0ZWdvcmljYWxTY2hlbWVSZWdpc3RyeSgpXG4gICAgICAuZ2V0KHRoaXMucHJvcHMuY29sb3JTY2hlbWUpXG4gICAgICAuY29sb3JzLmNvbmNhdCgpO1xuICAgIGlmIChcbiAgICAgIGNvbG9yICYmXG4gICAgICBjb2xvciAhPT0gQVVUT01BVElDX0NPTE9SICYmXG4gICAgICAhY29sb3JTY2hlbWUuZmluZCh4ID0+IHgudG9Mb3dlckNhc2UoKSA9PT0gY29sb3IudG9Mb3dlckNhc2UoKSlcbiAgICApIHtcbiAgICAgIGNvbG9yU2NoZW1lLnB1c2goY29sb3IpO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPFBvcG92ZXJTZWN0aW9uXG4gICAgICAgIGlzU2VsZWN0ZWRcbiAgICAgICAgdGl0bGU9e3QoJ0Rpc3BsYXkgY29uZmlndXJhdGlvbicpfVxuICAgICAgICBpbmZvPXt0KCdDb25maWd1cmUgeW91ciBob3cgeW91IG92ZXJsYXkgaXMgZGlzcGxheWVkIGhlcmUuJyl9XG4gICAgICA+XG4gICAgICAgIDxTZWxlY3RDb250cm9sXG4gICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIHN0cm9rZScpfVxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXN0cm9rZVwiXG4gICAgICAgICAgbGFiZWw9e3QoJ1N0eWxlJyl9XG4gICAgICAgICAgLy8gc2VlICcuLi8uLi8uLi92aXN1YWxpemF0aW9ucy9udmQzX3Zpcy5jc3MnXG4gICAgICAgICAgb3B0aW9ucz17W1xuICAgICAgICAgICAgeyB2YWx1ZTogJ3NvbGlkJywgbGFiZWw6IHQoJ1NvbGlkJykgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdkYXNoZWQnLCBsYWJlbDogdCgnRGFzaGVkJykgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdsb25nRGFzaGVkJywgbGFiZWw6IHQoJ0xvbmcgZGFzaGVkJykgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdkb3R0ZWQnLCBsYWJlbDogdCgnRG90dGVkJykgfSxcbiAgICAgICAgICBdfVxuICAgICAgICAgIHZhbHVlPXtzdHlsZX1cbiAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxuICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyBzdHlsZTogdiB9KX1cbiAgICAgICAgLz5cbiAgICAgICAgPFNlbGVjdENvbnRyb2xcbiAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0Fubm90YXRpb24gbGF5ZXIgb3BhY2l0eScpfVxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLW9wYWNpdHlcIlxuICAgICAgICAgIGxhYmVsPXt0KCdPcGFjaXR5Jyl9XG4gICAgICAgICAgLy8gc2VlICcuLi8uLi8uLi92aXN1YWxpemF0aW9ucy9udmQzX3Zpcy5jc3MnXG4gICAgICAgICAgb3B0aW9ucz17W1xuICAgICAgICAgICAgeyB2YWx1ZTogJycsIGxhYmVsOiB0KCdTb2xpZCcpIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiAnb3BhY2l0eUxvdycsIGxhYmVsOiAnMC4yJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ29wYWNpdHlNZWRpdW0nLCBsYWJlbDogJzAuNScgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdvcGFjaXR5SGlnaCcsIGxhYmVsOiAnMC44JyB9LFxuICAgICAgICAgIF19XG4gICAgICAgICAgdmFsdWU9e29wYWNpdHl9XG4gICAgICAgICAgb25DaGFuZ2U9e3ZhbHVlID0+IHRoaXMuc2V0U3RhdGUoeyBvcGFjaXR5OiB2YWx1ZSB9KX1cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8Q29udHJvbEhlYWRlciBsYWJlbD17dCgnQ29sb3InKX0gLz5cbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgfX0+XG4gICAgICAgICAgICA8Q29tcGFjdFBpY2tlclxuICAgICAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgICAgIGNvbG9ycz17Y29sb3JTY2hlbWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlQ29tcGxldGU9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IGNvbG9yOiB2LmhleCB9KX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblRvcDogJzAuNXJlbScsIG1hcmdpbkJvdHRvbTogJzAuNXJlbScgfX1cbiAgICAgICAgICAgICAgYnV0dG9uU3R5bGU9e2NvbG9yID09PSBBVVRPTUFUSUNfQ09MT1IgPyAnc3VjY2VzcycgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICAgIGJ1dHRvblNpemU9XCJ4c21hbGxcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgY29sb3I6IEFVVE9NQVRJQ19DT0xPUiB9KX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3QoJ0F1dG9tYXRpYyBDb2xvcicpfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1zdHJva2Utd2lkdGhcIlxuICAgICAgICAgIGxhYmVsPXt0KCdMaW5lIHdpZHRoJyl9XG4gICAgICAgICAgaXNJbnRcbiAgICAgICAgICB2YWx1ZT17d2lkdGh9XG4gICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHdpZHRoOiB2IH0pfVxuICAgICAgICAvPlxuICAgICAgICB7YW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuVElNRV9TRVJJRVMgJiYgKFxuICAgICAgICAgIDxDaGVja2JveENvbnRyb2xcbiAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXNob3ctbWFya2Vyc1wiXG4gICAgICAgICAgICBsYWJlbD17dCgnU2hvdyBNYXJrZXJzJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnU2hvd3Mgb3IgaGlkZXMgbWFya2VycyBmb3IgdGhlIHRpbWUgc2VyaWVzJyl9XG4gICAgICAgICAgICB2YWx1ZT17c2hvd01hcmtlcnN9XG4gICAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgc2hvd01hcmtlcnM6IHYgfSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge2Fubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLlRJTUVfU0VSSUVTICYmIChcbiAgICAgICAgICA8Q2hlY2tib3hDb250cm9sXG4gICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1oaWRlLWxpbmVcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ0hpZGUgTGluZScpfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0hpZGVzIHRoZSBMaW5lIGZvciB0aGUgdGltZSBzZXJpZXMnKX1cbiAgICAgICAgICAgIHZhbHVlPXtoaWRlTGluZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyBoaWRlTGluZTogdiB9KX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgaXNOZXcsIG5hbWUsIGFubm90YXRpb25UeXBlLCBzb3VyY2VUeXBlLCBzaG93LCBzaG93TGFiZWwgfSA9XG4gICAgICB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGlzVmFsaWQgPSB0aGlzLmlzVmFsaWRGb3JtKCk7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnkoKS5nZXQodGhpcy5wcm9wcy52aXpUeXBlKTtcbiAgICBjb25zdCBzdXBwb3J0ZWRBbm5vdGF0aW9uVHlwZXMgPSBtZXRhZGF0YVxuICAgICAgPyBtZXRhZGF0YS5zdXBwb3J0ZWRBbm5vdGF0aW9uVHlwZXMubWFwKFxuICAgICAgICAgIHR5cGUgPT4gQU5OT1RBVElPTl9UWVBFU19NRVRBREFUQVt0eXBlXSxcbiAgICAgICAgKVxuICAgICAgOiBbXTtcbiAgICBjb25zdCBzdXBwb3J0ZWRTb3VyY2VUeXBlcyA9IHRoaXMuZ2V0U3VwcG9ydGVkU291cmNlVHlwZXMoYW5ub3RhdGlvblR5cGUpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIHt0aGlzLnByb3BzLmVycm9yICYmIChcbiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBjb2xvcjogdGhpcy5wcm9wcy50aGVtZS5jb2xvcnMuZXJyb3IuYmFzZSB9fT5cbiAgICAgICAgICAgIEVSUk9SOiB7dGhpcy5wcm9wcy5lcnJvcn1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAncm93JyB9fT5cbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAnMnJlbScgfX0+XG4gICAgICAgICAgICA8UG9wb3ZlclNlY3Rpb25cbiAgICAgICAgICAgICAgaXNTZWxlY3RlZFxuICAgICAgICAgICAgICB0aXRsZT17dCgnTGF5ZXIgY29uZmlndXJhdGlvbicpfVxuICAgICAgICAgICAgICBpbmZvPXt0KCdDb25maWd1cmUgdGhlIGJhc2ljcyBvZiB5b3VyIEFubm90YXRpb24gTGF5ZXIuJyl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLW5hbWVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdOYW1lJyl9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyBuYW1lOiB2IH0pfVxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM9eyFuYW1lID8gW3QoJ01hbmRhdG9yeScpXSA6IFtdfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hDb250cm9sXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItaGlkZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0hpZGUgbGF5ZXInKX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17IXNob3d9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHNob3c6ICF2IH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hDb250cm9sXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGFiZWwtc2hvd1wiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1Nob3cgbGFiZWwnKX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17c2hvd0xhYmVsfVxuICAgICAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnV2hldGhlciB0byBhbHdheXMgc2hvdyB0aGUgYW5ub3RhdGlvbiBsYWJlbCcpfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyBzaG93TGFiZWw6IHYgfSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXG4gICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0Nob29zZSB0aGUgYW5ub3RhdGlvbiBsYXllciB0eXBlJyl9XG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0Fubm90YXRpb24gbGF5ZXIgdHlwZScpfVxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXR5cGVcIlxuICAgICAgICAgICAgICAgIGNsZWFyYWJsZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgb3B0aW9ucz17c3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzfVxuICAgICAgICAgICAgICAgIHZhbHVlPXthbm5vdGF0aW9uVHlwZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVBbm5vdGF0aW9uVHlwZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge3N1cHBvcnRlZFNvdXJjZVR5cGVzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXG4gICAgICAgICAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0Fubm90YXRpb24gc291cmNlIHR5cGUnKX1cbiAgICAgICAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdDaG9vc2UgdGhlIHNvdXJjZSBvZiB5b3VyIGFubm90YXRpb25zJyl9XG4gICAgICAgICAgICAgICAgICBsYWJlbD17dCgnQW5ub3RhdGlvbiBzb3VyY2UnKX1cbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLXNvdXJjZS10eXBlXCJcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e3N1cHBvcnRlZFNvdXJjZVR5cGVzfVxuICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXs8Tm90Rm91bmRDb250ZW50IC8+fVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3NvdXJjZVR5cGV9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVBbm5vdGF0aW9uU291cmNlVHlwZX1cbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM9eyFzb3VyY2VUeXBlID8gW3QoJ01hbmRhdG9yeScpXSA6IFtdfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHt0aGlzLnJlbmRlclZhbHVlQ29uZmlndXJhdGlvbigpfVxuICAgICAgICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7dGhpcy5yZW5kZXJTbGljZUNvbmZpZ3VyYXRpb24oKX1cbiAgICAgICAgICB7dGhpcy5yZW5kZXJEaXNwbGF5Q29uZmlndXJhdGlvbigpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicgfX0+XG4gICAgICAgICAge2lzTmV3ID8gKFxuICAgICAgICAgICAgPEJ1dHRvbiBidXR0b25TaXplPVwic21hbGxcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmNsb3NlKCl9PlxuICAgICAgICAgICAgICB7dCgnQ2FuY2VsJyl9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPEJ1dHRvbiBidXR0b25TaXplPVwic21hbGxcIiBvbkNsaWNrPXt0aGlzLmRlbGV0ZUFubm90YXRpb259PlxuICAgICAgICAgICAgICB7dCgnUmVtb3ZlJyl9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGJ1dHRvblNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshaXNWYWxpZH1cbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5hcHBseUFubm90YXRpb259XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0KCdBcHBseScpfVxuICAgICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc1ZhbGlkfVxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnN1Ym1pdEFubm90YXRpb259XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0KCdPSycpfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxufVxuXG5Bbm5vdGF0aW9uTGF5ZXIucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuQW5ub3RhdGlvbkxheWVyLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKEFubm90YXRpb25MYXllcik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\n");

/***/ }),

/***/ "./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js":
/*!***********************************************************************************!*\
  !*** ./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js ***!
  \***********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANNOTATION_SOURCE_TYPES: () => (/* binding */ ANNOTATION_SOURCE_TYPES),\n/* harmony export */   ANNOTATION_SOURCE_TYPES_METADATA: () => (/* binding */ ANNOTATION_SOURCE_TYPES_METADATA),\n/* harmony export */   ANNOTATION_TYPES: () => (/* binding */ ANNOTATION_TYPES),\n/* harmony export */   ANNOTATION_TYPES_METADATA: () => (/* binding */ ANNOTATION_TYPES_METADATA),\n/* harmony export */   DEFAULT_ANNOTATION_TYPE: () => (/* binding */ DEFAULT_ANNOTATION_TYPE),\n/* harmony export */   requiresQuery: () => (/* binding */ requiresQuery)\n/* harmony export */ });\n/* unused harmony export applyNativeColumns */\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\nfunction extractTypes(metadata) {\n  return Object.keys(metadata).reduce((prev, key) => {\n    const result = prev;\n    result[key] = key;\n    return result;\n  }, {});\n}\n\nconst ANNOTATION_TYPES_METADATA = {\n  FORMULA: {\n    value: 'FORMULA',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Formula')\n  },\n  EVENT: {\n    value: 'EVENT',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Event'),\n    supportNativeSource: true\n  },\n  INTERVAL: {\n    value: 'INTERVAL',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Interval'),\n    supportNativeSource: true\n  },\n  TIME_SERIES: {\n    value: 'TIME_SERIES',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Time series')\n  }\n};\n\nconst ANNOTATION_TYPES = extractTypes(ANNOTATION_TYPES_METADATA);\n\nconst DEFAULT_ANNOTATION_TYPE = ANNOTATION_TYPES.FORMULA;\n\nconst ANNOTATION_SOURCE_TYPES_METADATA = {\n  NATIVE: {\n    value: 'NATIVE',\n    label: 'Superset annotation'\n  }\n};\n\nconst ANNOTATION_SOURCE_TYPES = extractTypes(\n  ANNOTATION_SOURCE_TYPES_METADATA\n);\n\nfunction requiresQuery(annotationSourceType) {\n  return !!annotationSourceType;\n}\n\nconst NATIVE_COLUMN_NAMES = {\n  timeColumn: 'start_dttm',\n  intervalEndColumn: 'end_dttm',\n  titleColumn: 'short_descr',\n  descriptionColumns: ['long_descr']\n};\n\nfunction applyNativeColumns(annotation) {\n  if (annotation.sourceType === ANNOTATION_SOURCE_TYPES.NATIVE) {\n    return { ...annotation, ...NATIVE_COLUMN_NAMES };\n  }\n  return annotation;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extractTypes, \"extractTypes\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_TYPES_METADATA, \"ANNOTATION_TYPES_METADATA\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_TYPES, \"ANNOTATION_TYPES\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(DEFAULT_ANNOTATION_TYPE, \"DEFAULT_ANNOTATION_TYPE\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_SOURCE_TYPES_METADATA, \"ANNOTATION_SOURCE_TYPES_METADATA\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_SOURCE_TYPES, \"ANNOTATION_SOURCE_TYPES\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(requiresQuery, \"requiresQuery\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(NATIVE_COLUMN_NAMES, \"NATIVE_COLUMN_NAMES\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(applyNativeColumns, \"applyNativeColumns\", \"/Users/aryurkov/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvblR5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvblR5cGVzLmpzP2IzOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgdCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcblxuZnVuY3Rpb24gZXh0cmFjdFR5cGVzKG1ldGFkYXRhKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhtZXRhZGF0YSkucmVkdWNlKChwcmV2LCBrZXkpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBwcmV2O1xuICAgIHJlc3VsdFtrZXldID0ga2V5O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIHt9KTtcbn1cblxuZXhwb3J0IGNvbnN0IEFOTk9UQVRJT05fVFlQRVNfTUVUQURBVEEgPSB7XG4gIEZPUk1VTEE6IHtcbiAgICB2YWx1ZTogJ0ZPUk1VTEEnLFxuICAgIGxhYmVsOiB0KCdGb3JtdWxhJyksXG4gIH0sXG4gIEVWRU5UOiB7XG4gICAgdmFsdWU6ICdFVkVOVCcsXG4gICAgbGFiZWw6IHQoJ0V2ZW50JyksXG4gICAgc3VwcG9ydE5hdGl2ZVNvdXJjZTogdHJ1ZSxcbiAgfSxcbiAgSU5URVJWQUw6IHtcbiAgICB2YWx1ZTogJ0lOVEVSVkFMJyxcbiAgICBsYWJlbDogdCgnSW50ZXJ2YWwnKSxcbiAgICBzdXBwb3J0TmF0aXZlU291cmNlOiB0cnVlLFxuICB9LFxuICBUSU1FX1NFUklFUzoge1xuICAgIHZhbHVlOiAnVElNRV9TRVJJRVMnLFxuICAgIGxhYmVsOiB0KCdUaW1lIHNlcmllcycpLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IEFOTk9UQVRJT05fVFlQRVMgPSBleHRyYWN0VHlwZXMoQU5OT1RBVElPTl9UWVBFU19NRVRBREFUQSk7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0FOTk9UQVRJT05fVFlQRSA9IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQTtcblxuZXhwb3J0IGNvbnN0IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTX01FVEFEQVRBID0ge1xuICBOQVRJVkU6IHtcbiAgICB2YWx1ZTogJ05BVElWRScsXG4gICAgbGFiZWw6ICdTdXBlcnNldCBhbm5vdGF0aW9uJyxcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUyA9IGV4dHJhY3RUeXBlcyhcbiAgQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVNfTUVUQURBVEEsXG4pO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZXNRdWVyeShhbm5vdGF0aW9uU291cmNlVHlwZSkge1xuICByZXR1cm4gISFhbm5vdGF0aW9uU291cmNlVHlwZTtcbn1cblxuY29uc3QgTkFUSVZFX0NPTFVNTl9OQU1FUyA9IHtcbiAgdGltZUNvbHVtbjogJ3N0YXJ0X2R0dG0nLFxuICBpbnRlcnZhbEVuZENvbHVtbjogJ2VuZF9kdHRtJyxcbiAgdGl0bGVDb2x1bW46ICdzaG9ydF9kZXNjcicsXG4gIGRlc2NyaXB0aW9uQ29sdW1uczogWydsb25nX2Rlc2NyJ10sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlOYXRpdmVDb2x1bW5zKGFubm90YXRpb24pIHtcbiAgaWYgKGFubm90YXRpb24uc291cmNlVHlwZSA9PT0gQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMuTkFUSVZFKSB7XG4gICAgcmV0dXJuIHsgLi4uYW5ub3RhdGlvbiwgLi4uTkFUSVZFX0NPTFVNTl9OQU1FUyB9O1xuICB9XG4gIHJldHVybiBhbm5vdGF0aW9uO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\n");

/***/ })

}]);